{"version":3,"file":"avl-services-ng-services.js","sources":["ng:/@avl-services/ng-services/lib/message.model.ts","ng:/@avl-services/ng-services/lib/shell-communication.service.ts","ng:/@avl-services/ng-services/lib/translation-management.service.ts","ng:/@avl-services/ng-services/lib/theme.service.ts","ng:/@avl-services/ng-services/lib/child-communication.service.ts","ng:/@avl-services/ng-services/lib/logging.model.ts","ng:/@avl-services/ng-services/lib/logging.service.ts","ng:/@avl-services/ng-services/lib/logging.module.ts","ng:/@avl-services/ng-services/lib/notification.service.ts","ng:/@avl-services/ng-services/public-api.ts","ng:/@avl-services/ng-services/avl-services-ng-services.ts"],"names":["uuidv4"],"mappings":";;;;;;;;;;;;;;;;;;;IAEY;AAAZ,WAAY,WAAW;AACtB,IAAC,gCAAiB,CAAA;AAAC,IAClB,0CAA2B,CAAA;AAAC,IAC5B,oCAAqB,CAAA;AAAC,IACtB,gCAAiB,CAAA;AAAC,IAClB,wCAAyB,CAAA;AAAC,IAC1B,4CAA6B,CAAA;AAAC,IAC9B,8BAAe,CAAA;AAAC,IAChB,8BAAe,CAAA;AAAC,IAChB,gDAAiC,CAAA;AAAC,IAClC,0DAA2C,CAAA;AAAC,IAC5C,4BAAa,CAAA;AACf,CAAC,EAZW,WAAW,KAAX,WAAW;AACjB;AAAC,ICOM,yBAAyB,GAAtC,MAAa,yBAAyB;AACtC,IA2DE,YAAoB,MAAc,EAAU,WAA2B;AACzE,QADsB,WAAM,GAAN,MAAM,CAAQ;AAAC,QAAS,gBAAW,GAAX,WAAW,CAAgB;AAAC,QAzDhE,aAAQ,GAAoB;AACtC,YAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,KAAa,KAAK,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;AACnE,YAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,MAAc,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AACvE,YAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,QAAgB,KAAK,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC;AAC/E,YAAI,CAAC,WAAW,CAAC,WAAW,GAAG,CAAC,WAAwB,KAAK,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC;AAChG,YAAI,CAAC,WAAW,CAAC,UAAU,GAAG,CAAC,GAAW,KAAK,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC;AACzE,YAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,MAAc,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AACvE,YAAI,CAAC,WAAW,CAAC,cAAc,GAAG,CAAC,IAAU,KAAK,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;AACjF,YAAI,CAAC,WAAW,CAAC,mBAAmB,GAAG,CAAC,UAAmB,KAAK,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC;AAC1G,SAAG,CAAC;AACJ,QACU,iBAAY,GAAG,IAAI,OAAO,EAAU,CAAC;AAC/C,QAAU,oBAAe,GAAG,IAAI,OAAO,EAAU,CAAC;AAClD,QAAU,kBAAa,GAAG,IAAI,OAAO,EAAU,CAAC;AAChD,QAAU,kBAAa,GAAG,IAAI,OAAO,EAAU,CAAC;AAChD,QAAU,uBAAkB,GAAG,IAAI,OAAO,EAAe,CAAC;AAC1D;AAEK;AACM;AAEA;AAAW,QAAb,WAAM,GAAuB,IAAI,CAAC,YAAY,CAAC;AACxD;AAEK;AAEC;AAAW,QAAR,cAAS,GAAuB,IAAI,CAAC,eAAe,CAAC;AAC9D,QAAS,YAAO,GAAuB,IAAI,CAAC,aAAa,CAAC;AAC1D;AAEK;AAEC;AAAW,QAAR,YAAO,GAAuB,IAAI,CAAC,aAAa,CAAC;AAC1D;AAEK;AAEC;AAAW,QAAR,iBAAY,GAA4B,IAAI,CAAC,kBAAkB,CAAC;AACzE;AAEK;AACkB;AAEH;AAAY,QAMvB,wBAAmB,GAAG,IAAI,eAAe,CAAU,SAAS,CAAC,CAAC;AACvE;AAEG;AACK;AAEA;AAAY,QAAX,YAAO,GAAG,MAAM,CAAC,QAAQ,KAAK,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC9D,QAEI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACzE,QACI,IAAI,CAAC,EAAE,GAAGA,EAAM,EAAE,CAAC;AACvB,KAAG;AACH,IACS,sBAAsB,CAAC,MAAc;AAAI,QAC9C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACxD,KAAG;AACH;AACK;AAEJ;AACE,IAAM,qBAAqB,CAAC,GAAW;AAAI,QAC1C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AACpD,KAAG;AACH;AACK;AAEJ;AACE,IAAM,0BAA0B,CAAC,GAAW;AAAI,QAC/C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;AACzD,KAAG;AACH;AACK;AAEL;AACE,IAAO,eAAe;AAAK,QACzB,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AAC/D,KAAG;AACH;AAEC;AACE;AACE,IAAI,iBAAiB;AAAK,QAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC;AAC/D,QAAI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACpD,KAAG;AACH,IACU,SAAS,CAAC,KAAmB;AAAI,QACvC,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAY,KAAK,CAAC,IAAI,CAAC;AACzD,QAAI,MAAM,QAAQ,mCACT,IAAI,CAAC,QAAQ,KAChB,OAAO,EAAE,MAAM,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,KAAK,CAAC,GACzE,CAAC;AACN,QACI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACzD,KAAG;AACH,IACU,kBAAkB,CAAC,WAAwB,EAAE,OAAgB;AAAI,QACvE,MAAM,OAAO,GAAY,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC;AACtD,QAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AACnD,KAAG;AACH,IACU,iBAAiB,CAAC,WAAwB;AAAI,QACpD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC9C,KAAG;AACH,IACU,cAAc,CAAC,QAAgB;AAAI,QACzC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACxC,KAAG;AACH,IACU,YAAY,CAAC,MAAc;AAAI,QACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACpC,KAAG;AACH,IACU,WAAW,CAAC,KAAa;AAAI,QACnC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAClC,KAAG;AACH,IACU,gBAAgB,CAAC,GAAW;AAAI,QACtC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACnC,KAAG;AACH,IACU,YAAY,CAAC,MAAc;AAAI,QACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACpC,KAAG;AACH,IACU,oBAAoB,CAAC,IAAU;AAAI,QACzC,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,YAAY,EAAE;AAC5B,YAAM,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;AACvD,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,CAAC,WAAW,CAAC,2BAA2B,EAAE,CAAC;AACrD,SAAK;AACL,QACI,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC;AAC/C,KAAG;AACH,IACU,yBAAyB,CAAC,UAAmB;AACvD,QAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC9C,KAAG;AACH;wMAAC;AACD;AAAmD,YA5FrB,MAAM;AAAI,YAAmB,cAAc;AAAG;AAC1E,4PA2FF;AAxJa,AAwJZ;wBAxJqC,oBAHrC,UAAU,CAAC,UACV,jEA0JA,ICxJW,4BAA4B,GAAzC,MAAa,4BAA4B;GDF7B,EAAE,MAAM,MACnB,CAAC,IACW,yBAAyB,CAuJrC,hDCtJD,IAAE,YAAoB,gBAAkC,EAAU,kBAAkD;AACpH,QADsB,qBAAgB,GAAhB,gBAAgB,CAAkB;AAAC,QAAS,uBAAkB,GAAlB,kBAAkB,CAAgC;AAAC,QAG5G,cAAS,GAAG;AACrB,YAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE;AACpC,YAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE;AACrC,SAAG,CAAC;AACJ,KANG;AACH,IAMS,sBAAsB;AAAK,QAChC,OAAO;AACX,YAAM,sBAAsB,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;AAC1E,YAAM,IAAI,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC9C,YAAM,IAAI,IAAI,IAAI,IAAI,EAAE;AACxB,gBAAQ,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACtC,gBAAQ,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC3C,aAAO;AACP,YAAM,OAAO,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;AACzD,SAAK,CAAC;AACN,KAAG;AACH,IAAE,IAAW,QAAQ;AAAK,QACtB,OAAO,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACxC,KAAG;AACH,IACS,cAAc,CAAC,IAAY;AACpC,QAAI,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACjD,QAAI,IAAI,CAAC,OAAO,IAAI,OAAO,KAAK,IAAI,EAAE;AACtC,YAAM,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AACzC,YAAM,QAAQ,CAAC,MAAM,EAAE,CAAC;AACxB,SAAK;AACL,KAAG;AACH;2OAAC;AACD;AAAsD,YA/Bd,gBAAgB;AAAI,YAA0B,8BAA8B;AAAG;AACrH,kSA8BF;AAhCa,AAgCZ;2BAhCwC,3BAgCvC,ICpCW,YAAY,GAAzB,MAAa,YAAY;ODCxB,UAAU,CAAC,lBCAZ,IA2BE;QD1BA,UAAU,EAAE,MAAM,MACnB,CAAC,IACW,rCCyBb,QAZU,wBAAmB,GAAG,IAAI,OAAO,EAAU,CAAC;eDbb,CA+BxC,hBCjBD,QAAkB,iBAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,CAAC;AACzE,QAUI,IAAI,CAAC,WAAW,EAAE,CAAC;AACvB,KAAG;AACH,IA3BE,IAAW,WAAW;AAAK,QACzB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,EAAE;AACnC,YAAM,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,MAAM,IAAI,KAAK,CAAC;AAC5E,SAAK;AACL,QAAI,OAAO,IAAI,CAAC,YAAY,CAAC;AAC7B,KAAG;AACH,IAAE,IAAW,WAAW,CAAC,QAAiB;AAC1C,QAAI,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;AACjC,QAAI,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,KAAK,IAAI,GAAG,MAAM,GAAG,OAAO,CAAC,CAAC;AACxE,QAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;AAC1D,QAAI,IAAI,CAAC,WAAW,EAAE,CAAC;AACvB,KAAG;AACH,IAIS,eAAe;AAAK,QACzB,OAAO,IAAI,CAAC,WAAW,GAAG,MAAM,GAAG,OAAO,CAAC;AAC/C,KAAG;AACH,IACU,WAAW;AACrB,QAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;AAChE,KAAG;AACH;2FAKC;AACD,8JAAA;AAjCa,AAiCZ;WAjCwB,oBAHxB,UAAU,CAAC,UACV,UAAU,EAAE,hEAmCZ,ICvBW,yBAAyB,GAAtC,MAAa,yBAAyB;IDZlB,MACnB,CAAC,IACW,YAAY,CAgCxB,5BCrBD,IAmCE,YACU,4BAA0D,EAC1D,YAA0B,EAC1B,WAA2B;AACpC,QAHS,iCAA4B,GAA5B,4BAA4B,CAA8B;AAAC,QAC3D,iBAAY,GAAZ,YAAY,CAAc;AAAC,QAC3B,gBAAW,GAAX,WAAW,CAAgB;AACvC,QAvCU,aAAQ,GAAoB;AACtC,YAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,GAAW,KAAK,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;AAC/D,YAAI,CAAC,WAAW,CAAC,UAAU,GAAG,CAAC,GAAW,KAAK,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC;AACzE,YAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,MAAc,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;AACvE,YAAI,CAAC,WAAW,CAAC,YAAY,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,kBAAkB,EAAE;AAChE,YAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,IAAU,KAAK,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;AAC7D,SAAG,CAAC;AACJ,QACU,kBAAa,GAAG,IAAI,OAAO,EAAU,CAAC;AAChD,QAAU,sBAAiB,GAAG,IAAI,OAAO,EAAU,CAAC;AACpD,QAAU,iBAAY,GAAG,IAAI,OAAO,EAAU,CAAC;AAC/C,QAAU,iCAA4B,GAAG,IAAI,OAAO,EAAW,CAAC;AAChE,QAGS,YAAO,GAAuB,IAAI,CAAC,aAAa,CAAC;AAC1D;AAEK;AAEA;AAAY,QAAR,gBAAW,GAAuB,IAAI,CAAC,iBAAiB,CAAC;AAClE;AAEK;AACM;AAEA;AAAY,QAAd,WAAM,GAAuB,IAAI,CAAC,YAAY,CAAC;AACxD;AAEK;AACM;AAEA;AAAY,QAAd,2BAAsB,GAAwB,IAAI;AAC3D,aAAK,4BAA4B,CAAC;AAClC,QAMI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AACzE,QAAI,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;AAC/E,KAAG;AACH;AAEC;AACE;AACE,IAAI,sBAAsB,CAAC,OAAe;AAAI,QAC/C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AACzD,KAAG;AACH;AAEC;AACE;AACE,IAAI,wBAAwB,CAAC,QAAgB;AAAI,QAClD,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC5D,KAAG;AACH;AAEC;AACE;AACE,IAAI,sBAAsB,CAAC,MAAc;AAAI,QAC9C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACxD,KAAG;AACH;AAEC;AACE;AACE,IAAI,0BAA0B,CAAC,GAAW;AAAI,QAC/C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;AACzD,KAAG;AACH;AAEC;AACE;AACE,IAAI,gCAAgC;AACzC,QAAI,MAAM,OAAO,GAAS,IAAI,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC;AACxE,QAAI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AACjE,KAAG;AACH;AAEC;AACE;AACE,IAAI,mBAAmB;AAAK,QAC7B,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,CAAC;AACtD,QAAI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AACtD,KAAG;AACH;AAEC;AACE;AACE,IAAI,sBAAsB;AAAK,QAChC,IAAI,CAAC,kBAAkB,CACrB,WAAW,CAAC,QAAQ,EACpB,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAC3C,CAAC;AACN,KAAG;AACH;AAEC;AACE;AACE,IAAI,oBAAoB;AAAK,QAC9B,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AACpD,QAAI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AACzD,KAAG;AACH;AAEC;AACE;AACE,IAAI,uBAAuB,CAAC,OAAgB;AAAI,QACjD,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;AACtE,KAAG;AACH;AAEC;AACE;AACE,IAAI,yBAAyB;AAAK,QACnC,MAAM,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACjE,QAAI,MAAM,YAAY,GAAG,aAAa,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC;AAC/E,QAAI,MAAM,iBAAiB,GAAG,aAAa,CAAC,gBAAgB,CACtD,2BAA2B,CAC5B,CAAC;AACN,QAAI,MAAM,iBAAiB,GAAG,aAAa,CAAC,gBAAgB,CACtD,2BAA2B,CAC5B,CAAC;AACN,QACI,MAAM,WAAW,GAAgB;AACrC,YAAM,qBAAqB,EAAE,YAAY;AACzC,YAAM,2BAA2B,EAAE,iBAAiB;AACpD,YAAM,2BAA2B,EAAE,iBAAiB;AACpD,SAAK,CAAC;AACN,QACI,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;AAClE,KAAG;AACH,IACU,YAAY,CAAC,MAAc;AAAI,QACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACpC,KAAG;AACH,IACU,gBAAgB,CAAC,UAAkB;AAAI,QAC7C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC5C,KAAG;AACH,IACU,WAAW,CAAC,KAAa;AAAI,QACnC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAClC,KAAG;AACH;AAEC,IAAS,kBAAkB;AAAK,QAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,oBAAoB,CAC3C,QAAQ,CACT,CAAC,CAAC,CAAsB,CAAC;AAC9B,QACI,IAAI,CAAC,mBAAmB,EAAE,CAAC;AAC/B,QAAI,IAAI,CAAC,yBAAyB,EAAE,CAAC;AACrC,QAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;AAClC,QAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC;AAChC,QACI,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjD,KAAG;AACH,IACU,SAAS,CAAC,KAAmB;AAAI,QACvC,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAY,KAAK,CAAC,IAAI,CAAC;AACzD,QAAI,MAAM,QAAQ,mCACT,IAAI,CAAC,QAAQ,KAChB,OAAO,EAAE,MAAM,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,KAAK,CAAC,GACzE,CAAC;AACN,QACI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACzD,KAAG;AACH,IACU,kBAAkB,CAAC,WAAwB,EAAE,OAAgB;AAAI;AACjE,QAAN,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACxB,YAAM,OAAO;AACb,SAAK;AACL,QACI,MAAM,OAAO,GAAY,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC;AACtD,QAAI,MAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,0CAAE,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE;AAC3D,KAAG;AACH;AAEC,IAAS,UAAU,CAAC,IAAU;AAC/B,QAAI,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,YAAY,EAAE;AAC5B,YAAM,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;AACvD,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,CAAC,WAAW,CAAC,2BAA2B,EAAE,CAAC;AACrD,SAAK;AACL,QACI,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC;AAC/C,KAAG;AACH;sPAAC;AACD;AAAmD,YA3JT,4BAA4B;AACpE,YAAwB,YAAY;AACpC,YAAuB,cAAc;AACrC;AAAG,0SAwJL;AAhMa,AAgMZ;AChND;oBDgBsC,oBAHrC,UAAU,CAAC,nDCZZ;AACA;IDYE,UAAU,EAAE,hBCXd,IAAY;KDWQ,OACnB,CAAC,IACW,jBCbb,WAAY,WAAW;gBDae,CA+LrC,jBC3MA,IAAC,+CAAK,CAAA;AAAC,IACN,6CAAI,CAAA;AAAC,IACL,mDAAO,CAAA;AAAC,IACR,+CAAK,CAAA;AAAC,IACN,+CAAK,CAAA;AACP,CAAC,EANW,WAAW,KAAX,WAAW,QAMtB;AAED;AACA;AACA;AAAG;AACmF;AAClC;AAC9C;AACsC;AACa;AACjD;AACO;AACC;AACyB;AAC9B;AACH;AACC;AACuB;AAC1B;AACH,MACU,SAAS;AACtB;AACE;AAA8C;AAE5C;AAI0B;AAGH;AAI1B;AAMU;AAKuB;AAEW;AAEvC;AAAQ,IA2CZ,YACE,QAAgB,EAChB,UAAkB,EAClB,OAAe,EACf,OAAe,EACf,cAAuB,KAAK,EAC5B,iBAA8B,WAAW,CAAC,IAAI,EAC9C,eAAuB,KAAM,EAC7B,WAAmB,EAAE;AACtB;AACM;AAGgB;AACjB;AAEa;AAAe;AAQrB;AACR;AAGW;AAClB;AAAsB;AACA;AACnB,QAnEM,gBAAW,GAAY,KAAK,CAAC;AACtC;AAEK;AACM;AACM;AAEA;AAAY,QAApB,mBAAc,GAAgB,WAAW,CAAC,IAAI,CAAC;AACxD;AAEK;AACM;AACM;AAEA;AAAY,QAApB,iBAAY,GAAW,KAAM,CAAC;AACvC;AAEK;AAEF;AAAW;AAEV;AAEH;AAAyB;AAErB,QAFI,aAAQ,GAAW,EAAE,CAAC;AAC/B,QAsBI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC7B,QAAI,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;AACjC,QAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,QAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,QAAI,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;AACnC,QAAI,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;AACzC,QAAI,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;AACrC,QAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC7B,KAAG;AACH;AACA;AACA,ICjHa,cAAc,GAA3B,MAAa,cAAc;AAAG;AAAQ;AACpC;AAAQ,IAaR,YACU,IAAgB,EACS,MAAiB,EACN,WAA2B;AACxE;AACU,QAJD,SAAI,GAAJ,IAAI,CAAY;AAAC,QACQ,WAAM,GAAN,MAAM,CAAW;AAAC,QACP,gBAAW,GAAX,WAAW,CAAgB;AAC3E,QAjBU,SAAI,GAAU,EAAE,CAAC;AAC3B,QACU,cAAS,GAAG,KAAK,CAAC;AAC5B,QACU,kBAAa,GAAoB,IAAI,OAAO,EAAE,CAAC;AACzD,QAAU,UAAK,GAAmB,IAAI,OAAO,EAAE,CAAC;AAChD,QAAU,iBAAY,GAAkB,IAAI,OAAO,EAAE,CAAC;AACtD,QAAU,cAAS,GAAkB,IAAI,OAAO,EAAE,CAAC;AACnD,QAAU,eAAU,GAAkB,IAAI,OAAO,EAAE,CAAC;AACpD,QASI,IAAI,CAAC,OAAO,GAAG,IAAI,WAAW,CAAC;AACnC,YAAM,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU;AACxC,SAAK,CAAC,CAAC;AACP,QACI,IAAI,MAAM,CAAC,WAAW,EAAE;AAC5B,YAAM,MAAA,IAAI,CAAC,WAAW,0CAAE,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,SAAS,CAAC,CAAC,UAAU,KAAK,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,EAAE;AACjI,SAAK;AACL,KAAG;AACH;AAEC;AACE;AACE,IAAH,WAAW;AAAK,QACd,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;AAC9B,QAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;AAClC,QAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;AAC1B,QAAI,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AAC7B,QAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;AACjC,QAAI,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;AAC3B,QAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;AAC/B,KAAG;AACH;AACE;AACE;AACC;AAEJ;AAAQ,IAAA,YAAY;AAAK,QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAC1B,QAAI,IAAI,CAAC,aAAa;AACtB,aAAO,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,EAC5B,SAAS,CAAC,CAAC,YAAY,KAAK,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,CAClE;AACP,aAAO,SAAS,CAAC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;AAC9C,QACI,IAAI,CAAC,SAAS;AAClB,aAAO,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,EAC5B,SAAS,CAAC,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC,CACrC;AACP,aAAO,SAAS,CAAC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;AAC9C,QACI,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAC1D,KAAG;AACH;AAEC;AACE;AACE,IAAI,WAAW;AAAK,QACrB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AAC3B,QAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;AACpB,QAAI,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AAC7B,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,QAAQ;AAAK,QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;AACrC,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,KAAK,CAAC,OAAe,EAAE,gBAAwB,EAAE;AAAI,QAC1D,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;AACxD,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,IAAI,CAAC,OAAe,EAAE,gBAAwB,EAAE;AAAI,QACzD,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;AACvD,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,IAAI,CAAC,OAAe,EAAE,gBAAwB,EAAE;AAAI,QACzD,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;AAC1D,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,KAAK,CAAC,OAAe,EAAE,gBAAwB,EAAE;AAAI,QAC1D,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;AACxD,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,KAAK,CAAC,OAAe,EAAE,gBAAwB,EAAE;AAAI,QAC1D,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;AACxD,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,sBAAsB,CAAC,YAAoB;AAAI,QACpD,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,YAAY,CAAC;AAC5C,QAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1C,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,iBAAiB,CAAC,cAA2B;AAAI,QACtD,IAAI,CAAC,MAAM,CAAC,cAAc,GAAG,cAAc,CAAC;AAChD,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,cAAc,CAAC,QAAgB;AAAI,QACxC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACpC,KAAG;AACH;AAGA,IAAU,GAAG,CAAC,OAAe,EAAE,QAAqB,EAAE,aAAqB;AAAI,QAC3E,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;AAClE,YAAM,OAAO;AACb,SAAK;AACL,QACI,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;AAC7D,QAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB,QACI,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;AAC/B,YAAM,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;AAC5B,SAAK;AACL,KAAG;AACH,IACU,iBAAiB,CAAC,OAAe,EAAE,YAAyB,EAAE,aAAqB;AAAI,QAC7F,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;AAC/C,QAAI,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;AAC7C,QAAI,MAAM,QAAQ,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC;AAC7C,QAAI,MAAM,GAAG,GAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,aAAa,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;AACvF,QAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxB,KAAG;AACH,IACU,cAAc;AAAK,QACzB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;AACpD,KAAG;AACH,IACU,SAAS;AAAK,QACpB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACnB,KAAG;AACH,IACU,cAAc;AAAK,QACzB,IAAI,CAAC,SAAS,EAAE,CAAC;AACrB,QAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB,KAAG;AACH,IACU,QAAQ;AAAK,QACnB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;AAC1B,KAAG;AACH,IACU,iBAAiB,CAAC,MAAc;AAAI,QAC1C,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAC1B,GAAG,CAAC;AACV,YAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC/B,gBAAU,IAAI,CAAC,YAAY,EAAE,CAAC;AAC9B,aAAS;AACT,SAAO,CAAC,EACF,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAChC,SAAS,CAAC,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC,CACrC,CAAC;AACN,KAAG;AACH,IACU,YAAY;AAAK,QACvB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE;AACjE,YAAM,OAAO,EAAE,IAAI,CAAC,OAAO;AAC3B,SAAK,CAAC,CAAC;AACP,KAAG;AACH,IACU,YAAY;AAAK,QACvB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/B,KAAG;AACH,IACU,eAAe,CAAC,UAAmB;AAAI,QAC7C,IAAI,UAAU,EAAE;AACpB,YAAM,IAAI,CAAC,YAAY,EAAE,CAAC;AAC1B,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,CAAC,WAAW,EAAE,CAAC;AACzB,SAAK;AACL,KAAG;AACH;yMAAC;AACD;AAAwC,YA9MtB,UAAU;AAC1B,YAA2C,SAAS,uBAAjD,MAAM,SAAC,eAAe;AAAS,YACyB,cAAc,uBAAtE,QAAQ,YAAI,MAAM,SAAC,cAAc;AAAQ;AAAG;AAjBpC,cAAc,oBAH1B,UAAU,CAAC,UACV,UAAU,pCAER,CAgBC,WAAA,MAAM,CAAC,eAAe,CAAC,CAAA;AAlBd,MAAM,OACnB,CAAC,dAiB4B,IACzB,WAAA,QAAQ,EAAE,CAAA,EAAE,WAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AAAC,GAjB3B,cAAc,CA4N1B;AACA;AAAC;AAAqB,IClOV,aAAa,qBAA1B,MAAa,aAAa;AAC1B,IAAE,YAAoC,YAA4B;AAClE,QAAI,IAAI,YAAY,EAAE;AACtB,YAAM,MAAM,IAAI,KAAK,CAAC,kEAAkE,CAAC,CAAC;AAC1F,SAAK;AACL,KAAG;AACH,IAAE,OAAO,OAAO,CAAC,MAAiB;AAAI,QAClC,OAAO;AACX,YAAM,QAAQ,EAAE,eAAa;AAC7B,YAAM,SAAS,EAAE,CAAC,cAAc,EAAE,EAAE,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC;AACjF,SAAK,CAAC;AACN,KAAG;AACH;;sKAAC;AACD;AAAuC,YAZc,aAAa,uBAAnD,QAAQ,YAAI,QAAQ;AAAM;AAD5B,aAAa,sCADzB,QAAQ,EAAE,fACP,CACW,WAAA,QAAQ,EAAE,CAAA,EAAE,WAAA,QAAQ,EAAE,CAAA;AAAC,GADzB,aAAa,CAYzB;AACA;AAAC,ICSW,mBAAmB,GAAhC,MAAa,mBAAmB;AAChC,IADA;AAAgB,QACN,mBAAc,GAA4B,EAAE,CAAC;AACvD,QAAU,iBAAY,GAA6B,IAAI,OAAO,EAAE,CAAC;AACjE;AAEK;AAEA;AAAY,QAAR,kBAAa,GAAgC,IAAI,CAAC,YAAY,CAAC;AACxE,KAkGC;AACD;AAAQ;AAAiE;AAAmF;AAAuC;AAAgD;AAAQ,IA5FlP,eAAe,CAAC,QAAgB,EAAE,OAAyC;AAAI,QACpF,IAAI,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AAClE,QAAI,IAAI,CAAC,UAAU,EAAE;AACrB,YAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AAC3D,SAAK;AACL,QACI,IAAI,UAAU,CAAC,KAAK,KAAK,kBAAkB,CAAC,SAAS,EAAE;AAC3D,YAAM,OAAO;AACb,SAAK;AACL,QACI,UAAU;AACd,aAAO,KAAK,EAAE;AACd,aAAO,IAAI,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;AACxE,aAAO,KAAK,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,uDAAuD,CAAC,CAAC,CAAC;AAC1F,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,cAAc,CAAC,YAAoB;AAAI,QAC5C,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AAC5D,QACI,IAAI,CAAC,UAAU,EAAE;AACrB,YAAM,OAAO;AACb,SAAK;AACL,QACI,UAAU,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;AAC3C,QAAI,UAAU,CAAC,IAAI,EAAE,CAAC;AACtB,KAAG;AACH;AAEC;AACE;AACE;AACE,IAAE,gBAAgB,CAAC,YAAoB;AAAI,QAC9C,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;AACtC,QACI,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,IAAI,UAAU,CAAC,EAAE,KAAK,YAAY,CAAC,CAAC;AAC9F,QAAI,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;AACtB,YAAM,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AAC3C,SAAK;AACL,KAAG;AACH;AAEC;AACE;AACE;AAEJ;AAAQ,IAAA,mBAAmB,CAAC,YAAoB,EAAE,QAAiC;AAAI,QACpF,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AAC5D,QAAI,IAAI,CAAC,UAAU,EAAE;AACrB,YAAM,OAAO;AACb,SAAK;AACL,QACI,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;AAClD,KAAG;AACH;AAGA,IAAU,kBAAkB,CAAC,UAAyB,EAAE,QAAiC;AAAI,QACzF,UAAU,CAAC,MAAM,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;AACtD,KAAG;AACH,IACU,iBAAiB,CAAC,YAAoB;AAAI;AACnD,QAAG,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,IAAI,UAAU,CAAC,EAAE,KAAK,YAAY,CAAC,CAAC;AAC9F,QAAI,aAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,0CAAE,UAAU,CAAC;AAClD,KAAG;AACH,IACU,eAAe,CACrB,QAAgB,EAChB,OAAyC;AAC1C,QACC,MAAM,aAAa,GAAG,IAAI,oBAAoB,EAAE;AACpD,aAAO,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC;AACtC,aAAO,OAAO,CAAC,QAAQ,CAAC;AACxB,aAAO,sBAAsB,EAAE;AAC/B,aAAO,KAAK,EAAE,CAAC;AACf,QACI,aAAa,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChG,QAAI,aAAa,CAAC,EAAE,CAAC,sBAAsB,EAAE,CAAC,YAA6B;AAC3E,YAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC3C,SAAK,CAAC,CAAC;AACP,QACI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;AAC7B,YAAM,EAAE,EAAE,OAAO,CAAC,YAAY;AAC9B,YAAM,UAAU,EAAE,aAAa;AAC/B,SAAK,CAAC,CAAC;AACP,QACI,OAAO,aAAa,CAAC;AACzB,KAAG;AACH,EAAC;AA1GY,mBAAmB,oBAD/B,UAAU,EAAE,IACA,mBAAmB,CA0G/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gDACD;AAAC;ACtID;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACwK","sourcesContent":["import { User } from '@avl-ng-controls/auth';\r\n\r\nexport enum MessageType {\r\n  action = 'action',\r\n  colorScheme = 'colorScheme',\r\n  language = 'language',\r\n  locale = 'locale',\r\n  navigation = 'navigation',\r\n  registration = 'registration',\r\n  theme = 'theme',\r\n  login = 'login',\r\n  authentication = 'authentication',\r\n  redirectedFromLogIn = 'redirectedFromLogIn',\r\n  user = 'user'\r\n}\r\n\r\nexport interface Message {\r\n  messageType: MessageType;\r\n  payload: Payload;\r\n}\r\n\r\nexport type Payload = string | ColorScheme | User | boolean;\r\n\r\nexport interface MessageHandlers {\r\n  [key: string]: (payload: Payload) => void;\r\n}\r\nexport interface ColorScheme {\r\n  '--avl-product-color': string;\r\n  '--avl-product-hover-color': string;\r\n  '--avl-product-focus-color': string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Subject, Observable, BehaviorSubject } from 'rxjs';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { ColorScheme, Message, MessageHandlers, MessageType, Payload } from './message.model';\r\nimport { AvlAuthService, User } from '@avl-ng-controls/auth';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ShellCommunicationService {\r\n  private readonly id: string;\r\n\r\n  private handlers: MessageHandlers = {\r\n    [MessageType.theme]: (theme: string) => this.handleTheme(theme),\r\n    [MessageType.locale]: (locale: string) => this.handleLocale(locale),\r\n    [MessageType.language]: (language: string) => this.handleLanguage(language),\r\n    [MessageType.colorScheme]: (colorScheme: ColorScheme) => this.handleColorScheme(colorScheme),\r\n    [MessageType.navigation]: (url: string) => this.handleNavigation(url),\r\n    [MessageType.action]: (action: string) => this.handleAction(action),\r\n    [MessageType.authentication]: (user: User) => this.handleAuthentication(user),\r\n    [MessageType.redirectedFromLogIn]: (redirected: boolean) => this.handleRedirectedFromLogIn(redirected),\r\n  };\r\n\r\n  private themeSubject = new Subject<string>();\r\n  private languageSubject = new Subject<string>();\r\n  private actionSubject = new Subject<string>();\r\n  private localeSubject = new Subject<string>();\r\n  private colorSchemeSubject = new Subject<ColorScheme>();\r\n\r\n  /**\r\n  * Observable tracking theme\r\n  * Emits \"dark\" if dark theme selected, \"light\" otherwise \r\n  */\r\n  public theme$: Observable<string> = this.themeSubject;\r\n\r\n  /**\r\n  * Observable tracking language\r\n  */\r\n  public language$: Observable<string> = this.languageSubject;\r\n  public action$: Observable<string> = this.actionSubject;\r\n\r\n  /**\r\n  * Observable tracking country changes\r\n  */\r\n  public locale$: Observable<string> = this.localeSubject;\r\n\r\n  /**\r\n  * Observable tracking color scheme changes\r\n  */\r\n  public colorScheme$: Observable<ColorScheme> = this.colorSchemeSubject;\r\n\r\n  /**\r\n  * Observable tracking login state\r\n  * Resolves to true on successful login, false otherwise\r\n  */\r\n  public isLoggedIn$: Observable<boolean>;\r\n\r\n  /**\r\n   * Observable tracking if redirected from idb\r\n   * Resolves to true on redirection, false otherwise\r\n   */\r\n  public redirectedFromLogIn = new BehaviorSubject<boolean>(undefined);\r\n  \r\n  /**\r\n   * If current application is inside shell application \r\n   * True if current application is inside shell application, false otherwise.\r\n   */\r\n  public isChild = window.location !== window.parent.location;\r\n  \r\n  constructor(private router: Router, private authService: AvlAuthService) {\r\n    window.addEventListener('message', (event) => this.onMessage(event));\r\n    \r\n    this.id = uuidv4();\r\n  }\r\n  \r\n  public notifyShellAboutAction(action: string): void {\r\n    this.postMessageToShell(MessageType.action, action);\r\n  }\r\n  \r\n  /**\r\n   * Sends message to shell that it needs to navigate to login page\r\n   */\r\n  public notifyShellAboutLogin(url: string): void {\r\n    this.postMessageToShell(MessageType.login, url);\r\n  }\r\n  \r\n  /**\r\n   * Sends message to shell that it needs to navigate to @url\r\n   */\r\n  public notifyShellAboutNavigation(url: string): void {\r\n    this.postMessageToShell(MessageType.navigation, url);\r\n  }\r\n  \r\n  /**\r\n   * Sends registration message to shell \r\n   */\r\n  public registerToShell(): void {\r\n    this.postMessageToShell(MessageType.registration, this.id);\r\n  }\r\n\r\n  /**\r\n  * Send updated user data to shell\r\n  */\r\n  public updateUserToShell(): void {\r\n    const user = this.authService.readUserFromSessionStorage();\r\n    this.postMessageToShell(MessageType.user, user);\r\n  }\r\n\r\n  private onMessage(event: MessageEvent): void {\r\n    const { payload, messageType }: Message = event.data;\r\n    const handlers = {\r\n      ...this.handlers,\r\n      default: () => console.log('Unrecognized message for the shell.', event)\r\n    };\r\n\r\n    (handlers[messageType] || handlers.default)(payload);\r\n  }\r\n\r\n  private postMessageToShell(messageType: MessageType, payload: Payload): void {\r\n    const message: Message = { messageType, payload };\r\n    window.parent.window.postMessage(message, '*');\r\n  }\r\n\r\n  private handleColorScheme(colorScheme: ColorScheme): void {\r\n    this.colorSchemeSubject.next(colorScheme);\r\n  }\r\n\r\n  private handleLanguage(language: string): void {\r\n    this.languageSubject.next(language);\r\n  }\r\n\r\n  private handleLocale(locale: string): void {\r\n    this.localeSubject.next(locale);\r\n  }\r\n\r\n  private handleTheme(theme: string): void {\r\n    this.themeSubject.next(theme);\r\n  }\r\n\r\n  private handleNavigation(url: string): void {\r\n    this.router.navigateByUrl(url);\r\n  }\r\n\r\n  private handleAction(action: string): void {\r\n    this.actionSubject.next(action);\r\n  }\r\n\r\n  private handleAuthentication(user: User): void {\r\n    if (user?.access_token) {\r\n      this.authService.storeUserToSessionStorage(user);\r\n    } else {\r\n      this.authService.clearUserFromSessionStorage();\r\n    }\r\n\r\n    this.authService.reloadPersistedUserData();\r\n  }\r\n\r\n  private handleRedirectedFromLogIn(redirected: boolean) {\r\n    this.redirectedFromLogIn.next(redirected);\r\n  }\r\n}\r\n","/// <reference types=\"@avl-controls/core\" />\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { NgxTranslateTranslationService } from '@avl-controls/ng-binders';\r\nimport '@avl-controls/core/dist/avl-localization-service/avl-localization-service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TranslationManagementService {\r\n  constructor(private translateService: TranslateService, private translationService: NgxTranslateTranslationService) {\r\n  }\r\n\r\n  public languages = [\r\n    { code: 'en', label: 'English' },\r\n    { code: 'hr', label: 'Croatian' },\r\n  ];\r\n\r\n  public initializeTranslations(): () => Promise<any> {\r\n    return () => {\r\n      AvlLocalizationService.translationService = this.translationService;\r\n      let lang = localStorage.getItem('lang');\r\n      if (lang == null) {\r\n        lang = this.languages[0].code;\r\n        localStorage.setItem('lang', lang);\r\n      }\r\n      return this.translateService.use(lang).toPromise();\r\n    };\r\n  }\r\n  public get language(): string {\r\n    return localStorage.getItem('lang');\r\n  }\r\n\r\n  public changeLanguage(lang: string) {\r\n    const oldLang = localStorage.getItem('lang');\r\n    if (!oldLang || oldLang !== lang) {\r\n      localStorage.setItem('lang', lang);\r\n      location.reload();\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ThemeService {\r\n\r\n  private _isDarkTheme: boolean;\r\n\r\n  public get isDarkTheme(): boolean {\r\n    if (this._isDarkTheme == null) {\r\n      this._isDarkTheme = localStorage.getItem('theme') === 'dark' || false;\r\n    }\r\n    return this._isDarkTheme;\r\n  }\r\n  public set isDarkTheme(newValue: boolean) {\r\n    this._isDarkTheme = newValue;\r\n    localStorage.setItem('theme', newValue === true ? 'dark' : 'light');\r\n    this.themeChangedSubject.next(this.getCurrentTheme());\r\n    this.changeTheme();\r\n  }\r\n\r\n  private themeChangedSubject = new Subject<string>();\r\n  public readonly themeChanged = this.themeChangedSubject.asObservable();\r\n\r\n  public getCurrentTheme(): string {\r\n    return this.isDarkTheme ? 'dark' : 'light';\r\n  }\r\n\r\n  private changeTheme() {\r\n    document.body.setAttribute('theme', this.getCurrentTheme());\r\n  }\r\n\r\n  constructor() {\r\n    this.changeTheme();\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { TranslationManagementService } from \"./translation-management.service\";\r\nimport { ThemeService } from \"./theme.service\";\r\nimport { Subject, Observable } from \"rxjs\";\r\nimport {\r\n  ColorScheme,\r\n  Message,\r\n  MessageHandlers,\r\n  MessageType,\r\n  Payload,\r\n} from \"./message.model\";\r\nimport { AvlAuthService, User } from '@avl-ng-controls/auth';\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class ChildCommunicationService {\r\n  private handlers: MessageHandlers = {\r\n    [MessageType.login]: (url: string) => this.handleLogin(url),\r\n    [MessageType.navigation]: (url: string) => this.handleNavigation(url),\r\n    [MessageType.action]: (action: string) => this.handleAction(action),\r\n    [MessageType.registration]: (_) => this.handleRegistration(),\r\n    [MessageType.user]: (user: User) => this.handleUser(user),\r\n  };\r\n\r\n  private actionSubject = new Subject<string>();\r\n  private navigationSubject = new Subject<string>();\r\n  private loginSubject = new Subject<string>();\r\n  private registrationCompletedSubject = new Subject<boolean>();\r\n\r\n  protected iframeEl: HTMLIFrameElement;\r\n\r\n  public action$: Observable<string> = this.actionSubject;\r\n\r\n  /**\r\n   * Observable tracking url to navigate to\r\n   */\r\n  public navigation$: Observable<string> = this.navigationSubject;\r\n\r\n  /**\r\n   * Observable tracking url for login\r\n   * Url for login provided by child application\r\n   */\r\n  public login$: Observable<string> = this.loginSubject;\r\n\r\n  /**\r\n   * Observable tracking child registration\r\n   * Emits true if registration was successful, false otherwise\r\n   */\r\n  public registrationCompleted$: Observable<boolean> = this\r\n    .registrationCompletedSubject;\r\n\r\n  constructor(\r\n    private translationManagementService: TranslationManagementService,\r\n    private themeService: ThemeService,\r\n    private authService: AvlAuthService\r\n  ) {\r\n    window.addEventListener(\"message\", (event) => this.onMessage(event));\r\n    this.themeService.themeChanged.subscribe(() => this.postThemeToChildren());\r\n  }\r\n\r\n  /**\r\n   * Sends message to child about locale\r\n   */\r\n  public notifyChildAboutLocale(country: string): void {\r\n    this.postMessageToChild(MessageType.locale, country);\r\n  }\r\n\r\n  /**\r\n   * Sends message to child about language\r\n   */\r\n  public notifyChildAboutLanguage(language: string): void {\r\n    this.postMessageToChild(MessageType.language, language);\r\n  }\r\n\r\n  /**\r\n   * Sends message to child about action\r\n   */\r\n  public notifyChildAboutAction(action: string): void {\r\n    this.postMessageToChild(MessageType.action, action);\r\n  }\r\n\r\n  /**\r\n   * Sends message to child about navigation\r\n   */\r\n  public notifyChildAboutNavigation(url: string): void {\r\n    this.postMessageToChild(MessageType.navigation, url);\r\n  }\r\n\r\n  /**\r\n   * Sends messages to children about current user\r\n   */\r\n  public postAuthenticationDataToChildren() {\r\n    const payload: User = this.authService.readUserFromSessionStorage();\r\n    this.postMessageToChild(MessageType.authentication, payload);\r\n  }\r\n\r\n  /**\r\n   * Sends messages to children about selected application theme\r\n   */\r\n  public postThemeToChildren(): void {\r\n    const theme = this.themeService.getCurrentTheme();\r\n    this.postMessageToChild(MessageType.theme, theme);\r\n  }\r\n\r\n  /**\r\n   * Sends messages to children about selected language\r\n   */\r\n  public postLanguageToChildren(): void {\r\n    this.postMessageToChild(\r\n      MessageType.language,\r\n      this.translationManagementService.language\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sends messages to children about selected country\r\n   */\r\n  public postLocaleToChildren(): void {\r\n    const country = localStorage.getItem(\"country\");\r\n    this.postMessageToChild(MessageType.locale, country);\r\n  }\r\n\r\n  /**\r\n   * Sends message to child about redirection from idb\r\n   */\r\n  public postRedirectedFromLogIn(payload: boolean): void {\r\n    this.postMessageToChild(MessageType.redirectedFromLogIn, payload);\r\n  }\r\n\r\n  /**\r\n   * Sends message to children about color scheme\r\n   */\r\n  public postColorSchemeToChildren(): void {\r\n    const computedStyle = window.getComputedStyle(document.body);\r\n    const productColor = computedStyle.getPropertyValue(\"--avl-product-color\");\r\n    const productHoverColor = computedStyle.getPropertyValue(\r\n      \"--avl-product-hover-color\"\r\n    );\r\n    const productFocusColor = computedStyle.getPropertyValue(\r\n      \"--avl-product-focus-color\"\r\n    );\r\n\r\n    const colorScheme: ColorScheme = {\r\n      \"--avl-product-color\": productColor,\r\n      \"--avl-product-hover-color\": productHoverColor,\r\n      \"--avl-product-focus-color\": productFocusColor,\r\n    };\r\n\r\n    this.postMessageToChild(MessageType.colorScheme, colorScheme);\r\n  }\r\n\r\n  private handleAction(action: string): void {\r\n    this.actionSubject.next(action);\r\n  }\r\n\r\n  private handleNavigation(navigation: string): void {\r\n    this.navigationSubject.next(navigation);\r\n  }\r\n\r\n  private handleLogin(login: string): void {\r\n    this.loginSubject.next(login);\r\n  }\r\n\r\n  // when child started its registration iframe is loaded and shell gets a message that he can send messages to iframe\r\n  private handleRegistration(): void {\r\n    this.iframeEl = document.getElementsByTagName(\r\n      \"iframe\"\r\n    )[0] as HTMLIFrameElement;\r\n\r\n    this.postThemeToChildren();\r\n    this.postColorSchemeToChildren();\r\n    this.postLanguageToChildren();\r\n    this.postLocaleToChildren();\r\n\r\n    this.registrationCompletedSubject.next(true);\r\n  }\r\n\r\n  private onMessage(event: MessageEvent): void {\r\n    const { payload, messageType }: Message = event.data;\r\n    const handlers = {\r\n      ...this.handlers,\r\n      default: () => console.log(\"Unrecognized message for the child.\", event),\r\n    };\r\n\r\n    (handlers[messageType] || handlers.default)(payload);\r\n  }\r\n\r\n  private postMessageToChild(messageType: MessageType, payload: Payload): void {\r\n    if (!this.iframeEl) {\r\n      return;\r\n    }\r\n\r\n    const message: Message = { messageType, payload };\r\n    this.iframeEl.contentWindow?.postMessage(message, \"*\");\r\n  }\r\n\r\n  // when child updates user data, it has to reflect in user data in shell\r\n  private handleUser(user: User) {\r\n    if (user?.access_token) {\r\n      this.authService.storeUserToSessionStorage(user);\r\n    } else {\r\n      this.authService.clearUserFromSessionStorage();\r\n    }\r\n\r\n    this.authService.reloadPersistedUserData();\r\n  }\r\n}\r\n","/**\r\n * List of all types of messages that can be logged.\r\n */\r\nexport enum LogSeverity {\r\n  Debug,\r\n  Info,\r\n  Warning,\r\n  Error,\r\n  Fatal,\r\n}\r\n\r\n/**\r\n * **LogConfig** class is required by the _LoggingModule_.\r\n * \r\n * An instance of this class should be passed into _forRoot_ method of _LoggingModule_\r\n * when importing module in the Angular application.\r\n * ```\r\n * import logConfig from 'logging.config.ts;\r\n * import LoggingModule from '@avl-services/ng-services';\r\n *  ....\r\n *  @NgModule({\r\n *    imports: [\r\n *      LoggingModule.forRoot(logConfig),\r\n *      ...\r\n *    ],\r\n *    ...\r\n *  }) export class AppModule {}\r\n * ```\r\n */\r\nexport class LogConfig {\r\n  /**\r\n   * API endpoint for logging (e.g. https://vizbox.avl.com/api/theia/logs).\r\n   * - Mandatory\r\n   */\r\n  public readonly endpoint: string;\r\n\r\n  /**\r\n   * Name of the database in which logs will be stored.\r\n   * - Mandatory\r\n   */\r\n  public readonly targetName: string;\r\n\r\n  /**\r\n   * Name of the application that uses the logging service.\r\n   * - Mandatory\r\n   */\r\n  public readonly appName: string;\r\n\r\n  /**\r\n   * Version of the application that uses the logging service.\r\n   * - Mandatory\r\n   */\r\n  public readonly version: string;\r\n\r\n  /**\r\n   * Flag that indicates whether logging starts automatically once the user logs in using credential.\r\n   * \r\n   * If true, app requires _AvlAuthService_ instance in _AppModule_ providers array:\r\n   * ```\r\n   * { provide: AvlAuthService, useClass: AvlOidcCodeAuthService }\r\n   * ```\r\n   * If false, user can control logging using the service (_startLogging_, _stopLogging_ methods).\r\n   * \r\n   * - Optional\r\n   * - Default: false\r\n   */\r\n  public autologging: boolean = false;\r\n\r\n  /**\r\n   * Minimum message severity to log.\r\n   * - Optional\r\n   * - Default: LogSeverity.Info\r\n   */\r\n  public globalLogLevel: LogSeverity = LogSeverity.Info;\r\n\r\n  /**\r\n   * Time in milliseconds, determines the period of API requests for logging.\r\n   * - Optional\r\n   * - Default: 30_000 ms\r\n   */\r\n  public debounceTime: number = 30_000;\r\n\r\n  /**\r\n   * Log queue capacity  \r\n   * \r\n   * If reached, API request is sent with all logs in log queue, and queue is cleared out.\r\n   * - Optional\r\n   * - Default: 10\r\n   */\r\n  public capacity: number = 10;\r\n\r\n  /**\r\n   * Creates instance of _LogConfig_ class.\r\n   * @param endpoint API endpoint for logging.\r\n   * @param targetName Name of the database in which logs will be stored\r\n   * @param appName Name of the application that uses the logging service\r\n   * @param version Version of the application that uses the logging service\r\n   * @param autologging Flag that indicates whether logging starts automatically once the user logs in using credential. Default: false\r\n   * @param globalLogLevel Minimum message severity to log. Default: LogSeverity.Info\r\n   * @param debounceTime Time in milliseconds, determines the period of API requests for logging. Default: 30_000 ms\r\n   * @param capacity Log queue capacity. Default: 10\r\n   */\r\n  constructor(\r\n    endpoint: string,\r\n    targetName: string,\r\n    appName: string,\r\n    version: string,\r\n    autologging: boolean = false,\r\n    globalLogLevel: LogSeverity = LogSeverity.Info,\r\n    debounceTime: number = 30_000,\r\n    capacity: number = 10\r\n  ) {\r\n    this.endpoint = endpoint;\r\n    this.targetName = targetName;\r\n    this.appName = appName;\r\n    this.version = version;\r\n    this.autologging = autologging;\r\n    this.globalLogLevel = globalLogLevel;\r\n    this.debounceTime = debounceTime;\r\n    this.capacity = capacity;\r\n  }\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport interface Log {\r\n  readonly appName?: string;\r\n  readonly componentName?: string;\r\n  readonly severity?: string;\r\n  readonly message?: string;\r\n  readonly procId?: string;\r\n  readonly timestamp?: string;\r\n  readonly version?: string;\r\n  readonly AVLRequestId?: string;\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\r\nimport { AvlAuthService } from '@avl-ng-controls/auth';\r\nimport { interval, Observable, Subject } from 'rxjs';\r\nimport { filter, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport { Log, LogConfig, LogSeverity } from './logging.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LoggingService implements OnDestroy {\r\n  private logs: Log[] = [];\r\n  private headers: HttpHeaders;\r\n  private isLogging = false;\r\n\r\n  private debounceTime$: Subject<number> = new Subject();\r\n  private logs$: Subject<Log[]> = new Subject();\r\n  private stopLogging$: Subject<void> = new Subject();\r\n  private postLogs$: Subject<void> = new Subject();\r\n  private destroyed$: Subject<void> = new Subject();\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Inject('loggingConfig') private config: LogConfig,\r\n    @Optional() @Inject(AvlAuthService) private authService: AvlAuthService\r\n  ) {\r\n    this.headers = new HttpHeaders({\r\n      targetName: this.config.targetName,\r\n    });\r\n\r\n    if (config.autologging) {\r\n      this.authService?.isLoggedIn$.pipe(takeUntil(this.destroyed$)).subscribe((isLoggedIn) => this.decideOnLogging(isLoggedIn));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @ignore\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.postLogs$.complete();\r\n    this.debounceTime$.complete();\r\n    this.logs$.complete();\r\n    this.stopLogging$.next();\r\n    this.stopLogging$.complete();\r\n    this.destroyed$.next();\r\n    this.destroyed$.complete();\r\n  }\r\n  /**\r\n   * Starts periodical logging process.\r\n   * \r\n   * Depends on _debounceTime_ and _capacity_ properties.\r\n   */\r\n  public startLogging(): void {\r\n    this.isLogging = true;\r\n    this.debounceTime$\r\n      .pipe(\r\n        takeUntil(this.stopLogging$),\r\n        switchMap((debounceTime) => this.periodicalLogging(debounceTime))\r\n      )\r\n      .subscribe(() => this.onPostMessages());\r\n\r\n    this.postLogs$\r\n      .pipe(\r\n        takeUntil(this.stopLogging$),\r\n        switchMap(() => this.postMessages())\r\n      )\r\n      .subscribe(() => this.onPostMessages());\r\n\r\n    this.setLoggingDebounceTime(this.config.debounceTime);\r\n  }\r\n\r\n  /**\r\n   * Stops logging process.\r\n   */\r\n  public stopLogging(): void {\r\n    this.isLogging = false;\r\n    this.postLogs();\r\n    this.stopLogging$.next();\r\n  }\r\n\r\n  /**\r\n   * Gets all currently queued logs as an observable value.\r\n   * @returns All currently queued logs as an observable value\r\n   */\r\n  public getLogs$(): Observable<Log[]> {\r\n    return this.logs$.asObservable();\r\n  }\r\n\r\n  /**\r\n   * Logs message with debug severity.\r\n   * @param message Message used for constructing a debug log\r\n   * @param componentName Name of the component which called this method\r\n   */\r\n  public debug(message: string, componentName: string = ''): void {\r\n    this.log(message, LogSeverity.Debug, componentName);\r\n  }\r\n\r\n  /**\r\n   * Logs message with info severity.\r\n   * @param message Message used for constructing a info log\r\n   * @param componentName Name of the component which called this method\r\n   */\r\n  public info(message: string, componentName: string = ''): void {\r\n    this.log(message, LogSeverity.Info, componentName);\r\n  }\r\n\r\n  /**\r\n   * Logs message with warning severity.\r\n   * @param message Message used for constructing a warning log\r\n   * @param componentName Name of the component which called this method\r\n   */\r\n  public warn(message: string, componentName: string = ''): void {\r\n    this.log(message, LogSeverity.Warning, componentName);\r\n  }\r\n\r\n  /**\r\n   * Logs message with error severity.\r\n   * @param message Message used for constructing a error log\r\n   * @param componentName Name of the component which called this method\r\n   */\r\n  public error(message: string, componentName: string = ''): void {\r\n    this.log(message, LogSeverity.Error, componentName);\r\n  }\r\n\r\n  /**\r\n   * Logs message with fatal severity.\r\n   * @param message Message used for constructing a fatal log\r\n   * @param componentName Name of the component which called this method\r\n   */\r\n  public fatal(message: string, componentName: string = ''): void {\r\n    this.log(message, LogSeverity.Fatal, componentName);\r\n  }\r\n\r\n  /**\r\n   * Setter for debounce time (log period).\r\n   * @param debounceTime Time in milliseconds; determines the period of API requests for logging\r\n   */\r\n  public setLoggingDebounceTime(debounceTime: number): void {\r\n    this.config.debounceTime = debounceTime;\r\n    this.debounceTime$.next(debounceTime);\r\n  }\r\n\r\n  /**\r\n   * Setter for global log level.\r\n   * @param globalLogLevel Minimum message severity to log\r\n   */\r\n  public setGlobalLogLevel(globalLogLevel: LogSeverity): void {\r\n    this.config.globalLogLevel = globalLogLevel;\r\n  }\r\n\r\n  /**\r\n   * Setter for log queue capacity.\r\n   * @param capacity Log queue capacity\r\n   */\r\n  public setLogCapacity(capacity: number): void {\r\n    this.config.capacity = capacity;\r\n  }\r\n\r\n  // Logic, private methods\r\n\r\n  private log(message: string, severity: LogSeverity, componentName: string): void {\r\n    if (!this.isLogging || severity < this.config.globalLogLevel) {\r\n      return;\r\n    }\r\n\r\n    this.createAndStoreLog(message, severity, componentName);\r\n    this.dispatchLogs();\r\n\r\n    if (this.isFullCapacity()) {\r\n      this.postLogs$.next();\r\n    }\r\n  }\r\n\r\n  private createAndStoreLog(message: string, severityType: LogSeverity, componentName: string): void {\r\n    const timestamp = new Date().toISOString();\r\n    const { appName, version } = this.config;\r\n    const severity = severityType.toString();\r\n    const log: Log = { message, severity, timestamp, componentName, appName, version };\r\n    this.logs.push(log);\r\n  }\r\n\r\n  private isFullCapacity(): boolean {\r\n    return this.logs.length >= this.config.capacity;\r\n  }\r\n\r\n  private clearLogs(): void {\r\n    this.logs = [];\r\n  }\r\n\r\n  private onPostMessages(): void {\r\n    this.clearLogs();\r\n    this.dispatchLogs();\r\n  }\r\n\r\n  private postLogs(): void {\r\n    this.postLogs$.next();\r\n  }\r\n\r\n  private periodicalLogging(period: number): Observable<void> {\r\n    return interval(period).pipe(\r\n      tap(() => {\r\n        if (!this.logs.length) {\r\n          this.dispatchLogs();\r\n        }\r\n      }),\r\n      filter(() => !!this.logs.length),\r\n      switchMap(() => this.postMessages())\r\n    );\r\n  }\r\n\r\n  private postMessages(): Observable<void> {\r\n    return this.http.post<void>(this.config.endpoint, this.logs, {\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  private dispatchLogs(): void {\r\n    this.logs$.next(this.logs);\r\n  }\r\n\r\n  private decideOnLogging(isLoggedIn: boolean): void {\r\n    if (isLoggedIn) {\r\n      this.startLogging();\r\n    } else {\r\n      this.stopLogging();\r\n    }\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\r\nimport { LogConfig } from './logging.model';\r\nimport { LoggingService } from './logging.service';\r\n\r\n@NgModule()\r\nexport class LoggingModule {\r\n  constructor(@Optional() @SkipSelf() parentModule?: LoggingModule) {\r\n    if (parentModule) {\r\n      throw new Error('LoggingModule is already loaded. Import it in the AppModule only');\r\n    }\r\n  }\r\n  static forRoot(config: LogConfig): ModuleWithProviders<LoggingModule> {\r\n    return {\r\n      ngModule: LoggingModule,\r\n      providers: [LoggingService, { provide: 'loggingConfig', useValue: config }],\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\nimport {\r\n  HubConnection,\r\n  HubConnectionBuilder,\r\n  HubConnectionState,\r\n  LogLevel\r\n} from '@microsoft/signalr';\r\n\r\nimport {\r\n  AvlNotification,\r\n  AvlNotificationConnectionOptions,\r\n  AvlNotificationMetadata\r\n} from '@avl-controls/interfaces';\r\n\r\ninterface ApplicationConnection {\r\n  /** Connection identifier */\r\n  readonly id: string;\r\n\r\n  /**\r\n   * Connection to the backend hub.\r\n   */\r\n  readonly connection: HubConnection;\r\n}\r\n\r\n@Injectable()\r\nexport class NotificationService {\r\n  private hubConnections: ApplicationConnection[] = [];\r\n  private notification: Subject<AvlNotification> = new Subject();\r\n\r\n  /**\r\n   * Observable which emits newly arrived notifications.\r\n   */\r\n  public notification$: Observable<AvlNotification> = this.notification;\r\n\r\n  /**\r\n   * Builds and starts signalR hub connection with the server.\r\n   * If connection already exists and is not connected, restarts the connection.\r\n   * @param endpoint server endpoint\r\n   * @param options options of the connection\r\n   */\r\n  public startConnection(endpoint: string, options: AvlNotificationConnectionOptions): void {\r\n    let connection = this.getConnectionByID(options.connectionID);\r\n    if (!connection) {\r\n      connection = this.buildConnection(endpoint, options);\r\n    }\r\n\r\n    if (connection.state === HubConnectionState.Connected) {\r\n      return;\r\n    }\r\n\r\n    connection\r\n      .start()\r\n      .then(() => this.startNotifications(connection, options.metadata))\r\n      .catch(() => console.warn('Notification service: Failed to establish connection.'));\r\n  }\r\n\r\n  /**\r\n   * Stops connection with the server\r\n   * @param connectionID connection identifier\r\n   */\r\n  public stopConnection(connectionID: string): void {\r\n    const connection = this.getConnectionByID(connectionID);\r\n\r\n    if (!connection) {\r\n      return;\r\n    }\r\n\r\n    connection.off('transferNotification');\r\n    connection.stop();\r\n  }\r\n\r\n  /**\r\n   * Removes connection entirely\r\n   * @param connectionID connection identifier\r\n   */\r\n  public removeConnection(connectionID: string): void {\r\n    this.stopConnection(connectionID);\r\n\r\n    const index = this.hubConnections.findIndex(connection => connection.id === connectionID);\r\n    if (index !== -1) {\r\n      this.hubConnections.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates notifications metadata for specific connection. Notifies server about it.\r\n   * @param connectionID connection identifier\r\n   * @param metadata notification metadata, (e.g language)\r\n   */\r\n  public updateNotifications(connectionID: string, metadata: AvlNotificationMetadata): void {\r\n    const connection = this.getConnectionByID(connectionID);\r\n    if (!connection) {\r\n      return;\r\n    }\r\n\r\n    this.startNotifications(connection, metadata);\r\n  }\r\n\r\n  // Private methods\r\n\r\n  private startNotifications(connection: HubConnection, metadata: AvlNotificationMetadata): void {\r\n    connection.invoke('startNotifications', metadata);\r\n  }\r\n\r\n  private getConnectionByID(connectionID: string): HubConnection {\r\n    const index = this.hubConnections.findIndex(connection => connection.id === connectionID);\r\n    return this.hubConnections[index]?.connection;\r\n  }\r\n\r\n  private buildConnection(\r\n    endpoint: string,\r\n    options: AvlNotificationConnectionOptions\r\n  ): HubConnection {\r\n    const hubConnection = new HubConnectionBuilder()\r\n      .configureLogging(LogLevel.None)\r\n      .withUrl(endpoint)\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    hubConnection.onreconnected(() => this.startNotifications(hubConnection, options.metadata));\r\n    hubConnection.on('transferNotification', (notification: AvlNotification) => {\r\n      this.notification.next(notification);\r\n    });\r\n\r\n    this.hubConnections.push({\r\n      id: options.connectionID,\r\n      connection: hubConnection\r\n    });\r\n\r\n    return hubConnection;\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of ng-services\r\n */\r\n\r\nexport * from './lib/shell-communication.service';\r\nexport * from './lib/child-communication.service';\r\nexport * from './lib/translation-management.service';\r\nexport * from './lib/theme.service';\r\nexport * from './lib/message.model';\r\nexport * from './lib/logging.module';\r\nexport * from './lib/logging.service';\r\nexport * from './lib/logging.model';\r\nexport * from './lib/notification.service';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}
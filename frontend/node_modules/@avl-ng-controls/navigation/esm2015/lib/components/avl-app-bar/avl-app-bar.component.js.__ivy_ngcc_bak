var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { Component, Input, Output, ViewEncapsulation, EventEmitter, HostBinding } from '@angular/core';
import '@avl-controls/core/dist/avl-app-switcher/avl-app-switcher';
import '@avl-controls/core/dist/avl-icon/avl-icon.js';
export class MenuButtonItems {
    constructor(headerText, headerIconName, items, footerItems) {
        this.headerText = headerText;
        this.headerIconName = headerIconName;
        this.items = items;
        this.footerItems = footerItems;
    }
    ;
}
;
let AvlAppBarComponent = class AvlAppBarComponent {
    constructor() {
        /**
         * List of sub-applications used
         */
        this.applications = [];
        /**
         * Flag indicating app-bar has fixed positioning or no
         */
        this.fixed = true;
        /**
         * Event emitted when application is changed in app-bar drop-down
         */
        this.currentApplicationChange = new EventEmitter();
        /**
         * Event emmited when Burger menu is clicked.
         * Toggles side-nav visibility if app-bar is part of app-layout in responsive mode
         */
        this.burgerClicked = new EventEmitter();
        /** @hidden */
        this.appLogoSet = false;
        this.appLogoPreset = false;
    }
    /**
     * True if only one element added to applications array
     */
    get isSingleApp() {
        return !this.applications || this._appsLength < 2;
    }
    /**
     * @hidden
     */
    get showAppLogo() {
        if (this.currentApplication == null)
            return false;
        const image = this.currentApplication.image;
        return !(image == null || image === '');
    }
    /**
     * @hidden
     */
    burgerIconClicked() {
        this.burgerClicked.emit();
    }
    /**
     * @hidden
     */
    onApplicationChanged(app) {
        this.currentApplication = app;
        if (!this.appLogoPreset) {
            setTimeout(() => {
                this.appLogoSet = true;
                this.appLogo = this.currentApplication.image;
            });
        }
        this.currentApplicationChange.emit(this.currentApplication);
    }
    /** @hidden */
    ngOnInit() {
        if (this.appLogo) {
            this.appLogoSet = true;
            this.appLogoPreset = true;
        }
        else {
            this.appLogo = this.currentApplication ? this.currentApplication.image : "";
            this.appLogoSet = true;
        }
        this._appsLength = this.applications ? this.applications.length : 0;
    }
};
__decorate([
    Input(),
    __metadata("design:type", Object)
], AvlAppBarComponent.prototype, "currentApplication", void 0);
__decorate([
    Input(),
    HostBinding('class.responsive'),
    __metadata("design:type", Boolean)
], AvlAppBarComponent.prototype, "responsive", void 0);
__decorate([
    Input(),
    HostBinding('class.mobile'),
    __metadata("design:type", Boolean)
], AvlAppBarComponent.prototype, "mobile", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], AvlAppBarComponent.prototype, "homePageUrl", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], AvlAppBarComponent.prototype, "appLogo", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], AvlAppBarComponent.prototype, "applications", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], AvlAppBarComponent.prototype, "fixed", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], AvlAppBarComponent.prototype, "currentApplicationChange", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], AvlAppBarComponent.prototype, "burgerClicked", void 0);
AvlAppBarComponent = __decorate([
    Component({
        selector: 'avl-app-bar',
        template: "<header id=\"header\" class=\"mdc-toolbar mdc-toolbar--waterfall\" [ngClass]=\"{'mdc-toolbar--fixed': fixed}\">\r\n  <div class=\"mdc-toolbar__row\">\r\n    <section class=\"mdc-toolbar__section mdc-toolbar__section--align-start mdc-toolbar__section--shrink-to-fit section-with-switcher\">\r\n      <avl-app-bar-item class=\"burger-container\">\r\n        <avl-icon class=\"burgerMenu\" icon=\"menu\" theme=\"dark\" (click)=\"burgerIconClicked()\"></avl-icon>\r\n      </avl-app-bar-item>\r\n      <avl-app-bar-item class=\"noselect\" *ngIf=\"appLogoSet && appLogo != undefined\">\r\n        <a class=\"avl-app-logo\"\r\n          [style.background-image]=\"'url(' + appLogo + ')'\"\r\n          [style.background-repeat]=\"'no-repeat'\"\r\n          routerLink=\"{{homePageUrl ? homePageUrl : '/' }}\"></a>\r\n      </avl-app-bar-item>\r\n\r\n      <div *ngIf=\"isSingleApp; then singleApp else multiApp\"></div>\r\n      <ng-template #singleApp>\r\n        <avl-app-bar-item class=\"single-app-name\" [innerHTML]=\"currentApplication?.name\">\r\n        </avl-app-bar-item>\r\n      </ng-template>\r\n      <ng-template #multiApp>\r\n        <avl-app-bar-item class=\"toolbar-item-with-switcher\">\r\n          <avl-app-switcher [items]=\"applications\" [selectedValue]=\"currentApplication\" (selectedValueChange)=\"onApplicationChanged($event)\">\r\n          </avl-app-switcher>\r\n        </avl-app-bar-item>\r\n      </ng-template>\r\n    </section>\r\n    <section id=\"additionalContent\" class=\"mdc-toolbar__section mdc-toolbar__section--align-end \">\r\n      <ng-content></ng-content>\r\n      <ng-content select=\"avl-overflow-menu[slot=menu]\"></ng-content>\r\n    </section>\r\n  </div>\r\n</header>\r\n",
        encapsulation: ViewEncapsulation.Emulated,
        styles: [".mdc-toolbar{background-color:#3f51b5;background-color:var(--mdc-theme-primary,#3f51b5);color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff);display:flex;position:relative;flex-direction:column;justify-content:space-between;box-sizing:border-box;width:100%}.mdc-toolbar__row{display:flex;position:relative;align-items:center;box-sizing:border-box;width:100%;height:auto;min-height:64px}.mdc-toolbar__section{display:inline-flex;flex:1;align-items:flex-start;justify-content:center;min-width:0;height:100%}.mdc-toolbar__section--align-start{justify-content:flex-start;order:-1}.mdc-toolbar__section--align-end{justify-content:flex-end;order:1}.mdc-toolbar__title{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;font-weight:500;letter-spacing:.02em;text-decoration:inherit;text-transform:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin-left:24px;margin-right:0;align-self:center;padding:16px 0;line-height:1.5rem;z-index:1}.mdc-toolbar__title[dir=rtl],[dir=rtl] .mdc-toolbar__title{margin-left:0;margin-right:24px}.mdc-toolbar__icon{display:flex;align-items:center;justify-content:center;border:none;background-color:inherit;text-decoration:none;color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff);cursor:pointer}.mdc-toolbar__icon:last-of-type[dir=rtl],[dir=rtl] .mdc-toolbar__icon:last-of-type{padding-left:24px;padding-right:12px}.mdc-toolbar__menu-icon{display:flex;align-items:center;justify-content:center;padding:16px 24px;border:none;background-color:inherit;text-decoration:none;color:#fff;color:var(--mdc-theme-text-primary-on-primary,#fff);cursor:pointer}.mdc-toolbar__menu-icon+.mdc-toolbar__title{margin-left:8px;margin-right:0}.mdc-toolbar__menu-icon+.mdc-toolbar__title[dir=rtl],[dir=rtl] .mdc-toolbar__menu-icon+.mdc-toolbar__title{margin-left:0;margin-right:8px}.mdc-toolbar--fixed{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);position:fixed;top:0;left:0;z-index:4;box-shadow:none}.mdc-toolbar--flexible{--mdc-toolbar-ratio-to-extend-flexible:4}.mdc-toolbar--flexible .mdc-toolbar__row:first-child{height:256px;height:calc(64px * var(--mdc-toolbar-ratio-to-extend-flexible,4))}.mdc-toolbar--flexible .mdc-toolbar__row:first-child::after{position:absolute;content:\"\"}.mdc-toolbar--flexible-default-behavior .mdc-toolbar__title{font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:2.125rem;font-weight:400;letter-spacing:normal;text-decoration:inherit;text-transform:inherit;align-self:flex-end;line-height:1.5rem}.mdc-toolbar--flexible-default-behavior .mdc-toolbar__row:first-child::after{top:0;left:0;width:100%;height:100%;transition:opacity .2s;opacity:1}.mdc-toolbar--flexible-default-behavior.mdc-toolbar--flexible-space-minimized .mdc-toolbar__row:first-child::after{opacity:0}.mdc-toolbar--flexible-default-behavior.mdc-toolbar--flexible-space-minimized .mdc-toolbar__title{font-weight:500}.mdc-toolbar--waterfall.mdc-toolbar--fixed{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);will-change:box-shadow}.mdc-toolbar--waterfall.mdc-toolbar--fixed.mdc-toolbar--flexible-space-minimized{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mdc-toolbar--waterfall.mdc-toolbar--fixed.mdc-toolbar--fixed-lastrow-only.mdc-toolbar--flexible-space-minimized{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mdc-toolbar--waterfall.mdc-toolbar--fixed.mdc-toolbar--fixed-lastrow-only.mdc-toolbar--fixed-at-last-row{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mdc-toolbar-fixed-adjust{margin-top:64px}@media (max-width:959px) and (orientation:landscape){.mdc-toolbar__row{min-height:48px}.mdc-toolbar-fixed-adjust{margin-top:48px}}@media (max-width:599px){.mdc-toolbar__row{min-height:56px}.mdc-toolbar__title{margin-left:16px;margin-right:0}.mdc-toolbar__title[dir=rtl],[dir=rtl] .mdc-toolbar__title{margin-left:0;margin-right:16px}.mdc-toolbar__icon{padding-right:8px;padding-left:8px}.mdc-toolbar__icon:last-of-type{padding-left:8px;padding-right:16px}.mdc-toolbar__icon:last-of-type[dir=rtl],[dir=rtl] .mdc-toolbar__icon:last-of-type{padding-left:16px;padding-right:8px}.mdc-toolbar__menu-icon{padding-right:16px;padding-left:16px}.mdc-toolbar__menu-icon+.mdc-toolbar__title{margin-left:16px;margin-right:0}.mdc-toolbar__menu-icon+.mdc-toolbar__title[dir=rtl],[dir=rtl] .mdc-toolbar__menu-icon+.mdc-toolbar__title{margin-left:0;margin-right:16px}.mdc-toolbar--flexible .mdc-toolbar__row:first-child{height:224px;height:calc(56px * var(--mdc-toolbar-ratio-to-extend-flexible,4))}.mdc-toolbar-fixed-adjust{margin-top:56px}}.mdc-toolbar__section--shrink-to-fit{flex:none}:host(){--item-color:var(--avl-app-bar-item-color, var(--avl-on-primary-color));--bar-height:var(--avl-app-bar-height, 53px);--background-color:var(--avl-app-bar-background-color, var(--avl-primary-color));--line-underline-color:var(--avl-app-bar-underline-color, var(--avl-product-color));color:var(--item-color);font-family:var(--avl-font-family);font-size:20px}#additionalContent{margin-right:12px}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:'liga'}.mdc-toolbar{background-color:var(--background-color);background-repeat:no-repeat;background-position:calc(100% - 61px) -30px;background-size:158px;color:var(--item-color);box-shadow:none;z-index:4;border-bottom:3px solid var(--line-underline-color)}#header{box-shadow:var(--avl-box-shadow-4dp)}avl-menu-button avl-icon-button{height:24px;width:24px;margin:0 16px 0 13px;padding:0}.mdc-toolbar__icon{color:var(--item-color);margin-bottom:0;padding:0}.mdc-toolbar__icon:active{color:var(--item-color)}.mdc-toolbar__icon:last-of-type{padding:0 16px}.search-bar-container{margin-left:24px;display:flex;justify-content:space-between;--avl-search-bar-text-color:var(--item-color, #fff);--avl-search-bar-search-color:var(--item-color, #fff)}.mdc-toolbar__row{min-height:var(--bar-height,53px);max-height:var(--bar-height,53px)}.mdc-toolbar__section{align-items:center;z-index:0}.avl-app-logo{width:32px;height:32px;background-size:100%}.burgerMenu{height:24px;width:24px}avl-icon-button{--avl-icon-button-color:white}.detailsMenuButtonSeparator{height:1px;background:#000}.icons-placeholder{font-size:20px;margin-bottom:0;margin-right:10px}.header-container{display:inline-flex;padding-bottom:5px;padding-top:5px}.header-icon{font-size:20px;margin-bottom:0;margin-right:10px;margin-top:5px}.header-text{display:inline;margin-left:-5px;font-size:25px;font-weight:700;padding-bottom:5px}.toolbar-item-with-switcher{padding-left:12px!important}avl-app-bar-item{cursor:initial!important}.section-with-switcher{position:relative;z-index:2}.burgerMenu{display:none;cursor:pointer}.avl-app-logo{margin:12px 0 12px 20px}.single-app-name{cursor:default}:host(.mobile) .burgerMenu{display:block}@media (max-width:960px){:host(.responsive) .burgerMenu{display:block}}@media (min-width:400px){:host(.mobile) .burgerMenu,:host(.responsive) .burgerMenu{margin:16px 0 16px 24px}}@media (max-width:400px){:host(.mobile) .avl-app-logo,:host(.responsive) .avl-app-logo{display:none}:host(.mobile) .burgerMenu,:host(.responsive) .burgerMenu{margin:16px -4px 16px 16px}}"]
    })
], AvlAppBarComponent);
export { AvlAppBarComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLWFwcC1iYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGF2bC1uZy1jb250cm9scy9uYXZpZ2F0aW9uLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYXZsLWFwcC1iYXIvYXZsLWFwcC1iYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFDeEIsaUJBQWlCLEVBQUUsWUFBWSxFQUFVLFdBQVcsRUFDckQsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTywyREFBMkQsQ0FBQztBQUNuRSxPQUFPLDhDQUE4QyxDQUFDO0FBRXRELE1BQU0sT0FBTyxlQUFlO0lBQzFCLFlBQXFCLFVBQWtCLEVBQzVCLGNBQXNCLEVBQ3RCLEtBQW9ELEVBQ3BELFdBQTJEO1FBSGpELGVBQVUsR0FBVixVQUFVLENBQVE7UUFDNUIsbUJBQWMsR0FBZCxjQUFjLENBQVE7UUFDdEIsVUFBSyxHQUFMLEtBQUssQ0FBK0M7UUFDcEQsZ0JBQVcsR0FBWCxXQUFXLENBQWdEO0lBQUksQ0FBQztJQUFBLENBQUM7Q0FDN0U7QUFVQSxDQUFDO0FBVUYsSUFBYSxrQkFBa0IsR0FBL0IsTUFBYSxrQkFBa0I7SUFBL0I7UUFrREU7O1dBRUc7UUFDTSxpQkFBWSxHQUEyQixFQUFFLENBQUM7UUFFbkQ7O1dBRUc7UUFDTSxVQUFLLEdBQVksSUFBSSxDQUFDO1FBRy9COztXQUVHO1FBQ08sNkJBQXdCLEdBQXVDLElBQUksWUFBWSxFQUF3QixDQUFDO1FBRWxIOzs7V0FHRztRQUNPLGtCQUFhLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7UUFFdkUsY0FBYztRQUNQLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFFM0Isa0JBQWEsR0FBWSxLQUFLLENBQUM7SUFxRHpDLENBQUM7SUFoREM7O09BRUc7SUFDSCxJQUFJLFdBQVc7UUFDYixPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxJQUFJLFdBQVc7UUFDYixJQUFJLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDbEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQztRQUM1QyxPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBQ0Q7O09BRUc7SUFDSCxpQkFBaUI7UUFDZixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFRDs7T0FFRztJQUNILG9CQUFvQixDQUFDLEdBQXlCO1FBQzVDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxHQUFHLENBQUM7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztnQkFDdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDO1lBQy9DLENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxjQUFjO0lBQ2QsUUFBUTtRQUNOLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztZQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztTQUMzQjthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1RSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0RSxDQUFDO0NBRUYsQ0FBQTtBQTVHQztJQURDLEtBQUssRUFBRTs7OERBQ3dDO0FBUWhEO0lBRkMsS0FBSyxFQUFFO0lBQ1AsV0FBVyxDQUFDLGtCQUFrQixDQUFDOztzREFDTDtBQVEzQjtJQUZDLEtBQUssRUFBRTtJQUNQLFdBQVcsQ0FBQyxjQUFjLENBQUM7O2tEQUNMO0FBTXZCO0lBREMsS0FBSyxFQUFFOzt1REFDbUI7QUFNM0I7SUFEQyxLQUFLLEVBQUU7O21EQUNlO0FBS2Q7SUFBUixLQUFLLEVBQUU7O3dEQUEyQztBQUsxQztJQUFSLEtBQUssRUFBRTs7aURBQXVCO0FBTXJCO0lBQVQsTUFBTSxFQUFFOzhCQUEyQixZQUFZO29FQUFrRTtBQU14RztJQUFULE1BQU0sRUFBRTs4QkFBZ0IsWUFBWTt5REFBa0M7QUF0RTVELGtCQUFrQjtJQVI5QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsYUFBYTtRQUN2Qixtc0RBQTJDO1FBSTNDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxRQUFROztLQUMxQyxDQUFDO0dBQ1csa0JBQWtCLENBZ0k5QjtTQWhJWSxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCxcclxuICBWaWV3RW5jYXBzdWxhdGlvbiwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIEhvc3RCaW5kaW5nXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgJ0BhdmwtY29udHJvbHMvY29yZS9kaXN0L2F2bC1hcHAtc3dpdGNoZXIvYXZsLWFwcC1zd2l0Y2hlcic7XHJcbmltcG9ydCAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLWljb24vYXZsLWljb24uanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lbnVCdXR0b25JdGVtcyB7XHJcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgaGVhZGVyVGV4dDogc3RyaW5nLFxyXG4gICAgcmVhZG9ubHkgaGVhZGVySWNvbk5hbWU6IHN0cmluZyxcclxuICAgIHJlYWRvbmx5IGl0ZW1zOiBBcnJheTx7IGl0ZW1UZXh0OiBzdHJpbmcsIGljb25OYW1lOiBzdHJpbmcgfT4sXHJcbiAgICByZWFkb25seSBmb290ZXJJdGVtcz86IEFycmF5PHsgaXRlbVRleHQ6IHN0cmluZywgaWNvbk5hbWU6IHN0cmluZyB9PikgeyB9O1xyXG59XHJcblxyXG4vKipcclxuICogT2JqZWN0IHJlcHJlc2VudGluZyBzdWItYXBwbGljYXRpb24gdGhhdCBpcyBhZGRlZCB0byBhcHAtYmFyIGRyb3AtZG93blxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBcHBsaWNhdGlvblJlZmVyZW5jZSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGljb24/OiBzdHJpbmc7XHJcbiAgaW1hZ2U/OiBzdHJpbmc7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhdmwtYXBwLWJhcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2F2bC1hcHAtYmFyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFtcclxuICAgICcuL2F2bC1hcHAtYmFyLmNvbXBvbmVudC5jc3MnXHJcbiAgXSxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5FbXVsYXRlZFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXZsQXBwQmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiAjIyMgU3R5bGluZ1xyXG4gICAqIFRoZSBmb2xsb3dpbmcgY3VzdG9tIHByb3BlcnRpZXMgYXJlIGF2YWlsYWJsZSBmb3Igc3R5bGluZzpcclxuICAgKlxyXG4gICAqIEN1c3RvbSBwcm9wZXJ0eSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEZXNjcmlwdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEZWZhdWx0XHJcbiAgICogOi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBgLS1hdmwtYXBwLWJhci1iYWNrZ3JvdW5kLWNvbG9yYCAgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvciBvZiBhcHAtYmFyICAgICAgICAgICAgICAgICAgIHwgYC0tYXZsLXByaW1hcnktY29sb3JgXHJcbiAgICogYC0tYXZsLWFwcC1iYXItaGVpZ2h0YCAgICAgICAgICAgICAgICAgICB8IEhlaWdodCBvZiBhcHAtYmFyIChtaW51cyAzcHggYm90dG9tIGxpbmUpICAgICB8IGA1M3B4YFxyXG4gICAqIGAtLWF2bC1hcHAtYmFyLWl0ZW0tY29sb3JgICAgICAgICAgICAgICAgfCBUZXh0IGNvbG9yIG9mIGFwcC1iYXIgaXRlbXMgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtb24tcHJpbWFyeS1jb2xvcmBcclxuICAgKiBgLS1hdmwtYXBwLWJhci11bmRlcmxpbmUtY29sb3JgICAgICAgICAgIHwgVW5kZXJsaW5lIGNvbG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYC0tYXZsLXByb2R1Y3QtY29sb3JgXHJcbiAgICovXHJcbiAgX3N0eWxpbmc6IGFueTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGVsbHMgd2hpY2ggaXMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBhcHBsaWNhdGlvblxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIGN1cnJlbnRBcHBsaWNhdGlvbjogQXBwbGljYXRpb25SZWZlcmVuY2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIEJvb2xlYW4gdG8gdG9nZ2xlIHJlc3BvbnNpdmUgZmVhdHVyZXNcclxuICAgKiBPbiBtb2JpbGUgc2NyZWVucyBzaWRlbmF2IHRvZ2dsaW5nIGlzIHRyaWdnZXJlZCBieSBidXJnZXIgaWNvbiBpbiBhcHAtYmFyIGFzIHBhcnQgb2YgYXBwLWxheW91dFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5yZXNwb25zaXZlJylcclxuICBwdWJsaWMgcmVzcG9uc2l2ZTogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogQm9vbGVhbiB0byBzZXQgb25seSBtb2JpbGUgZmVhdHVyZXMgb25cclxuICAgKiBPbiBtb2JpbGUgc2NyZWVucyBzaWRlbmF2IHRvZ2dsaW5nIGlzIHRyaWdnZXJlZCBieSBidXJnZXIgaWNvbiBpbiBhcHAtYmFyIGFzIHBhcnQgb2YgYXBwLWxheW91dFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5tb2JpbGUnKVxyXG4gIHB1YmxpYyBtb2JpbGU6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIFVSTCB0byBhcHBsaWNhdGlvbiBob21lLyBsYW5kaW5nIHBhZ2VcclxuICAgKi9cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBob21lUGFnZVVybDogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBVUkwgdG8gYXBwbGljYXRpb24gaWNvbiAvIGxvZ29cclxuICAgKi9cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBhcHBMb2dvOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIExpc3Qgb2Ygc3ViLWFwcGxpY2F0aW9ucyB1c2VkXHJcbiAgICovXHJcbiAgQElucHV0KCkgYXBwbGljYXRpb25zOiBBcHBsaWNhdGlvblJlZmVyZW5jZVtdID0gW107XHJcblxyXG4gIC8qKlxyXG4gICAqIEZsYWcgaW5kaWNhdGluZyBhcHAtYmFyIGhhcyBmaXhlZCBwb3NpdGlvbmluZyBvciBub1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGZpeGVkOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEV2ZW50IGVtaXR0ZWQgd2hlbiBhcHBsaWNhdGlvbiBpcyBjaGFuZ2VkIGluIGFwcC1iYXIgZHJvcC1kb3duXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIGN1cnJlbnRBcHBsaWNhdGlvbkNoYW5nZTogRXZlbnRFbWl0dGVyPEFwcGxpY2F0aW9uUmVmZXJlbmNlPiA9IG5ldyBFdmVudEVtaXR0ZXI8QXBwbGljYXRpb25SZWZlcmVuY2U+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEV2ZW50IGVtbWl0ZWQgd2hlbiBCdXJnZXIgbWVudSBpcyBjbGlja2VkLlxyXG4gICAqIFRvZ2dsZXMgc2lkZS1uYXYgdmlzaWJpbGl0eSBpZiBhcHAtYmFyIGlzIHBhcnQgb2YgYXBwLWxheW91dCBpbiByZXNwb25zaXZlIG1vZGVcclxuICAgKi9cclxuICBAT3V0cHV0KCkgYnVyZ2VyQ2xpY2tlZDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBhcHBMb2dvU2V0OiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgYXBwTG9nb1ByZXNldDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIF9hcHBzTGVuZ3RoOiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRydWUgaWYgb25seSBvbmUgZWxlbWVudCBhZGRlZCB0byBhcHBsaWNhdGlvbnMgYXJyYXlcclxuICAgKi9cclxuICBnZXQgaXNTaW5nbGVBcHAoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMuYXBwbGljYXRpb25zIHx8IHRoaXMuX2FwcHNMZW5ndGggPCAyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIGdldCBzaG93QXBwTG9nbygpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRBcHBsaWNhdGlvbiA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuY3VycmVudEFwcGxpY2F0aW9uLmltYWdlO1xyXG4gICAgcmV0dXJuICEoaW1hZ2UgPT0gbnVsbCB8fCBpbWFnZSA9PT0gJycpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAaGlkZGVuXHJcbiAgICovXHJcbiAgYnVyZ2VySWNvbkNsaWNrZWQoKSB7XHJcbiAgICB0aGlzLmJ1cmdlckNsaWNrZWQuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGhpZGRlblxyXG4gICAqL1xyXG4gIG9uQXBwbGljYXRpb25DaGFuZ2VkKGFwcDogQXBwbGljYXRpb25SZWZlcmVuY2UpIHtcclxuICAgIHRoaXMuY3VycmVudEFwcGxpY2F0aW9uID0gYXBwO1xyXG4gICAgaWYgKCF0aGlzLmFwcExvZ29QcmVzZXQpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hcHBMb2dvU2V0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFwcExvZ28gPSB0aGlzLmN1cnJlbnRBcHBsaWNhdGlvbi5pbWFnZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnRBcHBsaWNhdGlvbkNoYW5nZS5lbWl0KHRoaXMuY3VycmVudEFwcGxpY2F0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5hcHBMb2dvKSB7XHJcbiAgICAgIHRoaXMuYXBwTG9nb1NldCA9IHRydWU7XHJcbiAgICAgIHRoaXMuYXBwTG9nb1ByZXNldCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFwcExvZ28gPSB0aGlzLmN1cnJlbnRBcHBsaWNhdGlvbiA/IHRoaXMuY3VycmVudEFwcGxpY2F0aW9uLmltYWdlIDogXCJcIjtcclxuICAgICAgdGhpcy5hcHBMb2dvU2V0ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMuX2FwcHNMZW5ndGggPSB0aGlzLmFwcGxpY2F0aW9ucyA/IHRoaXMuYXBwbGljYXRpb25zLmxlbmd0aCA6IDA7XHJcbiAgfVxyXG5cclxufSJdfQ==
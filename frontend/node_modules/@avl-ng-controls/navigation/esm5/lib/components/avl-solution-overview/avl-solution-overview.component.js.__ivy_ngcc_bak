var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __values = (this && this.__values) || function(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (this && this.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
import { Component, HostListener, ElementRef, ViewChildren, QueryList, Input, EventEmitter, Output, ViewChild, AfterViewInit, OnInit, OnChanges, SimpleChanges, OnDestroy, ChangeDetectorRef, } from '@angular/core';
import { BehaviorSubject, asyncScheduler } from 'rxjs';
import { throttleTime, map } from 'rxjs/operators';
import { KeyboardNavigator } from './keyboard-navigator';
import '@avl-controls/core/dist/avl-icon/avl-icon';
import '@avl-controls/core/dist/avl-search-bar/avl-search-bar';
var AvlSolutionOverviewComponent = /** @class */ (function () {
    function AvlSolutionOverviewComponent(cdr) {
        this.cdr = cdr;
        /**
         * Emits search query string on change
         */
        this.searchQueryChange = new EventEmitter();
        /**
         * Emits value of the search query when search triggered
         */
        this.search = new EventEmitter();
        this.gridWidth$ = new BehaviorSubject(-1);
        this.largestItemsIndex = -1;
        this.maxItems = 0;
    }
    Object.defineProperty(AvlSolutionOverviewComponent.prototype, "groupsOfItems", {
        get: function () {
            var e_1, _a;
            var v = [];
            try {
                for (var _b = __values(this.groupElementRefs), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var gRef = _c.value;
                    var gEl = gRef.nativeElement;
                    var items = Array.prototype.slice.call(gEl.querySelectorAll('a.item'));
                    v = __spread(v, [items]);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return v;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AvlSolutionOverviewComponent.prototype, "iconButtonElements", {
        get: function () {
            if (this.iconButtonElementsCache == null) {
                this.iconButtonElementsCache = Array.prototype.slice.call(this.iconButtonsContainer
                    .nativeElement.querySelectorAll('avl-icon-button'));
            }
            return this.iconButtonElementsCache;
        },
        enumerable: true,
        configurable: true
    });
    AvlSolutionOverviewComponent.prototype.ngOnInit = function () {
        this.setupReferenceVars();
        this.gridWidthClass$ = this.gridWidth$.asObservable().pipe(throttleTime(50, asyncScheduler, { trailing: true }), map(function (gridWidth) {
            return "grid-width-" + gridWidth;
        }));
    };
    AvlSolutionOverviewComponent.prototype.ngOnDestroy = function () {
        if (this.groupElementRefsChangesSubscription) {
            this.groupElementRefsChangesSubscription.unsubscribe();
        }
    };
    AvlSolutionOverviewComponent.prototype.ngOnChanges = function (changes) {
        if (!changes.groups.isFirstChange()) {
            this.setupReferenceVars();
            this.gridWidth$.next(this.getGridWidth());
            this.setTopMargin();
        }
    };
    /** @hidden */
    AvlSolutionOverviewComponent.prototype.ngAfterViewInit = function () {
        this.setTopMargin();
        this.setupFocusOrdering();
        this.gridWidth$.next(this.getGridWidth());
    };
    /** @hidden */
    AvlSolutionOverviewComponent.prototype.getMaxColumnsClass = function () {
        if (this.maxColumns && window.outerWidth === this.screenWidth) {
            return "max-columns-" + this.maxColumns;
        }
        if (this.maxItems === 0) {
            return;
        }
        var maxColumns;
        switch (this.maxItems) {
            case 1:
                maxColumns = 1;
                break;
            case 2:
            case 4:
                maxColumns = 2;
                break;
            case 3:
            case 5:
            case 6:
            case 9:
                maxColumns = 3;
                break;
            case 7:
            case 8:
            case 11:
            case 12:
                maxColumns = 4;
                break;
            default:
                maxColumns = 5;
        }
        this.maxColumns = maxColumns;
        return "max-columns-" + maxColumns;
    };
    /** @hidden **/
    AvlSolutionOverviewComponent.prototype.onResize = function () {
        this.gridWidth$.next(this.getGridWidth());
    };
    /** @hidden */
    AvlSolutionOverviewComponent.prototype.onKeydownHandler = function (event) {
        var e_2, _a;
        var gOfItems = this.groupsOfItems;
        var numGroups = gOfItems.length;
        if (numGroups === 0) {
            return;
        }
        var activeEl = document.activeElement;
        var isDown = ['Down', 'ArrowDown'].includes(event.key);
        var isUp = ['Up', 'ArrowUp'].includes(event.key);
        var isRight = ['Right', 'ArrowRight'].includes(event.key);
        var isLeft = ['Left', 'ArrowLeft'].includes(event.key);
        var isTab = event.key === 'Tab';
        var searchbar = this.showSearchBar
            ? this.searchbarRef.nativeElement
            : undefined;
        var gNum;
        var iIdx;
        try {
            for (var gOfItems_1 = __values(gOfItems), gOfItems_1_1 = gOfItems_1.next(); !gOfItems_1_1.done; gOfItems_1_1 = gOfItems_1.next()) {
                var items = gOfItems_1_1.value;
                if (items.indexOf(activeEl) !== -1) {
                    iIdx = items.indexOf(activeEl);
                    gNum = gOfItems.indexOf(items);
                    // Go to route on 'Space'. 'Enter' already works on <a>.
                    if (event.key === ' ') {
                        items[iIdx].click();
                        return;
                    }
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (gOfItems_1_1 && !gOfItems_1_1.done && (_a = gOfItems_1.return)) _a.call(gOfItems_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (this.iconButtonElements.includes(activeEl)) {
            var numIconButtons = this.iconButtonElements.length;
            var idx = this.iconButtonElements.indexOf(activeEl);
            if ((isRight || isTab) && idx === numIconButtons - 1) {
                if (searchbar != null) {
                    searchbar.focus();
                }
                else {
                    gOfItems[0][0].focus();
                }
            }
            else if (isLeft && idx === 0) {
                var g = gOfItems[numGroups - 1];
                var gLen = g.length;
                g[gLen - 1].focus();
            }
            else if (isLeft) {
                this.iconButtonElements[idx - 1].focus();
            }
            else if (isRight) {
                this.iconButtonElements[idx + 1].focus();
            }
            event.preventDefault();
        }
        var itemElements = gOfItems[gNum];
        var gridWidth = this.gridWidth$.value;
        if (searchbar != null && iIdx < gridWidth && gNum === 0 && isUp) {
            searchbar.focus();
            event.preventDefault();
        }
        else if ((isRight || isTab) &&
            gNum === gOfItems.length - 1 &&
            iIdx === itemElements.length - 1) {
            var iconButtons = this.iconButtonElements;
            if (iconButtons != null && iconButtons.length > 0) {
                iconButtons[0].focus();
                event.preventDefault();
            }
        }
        else if (searchbar != null && searchbar === activeEl && isDown) {
            gOfItems[0][0].focus();
            event.preventDefault();
        }
        else if (gNum != null) {
            var nextGroup = gNum === gOfItems.length - 1 ? undefined : gOfItems[gNum + 1];
            var prevGroup = gNum === 0 ? undefined : gOfItems[gNum - 1];
            var nGLen = nextGroup == null ? 0 : nextGroup.length;
            var pGLen = prevGroup == null ? 0 : prevGroup.length;
            var keyboardNavigator = new KeyboardNavigator(itemElements.length, gridWidth);
            var itemIndexToMoveTo = keyboardNavigator.navigate(iIdx, event.key, nGLen, pGLen);
            if (itemIndexToMoveTo != null) {
                if ((isUp || isLeft) && itemIndexToMoveTo < 0) {
                    prevGroup[itemIndexToMoveTo + pGLen].focus();
                }
                else if ((isDown || isRight) && iIdx + 1 > itemIndexToMoveTo) {
                    nextGroup[itemIndexToMoveTo].focus();
                }
                else {
                    gOfItems[gNum][itemIndexToMoveTo].focus();
                }
                event.preventDefault();
            }
        }
    };
    /** @hidden */
    AvlSolutionOverviewComponent.prototype.onQueryChange = function (event) {
        this.searchQueryChange.emit(event.detail.value);
    };
    /** @hidden */
    AvlSolutionOverviewComponent.prototype.onSearch = function (event) {
        this.search.emit(event.detail.value);
    };
    AvlSolutionOverviewComponent.prototype.setupReferenceVars = function () {
        var e_3, _a;
        var max = 0;
        try {
            for (var _b = __values(this.groups), _c = _b.next(); !_c.done; _c = _b.next()) {
                var g = _c.value;
                var itemSz = g.items.length;
                if (max < itemSz) {
                    max = itemSz;
                    this.largestItemsIndex = this.groups.indexOf(g);
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        this.maxItems = max;
    };
    AvlSolutionOverviewComponent.prototype.setTopMargin = function () {
        this.contentHasScroll = false;
        this.cdr.detectChanges();
        var content = this.groupsContainer.nativeElement;
        this.contentHasScroll = content.scrollHeight > content.clientHeight;
        this.cdr.detectChanges();
    };
    AvlSolutionOverviewComponent.prototype.getGridWidth = function () {
        var e_4, _a;
        if (this.largestItemsIndex < 0) {
            this.setupReferenceVars();
        }
        var items = this.groupsOfItems[this.largestItemsIndex];
        var firstItemOffsetTop = items[0].offsetTop;
        var i = 0;
        try {
            for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {
                var item = items_1_1.value;
                if (item.offsetTop > firstItemOffsetTop) {
                    return i;
                }
                i++;
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
        return items.length;
    };
    AvlSolutionOverviewComponent.prototype.setupFocusOrdering = function () {
        var _this = this;
        var buttonElements = this.buttonRefs.map(function (elRef) { return elRef.nativeElement; });
        var focusableElements = [];
        if (this.showSearchBar) {
            focusableElements.push(this.searchbarRef.nativeElement);
        }
        focusableElements = __spread(focusableElements, buttonElements, this.iconButtonElements);
        focusableElements.forEach(function (el) {
            el.addEventListener('focus', function (event) {
                var t = event.target;
                if (t.tagName.toLowerCase() === 'avl-icon-button') {
                    if (_this.showSearchBar && (['body', 'html'].includes(document.activeElement.tagName.toLowerCase()) ||
                        _this.lastFocusedEl == null ||
                        (_this.lastFocusedEl.tagName.toLowerCase() !== 'avl-icon-button' &&
                            _this.lastFocusedEl !== buttonElements[buttonElements.length - 1]))) {
                        _this.searchbarRef.nativeElement.focus();
                        event.preventDefault();
                    }
                }
                _this.lastFocusedEl = event.target;
            });
        });
    };
    AvlSolutionOverviewComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], AvlSolutionOverviewComponent.prototype, "groups", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], AvlSolutionOverviewComponent.prototype, "solutionName", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], AvlSolutionOverviewComponent.prototype, "solutionIconUrl", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], AvlSolutionOverviewComponent.prototype, "solutionSubtitle", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], AvlSolutionOverviewComponent.prototype, "showSearchBar", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlSolutionOverviewComponent.prototype, "searchQueryChange", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlSolutionOverviewComponent.prototype, "search", void 0);
    __decorate([
        ViewChildren('itemElement'),
        __metadata("design:type", QueryList)
    ], AvlSolutionOverviewComponent.prototype, "buttonRefs", void 0);
    __decorate([
        ViewChildren('group'),
        __metadata("design:type", QueryList)
    ], AvlSolutionOverviewComponent.prototype, "groupElementRefs", void 0);
    __decorate([
        ViewChild('searchbar'),
        __metadata("design:type", ElementRef)
    ], AvlSolutionOverviewComponent.prototype, "searchbarRef", void 0);
    __decorate([
        ViewChild('iconButtons'),
        __metadata("design:type", ElementRef)
    ], AvlSolutionOverviewComponent.prototype, "iconButtonsContainer", void 0);
    __decorate([
        ViewChild('searchbarContainer'),
        __metadata("design:type", ElementRef)
    ], AvlSolutionOverviewComponent.prototype, "searchbarContainer", void 0);
    __decorate([
        ViewChild('groupsContainer'),
        __metadata("design:type", ElementRef)
    ], AvlSolutionOverviewComponent.prototype, "groupsContainer", void 0);
    __decorate([
        HostListener('window:resize'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], AvlSolutionOverviewComponent.prototype, "onResize", null);
    __decorate([
        HostListener('keydown', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [KeyboardEvent]),
        __metadata("design:returntype", void 0)
    ], AvlSolutionOverviewComponent.prototype, "onKeydownHandler", null);
    AvlSolutionOverviewComponent = __decorate([
        Component({
            selector: 'avl-solution-overview',
            template: "<div class=\"container\">\r\n  <div class=\"top-bar\">\r\n    <div class=\"row\">\r\n      <img class=\"solution-logo\" src=\"{{solutionIconUrl}}\" />\r\n      <h1 class=\"solution-name\">{{solutionName}}</h1>\r\n      <div class=\"action-buttons\" #iconButtons>\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\"solutionSubtitle\">\r\n      <h2 class=\"solution-subtitle\">{{solutionSubtitle}}</h2>\r\n    </div>\r\n  </div>\r\n  <div class=\"outer-container\" [ngClass]=\"{'top-margin': contentHasScroll === false}\">\r\n    <div class=\"searchbar-container\" [ngClass]=\"gridWidthClass$ | async\" #searchbarContainer>\r\n      <avl-search-bar class=\"search-bar\" *ngIf=\"showSearchBar\"\r\n        #searchbar\r\n        always-open\r\n        (query-changed)=\"onQueryChange($event)\"\r\n        (search)=\"onSearch($event)\">\r\n      </avl-search-bar>\r\n    </div>\r\n    <div class=\"groups\" #groupsContainer>\r\n      <ng-container *ngFor=\"let group of groups\">\r\n        <div class=\"group-container\">\r\n          <div class=\"item-container\" #group [ngClass]=\"getMaxColumnsClass()\">\r\n            <ng-container *ngTemplateOutlet=\"groupTpl; context: { group: group }\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #groupTpl let-group=\"group\">\r\n  <h2 class=\"group-name\" *ngIf=\"group.title\">{{group.title}}</h2>\r\n  <div class=\"text-container\" *ngIf=\"group.header\">{{group.header}}</div>\r\n  <ng-container *ngFor=\"let item of group.items\">\r\n    <ng-container *ngIf=\"item.route\">\r\n      <a class=\"item\"\r\n         #itemElement\r\n         [routerLink]=\"item.route\"\r\n         [ngClass]=\"{'with-description': group.description}\"\r\n         tabindex=\"0\">\r\n        <ng-container *ngTemplateOutlet=\"buttonContent; context: { item: item }\">\r\n        </ng-container>\r\n      </a>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"item.link\">\r\n      <a class=\"item\"\r\n         #itemElement\r\n         [attr.href]=\"item.link\"\r\n         [attr.target]=\"item.target\"\r\n         [attr.rel]=\"item.target == '_blank' ? 'noopener' : null\"\r\n         [ngClass]=\"{'with-description': group.description}\"\r\n         tabindex=\"0\">\r\n        <ng-container *ngTemplateOutlet=\"buttonContent; context: { item: item }\">\r\n        </ng-container>\r\n      </a>\r\n    </ng-container>\r\n  </ng-container>\r\n  <div class=\"text-container\" *ngIf=\"group.footer\">{{group.footer}}</div>\r\n</ng-template>\r\n\r\n<ng-template #buttonContent let-item=\"item\">\r\n  <div class=\"icon-container\" [ngClass]=\"{'no-icon-circle': item.noIconCircle}\">\r\n    <avl-icon\r\n      *ngIf=\"item.icon\"\r\n      class=\"item-icon\"\r\n      [icon]=\"item.icon\">\r\n    </avl-icon>\r\n    <img *ngIf=\"item.iconUrl\" class=\"item-icon\" src=\"{{item.iconUrl}}\" />\r\n  </div>\r\n  <div class=\"icon-label\"><span class=\"label\">{{item.label}}</span></div>\r\n  <div class=\"description\">\r\n    <span class=\"text\">\r\n      {{item.description}}\r\n    </span>\r\n  </div>\r\n</ng-template>\r\n",
            styles: [":host{--avl-solution-overview-background-color:var(--avl-background-1-color);--avl-solution-overview-background-image:auto;--avl-solution-overview-text-color:var(--avl-foreground-color);--avl-solution-overview-title-color:var(--avl-foreground-color);--avl-solution-overview-subtitle-color:var(--avl-foreground-medium-color);--avl-solution-overview-item-background-color:var(\r\n    --avl-container-background-color\r\n  );--avl-solution-overview-item-hover-color:var(\r\n    --avl-container-background-product-hover-color,\r\n  );--avl-solution-overview-item-focus-color:var(\r\n    --avl-container-background-product-focus-color\r\n  );--avl-solution-overview-item-pressed-color:var(\r\n    --avl-container-background-product-pressed-color\r\n  );--avl-solution-overview-item-icon-circle-color:var(--avl-product-color);--avl-solution-overview-item-icon-color:var(--avl-on-primary-color);--avl-solution-overview-item-icon-color-no-circle:var(--avl-hint-color);--avl-solution-overview-item-description-color:var(\r\n    --avl-foreground-medium-color\r\n  );--avl-solution-overview-item-icon-pressed-color:var(\r\n    --avl-solution-overview-item-icon-color\r\n  );display:block;width:100%;--item-width:184px;--item-margin:24px;--total-width:calc(var(--item-width) + var(--item-margin));--total-height:100vh;height:var(--total-height);font-family:var(--avl-font-family)}.container{background-image:var(--avl-solution-overview-background-image);background-size:cover;background-color:var(--avl-solution-overview-background-color);height:100%;display:flex;flex-direction:column}.groups{margin-bottom:24px;width:99%;overflow-y:auto}.group-container{display:flex;width:100%;justify-content:center;position:relative}.outer-container{display:flex;align-items:center;flex-direction:column;justify-content:center;overflow:hidden;height:100%}.outer-container.top-margin{margin-top:-50px}.searchbar-container{display:flex;justify-content:space-between}.search-bar{padding-right:20px}.external-link-container,.item-container{display:grid;width:100%;margin:0 12px 2px;padding-top:24px;grid-template-columns:repeat(auto-fill,var(--item-width)) [end];grid-gap:var(--item-margin);justify-content:center}.text-container{color:var(--avl-solution-overview-text-color);grid-column:1/end}.max-columns-1{max-width:calc(var(--total-width) * 1)}.max-columns-2{max-width:calc(var(--total-width) * 2)}.max-columns-3{max-width:calc(var(--total-width) * 3)}.max-columns-4{max-width:calc(var(--total-width) * 4)}.max-columns-5{max-width:calc(var(--total-width) * 5)}.grid-width-1{width:calc(var(--total-width) * 1)}.grid-width-2{width:calc(var(--total-width) * 2)}.grid-width-3{width:calc(var(--total-width) * 3)}.grid-width-4{width:calc(var(--total-width) * 4)}.grid-width-5{width:calc(var(--total-width) * 5)}.item{position:relative;display:flex;flex-direction:column;align-items:center;padding:12px;width:var(--item-width);height:112px;box-sizing:border-box;background-color:var(--avl-solution-overview-item-background-color);outline:0;box-shadow:var(--avl-box-shadow-1dp);transition:box-shadow .15s cubic-bezier(.4,0,.2,1)}.item.with-description{height:204px}.description{display:none}.item.with-description .description{overflow:hidden;display:block;font-weight:400;text-align:center;font-size:14px;line-height:16px;color:var(--avl-foreground-medium-color)}.item:active,.item:focus,.item:hover{box-shadow:var(--avl-box-shadow-8dp)}.item:focus{background-color:var(--avl-solution-overview-item-focus-color)}.item:hover{background-color:var(--avl-solution-overview-item-hover-color)}.item:active{background-color:var(--avl-solution-overview-item-pressed-color)}.icon-container{background:var(--avl-solution-overview-item-icon-circle-color);display:flex;align-items:center;justify-content:center;width:48px;height:48px;min-height:48px;border-radius:50%}.icon-container.no-icon-circle{background:0 0}.no-icon-circle .item-icon{--avl-icon-custom-color:var(--avl-solution-overview-item-icon-color-no-circle)}.item-icon{width:24px;height:24px;--avl-icon-custom-color:var(--avl-solution-overview-item-icon-color)}.item:active .item-icon{--avl-icon-custom-color:var(--avl-solution-overview-item-icon-pressed-color)}.icon-label{display:flex;justify-content:center;flex-flow:column;width:100%;font-size:14px;line-height:16px;margin:8px 0;font-weight:500;text-align:center;height:32px;color:var(--avl-solution-overview-text-color)}.group-name{margin:0 0 -8px;font-weight:400;font-size:24px;color:var(--avl-solution-overview-text-color);grid-column:1/end}.solution-name{font-weight:400;font-size:24px;margin:0 0 0 32px;height:32px;line-height:32px;flex:auto;color:var(--avl-solution-overview-title-color)}.solution-subtitle{font-weight:400;font-size:20px;margin:0 0 0 64px;color:var(--avl-solution-overview-subtitle-color)}.top-bar{display:flex;flex-direction:column;padding:32px 32px 0}.top-bar .row{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;height:32px}.top-bar .row:last-child{margin-top:12px;height:24px}.action-buttons{margin-top:-8px;justify-self:flex-end;height:32px}.solution-logo{top:32px;left:32px;width:32px;height:32px}avl-search-bar{padding-top:20px}"]
        }),
        __metadata("design:paramtypes", [ChangeDetectorRef])
    ], AvlSolutionOverviewComponent);
    return AvlSolutionOverviewComponent;
}());
export { AvlSolutionOverviewComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhdmwtbmctY29udHJvbHMvbmF2aWdhdGlvbi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2F2bC1zb2x1dGlvbi1vdmVydmlldy9hdmwtc29sdXRpb24tb3ZlcnZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsWUFBWSxFQUNaLFNBQVMsRUFDVCxLQUFLLEVBQ0wsWUFBWSxFQUNaLE1BQU0sRUFDTixTQUFTLEVBQ1QsYUFBYSxFQUNiLE1BQU0sRUFDTixTQUFTLEVBQ1QsYUFBYSxFQUNiLFNBQVMsRUFDVCxpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBYyxjQUFjLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFekQsT0FBTywyQ0FBMkMsQ0FBQztBQUNuRCxPQUFPLHVEQUF1RCxDQUFDO0FBbUYvRDtJQUVFLHNDQUFvQixHQUFzQjtRQUF0QixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQXlEMUM7O1dBRUc7UUFFSSxzQkFBaUIsR0FBRyxJQUFJLFlBQVksRUFBVSxDQUFDO1FBRXREOztXQUVHO1FBRUksV0FBTSxHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7UUF5Qm5DLGVBQVUsR0FBRyxJQUFJLGVBQWUsQ0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBTTdDLHNCQUFpQixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLGFBQVEsR0FBRyxDQUFDLENBQUM7SUFuR3dC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dUJBQXVCO1lBQ2pDLGlvR0FBcUQ7O1NBRXRELENBQUM7eUNBR3lCLGlCQUFpQjtPQUYvQiw0QkFBNEIsQ0FxWXhDO0lBQUQsbUNBQUM7Q0FBQSxBQXJZRCxJQXFZQztTQXJZWSw0QkFBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBIb3N0TGlzdGVuZXIsXHJcbiAgRWxlbWVudFJlZixcclxuICBWaWV3Q2hpbGRyZW4sXHJcbiAgUXVlcnlMaXN0LFxyXG4gIElucHV0LFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBPdXRwdXQsXHJcbiAgVmlld0NoaWxkLFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgT25Jbml0LFxyXG4gIE9uQ2hhbmdlcyxcclxuICBTaW1wbGVDaGFuZ2VzLFxyXG4gIE9uRGVzdHJveSxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlLCBhc3luY1NjaGVkdWxlciwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRocm90dGxlVGltZSwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBLZXlib2FyZE5hdmlnYXRvciB9IGZyb20gJy4va2V5Ym9hcmQtbmF2aWdhdG9yJztcclxuXHJcbmltcG9ydCAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLWljb24vYXZsLWljb24nO1xyXG5pbXBvcnQgJ0BhdmwtY29udHJvbHMvY29yZS9kaXN0L2F2bC1zZWFyY2gtYmFyL2F2bC1zZWFyY2gtYmFyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXZsU29sdXRpb25PdmVydmlld0l0ZW0ge1xyXG4gIC8qKlxyXG4gICAqIExhYmVsIG9mIHRoZSBpdGVtLlxyXG4gICAqL1xyXG4gIGxhYmVsOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFJvdXRlciB3aGljaCB0byBuYXZpZ2F0ZSB0byB3aGVuIHRoZSBpdGVtIGlzIGNsaWNrZWQuXHJcbiAgICogU2hvdWxkbid0IGJlIHVzZWQgdG9nZXRoZXIgd2l0aCBsaW5rLlxyXG4gICAqL1xyXG4gIHJvdXRlPzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBVUkwgd2hpY2ggdG8gbmF2aWdhdGUgdG8gd2hlbiB0aGUgaXRlbSBpcyBjbGlja2VkLlxyXG4gICAqIFNob3VsZG4ndCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggcm91dGUuXHJcbiAgICovXHJcbiAgbGluaz86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogU3BlY2lmaWVzIHdoZXJlIHRvIG9wZW4gdGhlIGxpbmtlZCBkb2N1bWVudCAoX2JsYW5rIHwgX3NlbGYgfCBfcGFyZW50IHwgX3RvcCB8IGZyYW1lbmFtZSkuXHJcbiAgICogVXNlZCBvbmx5IHdoZW4gbGluayBpcyBzZXQuXHJcbiAgICovXHJcbiAgdGFyZ2V0Pzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBEZXNjcmlwdGlvbiBvZiB0aGUgaXRlbS5cclxuICAgKi9cclxuICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogSWNvbiBvZiB0aGUgaXRlbS5cclxuICAgKiBPbmx5IG9uZSBvZiBpY29uIGFuZCBpY29uVXJsIGNhbiBiZSB1c2VkLiBUaGUgb3RoZXIgc2hvdWxkIGJlIHVuZGVmaW5lZC5cclxuICAgKi9cclxuICBpY29uPzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBVUkwgb2YgdGhlIGljb24gaW1hZ2Ugb2YgdGhlIGl0ZW0uXHJcbiAgICogT25seSBvbmUgb2YgaWNvbiBhbmQgaWNvblVybCBjYW4gYmUgdXNlZC4gVGhlIG90aGVyIHNob3VsZCBiZSB1bmRlZmluZWQuXHJcbiAgICovXHJcbiAgaWNvblVybD86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogRG9uJ3Qgc2hvdyBjaXJjbGUgYXJvdW5kIGljb24uIERpZmZlcmVudCBjb2xvciB3aWxsIGJlIGFwcGxpZWQgdG8gaWNvbiBpZiBlbmFibGVkXHJcbiAgICogQ2lyY2xlIGlzIHZpc2libGUgYnkgZGVmYXVsdFxyXG4gICAqL1xyXG4gIG5vSWNvbkNpcmNsZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXZsU29sdXRpb25PdmVydmlld0dyb3VwIHtcclxuICAvKipcclxuICAgKiBJZiB0cnVlLCBhZGRpdGlvbmFsIHNwYWNlIGZvciBkZXNjcmlwdGlvbiB0ZXh0IHdpbGwgYmUgcHJvdmlkZWQuXHJcbiAgICogSXQgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdFxyXG4gICAqL1xyXG4gIGRlc2NyaXB0aW9uPzogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogVGl0bGUgZm9yIHRoZSBncm91cFxyXG4gICAqL1xyXG4gIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBUZXh0IGFib3ZlIGdyb3VwXHJcbiAgICovXHJcbiAgaGVhZGVyPzogc3RyaW5nO1xyXG5cclxuICAvKlxyXG4gICAqIFRleHQgYmVsb3cgZ3JvdXBcclxuICAgKi9cclxuICBmb290ZXI/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdyb3VwIGl0ZW1zXHJcbiAgICovXHJcbiAgaXRlbXM6IEF2bFNvbHV0aW9uT3ZlcnZpZXdJdGVtW107XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXZsLXNvbHV0aW9uLW92ZXJ2aWV3JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9hdmwtc29sdXRpb24tb3ZlcnZpZXcuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXZsU29sdXRpb25PdmVydmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHt9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogIyMjIFN0eWxpbmdcclxuICAgKiBUaGUgZm9sbG93aW5nIGN1c3RvbSBwcm9wZXJ0aWVzIGFyZSBhdmFpbGFibGUgZm9yIHN0eWxpbmc6XHJcbiAgICpcclxuICAgKiBDdXN0b20gcHJvcGVydHkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRGVzY3JpcHRpb24gICAgICAgICAgICAgICAgICAgICAgICB8IERlZmF1bHRcclxuICAgKiA6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctYmFja2dyb3VuZC1jb2xvcmAgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvciBvZiB0aGUgb3ZlcnZpZXcgICB8IGAtLWF2bC1iYWNrZ3JvdW5kLTEtY29sb3JgXHJcbiAgICogYC0tYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LXRleHQtY29sb3JgICAgICAgICAgICAgICB8IFRleHQgY29sb3IgICAgICAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtZm9yZWdyb3VuZC1jb2xvcmBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctaXRlbS1iYWNrZ3JvdW5kLWNvbG9yYCAgIHwgSXRlbSBiYWNrZ3JvdW5kIGNvbG9yICAgICAgICAgICAgICB8IGAtLWF2bC1jb250YWluZXItYmFja2dyb3VuZC1jb2xvcmBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctYmFja2dyb3VuZC1pbWFnZWAgICAgICAgIHwgQmFja2dyb3VuZCBpbWFnZSBvZiB0aGUgb3ZlcnZpZXcgICB8ICBhdXRvXHJcbiAgICogYC0tYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LWl0ZW0taG92ZXItY29sb3JgICAgICAgICB8IEl0ZW0gYmFja2dyb3VuZCBjb2xvciB3aGVuIGhvdmVyZWQgfCBgLS1hdmwtY29udGFpbmVyLWJhY2tncm91bmQtcHJvZHVjdC1ob3Zlci1jb2xvcmBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctaXRlbS1mb2N1cy1jb2xvcmAgICAgICAgIHwgSXRlbSBiYWNrZ3JvdW5kIGNvbG9yIHdoZW4gZm9jdXNlZCB8IGAtLWF2bC1jb250YWluZXItYmFja2dyb3VuZC1wcm9kdWN0LWZvY3VzLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1zb2x1dGlvbi1vdmVydmlldy1pdGVtLXByZXNzZWQtY29sb3JgICAgICAgfCBJdGVtIGJhY2tncm91bmQgY29sb3Igd2hlbiBwcmVzc2VkIHwgYC0tYXZsLWNvbnRhaW5lci1iYWNrZ3JvdW5kLXByb2R1Y3QtcHJlc3NlZC1jb2xvcmBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctdGl0bGUtY29sb3JgICAgICAgICAgICAgIHwgVGl0bGUgY29sb3IgICAgICAgICAgICAgICAgICAgICAgICB8IGAtLWF2bC1mb3JlZ3JvdW5kLWNvbG9yYGBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctc3VidGl0bGUtY29sb3JgICAgICAgICAgIHwgU3VidGl0bGUgY29sb3IgICAgICAgICAgICAgICAgICAgICB8IGAtLWF2bC1mb3JlZ3JvdW5kLW1lZGl1bS1jb2xvcmBgXHJcbiAgICogYC0tYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LWl0ZW0taWNvbi1jb2xvcmAgICAgICAgICB8IEl0ZW0gaWNvbiBjb2xvciAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtb24tcHJpbWFyeS1jb2xvcmBcclxuICAgKiBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctaXRlbS1pY29uLWNvbG9yLW5vLWNpcmNsZWAgfCBJdGVtIGljb24gY29sb3IgaWYgbm9JY29uQ2lyY2xlIGlzIHNldCB8IGAtLWF2bC1oaW50LWNvbG9yYFxyXG4gICAqIGAtLWF2bC1zb2x1dGlvbi1vdmVydmlldy1pdGVtLWljb24tY2lyY2xlLWNvbG9yYCAgfCBDb2xvciBmb3IgaWNvbiBjaXJjbGUgICAgICAgICAgICAgIHwgYC0tYXZsLXByb2R1Y3QtY29sb3JgXHJcbiAgICogYC0tYXZsLXNvbHV0aW9uLW92ZXJ2aWV3LWl0ZW0taWNvbi1wcmVzc2VkLWNvbG9yYCB8IEl0ZW0gaWNvbiBjb2xvciB3aGVuIHByZXNzZWQgICAgICAgfCBgLS1hdmwtc29sdXRpb24tb3ZlcnZpZXctaXRlbS1pY29uLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1zb2x1dGlvbi1vdmVydmlldy1pdGVtLWRlc2NyaXB0aW9uLWNvbG9yYCAgfCBJdGVtIGRlc2NyaXB0aW9uIHRleHQgY29sb3IgICAgICAgIHwgYC0tYXZsLWZvcmVncm91bmQtbWVkaXVtLWNvbG9yYFxyXG4gICAqL1xyXG4gIF9zdHlsaW5nOiBhbnk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdyb3VwcyBkZWZpbmluZyBzZWN0aW9ucyB3aXRoIGJ1dHRvbnNcclxuICAgKi9cclxuICBASW5wdXQoKVxyXG4gIGdyb3VwczogQXZsU29sdXRpb25PdmVydmlld0dyb3VwW107XHJcblxyXG4gIC8qKlxyXG4gICAqIFNvbHV0aW9uIG92ZXJ2aWV3IHRpdGxlLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHNvbHV0aW9uTmFtZTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBVUkwgb2YgdGhlIGljb24gaW1hZ2Ugb2YgdGhlIHNvbHV0aW9uIG92ZXJ2aWV3IHRpdGxlLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHNvbHV0aW9uSWNvblVybDogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBTb2x1dGlvbiBvdmVydmlldyBzdWJ0aXRsZS5cclxuICAgKi9cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBzb2x1dGlvblN1YnRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBGbGFnIGZvciB0aGUgb3B0aW9uYWwgc2VhcmNoIGJhci5cclxuICAgKiBJZiB0cnVlLCBzZWFyY2ggYmFyIGlzIHNob3duLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHNob3dTZWFyY2hCYXI6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIEVtaXRzIHNlYXJjaCBxdWVyeSBzdHJpbmcgb24gY2hhbmdlXHJcbiAgICovXHJcbiAgQE91dHB1dCgpXHJcbiAgcHVibGljIHNlYXJjaFF1ZXJ5Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEVtaXRzIHZhbHVlIG9mIHRoZSBzZWFyY2ggcXVlcnkgd2hlbiBzZWFyY2ggdHJpZ2dlcmVkXHJcbiAgICovXHJcbiAgQE91dHB1dCgpXHJcbiAgcHVibGljIHNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xyXG5cclxuICBncmlkV2lkdGhDbGFzcyQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkcmVuKCdpdGVtRWxlbWVudCcpIGJ1dHRvblJlZnM6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkcmVuKCdncm91cCcpIGdyb3VwRWxlbWVudFJlZnM6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCdzZWFyY2hiYXInKSBzZWFyY2hiYXJSZWY6IEVsZW1lbnRSZWY7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnaWNvbkJ1dHRvbnMnKSBpY29uQnV0dG9uc0NvbnRhaW5lcjogRWxlbWVudFJlZjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCdzZWFyY2hiYXJDb250YWluZXInKSBzZWFyY2hiYXJDb250YWluZXI6IEVsZW1lbnRSZWY7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnZ3JvdXBzQ29udGFpbmVyJykgZ3JvdXBzQ29udGFpbmVyOiBFbGVtZW50UmVmO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIGNvbnRlbnRIYXNTY3JvbGw6IGJvb2xlYW47XHJcblxyXG4gIHByaXZhdGUgZ3JpZFdpZHRoJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8bnVtYmVyPigtMSk7XHJcblxyXG4gIHByaXZhdGUgbGFzdEZvY3VzZWRFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgbWF4Q29sdW1uczogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIGxhcmdlc3RJdGVtc0luZGV4ID0gLTE7XHJcbiAgcHJpdmF0ZSBtYXhJdGVtcyA9IDA7XHJcblxyXG4gIC8vIGNhY2hlIHNjcmVlbldpZHRoIGZvciBtYXhDb2x1bW5zIGNhbGN1bGF0aW9uXHJcbiAgcHJpdmF0ZSBzY3JlZW5XaWR0aDogbnVtYmVyO1xyXG5cclxuICAvLyBjYWNoZSBpY29uIGJ1dHRvbnMgc2luY2UgdGhleSBjYW4gaGFyZGx5IGJlIGNoYW5nZWQgZHluYW1pY2FsbHlcclxuICBwcml2YXRlIGljb25CdXR0b25FbGVtZW50c0NhY2hlPzogSFRNTEVsZW1lbnRbXTtcclxuXHJcbiAgcHJpdmF0ZSBncm91cEVsZW1lbnRSZWZzQ2hhbmdlc1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICBwcml2YXRlIGdldCBncm91cHNPZkl0ZW1zKCk6IEhUTUxFbGVtZW50W11bXSB7XHJcbiAgICBsZXQgdiA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBnUmVmIG9mIHRoaXMuZ3JvdXBFbGVtZW50UmVmcykge1xyXG4gICAgICBjb25zdCBnRWwgPSBnUmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZ0VsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuaXRlbScpKTtcclxuXHJcbiAgICAgIHYgPSBbLi4udiwgaXRlbXNdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHY7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBpY29uQnV0dG9uRWxlbWVudHMoKTogSFRNTEVsZW1lbnRbXSB7XHJcbiAgICBpZiAodGhpcy5pY29uQnV0dG9uRWxlbWVudHNDYWNoZSA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzQ2FjaGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcclxuICAgICAgICAodGhpcy5pY29uQnV0dG9uc0NvbnRhaW5lclxyXG4gICAgICAgICAgLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2F2bC1pY29uLWJ1dHRvbicpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmljb25CdXR0b25FbGVtZW50c0NhY2hlO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLnNldHVwUmVmZXJlbmNlVmFycygpO1xyXG4gICAgdGhpcy5ncmlkV2lkdGhDbGFzcyQgPSB0aGlzLmdyaWRXaWR0aCQuYXNPYnNlcnZhYmxlKCkucGlwZShcclxuICAgICAgdGhyb3R0bGVUaW1lKDUwLCBhc3luY1NjaGVkdWxlciwge3RyYWlsaW5nOiB0cnVlfSksXHJcbiAgICAgIG1hcChncmlkV2lkdGggPT4ge1xyXG4gICAgICAgIHJldHVybiBgZ3JpZC13aWR0aC0ke2dyaWRXaWR0aH1gO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuZ3JvdXBFbGVtZW50UmVmc0NoYW5nZXNTdWJzY3JpcHRpb24pIHtcclxuICAgICAgdGhpcy5ncm91cEVsZW1lbnRSZWZzQ2hhbmdlc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgaWYgKCFjaGFuZ2VzLmdyb3Vwcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgdGhpcy5zZXR1cFJlZmVyZW5jZVZhcnMoKTtcclxuICAgICAgdGhpcy5ncmlkV2lkdGgkLm5leHQodGhpcy5nZXRHcmlkV2lkdGgoKSk7XHJcbiAgICAgIHRoaXMuc2V0VG9wTWFyZ2luKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMuc2V0VG9wTWFyZ2luKCk7XHJcbiAgICB0aGlzLnNldHVwRm9jdXNPcmRlcmluZygpO1xyXG4gICAgdGhpcy5ncmlkV2lkdGgkLm5leHQodGhpcy5nZXRHcmlkV2lkdGgoKSk7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIGdldE1heENvbHVtbnNDbGFzcygpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMubWF4Q29sdW1ucyAmJiB3aW5kb3cub3V0ZXJXaWR0aCA9PT0gdGhpcy5zY3JlZW5XaWR0aCkge1xyXG4gICAgICByZXR1cm4gYG1heC1jb2x1bW5zLSR7dGhpcy5tYXhDb2x1bW5zfWA7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5tYXhJdGVtcyA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF4Q29sdW1uczogbnVtYmVyO1xyXG4gICAgc3dpdGNoICh0aGlzLm1heEl0ZW1zKSB7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICBtYXhDb2x1bW5zID0gMTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICBjYXNlIDQ6XHJcbiAgICAgICAgbWF4Q29sdW1ucyA9IDI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgY2FzZSA1OlxyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgIGNhc2UgOTpcclxuICAgICAgICBtYXhDb2x1bW5zID0gMztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA3OlxyXG4gICAgICBjYXNlIDg6XHJcbiAgICAgIGNhc2UgMTE6XHJcbiAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgbWF4Q29sdW1ucyA9IDQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgbWF4Q29sdW1ucyA9IDU7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1heENvbHVtbnMgPSBtYXhDb2x1bW5zO1xyXG4gICAgcmV0dXJuIGBtYXgtY29sdW1ucy0ke21heENvbHVtbnN9YDtcclxuICB9XHJcblxyXG4gIC8qKiBAaGlkZGVuICoqL1xyXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnKVxyXG4gIG9uUmVzaXplKCkge1xyXG4gICAgdGhpcy5ncmlkV2lkdGgkLm5leHQodGhpcy5nZXRHcmlkV2lkdGgoKSk7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKVxyXG4gIG9uS2V5ZG93bkhhbmRsZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGNvbnN0IGdPZkl0ZW1zID0gdGhpcy5ncm91cHNPZkl0ZW1zO1xyXG4gICAgY29uc3QgbnVtR3JvdXBzID0gZ09mSXRlbXMubGVuZ3RoO1xyXG4gICAgaWYgKG51bUdyb3VwcyA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWN0aXZlRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgY29uc3QgaXNEb3duID0gWydEb3duJywgJ0Fycm93RG93biddLmluY2x1ZGVzKGV2ZW50LmtleSk7XHJcbiAgICBjb25zdCBpc1VwID0gWydVcCcsICdBcnJvd1VwJ10uaW5jbHVkZXMoZXZlbnQua2V5KTtcclxuICAgIGNvbnN0IGlzUmlnaHQgPSBbJ1JpZ2h0JywgJ0Fycm93UmlnaHQnXS5pbmNsdWRlcyhldmVudC5rZXkpO1xyXG4gICAgY29uc3QgaXNMZWZ0ID0gWydMZWZ0JywgJ0Fycm93TGVmdCddLmluY2x1ZGVzKGV2ZW50LmtleSk7XHJcbiAgICBjb25zdCBpc1RhYiA9IGV2ZW50LmtleSA9PT0gJ1RhYic7XHJcblxyXG4gICAgY29uc3Qgc2VhcmNoYmFyID0gdGhpcy5zaG93U2VhcmNoQmFyXHJcbiAgICAgID8gKHRoaXMuc2VhcmNoYmFyUmVmLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpXHJcbiAgICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICAgIGxldCBnTnVtOiBudW1iZXI7XHJcbiAgICBsZXQgaUlkeDogbnVtYmVyO1xyXG5cclxuICAgIGZvciAoY29uc3QgaXRlbXMgb2YgZ09mSXRlbXMpIHtcclxuICAgICAgaWYgKGl0ZW1zLmluZGV4T2YoYWN0aXZlRWwpICE9PSAtMSkge1xyXG4gICAgICAgIGlJZHggPSBpdGVtcy5pbmRleE9mKGFjdGl2ZUVsKTtcclxuICAgICAgICBnTnVtID0gZ09mSXRlbXMuaW5kZXhPZihpdGVtcyk7XHJcbiAgICAgICAgLy8gR28gdG8gcm91dGUgb24gJ1NwYWNlJy4gJ0VudGVyJyBhbHJlYWR5IHdvcmtzIG9uIDxhPi5cclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnICcpIHtcclxuICAgICAgICAgIGl0ZW1zW2lJZHhdLmNsaWNrKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzLmluY2x1ZGVzKGFjdGl2ZUVsKSkge1xyXG4gICAgICBjb25zdCBudW1JY29uQnV0dG9ucyA9IHRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzLmxlbmd0aDtcclxuICAgICAgY29uc3QgaWR4ID0gdGhpcy5pY29uQnV0dG9uRWxlbWVudHMuaW5kZXhPZihhY3RpdmVFbCk7XHJcbiAgICAgIGlmICgoaXNSaWdodCB8fCBpc1RhYikgJiYgaWR4ID09PSBudW1JY29uQnV0dG9ucyAtIDEpIHtcclxuICAgICAgICBpZiAoc2VhcmNoYmFyICE9IG51bGwpIHtcclxuICAgICAgICAgIHNlYXJjaGJhci5mb2N1cygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBnT2ZJdGVtc1swXVswXS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChpc0xlZnQgJiYgaWR4ID09PSAwKSB7XHJcbiAgICAgICAgY29uc3QgZyA9IGdPZkl0ZW1zW251bUdyb3VwcyAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGdMZW4gPSBnLmxlbmd0aDtcclxuICAgICAgICBnW2dMZW4gLSAxXS5mb2N1cygpO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzTGVmdCkge1xyXG4gICAgICAgIHRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzW2lkeCAtIDFdLmZvY3VzKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNSaWdodCkge1xyXG4gICAgICAgIHRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzW2lkeCArIDFdLmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpdGVtRWxlbWVudHMgPSBnT2ZJdGVtc1tnTnVtXTtcclxuICAgIGNvbnN0IGdyaWRXaWR0aCA9IHRoaXMuZ3JpZFdpZHRoJC52YWx1ZTtcclxuXHJcbiAgICBpZiAoc2VhcmNoYmFyICE9IG51bGwgJiYgaUlkeCA8IGdyaWRXaWR0aCAmJiBnTnVtID09PSAwICYmIGlzVXApIHtcclxuICAgICAgc2VhcmNoYmFyLmZvY3VzKCk7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAoaXNSaWdodCB8fCBpc1RhYikgJiZcclxuICAgICAgZ051bSA9PT0gZ09mSXRlbXMubGVuZ3RoIC0gMSAmJlxyXG4gICAgICBpSWR4ID09PSBpdGVtRWxlbWVudHMubGVuZ3RoIC0gMVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGljb25CdXR0b25zID0gdGhpcy5pY29uQnV0dG9uRWxlbWVudHM7XHJcbiAgICAgIGlmIChpY29uQnV0dG9ucyAhPSBudWxsICYmIGljb25CdXR0b25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBpY29uQnV0dG9uc1swXS5mb2N1cygpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoc2VhcmNoYmFyICE9IG51bGwgJiYgc2VhcmNoYmFyID09PSBhY3RpdmVFbCAmJiBpc0Rvd24pIHtcclxuICAgICAgZ09mSXRlbXNbMF1bMF0uZm9jdXMoKTtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0gZWxzZSBpZiAoZ051bSAhPSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IG5leHRHcm91cCA9IGdOdW0gPT09IGdPZkl0ZW1zLmxlbmd0aCAtIDEgPyB1bmRlZmluZWQgOiBnT2ZJdGVtc1tnTnVtICsgMV07XHJcbiAgICAgIGNvbnN0IHByZXZHcm91cCA9IGdOdW0gPT09IDAgPyB1bmRlZmluZWQgOiBnT2ZJdGVtc1tnTnVtIC0gMV07XHJcblxyXG4gICAgICBjb25zdCBuR0xlbiA9IG5leHRHcm91cCA9PSBudWxsID8gMCA6IG5leHRHcm91cC5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IHBHTGVuID0gcHJldkdyb3VwID09IG51bGwgPyAwIDogcHJldkdyb3VwLmxlbmd0aDtcclxuXHJcbiAgICAgIGNvbnN0IGtleWJvYXJkTmF2aWdhdG9yID0gbmV3IEtleWJvYXJkTmF2aWdhdG9yKFxyXG4gICAgICAgIGl0ZW1FbGVtZW50cy5sZW5ndGgsXHJcbiAgICAgICAgZ3JpZFdpZHRoXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGl0ZW1JbmRleFRvTW92ZVRvID0ga2V5Ym9hcmROYXZpZ2F0b3IubmF2aWdhdGUoXHJcbiAgICAgICAgaUlkeCxcclxuICAgICAgICBldmVudC5rZXksXHJcbiAgICAgICAgbkdMZW4sXHJcbiAgICAgICAgcEdMZW5cclxuICAgICAgKTtcclxuICAgICAgaWYgKGl0ZW1JbmRleFRvTW92ZVRvICE9IG51bGwpIHtcclxuICAgICAgICBpZiAoKGlzVXAgfHwgaXNMZWZ0KSAmJiBpdGVtSW5kZXhUb01vdmVUbyA8IDApIHtcclxuICAgICAgICAgIHByZXZHcm91cFtpdGVtSW5kZXhUb01vdmVUbyArIHBHTGVuXS5mb2N1cygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKGlzRG93biB8fCBpc1JpZ2h0KSAmJiBpSWR4ICsgMSA+IGl0ZW1JbmRleFRvTW92ZVRvKSB7XHJcbiAgICAgICAgICBuZXh0R3JvdXBbaXRlbUluZGV4VG9Nb3ZlVG9dLmZvY3VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdPZkl0ZW1zW2dOdW1dW2l0ZW1JbmRleFRvTW92ZVRvXS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIG9uUXVlcnlDaGFuZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5zZWFyY2hRdWVyeUNoYW5nZS5lbWl0KGV2ZW50LmRldGFpbC52YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIG9uU2VhcmNoKGV2ZW50OiBhbnkpIHtcclxuICAgIHRoaXMuc2VhcmNoLmVtaXQoZXZlbnQuZGV0YWlsLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0dXBSZWZlcmVuY2VWYXJzKCk6IHZvaWQge1xyXG4gICAgbGV0IG1heCA9IDA7XHJcbiAgICBmb3IgKGNvbnN0IGcgb2YgdGhpcy5ncm91cHMpIHtcclxuICAgICAgY29uc3QgaXRlbVN6ID0gZy5pdGVtcy5sZW5ndGg7XHJcbiAgICAgIGlmIChtYXggPCBpdGVtU3opIHtcclxuICAgICAgICBtYXggPSBpdGVtU3o7XHJcbiAgICAgICAgdGhpcy5sYXJnZXN0SXRlbXNJbmRleCA9IHRoaXMuZ3JvdXBzLmluZGV4T2YoZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubWF4SXRlbXMgPSBtYXg7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFRvcE1hcmdpbigpIHtcclxuICAgIHRoaXMuY29udGVudEhhc1Njcm9sbCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZ3JvdXBzQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLmNvbnRlbnRIYXNTY3JvbGwgPSBjb250ZW50LnNjcm9sbEhlaWdodCA+IGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRHcmlkV2lkdGgoKTogbnVtYmVyIHtcclxuICAgIGlmICh0aGlzLmxhcmdlc3RJdGVtc0luZGV4IDwgMCkge1xyXG4gICAgICB0aGlzLnNldHVwUmVmZXJlbmNlVmFycygpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmdyb3Vwc09mSXRlbXNbdGhpcy5sYXJnZXN0SXRlbXNJbmRleF07XHJcbiAgICBjb25zdCBmaXJzdEl0ZW1PZmZzZXRUb3AgPSBpdGVtc1swXS5vZmZzZXRUb3A7XHJcblxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgIGlmIChpdGVtLm9mZnNldFRvcCA+IGZpcnN0SXRlbU9mZnNldFRvcCkge1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgICB9XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuICAgIHJldHVybiBpdGVtcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldHVwRm9jdXNPcmRlcmluZygpIHtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnRzOiBIVE1MRWxlbWVudFtdID0gdGhpcy5idXR0b25SZWZzLm1hcChlbFJlZiA9PiBlbFJlZi5uYXRpdmVFbGVtZW50KTtcclxuICAgIGxldCBmb2N1c2FibGVFbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG5cclxuICAgIGlmICh0aGlzLnNob3dTZWFyY2hCYXIpIHtcclxuICAgICAgZm9jdXNhYmxlRWxlbWVudHMucHVzaCh0aGlzLnNlYXJjaGJhclJlZi5uYXRpdmVFbGVtZW50KTtcclxuICAgIH1cclxuICAgIGZvY3VzYWJsZUVsZW1lbnRzID0gW1xyXG4gICAgICAuLi5mb2N1c2FibGVFbGVtZW50cyxcclxuICAgICAgLi4uYnV0dG9uRWxlbWVudHMsXHJcbiAgICAgIC4uLnRoaXMuaWNvbkJ1dHRvbkVsZW1lbnRzXHJcbiAgICBdO1xyXG5cclxuICAgIGZvY3VzYWJsZUVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGV2ZW50OiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAodC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhdmwtaWNvbi1idXR0b24nKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5zaG93U2VhcmNoQmFyICYmIChcclxuICAgICAgICAgICAgWydib2R5JywgJ2h0bWwnXS5pbmNsdWRlcyhcclxuICAgICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgdGhpcy5sYXN0Rm9jdXNlZEVsID09IG51bGwgfHxcclxuICAgICAgICAgICAgICAodGhpcy5sYXN0Rm9jdXNlZEVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2F2bC1pY29uLWJ1dHRvbicgJiZcclxuICAgICAgICAgICAgICAgdGhpcy5sYXN0Rm9jdXNlZEVsICE9PSBidXR0b25FbGVtZW50c1tidXR0b25FbGVtZW50cy5sZW5ndGggLSAxXSlcclxuICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hiYXJSZWYubmF0aXZlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RGb2N1c2VkRWwgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==
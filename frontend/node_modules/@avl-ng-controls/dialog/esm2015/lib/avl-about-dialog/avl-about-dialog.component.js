var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import { Component, Input, Output, EventEmitter } from '@angular/core';
import '@avl-services/vanilla-js-services/avl-localization-service/avl-localization-service.api';
import '@avl-controls/core/dist/avl-button/avl-button';
import * as i0 from "@angular/core";
import * as i1 from "../avl-dialog/avl-dialog.component";
import * as i2 from "../avl-dialog/avl-dialog-content/avl-dialog-content.component";
import * as i3 from "@avl-ng-controls/common";
import * as i4 from "@angular/common";
import * as i5 from "@avl-controls/ng-binders";
export class AvlAboutDialogComponent {
    constructor() {
        this._open = false;
        this.openChange = new EventEmitter();
    }
    set open(value) {
        this._open = value;
        this.openChange.emit(this._open);
    }
    get open() {
        return this._open;
    }
    ngOnInit() {
        this.translateLabels();
    }
    translateLabels() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!AvlLocalizationService || !AvlLocalizationService.translationService) {
                return;
            }
            const translationService = AvlLocalizationService.translationService;
            this.avlAboutDialogInfo.productName = yield this.validateAndTranslate(this.avlAboutDialogInfo.productName);
            this.avlAboutDialogInfo.brandPromise = yield this.validateAndTranslate(this.avlAboutDialogInfo.brandPromise);
            this.avlAboutDialogInfo.versionInfo = yield this.translateVersionInfo(this.avlAboutDialogInfo.versionInfo);
            this.avlAboutDialogInfo.legalText = yield this.validateAndTranslate(this.avlAboutDialogInfo.legalText);
            this.avlAboutDialogInfo.additionalInfoLabel = yield this.validateAndTranslate(this.avlAboutDialogInfo.additionalInfoLabel);
            this.avlAboutDialogInfo.okButtonLabel = this.avlAboutDialogInfo.okButtonLabel
                ? yield translationService.translate(this.avlAboutDialogInfo.okButtonLabel)
                : 'OK';
        });
    }
    validateAndTranslate(key) {
        return __awaiter(this, void 0, void 0, function* () {
            const translateService = AvlLocalizationService.translationService;
            return key ? yield translateService.translate(key) : key;
        });
    }
    translateVersionInfo(versionInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            return versionInfo
                ? yield Promise.all(versionInfo.map((item) => __awaiter(this, void 0, void 0, function* () { return yield this.translateVersionInfoItem(item); })))
                : versionInfo;
        });
    }
    translateVersionInfoItem(item) {
        return __awaiter(this, void 0, void 0, function* () {
            const translateService = AvlLocalizationService.translationService;
            return Object.assign(Object.assign({}, item), { label: yield translateService.translate(item.label) });
        });
    }
    closeDialog() {
        this.open = false;
    }
    /** @hidden */
    openChanged(value) {
        this.open = value;
    }
}
AvlAboutDialogComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: AvlAboutDialogComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
AvlAboutDialogComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.0.3", type: AvlAboutDialogComponent, selector: "avl-about-dialog", inputs: { avlAboutDialogInfo: "avlAboutDialogInfo", open: "open" }, outputs: { openChange: "openChange" }, ngImport: i0, template: "<ng-template #aboutContent>\r\n  <div class=\"about-content\">\r\n    <div class=\"product-title-holder\">\r\n      <div class=\"product-icon\">\r\n        <img src=\"{{ avlAboutDialogInfo.productLogo }}\" class=\"logo-img\" alt=\"logo\" />\r\n      </div>\r\n      <div class=\"product-title\">\r\n        <div class=\"product-name\">{{ avlAboutDialogInfo.productName }}</div>\r\n        <div class=\"brand-promise\">{{ avlAboutDialogInfo.brandPromise }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"version-info\">\r\n      <div class=\"version-info-item\" *ngFor=\"let infoLabel of avlAboutDialogInfo.versionInfo\">\r\n        {{ infoLabel.label }}: {{ infoLabel.value }}\r\n      </div>\r\n    </div>\r\n    <div class=\"legal-text\">{{ avlAboutDialogInfo.legalText }}</div>\r\n    <div class=\"additional-info\">\r\n      <a href=\"{{ avlAboutDialogInfo.additionalInfoUrl }}\" target=\"_blank\" rel=\"noopener noreferrer\">{{\r\n        avlAboutDialogInfo.additionalInfoLabel\r\n      }}</a>\r\n    </div>\r\n    <div class=\"ok-button\">\r\n      <avl-button (click)=\"closeDialog()\" contained>{{ avlAboutDialogInfo.okButtonLabel }}</avl-button>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<avl-dialog id=\"dialog\" [(open)]=\"open\" (openChange)=\"openChanged($event)\">\r\n  <ng-template #content>\r\n    <avl-dialog-content>\r\n      <ng-container *ngTemplateOutlet=\"aboutContent\"></ng-container>\r\n      <avl-footer companyLogo=\"./assets/images/avl_logo_inverse_48px.svg\" currentYear=\"2021\"> </avl-footer>\r\n    </avl-dialog-content>\r\n  </ng-template>\r\n</avl-dialog>\r\n\r\n<div *ngIf=\"open\" class=\"full-screen-about\">\r\n  <ng-container *ngTemplateOutlet=\"aboutContent\"></ng-container>\r\n  <div class=\"spacer\"></div>\r\n  <avl-footer companyLogo=\"./assets/images/avl_logo_inverse_48px.svg\" currentYear=\"2021\"> </avl-footer>\r\n</div>\r\n\r\n", styles: [":host{font-family:var(--avl-font-family);--avl-about-dialog-foreground-color:var(--avl-corporate-foreground-color);--avl-about-dialog-foreground-medium-color:var(--avl-corporate-foreground-medium-color);--avl-about-dialog-link-color:var(--avl-corporate-link-color);--avl-about-dialog-link-hover-color:var(--avl-corporate-link-hover-color);--avl-about-dialog-on-button-background-color:var(--avl-corporate-on-button-background-color);--avl-about-dialog-button-background-color:var(--avl-corporate-button-background-color);--avl-about-dialog-button-background-hover-color:var(\r\n    --avl-corporate-button-background-hover-color\r\n  );--avl-about-dialog-button-background-focus-color:var(\r\n    --avl-corporate-button-background-focus-color\r\n  );--avl-about-dialog-button-background-pressed-color:var(\r\n    --avl-corporate-button-background-pressed-color\r\n  );--dialog-padding:48px;--product-logo-size:146px;--product-name-font-size:34px;--margin-above-ok-button:24px;--margin-above-additional-info:8px;--distance-between-version-info-items:8px;--margin-above-version-info:56px}@media (max-width:960px) and (min-width:400px){:host{--dialog-padding:24px 24px 40px 24px;--margin-above-version-info:24px}.product-icon{margin-bottom:24px}.product-title-holder{flex-wrap:wrap}}@media (max-width:400px){:host{--dialog-padding:16px 16px 32px 16px;--product-logo-size:48px;--product-name-font-size:24px;--distance-to-link-for-additional-info:24px;--distance-between-version-info-items:4px;--margin-above-version-info:24px}.product-icon{width:100%;margin-bottom:24px}.product-title-holder{flex-wrap:wrap}}.full-screen-about{display:none}@media (max-width:864px){#dialog{display:none}.spacer{flex:1 1 100%;background-color:var(--avl-corporate-menu-background-color)}.full-screen-about{display:flex;flex-direction:column}.full-screen-about avl-footer{flex:1 0 48px}.full-screen-about .about-content{flex:1 0 auto}}avl-dialog{--avl-dialog-width:768px;--avl-dialog-text-color:var(--avl-about-dialog-foreground-medium-color);--avl-dialog-background-color:var(--avl-corporate-menu-background-color)}avl-dialog-footer{padding:0}.about-content,avl-footer{background-color:var(--avl-corporate-menu-background-color);width:100%}.about-content{display:flex;flex-direction:column;justify-content:flex-start;padding:var(--dialog-padding);box-sizing:border-box;font-size:14px;line-height:19px;overflow:auto}.full-screen-about{position:fixed;top:0;left:0;bottom:0;right:0;overflow:auto;z-index:302}avl-dialog-content{padding:0}.product-title-holder{display:flex;align-items:center}.product-title{flex:1 1 100%}.product-icon{height:var(--product-logo-size);width:auto;margin-right:24px}.product-icon img{height:100%}.product-name{font-size:var(--product-name-font-size)}.brand-promise,.product-name{line-height:1;color:var(--avl-about-dialog-foreground-color)}.brand-promise{font-size:16px;margin-top:8px}.version-info{margin-top:var(--margin-above-version-info);color:hsla(0,0%,100%,.7)}.version-info-item{margin-bottom:var(--distance-between-version-info-items)}.version-info-item:last-child{margin-bottom:0}.legal-text{margin-top:24px;color:var(--avl-about-dialog-foreground-color)}.additional-info{margin-top:var(--margin-above-additional-info);color:var(--avl-corporate-link)}.additional-info:hover{color:var(--avl-corporate-link-hover)}.ok-button{margin-top:var(--margin-above-ok-button)}.ok-button avl-button{float:right}avl-button{--avl-button-label-color:var(--avl-about-dialog-on-button-background-color);--avl-button-background-default-color:var(--avl-about-dialog-button-background-color);--avl-button-background-hover-color:var(--avl-about-dialog-button-background-hover-color);--avl-button-background-focus-color:var(--avl-about-dialog-button-background-focus-color);--avl-button-background-pressed-color:var(--avl-about-dialog-button-background-pressed-color);font-size:14px}"], components: [{ type: i1.AvlDialogComponent, selector: "avl-dialog", inputs: ["closeOnScrimClick", "complex", "warningHeaderText", "warningDialogText", "fullscreen", "open", "dirty", "warningOnClose"], outputs: ["openChange"] }, { type: i2.AvlDialogContentComponent, selector: "avl-dialog-content" }, { type: i3.AvlFooterComponent, selector: "avl-footer", inputs: ["companyLogo", "currentYear"] }], directives: [{ type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i5.AvlInteractionControlDirective, selector: "avl-button,avl-icon-button,avl-item,avl-search-bar,avl-radio-button,avl-upload,avl-snackbar", outputs: ["focusedChange"] }, { type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: AvlAboutDialogComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'avl-about-dialog',
                    templateUrl: './avl-about-dialog.component.html',
                    styleUrls: ['./avl-about-dialog.component.css']
                }]
        }], ctorParameters: function () { return []; }, propDecorators: { avlAboutDialogInfo: [{
                type: Input
            }], open: [{
                type: Input
            }], openChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLWFib3V0LWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9kaWFsb2cvc3JjL2xpYi9hdmwtYWJvdXQtZGlhbG9nL2F2bC1hYm91dC1kaWFsb2cuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvZGlhbG9nL3NyYy9saWIvYXZsLWFib3V0LWRpYWxvZy9hdmwtYWJvdXQtZGlhbG9nLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFFL0UsT0FBTyx5RkFBeUYsQ0FBQztBQUNqRyxPQUFPLCtDQUErQyxDQUFDOzs7Ozs7O0FBUXZELE1BQU0sT0FBTyx1QkFBdUI7SUFpQ2xDO1FBOUJRLFVBQUssR0FBRyxLQUFLLENBQUM7UUFTWixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztJQXFCcEMsQ0FBQztJQTdCaEIsSUFDSSxJQUFJLENBQUMsS0FBYztRQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUNELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBd0JNLFFBQVE7UUFDYixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVhLGVBQWU7O1lBQzNCLElBQUksQ0FBQyxzQkFBc0IsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGtCQUFrQixFQUFFO2dCQUN6RSxPQUFPO2FBQ1I7WUFFRCxNQUFNLGtCQUFrQixHQUFHLHNCQUFzQixDQUFDLGtCQUFrQixDQUFDO1lBRXJFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUMsb0JBQW9CLENBQ25FLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQ3BDLENBQUM7WUFDRixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxHQUFHLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUNwRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUNyQyxDQUFDO1lBQ0YsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQyxvQkFBb0IsQ0FDbkUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FDcEMsQ0FBQztZQUNGLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLENBQUMsb0JBQW9CLENBQ2pFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQ2xDLENBQUM7WUFDRixJQUFJLENBQUMsa0JBQWtCLENBQUMsbUJBQW1CLEdBQUcsTUFBTSxJQUFJLENBQUMsb0JBQW9CLENBQzNFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxtQkFBbUIsQ0FDNUMsQ0FBQztZQUNGLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWE7Z0JBQzNFLENBQUMsQ0FBQyxNQUFNLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDO2dCQUMzRSxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1gsQ0FBQztLQUFBO0lBRWEsb0JBQW9CLENBQUMsR0FBVzs7WUFDNUMsTUFBTSxnQkFBZ0IsR0FBRyxzQkFBc0IsQ0FBQyxrQkFBa0IsQ0FBQztZQUNuRSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUMzRCxDQUFDO0tBQUE7SUFFYSxvQkFBb0IsQ0FBQyxXQUEwQjs7WUFDM0QsT0FBTyxXQUFXO2dCQUNoQixDQUFDLENBQUMsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBTSxJQUFJLEVBQUMsRUFBRSxnREFBQyxPQUFBLE1BQU0sSUFBSSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxDQUFBLEdBQUEsQ0FBQyxDQUFDO2dCQUM3RixDQUFDLENBQUMsV0FBVyxDQUFDO1FBQ2xCLENBQUM7S0FBQTtJQUVhLHdCQUF3QixDQUFDLElBQWlCOztZQUN0RCxNQUFNLGdCQUFnQixHQUFHLHNCQUFzQixDQUFDLGtCQUFrQixDQUFDO1lBQ25FLHVDQUNLLElBQUksS0FDUCxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUNuRDtRQUNKLENBQUM7S0FBQTtJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBRUQsY0FBYztJQUNkLFdBQVcsQ0FBQyxLQUFjO1FBQ3hCLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO0lBQ3BCLENBQUM7O29IQTVGVSx1QkFBdUI7d0dBQXZCLHVCQUF1QixtS0NYcEMsODJEQTRDQTsyRkRqQ2EsdUJBQXVCO2tCQUxuQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxrQkFBa0I7b0JBQzVCLFdBQVcsRUFBRSxtQ0FBbUM7b0JBQ2hELFNBQVMsRUFBRSxDQUFDLGtDQUFrQyxDQUFDO2lCQUNoRDswRUFFVSxrQkFBa0I7c0JBQTFCLEtBQUs7Z0JBSUYsSUFBSTtzQkFEUCxLQUFLO2dCQVFJLFVBQVU7c0JBQW5CLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgJ0Bhdmwtc2VydmljZXMvdmFuaWxsYS1qcy1zZXJ2aWNlcy9hdmwtbG9jYWxpemF0aW9uLXNlcnZpY2UvYXZsLWxvY2FsaXphdGlvbi1zZXJ2aWNlLmFwaSc7XHJcbmltcG9ydCAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLWJ1dHRvbi9hdmwtYnV0dG9uJztcclxuaW1wb3J0IHsgQXZsQWJvdXREaWFsb2dJbmZvLCBWZXJzaW9uSW5mbyB9IGZyb20gJy4vYXZsLWFib3V0LWRpYWxvZy5tb2RlbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2F2bC1hYm91dC1kaWFsb2cnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hdmwtYWJvdXQtZGlhbG9nLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9hdmwtYWJvdXQtZGlhbG9nLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXZsQWJvdXREaWFsb2dDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBJbnB1dCgpIGF2bEFib3V0RGlhbG9nSW5mbzogQXZsQWJvdXREaWFsb2dJbmZvO1xyXG5cclxuICBwcml2YXRlIF9vcGVuID0gZmFsc2U7XHJcbiAgQElucHV0KClcclxuICBzZXQgb3Blbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5fb3BlbiA9IHZhbHVlO1xyXG4gICAgdGhpcy5vcGVuQ2hhbmdlLmVtaXQodGhpcy5fb3Blbik7XHJcbiAgfVxyXG4gIGdldCBvcGVuKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29wZW47XHJcbiAgfVxyXG4gIEBPdXRwdXQoKSBvcGVuQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqICMjIyBTdHlsaW5nXHJcbiAgICogVGhlIGZvbGxvd2luZyBjdXN0b20gcHJvcGVydGllcyBhcmUgYXZhaWxhYmxlIGZvciBzdHlsaW5nOlxyXG4gICAqXHJcbiAgICogQ3VzdG9tIHByb3BlcnR5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERlZmF1bHRcclxuICAgKiA6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctZm9yZWdyb3VuZC1jb2xvcmAgICAgICAgICAgICAgICAgfCBNYWluIGZvcmVncm91bmQgY29sb3IgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLWZvcmVncm91bmQtY29sb3JgXHJcbiAgICogYC0tYXZsLWFib3V0LWRpYWxvZy1mb3JlZ3JvdW5kLW1lZGl1bS1jb2xvcmAgICAgICAgICB8IEZvcmdyb3VuZCBjb2xvciBmb3IgdmVyc2lvbiBpbmZvcm1hdGlvbiB8IGAtLWF2bC1jb3Jwb3JhdGUtZm9yZWdyb3VuZC1tZWRpdW0tY29sb3JgXHJcbiAgICogYC0tYXZsLWFib3V0LWRpYWxvZy1saW5rLWNvbG9yYCAgICAgICAgICAgICAgICAgICAgICB8IExpbmsgY29sb3IgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGAtLWF2bC1jb3Jwb3JhdGUtbGluay1jb2xvcmBcclxuICAgKiBgLS1hdmwtYWJvdXQtZGlhbG9nLWxpbmstaG92ZXItY29sb3JgICAgICAgICAgICAgICAgIHwgTGluayBob3ZlciBjb2xvciAgICAgICAgICAgICAgICAgICAgICAgIHwgYC0tYXZsLWNvcnBvcmF0ZS1saW5rLWhvdmVyLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctb24tYnV0dG9uLWJhY2tncm91bmQtY29sb3JgICAgICAgfCBCdXR0b24gdGV4dCBjb2xvciAgICAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLW9uLWJ1dHRvbi1iYWNrZ3JvdW5kLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctYnV0dG9uLWJhY2tncm91bmQtY29sb3JgICAgICAgICAgfCBCdXR0b24gYmFja2dyb3VuZCBjb2xvciAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLWJ1dHRvbi1iYWNrZ3JvdW5kLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctYnV0dG9uLWJhY2tncm91bmQtaG92ZXItY29sb3JgICAgfCBCdXR0b24gaG92ZXIgY29sb3IgICAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLWJ1dHRvbi1iYWNrZ3JvdW5kLWhvdmVyLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctYnV0dG9uLWJhY2tncm91bmQtZm9jdXMtY29sb3JgICAgfCBCdXR0b24gZm9jdXMgY29sb3IgICAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLWJ1dHRvbi1iYWNrZ3JvdW5kLWZvY3VzLWNvbG9yYFxyXG4gICAqIGAtLWF2bC1hYm91dC1kaWFsb2ctYnV0dG9uLWJhY2tncm91bmQtcHJlc3NlZC1jb2xvcmAgfCBCdXR0b24gcHJlc3NlZCBjb2xvciAgICAgICAgICAgICAgICAgICAgfCBgLS1hdmwtY29ycG9yYXRlLWJ1dHRvbi1iYWNrZ3JvdW5kLXByZXNzZWQtY29sb3JgICpcclxuICAgKi9cclxuICBfc3R5bGluZzogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMudHJhbnNsYXRlTGFiZWxzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyYW5zbGF0ZUxhYmVscygpIHtcclxuICAgIGlmICghQXZsTG9jYWxpemF0aW9uU2VydmljZSB8fCAhQXZsTG9jYWxpemF0aW9uU2VydmljZS50cmFuc2xhdGlvblNlcnZpY2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uU2VydmljZSA9IEF2bExvY2FsaXphdGlvblNlcnZpY2UudHJhbnNsYXRpb25TZXJ2aWNlO1xyXG5cclxuICAgIHRoaXMuYXZsQWJvdXREaWFsb2dJbmZvLnByb2R1Y3ROYW1lID0gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFRyYW5zbGF0ZShcclxuICAgICAgdGhpcy5hdmxBYm91dERpYWxvZ0luZm8ucHJvZHVjdE5hbWVcclxuICAgICk7XHJcbiAgICB0aGlzLmF2bEFib3V0RGlhbG9nSW5mby5icmFuZFByb21pc2UgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQW5kVHJhbnNsYXRlKFxyXG4gICAgICB0aGlzLmF2bEFib3V0RGlhbG9nSW5mby5icmFuZFByb21pc2VcclxuICAgICk7XHJcbiAgICB0aGlzLmF2bEFib3V0RGlhbG9nSW5mby52ZXJzaW9uSW5mbyA9IGF3YWl0IHRoaXMudHJhbnNsYXRlVmVyc2lvbkluZm8oXHJcbiAgICAgIHRoaXMuYXZsQWJvdXREaWFsb2dJbmZvLnZlcnNpb25JbmZvXHJcbiAgICApO1xyXG4gICAgdGhpcy5hdmxBYm91dERpYWxvZ0luZm8ubGVnYWxUZXh0ID0gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFRyYW5zbGF0ZShcclxuICAgICAgdGhpcy5hdmxBYm91dERpYWxvZ0luZm8ubGVnYWxUZXh0XHJcbiAgICApO1xyXG4gICAgdGhpcy5hdmxBYm91dERpYWxvZ0luZm8uYWRkaXRpb25hbEluZm9MYWJlbCA9IGF3YWl0IHRoaXMudmFsaWRhdGVBbmRUcmFuc2xhdGUoXHJcbiAgICAgIHRoaXMuYXZsQWJvdXREaWFsb2dJbmZvLmFkZGl0aW9uYWxJbmZvTGFiZWxcclxuICAgICk7XHJcbiAgICB0aGlzLmF2bEFib3V0RGlhbG9nSW5mby5va0J1dHRvbkxhYmVsID0gdGhpcy5hdmxBYm91dERpYWxvZ0luZm8ub2tCdXR0b25MYWJlbFxyXG4gICAgICA/IGF3YWl0IHRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGUodGhpcy5hdmxBYm91dERpYWxvZ0luZm8ub2tCdXR0b25MYWJlbClcclxuICAgICAgOiAnT0snO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUFuZFRyYW5zbGF0ZShrZXk6IHN0cmluZykge1xyXG4gICAgY29uc3QgdHJhbnNsYXRlU2VydmljZSA9IEF2bExvY2FsaXphdGlvblNlcnZpY2UudHJhbnNsYXRpb25TZXJ2aWNlO1xyXG4gICAgcmV0dXJuIGtleSA/IGF3YWl0IHRyYW5zbGF0ZVNlcnZpY2UudHJhbnNsYXRlKGtleSkgOiBrZXk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyYW5zbGF0ZVZlcnNpb25JbmZvKHZlcnNpb25JbmZvOiBWZXJzaW9uSW5mb1tdKTogUHJvbWlzZTxWZXJzaW9uSW5mb1tdPiB7XHJcbiAgICByZXR1cm4gdmVyc2lvbkluZm9cclxuICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbCh2ZXJzaW9uSW5mby5tYXAoYXN5bmMgaXRlbSA9PiBhd2FpdCB0aGlzLnRyYW5zbGF0ZVZlcnNpb25JbmZvSXRlbShpdGVtKSkpXHJcbiAgICAgIDogdmVyc2lvbkluZm87XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyYW5zbGF0ZVZlcnNpb25JbmZvSXRlbShpdGVtOiBWZXJzaW9uSW5mbyk6IFByb21pc2U8VmVyc2lvbkluZm8+IHtcclxuICAgIGNvbnN0IHRyYW5zbGF0ZVNlcnZpY2UgPSBBdmxMb2NhbGl6YXRpb25TZXJ2aWNlLnRyYW5zbGF0aW9uU2VydmljZTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLml0ZW0sXHJcbiAgICAgIGxhYmVsOiBhd2FpdCB0cmFuc2xhdGVTZXJ2aWNlLnRyYW5zbGF0ZShpdGVtLmxhYmVsKVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIG9wZW5DaGFuZ2VkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLm9wZW4gPSB2YWx1ZTtcclxuICB9XHJcbn1cclxuIiwiPG5nLXRlbXBsYXRlICNhYm91dENvbnRlbnQ+XHJcbiAgPGRpdiBjbGFzcz1cImFib3V0LWNvbnRlbnRcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LXRpdGxlLWhvbGRlclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1pY29uXCI+XHJcbiAgICAgICAgPGltZyBzcmM9XCJ7eyBhdmxBYm91dERpYWxvZ0luZm8ucHJvZHVjdExvZ28gfX1cIiBjbGFzcz1cImxvZ28taW1nXCIgYWx0PVwibG9nb1wiIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC10aXRsZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LW5hbWVcIj57eyBhdmxBYm91dERpYWxvZ0luZm8ucHJvZHVjdE5hbWUgfX08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYnJhbmQtcHJvbWlzZVwiPnt7IGF2bEFib3V0RGlhbG9nSW5mby5icmFuZFByb21pc2UgfX08L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwidmVyc2lvbi1pbmZvXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ2ZXJzaW9uLWluZm8taXRlbVwiICpuZ0Zvcj1cImxldCBpbmZvTGFiZWwgb2YgYXZsQWJvdXREaWFsb2dJbmZvLnZlcnNpb25JbmZvXCI+XHJcbiAgICAgICAge3sgaW5mb0xhYmVsLmxhYmVsIH19OiB7eyBpbmZvTGFiZWwudmFsdWUgfX1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJsZWdhbC10ZXh0XCI+e3sgYXZsQWJvdXREaWFsb2dJbmZvLmxlZ2FsVGV4dCB9fTwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImFkZGl0aW9uYWwtaW5mb1wiPlxyXG4gICAgICA8YSBocmVmPVwie3sgYXZsQWJvdXREaWFsb2dJbmZvLmFkZGl0aW9uYWxJbmZvVXJsIH19XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPnt7XHJcbiAgICAgICAgYXZsQWJvdXREaWFsb2dJbmZvLmFkZGl0aW9uYWxJbmZvTGFiZWxcclxuICAgICAgfX08L2E+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJvay1idXR0b25cIj5cclxuICAgICAgPGF2bC1idXR0b24gKGNsaWNrKT1cImNsb3NlRGlhbG9nKClcIiBjb250YWluZWQ+e3sgYXZsQWJvdXREaWFsb2dJbmZvLm9rQnV0dG9uTGFiZWwgfX08L2F2bC1idXR0b24+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9uZy10ZW1wbGF0ZT5cclxuXHJcbjxhdmwtZGlhbG9nIGlkPVwiZGlhbG9nXCIgWyhvcGVuKV09XCJvcGVuXCIgKG9wZW5DaGFuZ2UpPVwib3BlbkNoYW5nZWQoJGV2ZW50KVwiPlxyXG4gIDxuZy10ZW1wbGF0ZSAjY29udGVudD5cclxuICAgIDxhdmwtZGlhbG9nLWNvbnRlbnQ+XHJcbiAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJhYm91dENvbnRlbnRcIj48L25nLWNvbnRhaW5lcj5cclxuICAgICAgPGF2bC1mb290ZXIgY29tcGFueUxvZ289XCIuL2Fzc2V0cy9pbWFnZXMvYXZsX2xvZ29faW52ZXJzZV80OHB4LnN2Z1wiIGN1cnJlbnRZZWFyPVwiMjAyMVwiPiA8L2F2bC1mb290ZXI+XHJcbiAgICA8L2F2bC1kaWFsb2ctY29udGVudD5cclxuICA8L25nLXRlbXBsYXRlPlxyXG48L2F2bC1kaWFsb2c+XHJcblxyXG48ZGl2ICpuZ0lmPVwib3BlblwiIGNsYXNzPVwiZnVsbC1zY3JlZW4tYWJvdXRcIj5cclxuICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiYWJvdXRDb250ZW50XCI+PC9uZy1jb250YWluZXI+XHJcbiAgPGRpdiBjbGFzcz1cInNwYWNlclwiPjwvZGl2PlxyXG4gIDxhdmwtZm9vdGVyIGNvbXBhbnlMb2dvPVwiLi9hc3NldHMvaW1hZ2VzL2F2bF9sb2dvX2ludmVyc2VfNDhweC5zdmdcIiBjdXJyZW50WWVhcj1cIjIwMjFcIj4gPC9hdmwtZm9vdGVyPlxyXG48L2Rpdj5cclxuXHJcbiJdfQ==
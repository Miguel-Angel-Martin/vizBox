import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '@avl-controls/ng-binders';
import * as ɵngcc3 from '@ngx-translate/core';

var _c0 = ["list"];
function AvlNotificationMenuComponent_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" (", ctx_r0.numberOfUnreadNotifications, ") ");
} }
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (this && this.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { NOTIFICATIONS_OVERFLOW_MENU, TYPE_ICON_MAPPINGS } from './avl-notification-menu.consts';
var AvlNotificationMenuComponent = /** @class */ (function () {
    function AvlNotificationMenuComponent() {
        var _this = this;
        this.open = false;
        this.openChange = new EventEmitter();
        this.openDetails = new EventEmitter();
        this.notificationStateChanged = new EventEmitter();
        this.markAllAsRead = new EventEmitter();
        this.markAllAsUnread = new EventEmitter();
        this.overflowMenuItems = [];
        this.notificationList = [];
        this.numberOfUnreadNotifications = 0;
        this.overflowMenuHandlers = {
            markAllAsRead: function () {
                _this.markAllAsRead.emit();
                _this.numberOfUnreadNotifications = 0;
            },
            markAllAsUnread: function () {
                _this.markAllAsUnread.emit();
                _this.numberOfUnreadNotifications = _this.notificationList.length;
            },
            undefined: function () { }
        };
        this.translateLabels();
    }
    Object.defineProperty(AvlNotificationMenuComponent.prototype, "notifications", {
        set: function (notifications) {
            this.notificationList = this.prepareNotifications(notifications);
            this.numberOfUnreadNotifications = notifications.filter(function (notif) { return !notif.read; }).length;
        },
        enumerable: true,
        configurable: true
    });
    AvlNotificationMenuComponent.prototype.ngAfterViewInit = function () {
        this.list.nativeElement.revertedList = true;
    };
    AvlNotificationMenuComponent.prototype.onNotificationStateChanged = function (event) {
        var notificationMenuItem = __assign({}, event.detail.value);
        var notification = __assign(__assign({}, notificationMenuItem), { read: notificationMenuItem.iconToggleValue });
        notification.read ? this.numberOfUnreadNotifications-- : this.numberOfUnreadNotifications++;
        this.notificationStateChanged.emit(notification);
        this.list.nativeElement.removeFocus();
    };
    AvlNotificationMenuComponent.prototype.onItemClicked = function (item) {
        this.overflowMenuHandlers[item.action]();
    };
    AvlNotificationMenuComponent.prototype.onOpenChanged = function (event) {
        if (!event.detail.value) {
            this.openChange.emit(false);
        }
        else {
            this.notificationList = __spread(this.notificationList);
        }
    };
    AvlNotificationMenuComponent.prototype.onOverflowMenuClicked = function () {
        this.list.nativeElement.removeFocus();
    };
    AvlNotificationMenuComponent.prototype.onDetailsClicked = function () {
        this.open = false;
        this.openDetails.emit();
        this.openChange.emit(false);
    };
    AvlNotificationMenuComponent.prototype.prepareNotifications = function (notifications) {
        var _this = this;
        return notifications.map(function (notification) { return (__assign(__assign({}, notification), { label: notification.messageText, sublabel: _this.formatDateTime(notification.timestamp), icon: TYPE_ICON_MAPPINGS[notification.type], iconToggleUnchecked: 'mail', iconToggleChecked: 'communication:mail-outline', iconToggleValue: notification.read })); });
    };
    AvlNotificationMenuComponent.prototype.formatDateTime = function (date) {
        return date === null
            ? ''
            : AvlLocalizationService.formatDateTime(date, {
                format: 'date-short'
            }) + " " + AvlLocalizationService.formatDateTime(date, { format: 'time-long' });
    };
    AvlNotificationMenuComponent.prototype.translateLabels = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!AvlLocalizationService || !AvlLocalizationService.translationService) {
                            return [2 /*return*/];
                        }
                        _a = this;
                        return [4 /*yield*/, this.translateMenu(NOTIFICATIONS_OVERFLOW_MENU)];
                    case 1:
                        _a.overflowMenuItems = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AvlNotificationMenuComponent.prototype.translateMenu = function (menu) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(menu.map(function (group) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0: return [4 /*yield*/, this.translateMenuGroup(group)];
                                case 1: return [2 /*return*/, _a.sent()];
                            }
                        }); }); }))];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    AvlNotificationMenuComponent.prototype.translateMenuGroup = function (group) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = {};
                        return [4 /*yield*/, Promise.all(group.items.map(function (item) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, this.translateMenuItem(item)];
                                    case 1: return [2 /*return*/, _a.sent()];
                                }
                            }); }); }))];
                    case 1: return [2 /*return*/, (_a.items = _b.sent(),
                            _a)];
                }
            });
        });
    };
    AvlNotificationMenuComponent.prototype.translateMenuItem = function (item) {
        return __awaiter(this, void 0, void 0, function () {
            var translateService, _a, _b, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        translateService = AvlLocalizationService.translationService;
                        _a = [__assign({}, item)];
                        _b = {};
                        return [4 /*yield*/, translateService.translate(item.label)];
                    case 1:
                        _b.label = _d.sent();
                        if (!item.sublabel) return [3 /*break*/, 3];
                        return [4 /*yield*/, translateService.translate(item.sublabel)];
                    case 2:
                        _c = _d.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _c = null;
                        _d.label = 4;
                    case 4: return [2 /*return*/, __assign.apply(void 0, _a.concat([(_b.sublabel = _c, _b)]))];
                }
            });
        });
    };
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], AvlNotificationMenuComponent.prototype, "open", void 0);
    __decorate([
        Input(),
        __metadata("design:type", HTMLElement)
    ], AvlNotificationMenuComponent.prototype, "trigger", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array),
        __metadata("design:paramtypes", [Array])
    ], AvlNotificationMenuComponent.prototype, "notifications", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlNotificationMenuComponent.prototype, "openChange", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlNotificationMenuComponent.prototype, "openDetails", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlNotificationMenuComponent.prototype, "notificationStateChanged", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlNotificationMenuComponent.prototype, "markAllAsRead", void 0);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], AvlNotificationMenuComponent.prototype, "markAllAsUnread", void 0);
    __decorate([
        ViewChild('list'),
        __metadata("design:type", ElementRef)
    ], AvlNotificationMenuComponent.prototype, "list", void 0);
    AvlNotificationMenuComponent = __decorate([ __metadata("design:paramtypes", [])
    ], AvlNotificationMenuComponent);
AvlNotificationMenuComponent.ɵfac = function AvlNotificationMenuComponent_Factory(t) { return new (t || AvlNotificationMenuComponent)(); };
AvlNotificationMenuComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AvlNotificationMenuComponent, selectors: [["avl-notification-menu"]], viewQuery: function AvlNotificationMenuComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.list = _t.first);
    } }, inputs: { open: "open", notifications: "notifications", trigger: "trigger" }, outputs: { openChange: "openChange", openDetails: "openDetails", notificationStateChanged: "notificationStateChanged", markAllAsRead: "markAllAsRead", markAllAsUnread: "markAllAsUnread" }, decls: 15, vars: 12, consts: [[3, "noCloseOnInsideClick", "open", "trigger", "open-changed"], ["id", "header"], ["id", "headerText"], [4, "ngIf"], [3, "items", "itemClicked"], ["icon", "more-vert", "slot", "trigger", 3, "click"], [3, "rows", "row-changed"], ["list", ""], ["id", "footer"], [3, "click"]], template: function AvlNotificationMenuComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "avl-popup", 0);
        ɵngcc0.ɵɵlistener("open-changed", function AvlNotificationMenuComponent_Template_avl_popup_open_changed_0_listener($event) { return ctx.onOpenChanged($event); });
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "span");
        ɵngcc0.ɵɵtext(4);
        ɵngcc0.ɵɵpipe(5, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, AvlNotificationMenuComponent_span_6_Template, 2, 1, "span", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(7, "avl-overflow-menu", 4);
        ɵngcc0.ɵɵlistener("itemClicked", function AvlNotificationMenuComponent_Template_avl_overflow_menu_itemClicked_7_listener($event) { return ctx.onItemClicked($event); });
        ɵngcc0.ɵɵelementStart(8, "avl-icon-button", 5);
        ɵngcc0.ɵɵlistener("click", function AvlNotificationMenuComponent_Template_avl_icon_button_click_8_listener() { return ctx.onOverflowMenuClicked(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(9, "avl-list", 6, 7);
        ɵngcc0.ɵɵlistener("row-changed", function AvlNotificationMenuComponent_Template_avl_list_row_changed_9_listener($event) { return ctx.onNotificationStateChanged($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(11, "div", 8);
        ɵngcc0.ɵɵelementStart(12, "avl-button", 9);
        ɵngcc0.ɵɵlistener("click", function AvlNotificationMenuComponent_Template_avl_button_click_12_listener() { return ctx.onDetailsClicked(); });
        ɵngcc0.ɵɵtext(13);
        ɵngcc0.ɵɵpipe(14, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("noCloseOnInsideClick", true)("open", ctx.open)("trigger", ctx.trigger);
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 8, "VizBox.NotificationMenu.Notifications"));
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.numberOfUnreadNotifications);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("items", ctx.overflowMenuItems);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("rows", ctx.notificationList);
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(14, 10, "VizBox.NotificationMenu.Details"));
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.AvlOverflowMenuDirective, ɵngcc2.AvlInteractionControlDirective, ɵngcc2.AvlIconButtonDirective, ɵngcc2.AvlMultiSelectControlDirective, ɵngcc2.AvlSingleSelectControlDirective, ɵngcc2.AvlListDirective], pipes: [ɵngcc3.TranslatePipe], styles: ["avl-popup[_ngcontent-%COMP%]{width:40%}avl-list[_ngcontent-%COMP%]{width:100%;height:250px;padding-top:8px;--avl-item-padding-left:16px;--avl-item-padding-right:16px;--notification-item-height:48px}#header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;height:56px;padding:0 16px;border-bottom:1px solid var(--avl-overflow-menu-divider-color,var(--avl-divider-color))}#footer[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box;height:56px;border-top:1px solid var(--avl-overflow-menu-divider-color,var(--avl-divider-color))}#headerText[_ngcontent-%COMP%]{font-size:20px;color:var(--avl-primary-text-color);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AvlNotificationMenuComponent, [{
        type: Component,
        args: [{
                selector: 'avl-notification-menu',
                template: "<avl-popup\r\n  [noCloseOnInsideClick]=\"true\"\r\n  [open]=\"open\"\r\n  [trigger]=\"trigger\"\r\n  (open-changed)=\"onOpenChanged($event)\"\r\n>\r\n  <div id=\"header\">\r\n    <div id=\"headerText\">\r\n      <span>{{ 'VizBox.NotificationMenu.Notifications' | translate }}</span>\r\n      <span *ngIf=\"numberOfUnreadNotifications\"> ({{ numberOfUnreadNotifications }}) </span>\r\n    </div>\r\n    <avl-overflow-menu (itemClicked)=\"onItemClicked($event)\" [items]=\"overflowMenuItems\">\r\n      <avl-icon-button\r\n        icon=\"more-vert\"\r\n        slot=\"trigger\"\r\n        (click)=\"onOverflowMenuClicked()\"\r\n      ></avl-icon-button>\r\n    </avl-overflow-menu>\r\n  </div>\r\n  <avl-list\r\n    #list\r\n    [rows]=\"notificationList\"\r\n    (row-changed)=\"onNotificationStateChanged($event)\"\r\n  ></avl-list>\r\n  <div id=\"footer\">\r\n    <avl-button (click)=\"onDetailsClicked()\">{{ 'VizBox.NotificationMenu.Details' | translate }}</avl-button>\r\n  </div>\r\n</avl-popup>\r\n",
                styles: ["avl-popup{width:40%}avl-list{width:100%;height:250px;padding-top:8px;--avl-item-padding-left:16px;--avl-item-padding-right:16px;--notification-item-height:48px}#header{display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;height:56px;padding:0 16px;border-bottom:1px solid var(--avl-overflow-menu-divider-color,var(--avl-divider-color))}#footer{display:flex;align-items:center;box-sizing:border-box;height:56px;border-top:1px solid var(--avl-overflow-menu-divider-color,var(--avl-divider-color))}#headerText{font-size:20px;color:var(--avl-primary-text-color);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"]
            }]
    }], function () { return []; }, { open: [{
            type: Input
        }], openChange: [{
            type: Output
        }], openDetails: [{
            type: Output
        }], notificationStateChanged: [{
            type: Output
        }], markAllAsRead: [{
            type: Output
        }], markAllAsUnread: [{
            type: Output
        }], notifications: [{
            type: Input
        }], trigger: [{
            type: Input
        }], list: [{
            type: ViewChild,
            args: ['list']
        }] }); })();
    return AvlNotificationMenuComponent;
}());
export { AvlNotificationMenuComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLW5vdGlmaWNhdGlvbi1tZW51LmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsibmc6L0BhdmwtbmctY29udHJvbHMvbm90aWZpY2F0aW9uL2xpYi9jb21wb25lbnRzL2F2bC1ub3RpZmljYXRpb24tbWVudS9hdmwtbm90aWZpY2F0aW9uLW1lbnUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBRUwsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFRdkIsT0FBTyxFQUFFLDJCQUEyQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFPakc7QUFBZ0UsSUFpQzlEO0FBQ3dCLFFBRHhCLGlCQUVDO0FBQ0gsUUFuQ1csU0FBSSxHQUFZLEtBQUssQ0FBQztBQUNqQyxRQU9ZLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO0FBQ3JELFFBQVksZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO0FBQ25ELFFBQVksNkJBQXdCLEdBQUcsSUFBSSxZQUFZLEVBQW1CLENBQUM7QUFDM0UsUUFBWSxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7QUFDckQsUUFBWSxvQkFBZSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7QUFDdkQsUUFHUyxzQkFBaUIsR0FBMkIsRUFBRSxDQUFDO0FBQ3hELFFBQVMscUJBQWdCLEdBQThCLEVBQUUsQ0FBQztBQUMxRCxRQUFTLGdDQUEyQixHQUFXLENBQUMsQ0FBQztBQUNqRCxRQUNVLHlCQUFvQixHQUFrQztBQUNoRSxZQUFJLGFBQWEsRUFBRTtBQUNiLGdCQUFBLEtBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxF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O0FBQUMsSUFERCxtQ0FBQztBQUNBLENBREEsQUF6SEQsSUF5SEM7O0FBaEpBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQVFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBT0EsQUFpQ0EsQUFBQSxBQUVBLEFBbENBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFRQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBSUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQS9CQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBOEJBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQVVBLEFBVEEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQVJBLEFBUUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQURBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBSEEsQUFHQSxBQUFBLEFBQ0EsQUFDQSxBQXZIQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQURBLEFBQUEsQUFBQSxBQUlBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFmQSxBQUFBLEFBTEEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUF5SEEsQUFBQSxBQUFBLEFBQUEsQUF6SEEsQUF5SEEsQUF6SEEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBDb21wb25lbnQsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIFZpZXdDaGlsZFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBBdmxMaXN0IH0gZnJvbSAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLWxpc3QvYXZsLWxpc3QuYXBpJztcclxuaW1wb3J0IHtcclxuICBBdmxPdmVyZmxvd01lbnVHcm91cCxcclxuICBBdmxPdmVyZmxvd01lbnVJdGVtXHJcbn0gZnJvbSAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLW92ZXJmbG93LW1lbnUvYXZsLW92ZXJmbG93LW1lbnUuYXBpJztcclxuaW1wb3J0IHsgQXZsTm90aWZpY2F0aW9uIH0gZnJvbSAnQGF2bC1jb250cm9scy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgQXZsTm90aWZpY2F0aW9uTWVudUl0ZW0gfSBmcm9tICcuLi8uLi9tb2RlbHMvbm90aWZpY2F0aW9uLW1lbnUubW9kZWwnO1xyXG5pbXBvcnQgeyBOT1RJRklDQVRJT05TX09WRVJGTE9XX01FTlUsIFRZUEVfSUNPTl9NQVBQSU5HUyB9IGZyb20gJy4vYXZsLW5vdGlmaWNhdGlvbi1tZW51LmNvbnN0cyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2F2bC1ub3RpZmljYXRpb24tbWVudScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2F2bC1ub3RpZmljYXRpb24tbWVudS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYXZsLW5vdGlmaWNhdGlvbi1tZW51LmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXZsTm90aWZpY2F0aW9uTWVudUNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xyXG4gIEBJbnB1dCgpIG9wZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSB0cmlnZ2VyOiBIVE1MRWxlbWVudDtcclxuICBASW5wdXQoKSBcclxuICBzZXQgbm90aWZpY2F0aW9ucyhub3RpZmljYXRpb25zOiBBdmxOb3RpZmljYXRpb25bXSkge1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25MaXN0ID0gdGhpcy5wcmVwYXJlTm90aWZpY2F0aW9ucyhub3RpZmljYXRpb25zKTtcclxuICAgIHRoaXMubnVtYmVyT2ZVbnJlYWROb3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9ucy5maWx0ZXIobm90aWYgPT4gIW5vdGlmLnJlYWQpLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIEBPdXRwdXQoKSBvcGVuQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG4gIEBPdXRwdXQoKSBvcGVuRGV0YWlscyA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuICBAT3V0cHV0KCkgbm90aWZpY2F0aW9uU3RhdGVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxBdmxOb3RpZmljYXRpb24+KCk7XHJcbiAgQE91dHB1dCgpIG1hcmtBbGxBc1JlYWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgQE91dHB1dCgpIG1hcmtBbGxBc1VucmVhZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnbGlzdCcpIGxpc3Q6IEVsZW1lbnRSZWY8QXZsTGlzdD47XHJcblxyXG4gIHB1YmxpYyBvdmVyZmxvd01lbnVJdGVtczogQXZsT3ZlcmZsb3dNZW51R3JvdXBbXSA9IFtdO1xyXG4gIHB1YmxpYyBub3RpZmljYXRpb25MaXN0OiBBdmxOb3RpZmljYXRpb25NZW51SXRlbVtdID0gW107XHJcbiAgcHVibGljIG51bWJlck9mVW5yZWFkTm90aWZpY2F0aW9uczogbnVtYmVyID0gMDtcclxuXHJcbiAgcHJpdmF0ZSBvdmVyZmxvd01lbnVIYW5kbGVyczogeyBba2V5OiBzdHJpbmddOiAoKSA9PiB2b2lkIH0gPSB7XHJcbiAgICBtYXJrQWxsQXNSZWFkOiAoKSA9PiB7XHJcbiAgICAgIHRoaXMubWFya0FsbEFzUmVhZC5lbWl0KCk7XHJcbiAgICAgIHRoaXMubnVtYmVyT2ZVbnJlYWROb3RpZmljYXRpb25zID0gMDtcclxuICAgIH0sXHJcbiAgICBtYXJrQWxsQXNVbnJlYWQ6ICgpID0+IHtcclxuICAgICAgdGhpcy5tYXJrQWxsQXNVbnJlYWQuZW1pdCgpO1xyXG4gICAgICB0aGlzLm51bWJlck9mVW5yZWFkTm90aWZpY2F0aW9ucyA9IHRoaXMubm90aWZpY2F0aW9uTGlzdC5sZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgdW5kZWZpbmVkOiAoKSA9PiB7fVxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy50cmFuc2xhdGVMYWJlbHMoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxpc3QubmF0aXZlRWxlbWVudC5yZXZlcnRlZExpc3QgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uTm90aWZpY2F0aW9uU3RhdGVDaGFuZ2VkKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uTWVudUl0ZW06IEF2bE5vdGlmaWNhdGlvbk1lbnVJdGVtID0geyAuLi4oPEN1c3RvbUV2ZW50PmV2ZW50KS5kZXRhaWwudmFsdWUgfTtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHtcclxuICAgICAgLi4ubm90aWZpY2F0aW9uTWVudUl0ZW0sXHJcbiAgICAgIHJlYWQ6IG5vdGlmaWNhdGlvbk1lbnVJdGVtLmljb25Ub2dnbGVWYWx1ZVxyXG4gICAgfSBhcyBBdmxOb3RpZmljYXRpb247XHJcbiAgICBub3RpZmljYXRpb24ucmVhZCA/IHRoaXMubnVtYmVyT2ZVbnJlYWROb3RpZmljYXRpb25zLS0gOiB0aGlzLm51bWJlck9mVW5yZWFkTm90aWZpY2F0aW9ucysrO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25TdGF0ZUNoYW5nZWQuZW1pdChub3RpZmljYXRpb24pO1xyXG5cclxuICAgIHRoaXMubGlzdC5uYXRpdmVFbGVtZW50LnJlbW92ZUZvY3VzKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25JdGVtQ2xpY2tlZChpdGVtOiBBdmxPdmVyZmxvd01lbnVJdGVtKTogdm9pZCB7XHJcbiAgICB0aGlzLm92ZXJmbG93TWVudUhhbmRsZXJzW2l0ZW0uYWN0aW9uXSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uT3BlbkNoYW5nZWQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoISg8Q3VzdG9tRXZlbnQ+ZXZlbnQpLmRldGFpbC52YWx1ZSkge1xyXG4gICAgICB0aGlzLm9wZW5DaGFuZ2UuZW1pdChmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbkxpc3QgPSBbLi4udGhpcy5ub3RpZmljYXRpb25MaXN0XTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbk92ZXJmbG93TWVudUNsaWNrZWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxpc3QubmF0aXZlRWxlbWVudC5yZW1vdmVGb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uRGV0YWlsc0NsaWNrZWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMub3BlbkRldGFpbHMuZW1pdCgpO1xyXG4gICAgdGhpcy5vcGVuQ2hhbmdlLmVtaXQoZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcmVwYXJlTm90aWZpY2F0aW9ucyhub3RpZmljYXRpb25zOiBBdmxOb3RpZmljYXRpb25bXSk6IEF2bE5vdGlmaWNhdGlvbk1lbnVJdGVtW10ge1xyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbnMubWFwKG5vdGlmaWNhdGlvbiA9PiAoe1xyXG4gICAgICAuLi5ub3RpZmljYXRpb24sXHJcbiAgICAgIGxhYmVsOiBub3RpZmljYXRpb24ubWVzc2FnZVRleHQsXHJcbiAgICAgIHN1YmxhYmVsOiB0aGlzLmZvcm1hdERhdGVUaW1lKG5vdGlmaWNhdGlvbi50aW1lc3RhbXApLFxyXG4gICAgICBpY29uOiBUWVBFX0lDT05fTUFQUElOR1Nbbm90aWZpY2F0aW9uLnR5cGVdLFxyXG4gICAgICBpY29uVG9nZ2xlVW5jaGVja2VkOiAnbWFpbCcsXHJcbiAgICAgIGljb25Ub2dnbGVDaGVja2VkOiAnY29tbXVuaWNhdGlvbjptYWlsLW91dGxpbmUnLFxyXG4gICAgICBpY29uVG9nZ2xlVmFsdWU6IG5vdGlmaWNhdGlvbi5yZWFkXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdERhdGVUaW1lKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGRhdGUgPT09IG51bGxcclxuICAgICAgPyAnJ1xyXG4gICAgICA6IGAke0F2bExvY2FsaXphdGlvblNlcnZpY2UuZm9ybWF0RGF0ZVRpbWUoZGF0ZSwge1xyXG4gICAgICAgICAgZm9ybWF0OiAnZGF0ZS1zaG9ydCdcclxuICAgICAgICB9KX0gJHtBdmxMb2NhbGl6YXRpb25TZXJ2aWNlLmZvcm1hdERhdGVUaW1lKGRhdGUsIHsgZm9ybWF0OiAndGltZS1sb25nJyB9KX1gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB0cmFuc2xhdGVMYWJlbHMoKSB7XHJcbiAgICBpZiAoIUF2bExvY2FsaXphdGlvblNlcnZpY2UgfHwgIUF2bExvY2FsaXphdGlvblNlcnZpY2UudHJhbnNsYXRpb25TZXJ2aWNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm92ZXJmbG93TWVudUl0ZW1zID0gYXdhaXQgdGhpcy50cmFuc2xhdGVNZW51KE5PVElGSUNBVElPTlNfT1ZFUkZMT1dfTUVOVSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyYW5zbGF0ZU1lbnUobWVudTogQXZsT3ZlcmZsb3dNZW51R3JvdXBbXSk6IFByb21pc2U8QXZsT3ZlcmZsb3dNZW51R3JvdXBbXT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKG1lbnUubWFwKGFzeW5jIGdyb3VwID0+IGF3YWl0IHRoaXMudHJhbnNsYXRlTWVudUdyb3VwKGdyb3VwKSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB0cmFuc2xhdGVNZW51R3JvdXAoZ3JvdXA6IEF2bE92ZXJmbG93TWVudUdyb3VwKTogUHJvbWlzZTxBdmxPdmVyZmxvd01lbnVHcm91cD4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXRlbXM6IGF3YWl0IFByb21pc2UuYWxsKGdyb3VwLml0ZW1zLm1hcChhc3luYyBpdGVtID0+IGF3YWl0IHRoaXMudHJhbnNsYXRlTWVudUl0ZW0oaXRlbSkpKVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdHJhbnNsYXRlTWVudUl0ZW0oaXRlbTogQXZsT3ZlcmZsb3dNZW51SXRlbSk6IFByb21pc2U8QXZsT3ZlcmZsb3dNZW51SXRlbT4ge1xyXG4gICAgY29uc3QgdHJhbnNsYXRlU2VydmljZSA9IEF2bExvY2FsaXphdGlvblNlcnZpY2UudHJhbnNsYXRpb25TZXJ2aWNlO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4uaXRlbSxcclxuICAgICAgbGFiZWw6IGF3YWl0IHRyYW5zbGF0ZVNlcnZpY2UudHJhbnNsYXRlKGl0ZW0ubGFiZWwpLFxyXG4gICAgICBzdWJsYWJlbDogaXRlbS5zdWJsYWJlbCA/IGF3YWl0IHRyYW5zbGF0ZVNlcnZpY2UudHJhbnNsYXRlKGl0ZW0uc3VibGFiZWwpIDogbnVsbFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl19
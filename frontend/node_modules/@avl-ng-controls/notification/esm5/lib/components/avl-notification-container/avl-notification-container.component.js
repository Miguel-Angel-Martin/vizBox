import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from './directives/animate-stack.directive';
import * as ɵngcc3 from './directives/animate-snackbar.directive';
import * as ɵngcc4 from '@avl-controls/ng-binders';
import * as ɵngcc5 from './directives/snackbar-listener.directive';
import * as ɵngcc6 from './directives/show-hide-snackbar.directive';
import * as ɵngcc7 from './directives/animate-button.directive';
import * as ɵngcc8 from '@ngx-translate/core';

var _c0 = ["warningStackElement"];
var _c1 = ["infoStackElement"];
var _c2 = ["infoStackIndicatorElement"];
function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template(rf, ctx) { if (rf & 1) {
    var _r14 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "avl-snackbar", 14, 15);
    ɵngcc0.ɵɵlistener("buttonClicked", function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template_avl_snackbar_buttonClicked_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); var ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.onButtonClicked($event); })("notificationDismissed", function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template_avl_snackbar_notificationDismissed_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); var activeWarningNotification_r11 = ctx.ngIf; var ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.onNotificationDismissed($event, activeWarningNotification_r11); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var activeWarningNotification_r11 = ctx.ngIf;
    var ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("message", activeWarningNotification_r11 == null ? null : activeWarningNotification_r11.messageText)("actionButtonLabel", ctx_r4.warningStack.stackIndicatorButtonLabel)("link", activeWarningNotification_r11.link)("messageType", activeWarningNotification_r11.type)("methodDescription", ctx_r4.warningStack.methodDescription);
} }
function AvlNotificationContainerComponent_div_0_div_7_button_9_Template(rf, ctx) { if (rf & 1) {
    var _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 25);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_7_button_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); var ctx_r18 = ɵngcc0.ɵɵnextContext(3); return ctx_r18.openFromStack(ctx_r18.warningStack.previousNotification); });
    ɵngcc0.ɵɵelementStart(1, "div", 26);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r17 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r17.warningStack.stackIndicatorButtonLabel);
} }
var _c3 = function (a1) { return { "notification": true, "has-action": a1 }; };
function AvlNotificationContainerComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 16, 17);
    ɵngcc0.ɵɵelementStart(2, "div", 18);
    ɵngcc0.ɵɵelementStart(3, "div", 19);
    ɵngcc0.ɵɵelementStart(4, "div", 20);
    ɵngcc0.ɵɵelement(5, "avl-icon", 21);
    ɵngcc0.ɵɵelementStart(6, "p", 22);
    ɵngcc0.ɵɵtext(7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(8, "avl-icon-button", 23);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(9, AvlNotificationContainerComponent_div_0_div_7_button_9_Template, 3, 1, "button", 24);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(3, _c3, ctx_r5.warningStack.stackIndicatorButtonLabel));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ctx_r5.warningStack.previousNotification == null ? null : ctx_r5.warningStack.previousNotification.messageText);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.warningStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template(rf, ctx) { if (rf & 1) {
    var _r23 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "avl-snackbar", 27, 28);
    ɵngcc0.ɵɵlistener("buttonClicked", function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template_avl_snackbar_buttonClicked_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); var ctx_r22 = ɵngcc0.ɵɵnextContext(2); return ctx_r22.onButtonClicked($event); })("notificationDismissed", function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template_avl_snackbar_notificationDismissed_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); var activeInfoNotification_r20 = ctx.ngIf; var ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.onNotificationDismissed($event, activeInfoNotification_r20); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var activeInfoNotification_r20 = ctx.ngIf;
    var ctx_r8 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("message", activeInfoNotification_r20.messageText)("actionButtonLabel", ctx_r8.infoStack.stackIndicatorButtonLabel)("link", activeInfoNotification_r20.link)("messageType", activeInfoNotification_r20.type)("displayIcon", ctx_r8.displayIcon)("methodDescription", ctx_r8.infoStack.methodDescription);
} }
function AvlNotificationContainerComponent_div_0_div_14_button_8_Template(rf, ctx) { if (rf & 1) {
    var _r28 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 25);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_14_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r28); var ctx_r27 = ɵngcc0.ɵɵnextContext(3); return ctx_r27.openFromStack(ctx_r27.infoStack.previousNotification); });
    ɵngcc0.ɵɵelementStart(1, "div", 26);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r26 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r26.infoStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_div_14_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 16, 29);
    ɵngcc0.ɵɵelementStart(2, "div", 18);
    ɵngcc0.ɵɵelementStart(3, "div", 19);
    ɵngcc0.ɵɵelementStart(4, "div", 20);
    ɵngcc0.ɵɵelementStart(5, "p", 22);
    ɵngcc0.ɵɵtext(6);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(7, "avl-icon-button", 23);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(8, AvlNotificationContainerComponent_div_0_div_14_button_8_Template, 3, 1, "button", 24);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r9 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(3, _c3, ctx_r9.infoStack.stackIndicatorButtonLabel));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r9.infoStack.previousNotification == null ? null : ctx_r9.infoStack.previousNotification.messageText);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r9.infoStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_div_15_Template(rf, ctx) { if (rf & 1) {
    var _r30 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 30);
    ɵngcc0.ɵɵelementStart(1, "avl-button", 31);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_15_Template_avl_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r30); var ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.dismissAll(); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵnextContext();
    var _r7 = ɵngcc0.ɵɵreference(11);
    var _r3 = ɵngcc0.ɵɵreference(4);
    var ctx_r10 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("infoStackHeight", (ctx_r10.infoStack == null ? null : ctx_r10.infoStack.notificationList == null ? null : ctx_r10.infoStack.notificationList.length) > 0 ? _r7.offsetHeight : 0)("warningStackHeight", (ctx_r10.warningStack == null ? null : ctx_r10.warningStack.notificationList == null ? null : ctx_r10.warningStack.notificationList.length) > 0 ? _r3.offsetHeight : 0)("infoStackIndicatorHeight", ctx_r10.infoStackIndicatorElement == null ? null : ctx_r10.infoStackIndicatorElement.nativeElement == null ? null : ctx_r10.infoStackIndicatorElement.nativeElement.offsetHeight)("warningStackIndicatorHeight", ctx_r10.warningStackIndicatorElement == null ? null : ctx_r10.warningStackIndicatorElement.nativeElement == null ? null : ctx_r10.warningStackIndicatorElement.nativeElement.offsetHeight);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 5, "VizBox.NotificationContainer.DismissAll"));
} }
function AvlNotificationContainerComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "div", 2, 3);
    ɵngcc0.ɵɵelementStart(3, "div", 4, 5);
    ɵngcc0.ɵɵtemplate(5, AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template, 2, 5, "avl-snackbar", 6);
    ɵngcc0.ɵɵpipe(6, "async");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(7, AvlNotificationContainerComponent_div_0_div_7_Template, 10, 5, "div", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(8, "div", 8, 9);
    ɵngcc0.ɵɵelementStart(10, "div", 10, 11);
    ɵngcc0.ɵɵtemplate(12, AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template, 2, 6, "avl-snackbar", 12);
    ɵngcc0.ɵɵpipe(13, "async");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(14, AvlNotificationContainerComponent_div_0_div_14_Template, 9, 5, "div", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(15, AvlNotificationContainerComponent_div_0_div_15_Template, 4, 7, "div", 13);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var _r3 = ɵngcc0.ɵɵreference(4);
    var _r7 = ɵngcc0.ɵɵreference(11);
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("animateStack", ctx_r0.warningStack == null ? null : ctx_r0.warningStack.stackAnimation)("previousStackHeight", ctx_r0.infoStack.notificationList.length > 0 ? _r7.offsetHeight : 0)("snackbarMethodDescription", ctx_r0.warningStack.methodDescription);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("animateSnackbar", ctx_r0.warningStack.snackbarAnimation);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(6, 13, ctx_r0.warningStack.activeNotification$));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.warningStack.notificationList.length > 1);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("animateStack", ctx_r0.infoStack == null ? null : ctx_r0.infoStack.stackAnimation)("previousStackHeight", ctx_r0.infoStack.notificationList.length > 0 ? _r3.offsetHeight : 0)("snackbarMethodDescription", ctx_r0.infoStack.methodDescription);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("animateSnackbar", ctx_r0.infoStack.snackbarAnimation);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(13, 15, ctx_r0.infoStack.activeNotification$));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.infoStack.notificationList.length > 1);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", (ctx_r0.notificationList == null ? null : ctx_r0.notificationList.length) > 1);
} }
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { AfterViewChecked, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';
import { Observable } from 'rxjs';
import '@avl-controls/core/dist/avl-snackbar/avl-snackbar';
import { takeUntil } from 'rxjs/operators';
import { SnackbarMethodDescription } from './directives/show-hide-snackbar.directive';
import { Subject } from 'rxjs';
import { SnackbarStack } from './snackbar-stack';
import { ANIMATION_DURATION } from './avl-notification-container.consts';
var NOTIFICATION_TYPE = new Map([
    [0 /* Error */, 'Error'],
    [1 /* Warning */, 'Warning'],
    [2 /* Info */, 'Info'],
    [3 /* OK */, 'OK']
]);
var AvlNotificationContainerComponent = /** @class */ (function () {
    function AvlNotificationContainerComponent(cdRef) {
        var _this = this;
        this.cdRef = cdRef;
        /** Observable emits notifications. Default observable emits dummy notifications every 3s for 100s. */
        this.notification$ = new Observable(function subscribe(subscriber) {
            var i = 0;
            var intervalId = setInterval(function () {
                var warning = Math.round(Math.random());
                subscriber.next({
                    id: i++,
                    module: 'notification-container',
                    timestamp: new Date(),
                    type: warning ? 1 /* Warning */ : 2 /* Info */,
                    messageText: 'Snackbar with notification' + new Date().toTimeString(),
                    read: false,
                    link: 'https://vizbox.avl.com'
                });
            }, 3000);
            setTimeout(function () {
                clearInterval(intervalId);
            }, 100000);
        });
        this.openMenu = new EventEmitter();
        /** @hidden */
        this.stackHeight = {};
        /** @hidden */
        this.notificationList = [];
        this.destroyed$ = new Subject();
        /** @hidden */
        this.onButtonClicked = function (event) {
            if (event) {
                _this.openMenu.emit();
                _this.dismissAll();
            }
        };
        /** @hidden */
        this.onNotificationDismissed = function (event, notification) {
            var _a, _b;
            if (event) {
                var snackType = (_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.id) === null || _b === void 0 ? void 0 : _b.replace('Snackbar', '');
                _this.removeNotification(notification, snackType);
            }
        };
        /** @hidden */
        this.openFromStack = function (notification) {
            var stackName = _this.getStackName(notification.type);
            _this[stackName].methodDescription = new SnackbarMethodDescription('hide', true);
        };
        /** @hidden */
        this.dismissAll = function () {
            _this.notificationList = [];
            _this.warningStack.activeNotification$.next(undefined);
            _this.infoStack.activeNotification$.next(undefined);
        };
        this.handleNotification = function (notification) {
            _this.previousNotification = _this.notificationList[_this.notificationList.length - 1];
            _this.notificationList.push(notification);
            _this.updateStackActiveNotification(notification);
            _this.setStackAnimation(notification.type);
        };
        this.updateStackActiveNotification = function (notification) {
            var _a;
            var stackName = _this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            _this.updateStackNotificationList(notification.type);
            _this.activeNotification = notification;
            if (_this[stackName].notificationList.length > 1) {
                _this.reopen = true;
                if (((_a = _this.previousNotification) === null || _a === void 0 ? void 0 : _a.type) === notification.type) {
                    _this[stackName].snackbarAnimation = 3 /* ToStack */;
                    // silently dismiss notification after previous notification animation
                    var timeout_1 = setTimeout(function () {
                        _this.silentlyDismissNotification(stackName);
                        _this[stackName].snackbarAnimation = null;
                        clearTimeout(timeout_1);
                    }, ANIMATION_DURATION);
                }
                else {
                    _this.silentlyDismissNotification(stackName);
                }
            }
            else {
                _this[stackName].activeNotification$.next(notification);
            }
        };
        this.updateStackNotificationList = function (notificationType) {
            var stack = _this[_this.getStack(notificationType)];
            if (stack) {
                stack.notificationList = _this.notificationList.filter(function (item) { return item.type === notificationType; });
            }
            return stack.notificationList;
        };
        this.silentlyDismissNotification = function (stackName) {
            _this[stackName].dismissedSilently = true;
            _this[stackName].methodDescription = new SnackbarMethodDescription('hide', false);
        };
        this.setStackAnimation = function (notificationType, animation) {
            var _a, _b, _c;
            var currentStack = _this.getStack(notificationType);
            var previousStack = _this.getStack(notificationType, true);
            if (((_b = (_a = _this[previousStack]) === null || _a === void 0 ? void 0 : _a.notificationList) === null || _b === void 0 ? void 0 : _b.length) > 0 &&
                ((_c = _this.previousNotification) === null || _c === void 0 ? void 0 : _c.type) !== notificationType) {
                _this[previousStack].stackAnimation = animation || 2 /* ToBottom */;
                _this[currentStack].stackAnimation =
                    animation === 1 /* ToTop */
                        ? 2 /* ToBottom */
                        : 1 /* ToTop */;
            }
        };
        this.removeNotification = function (notification, snackType) {
            var _a;
            var stackName = _this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            if (_this[stackName].dismissedSilently) {
                //notification dismissed silently
                var stackName_1 = _this.getStack((_a = _this.activeNotification) === null || _a === void 0 ? void 0 : _a.type);
                _this[stackName_1].activeNotification$.next(_this.activeNotification);
                _this.reopen = false;
            }
            else {
                //notification dismissed
                _this.notificationList = _this.notificationList.filter(function (currentNotification) { return currentNotification.id !== notification.id; });
                _this.reopenLastNotification(notification, stackName);
            }
        };
        this.reopenLastNotification = function (notification, stackName) {
            var _a;
            var stackNotificationList = (_a = _this[stackName]) === null || _a === void 0 ? void 0 : _a.notificationList;
            if (_this.isLastNotificationDismissed(notification, _this[stackName]) &&
                (stackNotificationList === null || stackNotificationList === void 0 ? void 0 : stackNotificationList.length) > 0) {
                _this[stackName].reopen = true;
                stackNotificationList = _this.updateStackNotificationList(notification.type);
                var lastNotification = stackNotificationList[stackNotificationList.length - 1];
                if (lastNotification) {
                    _this[stackName].activeNotification$.next(lastNotification);
                }
                else {
                    _this[stackName].stackIndicator = false;
                    _this[stackName].reopen = false;
                    _this[stackName].animateStack = 2 /* ToBottom */;
                    _this.setStackAnimation(notification.type, 1 /* ToTop */);
                }
            }
        };
        this.isLastNotificationDismissed = function (notification, stack) {
            var lastNotification = stack.notificationList[stack.notificationList.length - 1];
            return (lastNotification === null || lastNotification === void 0 ? void 0 : lastNotification.id) === (notification === null || notification === void 0 ? void 0 : notification.id);
        };
        this.getStackName = function (stackType) {
            return stackType === 1 ? 'warningStack' : 'infoStack';
        };
        this.warningStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(1 /* Warning */)).toLowerCase());
        this.infoStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(2 /* Info */)).toLowerCase());
    }
    AvlNotificationContainerComponent.prototype.ngOnDestroy = function () {
        this.destroyed$.next();
        this.destroyed$.complete();
    };
    AvlNotificationContainerComponent.prototype.ngAfterViewChecked = function () {
        this.cdRef.detectChanges();
    };
    /** @hidden */
    AvlNotificationContainerComponent.prototype.ngOnInit = function () {
        var _this = this;
        var _a, _b;
        this.positionTop = ((_a = document.querySelector('main')) === null || _a === void 0 ? void 0 : _a.offsetTop) + 12 + 'px';
        (_b = this.notification$) === null || _b === void 0 ? void 0 : _b.pipe(takeUntil(this.destroyed$)).subscribe(function (notification) {
            _this.handleNotification(notification);
        });
    };
    AvlNotificationContainerComponent.prototype.getStack = function (notificationType, previous) {
        var stackType;
        if (notificationType === 1 /* Warning */ ||
            notificationType === 0 /* Error */) {
            stackType = previous ? 2 /* Info */ : 1 /* Warning */;
        }
        else {
            stackType = previous ? 1 /* Warning */ : 2 /* Info */;
        }
        return this.getStackName(stackType);
    };
    AvlNotificationContainerComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        HostBinding('style.top'),
        __metadata("design:type", String)
    ], AvlNotificationContainerComponent.prototype, "positionTop", void 0);
    __decorate([
        ViewChild('warningStackElement'),
        __metadata("design:type", ElementRef)
    ], AvlNotificationContainerComponent.prototype, "warningStackElement", void 0);
    __decorate([
        ViewChild('infoStackElement'),
        __metadata("design:type", ElementRef)
    ], AvlNotificationContainerComponent.prototype, "infoStackElement", void 0);
    __decorate([
        ViewChild('infoStackIndicatorElement'),
        __metadata("design:type", ElementRef)
    ], AvlNotificationContainerComponent.prototype, "infoStackIndicatorElement", void 0);
    __decorate([
        ViewChild('infoStackIndicatorElement'),
        __metadata("design:type", ElementRef)
    ], AvlNotificationContainerComponent.prototype, "warningStackIndicatorElement", void 0);
    __decorate([
        Input('display-icon'),
        __metadata("design:type", Boolean)
    ], AvlNotificationContainerComponent.prototype, "displayIcon", void 0);
    __decorate([
        Input('notification$'),
        __metadata("design:type", Observable)
    ], AvlNotificationContainerComponent.prototype, "notification$", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], AvlNotificationContainerComponent.prototype, "openMenu", void 0);
    AvlNotificationContainerComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef])
    ], AvlNotificationContainerComponent);
AvlNotificationContainerComponent.ɵfac = function AvlNotificationContainerComponent_Factory(t) { return new (t || AvlNotificationContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
AvlNotificationContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AvlNotificationContainerComponent, selectors: [["avl-notification-container"]], viewQuery: function AvlNotificationContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
        ɵngcc0.ɵɵviewQuery(_c2, true);
        ɵngcc0.ɵɵviewQuery(_c2, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.warningStackElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.infoStackElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.infoStackIndicatorElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.warningStackIndicatorElement = _t.first);
    } }, hostVars: 2, hostBindings: function AvlNotificationContainerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("top", ctx.positionTop);
    } }, inputs: { notification$: "notification$", displayIcon: ["display-icon", "displayIcon"] }, outputs: { openMenu: "openMenu" }, decls: 2, vars: 3, consts: [["class", "snackbar", 4, "ngIf"], [1, "snackbar"], ["id", "warningStack", 1, "snackbar-stack", 3, "animateStack", "previousStackHeight", "snackbarMethodDescription"], ["warningStackElement", ""], ["id", "warningSnack", 3, "animateSnackbar"], ["warningSnackElement", ""], ["id", "warningSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "warningSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "methodDescription", "buttonClicked", "notificationDismissed", 4, "ngIf"], ["class", "stack-indicator-container", 4, "ngIf"], ["id", "infoStack", 1, "snackbar-stack", 3, "animateStack", "previousStackHeight", "snackbarMethodDescription"], ["infoStackElement", ""], ["id", "infoSnack", 3, "animateSnackbar"], ["infoSnackElement", ""], ["id", "infoSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "infoSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "displayIcon", "methodDescription", "buttonClicked", "notificationDismissed", 4, "ngIf"], ["animateButton", "", "class", "dismiss-all", 3, "infoStackHeight", "warningStackHeight", "infoStackIndicatorHeight", "warningStackIndicatorHeight", 4, "ngIf"], ["id", "warningSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "warningSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "methodDescription", "buttonClicked", "notificationDismissed"], ["warningSnackbar", ""], [1, "stack-indicator-container"], ["warningStackIndicator", ""], [1, "stack-indicator"], [1, "notification-container"], [3, "ngClass"], ["icon", "icons:warning", "id", "warningIcon", 1, "warning"], ["id", "snackbarMessage"], ["id", "closeButton", "icon", "icons:close"], ["id", "actionButton", 3, "click", 4, "ngIf"], ["id", "actionButton", 3, "click"], [1, "button-label"], ["id", "infoSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "infoSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "displayIcon", "methodDescription", "buttonClicked", "notificationDismissed"], ["infoSnackbar", ""], ["infoStackIndicator", ""], ["animateButton", "", 1, "dismiss-all", 3, "infoStackHeight", "warningStackHeight", "infoStackIndicatorHeight", "warningStackIndicatorHeight"], ["id", "dismissAll", 3, "click"]], template: function AvlNotificationContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, AvlNotificationContainerComponent_div_0_Template, 16, 17, "div", 0);
        ɵngcc0.ɵɵpipe(1, "async");
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.notification$));
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.AnimateStack, ɵngcc3.AnimateSnackbar, ɵngcc4.AvlInteractionControlDirective, ɵngcc4.AvlSnackbarDirective, ɵngcc5.SnackbarListener, ɵngcc6.ShowHideSnackbarDirective, ɵngcc1.NgClass, ɵngcc4.AvlIconButtonDirective, ɵngcc7.AnimateButton], pipes: [ɵngcc1.AsyncPipe, ɵngcc8.TranslatePipe], styles: ["[_nghost-%COMP%]{position:fixed;right:0;width:445px;display:flex;flex-direction:column;--avl-snackbar-text-color:var(--avl-on-background-info-color)}.snackbar[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.snackbar.displayed[_ngcontent-%COMP%]{flex:1;max-height:100%}.snackbar-stack[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;width:100%}.stack-indicator-container[_ngcontent-%COMP%]{margin:0 12px;position:absolute;width:calc(100% - 12px);top:12px;z-index:-1}.snackbar-container[_ngcontent-%COMP%]{margin-top:0;margin-left:0;margin-right:0;width:100%}.button-label[_ngcontent-%COMP%]{text-align:left;text-transform:none}.stack-indicator[_ngcontent-%COMP%]{background-color:var(--avl-background-message-color);top:0;left:0;width:calc(100% - 24px);border-radius:4px;position:relative;height:100%;z-index:-1;box-shadow:0 3px 5px -1px rgb(0 0 0 / 20%),0 6px 10px 0 rgb(0 0 0 / 14%),0 1px 18px 0 rgb(0 0 0 / 12%)}.notification[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;align-items:center;flex-direction:row;padding:0 12px 0 16px;justify-content:flex-start;cursor:pointer;text-overflow:ellipsis}.notification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex-grow:1;-webkit-line-clamp:3;max-height:48px;text-overflow:ellipsis;line-height:19px;font-size:14px;margin:0 0 0 12px;padding:12px 0;font-family:var(--avl-font-family);color:var(--avl-on-background-info-color)}button#actionButton[_ngcontent-%COMP%]{font-family:var(--avl-font-family);font-weight:500;font-size:14px;color:var(--avl-on-background-message-link-color);background-color:var(--avl-button-background-default-color);max-height:48px;height:48px;width:100%;cursor:pointer;padding:12px;margin:-12px 0 0;border-radius:2px;border:0;outline:0}div#actionButton[_ngcontent-%COMP%]:hover{color:var(--avl-on-background-message-link-hover-color)}#warningIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-warning-color);flex:0 0 24px;--avl-icon-custom-color:var(--avl-warning-color)}#errorIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-error-color);flex:0 0 24px}#infoIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-emphasis-medium-color);flex:0 0 24px}#OKIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-ok-color);flex:0 0 24px}.dismiss-all[_ngcontent-%COMP%]{position:absolute;padding:0 16px;border-radius:25px;background-color:var(--avl-background-message-color);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;top:12px}#dismissAll[_ngcontent-%COMP%]{--avl-flat-button-label-color:var(--avl-on-background-message-link-color)}avl-icon-button[_ngcontent-%COMP%]{flex:0 0 48px;margin-left:12px;cursor:pointer;--avl-icon-button-color:var(--avl-on-background-message-icon-default-color);--avl-icon-ink-hover-color:var(--avl-on-background-message-icon-hover-color);--avl-icon-ink-focus-color:var(--avl-on-background-message-icon-focus-color);--avl-icon-ink-pressed-color:var(--avl-on-background-message-icon-pressed-color)}@media only screen and (min-width:320px) and (max-width:376px){[_nghost-%COMP%]{width:calc(100% - 32px)}}@media only screen and (min-width:460px){[_nghost-%COMP%]{width:445px}}@media only screen and (min-width:376px) and (max-width:400px){[_nghost-%COMP%]{width:376px}}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AvlNotificationContainerComponent, [{
        type: Component,
        args: [{
                selector: 'avl-notification-container',
                template: "<div class=\"snackbar\" *ngIf=\"notification$ | async as notification\">\r\n  <div\r\n    [animateStack]=\"warningStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? infoSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"warningStack.methodDescription\"\r\n    class=\"snackbar-stack\"\r\n    id=\"warningStack\"\r\n    #warningStackElement\r\n  >\r\n    <div [animateSnackbar]=\"warningStack.snackbarAnimation\" id=\"warningSnack\" #warningSnackElement>\r\n      <avl-snackbar\r\n        *ngIf=\"warningStack.activeNotification$ | async as activeWarningNotification\"\r\n        id=\"warningSnackbar\"\r\n        [message]=\"activeWarningNotification?.messageText\"\r\n        [actionButtonLabel]=\"warningStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeWarningNotification.link\"\r\n        [messageType]=\"activeWarningNotification.type\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeWarningNotification)\"\r\n        snackbarListener\r\n        #warningSnackbar\r\n        showHideSnackbar=\"warningSnackbar\"\r\n        [methodDescription]=\"warningStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"warningStack.notificationList.length>1\" #warningStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': warningStack.stackIndicatorButtonLabel}\">\r\n            <avl-icon icon=\"icons:warning\" id=\"warningIcon\" class=\"warning\"></avl-icon>\r\n            <p id=\"snackbarMessage\">{{ warningStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n          <button id=\"actionButton\" *ngIf=\"warningStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(warningStack.previousNotification)\">\r\n            <div class=\"button-label\">{{ warningStack.stackIndicatorButtonLabel }}</div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    class=\"snackbar-stack\"\r\n    id=\"infoStack\"\r\n    [animateStack]=\"infoStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? warningSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"infoStack.methodDescription\"\r\n    #infoStackElement\r\n  >\r\n    <div [animateSnackbar]=\"infoStack.snackbarAnimation\" id=\"infoSnack\" #infoSnackElement>\r\n      <avl-snackbar\r\n        id=\"infoSnackbar\"\r\n        *ngIf=\"infoStack.activeNotification$ | async as activeInfoNotification\"\r\n        [message]=\"activeInfoNotification.messageText\"\r\n        [actionButtonLabel]=\"infoStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeInfoNotification.link\"\r\n        [messageType]=\"activeInfoNotification.type\"\r\n        [displayIcon]=\"displayIcon\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeInfoNotification)\"\r\n        snackbarListener\r\n        #infoSnackbar\r\n        showHideSnackbar=\"infoSnackbar\"\r\n        [methodDescription]=\"infoStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"infoStack.notificationList.length>1\" #infoStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': infoStack.stackIndicatorButtonLabel}\">\r\n            <p id=\"snackbarMessage\">{{ infoStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n        </div>\r\n        <button id=\"actionButton\" *ngIf=\"infoStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(infoStack.previousNotification)\">\r\n          <div class=\"button-label\">{{ infoStack.stackIndicatorButtonLabel }}</div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    animateButton\r\n    [infoStackHeight]=\"infoStack?.notificationList?.length > 0 ? infoSnackElement.offsetHeight : 0\"\r\n    [warningStackHeight]=\"warningStack?.notificationList?.length > 0 ? warningSnackElement.offsetHeight : 0\"\r\n    [infoStackIndicatorHeight]=\"infoStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    [warningStackIndicatorHeight]=\"warningStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    class=\"dismiss-all\"\r\n    *ngIf=\"notificationList?.length > 1\"\r\n  >\r\n    <avl-button id=\"dismissAll\" (click)=\"dismissAll()\">{{'VizBox.NotificationContainer.DismissAll' | translate}}</avl-button>\r\n  </div>\r\n</div>\r\n\r\n\r\n",
                styles: [":host{position:fixed;right:0;width:445px;display:flex;flex-direction:column;--avl-snackbar-text-color:var(--avl-on-background-info-color)}.snackbar{width:100%;display:flex;flex-direction:column}.snackbar.displayed{flex:1;max-height:100%}.snackbar-stack{position:absolute;top:0;left:0;right:0;width:100%}.stack-indicator-container{margin:0 12px;position:absolute;width:calc(100% - 12px);top:12px;z-index:-1}.snackbar-container{margin-top:0;margin-left:0;margin-right:0;width:100%}.button-label{text-align:left;text-transform:none}.stack-indicator{background-color:var(--avl-background-message-color);top:0;left:0;width:calc(100% - 24px);border-radius:4px;position:relative;height:100%;z-index:-1;box-shadow:0 3px 5px -1px rgb(0 0 0 / 20%),0 6px 10px 0 rgb(0 0 0 / 14%),0 1px 18px 0 rgb(0 0 0 / 12%)}.notification{display:flex;flex:1 1 100%;align-items:center;flex-direction:row;padding:0 12px 0 16px;justify-content:flex-start;cursor:pointer;text-overflow:ellipsis}.notification p{flex-grow:1;-webkit-line-clamp:3;max-height:48px;text-overflow:ellipsis;line-height:19px;font-size:14px;margin:0 0 0 12px;padding:12px 0;font-family:var(--avl-font-family);color:var(--avl-on-background-info-color)}button#actionButton{font-family:var(--avl-font-family);font-weight:500;font-size:14px;color:var(--avl-on-background-message-link-color);background-color:var(--avl-button-background-default-color);max-height:48px;height:48px;width:100%;cursor:pointer;padding:12px;margin:-12px 0 0;border-radius:2px;border:0;outline:0}div#actionButton:hover{color:var(--avl-on-background-message-link-hover-color)}#warningIcon{--avl-icon-custom-color:var(--avl-on-background-message-warning-color);flex:0 0 24px;--avl-icon-custom-color:var(--avl-warning-color)}#errorIcon{--avl-icon-custom-color:var(--avl-on-background-message-error-color);flex:0 0 24px}#infoIcon{--avl-icon-custom-color:var(--avl-on-background-message-emphasis-medium-color);flex:0 0 24px}#OKIcon{--avl-icon-custom-color:var(--avl-on-background-message-ok-color);flex:0 0 24px}.dismiss-all{position:absolute;padding:0 16px;border-radius:25px;background-color:var(--avl-background-message-color);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;top:12px}#dismissAll{--avl-flat-button-label-color:var(--avl-on-background-message-link-color)}avl-icon-button{flex:0 0 48px;margin-left:12px;cursor:pointer;--avl-icon-button-color:var(--avl-on-background-message-icon-default-color);--avl-icon-ink-hover-color:var(--avl-on-background-message-icon-hover-color);--avl-icon-ink-focus-color:var(--avl-on-background-message-icon-focus-color);--avl-icon-ink-pressed-color:var(--avl-on-background-message-icon-pressed-color)}@media only screen and (min-width:320px) and (max-width:376px){:host{width:calc(100% - 32px)}}@media only screen and (min-width:460px){:host{width:445px}}@media only screen and (min-width:376px) and (max-width:400px){:host{width:376px}}"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { notification$: [{
            type: Input,
            args: ['notification$']
        }], openMenu: [{
            type: Output
        }], positionTop: [{
            type: HostBinding,
            args: ['style.top']
        }], warningStackElement: [{
            type: ViewChild,
            args: ['warningStackElement']
        }], infoStackElement: [{
            type: ViewChild,
            args: ['infoStackElement']
        }], infoStackIndicatorElement: [{
            type: ViewChild,
            args: ['infoStackIndicatorElement']
        }], warningStackIndicatorElement: [{
            type: ViewChild,
            args: ['infoStackIndicatorElement']
        }], displayIcon: [{
            type: Input,
            args: ['display-icon']
        }] }); })();
    return AvlNotificationContainerComponent;
}());
export { AvlNotificationContainerComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJuZzovQGF2bC1uZy1jb250cm9scy9ub3RpZmljYXRpb24vbGliL2NvbXBvbmVudHMvYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIvYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQ0wsZ0JBQWdCLEVBQ2hCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUNMLFNBQVMsRUFDVCxNQUFNLEVBQ04sTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xDLE9BQU8sbURBQW1ELENBQUM7QUFFM0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBRXpFLElBQU0saUJBQWlCLEdBQUcsSUFBSSxHQUFHLENBQWlCO0FBQ2xELElBQUUsZ0JBQTRCLE9BQU8sQ0FBQztBQUN0QyxJQUFFLGtCQUE4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QUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBVUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFLQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBNkJBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQWNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBcExBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBS0EsQUFKQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUE2SUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQWpMQSxBQUFBLEFBOURBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBb0JBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUExQ0EsQUFBQSxBQUxBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFpRUEsQUFBQSxBQWhFQSxBQUFBLEFBc1BBLEFBQUEsQUFBQSxBQUFBLEFBdFBBLEFBc1BBLEFBdFBBLEFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFmdGVyVmlld0NoZWNrZWQsXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIEhvc3RCaW5kaW5nLFxyXG4gIElucHV0LFxyXG4gIE9uRGVzdHJveSxcclxuICBPbkluaXQsXHJcbiAgT3V0cHV0LFxyXG4gIFZpZXdDaGlsZFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCAnQGF2bC1jb250cm9scy9jb3JlL2Rpc3QvYXZsLXNuYWNrYmFyL2F2bC1zbmFja2Jhcic7XHJcbmltcG9ydCB7IEF2bE5vdGlmaWNhdGlvbiwgQXZsTm90aWZpY2F0aW9uVHlwZSB9IGZyb20gJ0BhdmwtY29udHJvbHMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgU25hY2tiYXJNZXRob2REZXNjcmlwdGlvbiB9IGZyb20gJy4vZGlyZWN0aXZlcy9zaG93LWhpZGUtc25hY2tiYXIuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBQb3NpdGlvbkFuaW1hdGlvbiB9IGZyb20gJy4vZGlyZWN0aXZlcy9hbmltYXRlLXN0YWNrLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IFNuYWNrYmFyU3RhY2sgfSBmcm9tICcuL3NuYWNrYmFyLXN0YWNrJztcclxuaW1wb3J0IHsgQU5JTUFUSU9OX0RVUkFUSU9OIH0gZnJvbSAnLi9hdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lci5jb25zdHMnO1xyXG5cclxuY29uc3QgTk9USUZJQ0FUSU9OX1RZUEUgPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPihbXHJcbiAgW0F2bE5vdGlmaWNhdGlvblR5cGUuRXJyb3IsICdFcnJvciddLFxyXG4gIFtBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmcsICdXYXJuaW5nJ10sXHJcbiAgW0F2bE5vdGlmaWNhdGlvblR5cGUuSW5mbywgJ0luZm8nXSxcclxuICBbQXZsTm90aWZpY2F0aW9uVHlwZS5PSywgJ09LJ11cclxuXSk7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBdmxOb3RpZmljYXRpb25Db250YWluZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3Q2hlY2tlZCB7XHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBASG9zdEJpbmRpbmcoJ3N0eWxlLnRvcCcpIHBvc2l0aW9uVG9wOiBzdHJpbmc7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnd2FybmluZ1N0YWNrRWxlbWVudCcpIHdhcm5pbmdTdGFja0VsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnaW5mb1N0YWNrRWxlbWVudCcpIGluZm9TdGFja0VsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcbiBcclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBWaWV3Q2hpbGQoJ2luZm9TdGFja0luZGljYXRvckVsZW1lbnQnKSBpbmZvU3RhY2tJbmRpY2F0b3JFbGVtZW50OiBFbGVtZW50UmVmO1xyXG4gIFxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnaW5mb1N0YWNrSW5kaWNhdG9yRWxlbWVudCcpIHdhcm5pbmdTdGFja0luZGljYXRvckVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIC8qKiBJZiBzZXQgb3B0aW9uYWwgaWNvbiAoZm9yIGluZm8gYW5kIE9LIG5vdGlmaWNhdGlvbnMpIGlzIGRpc3BsYXllZCwgaGlkZGVuIG90aGVyd2lzZS4gKi9cclxuICBASW5wdXQoJ2Rpc3BsYXktaWNvbicpIHB1YmxpYyBkaXNwbGF5SWNvbjogYm9vbGVhbjtcclxuXHJcbiAgLyoqIE9ic2VydmFibGUgZW1pdHMgbm90aWZpY2F0aW9ucy4gRGVmYXVsdCBvYnNlcnZhYmxlIGVtaXRzIGR1bW15IG5vdGlmaWNhdGlvbnMgZXZlcnkgM3MgZm9yIDEwMHMuICovXHJcbiAgQElucHV0KCdub3RpZmljYXRpb24kJykgcHVibGljIG5vdGlmaWNhdGlvbiQ6IE9ic2VydmFibGU8QXZsTm90aWZpY2F0aW9uPiA9IG5ldyBPYnNlcnZhYmxlKFxyXG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcclxuICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh7XHJcbiAgICAgICAgICBpZDogaSsrLFxyXG4gICAgICAgICAgbW9kdWxlOiAnbm90aWZpY2F0aW9uLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB0eXBlOiB3YXJuaW5nID8gQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nIDogQXZsTm90aWZpY2F0aW9uVHlwZS5JbmZvLFxyXG4gICAgICAgICAgbWVzc2FnZVRleHQ6ICdTbmFja2JhciB3aXRoIG5vdGlmaWNhdGlvbicgKyBuZXcgRGF0ZSgpLnRvVGltZVN0cmluZygpLFxyXG4gICAgICAgICAgcmVhZDogZmFsc2UsXHJcbiAgICAgICAgICBsaW5rOiAnaHR0cHM6Ly92aXpib3guYXZsLmNvbSdcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgMzAwMCk7XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xyXG4gICAgICB9LCAxMDAwMDApO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIEBPdXRwdXQoKSBvcGVuTWVudTogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyB3YXJuaW5nU3RhY2s6IFNuYWNrYmFyU3RhY2s7XHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgaW5mb1N0YWNrOiBTbmFja2JhclN0YWNrO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBwcmV2aW91c05vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBzdGFja0hlaWdodDogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyByZW9wZW46IGJvb2xlYW47XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIG5vdGlmaWNhdGlvbkxpc3Q6IEF2bE5vdGlmaWNhdGlvbltdID0gW107XHJcblxyXG4gIHByaXZhdGUgYWN0aXZlTm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb247XHJcbiAgcHJpdmF0ZSBkZXN0cm95ZWQkOiBTdWJqZWN0PHZvaWQ+ID0gbmV3IFN1YmplY3QoKTtcclxuXHJcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XHJcbiAgICB0aGlzLndhcm5pbmdTdGFjayA9IG5ldyBTbmFja2JhclN0YWNrKFxyXG4gICAgICBTdHJpbmcoTk9USUZJQ0FUSU9OX1RZUEUuZ2V0KEF2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZykpLnRvTG93ZXJDYXNlKClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5pbmZvU3RhY2sgPSBuZXcgU25hY2tiYXJTdGFjayhcclxuICAgICAgU3RyaW5nKE5PVElGSUNBVElPTl9UWVBFLmdldChBdmxOb3RpZmljYXRpb25UeXBlLkluZm8pKS50b0xvd2VyQ2FzZSgpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmRlc3Ryb3llZCQubmV4dCgpO1xyXG4gICAgdGhpcy5kZXN0cm95ZWQkLmNvbXBsZXRlKCk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5wb3NpdGlvblRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKT8ub2Zmc2V0VG9wICsgMTIgKyAncHgnO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb24kPy5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKS5zdWJzY3JpYmUobm90aWZpY2F0aW9uID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgb25CdXR0b25DbGlja2VkID0gKGV2ZW50OiBhbnkpOiB2b2lkID0+IHtcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICB0aGlzLm9wZW5NZW51LmVtaXQoKTtcclxuICAgICAgdGhpcy5kaXNtaXNzQWxsKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgb25Ob3RpZmljYXRpb25EaXNtaXNzZWQgPSAoZXZlbnQ6IGFueSwgbm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24pOiB2b2lkID0+IHtcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICBjb25zdCBzbmFja1R5cGUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KT8uaWQ/LnJlcGxhY2UoJ1NuYWNrYmFyJywgJycpO1xyXG4gICAgICB0aGlzLnJlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24sIHNuYWNrVHlwZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgb3BlbkZyb21TdGFjayA9IChub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbik6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgc3RhY2tOYW1lID0gdGhpcy5nZXRTdGFja05hbWUobm90aWZpY2F0aW9uLnR5cGUpO1xyXG4gICAgdGhpc1tzdGFja05hbWVdLm1ldGhvZERlc2NyaXB0aW9uID0gbmV3IFNuYWNrYmFyTWV0aG9kRGVzY3JpcHRpb24oJ2hpZGUnLCB0cnVlKTtcclxuICB9O1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBkaXNtaXNzQWxsID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25MaXN0ID0gW107XHJcbiAgICB0aGlzLndhcm5pbmdTdGFjay5hY3RpdmVOb3RpZmljYXRpb24kLm5leHQodW5kZWZpbmVkKTtcclxuICAgIHRoaXMuaW5mb1N0YWNrLmFjdGl2ZU5vdGlmaWNhdGlvbiQubmV4dCh1bmRlZmluZWQpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlTm90aWZpY2F0aW9uID0gKG5vdGlmaWNhdGlvbjogYW55KTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLnByZXZpb3VzTm90aWZpY2F0aW9uID0gdGhpcy5ub3RpZmljYXRpb25MaXN0W3RoaXMubm90aWZpY2F0aW9uTGlzdC5sZW5ndGggLSAxXTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uTGlzdC5wdXNoKG5vdGlmaWNhdGlvbik7XHJcbiAgICB0aGlzLnVwZGF0ZVN0YWNrQWN0aXZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICB0aGlzLnNldFN0YWNrQW5pbWF0aW9uKG5vdGlmaWNhdGlvbi50eXBlKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHVwZGF0ZVN0YWNrQWN0aXZlTm90aWZpY2F0aW9uID0gKG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBzdGFja05hbWU6IHN0cmluZyA9IHRoaXMuZ2V0U3RhY2sobm90aWZpY2F0aW9uPy50eXBlKTtcclxuICAgIHRoaXMudXBkYXRlU3RhY2tOb3RpZmljYXRpb25MaXN0KG5vdGlmaWNhdGlvbi50eXBlKTtcclxuICAgIHRoaXMuYWN0aXZlTm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xyXG5cclxuICAgIGlmICh0aGlzW3N0YWNrTmFtZV0ubm90aWZpY2F0aW9uTGlzdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRoaXMucmVvcGVuID0gdHJ1ZTtcclxuICAgICAgaWYgKHRoaXMucHJldmlvdXNOb3RpZmljYXRpb24/LnR5cGUgPT09IG5vdGlmaWNhdGlvbi50eXBlKSB7XHJcbiAgICAgICAgdGhpc1tzdGFja05hbWVdLnNuYWNrYmFyQW5pbWF0aW9uID0gUG9zaXRpb25BbmltYXRpb24uVG9TdGFjaztcclxuXHJcbiAgICAgICAgLy8gc2lsZW50bHkgZGlzbWlzcyBub3RpZmljYXRpb24gYWZ0ZXIgcHJldmlvdXMgbm90aWZpY2F0aW9uIGFuaW1hdGlvblxyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc2lsZW50bHlEaXNtaXNzTm90aWZpY2F0aW9uKHN0YWNrTmFtZSk7XHJcbiAgICAgICAgICB0aGlzW3N0YWNrTmFtZV0uc25hY2tiYXJBbmltYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgIH0sIEFOSU1BVElPTl9EVVJBVElPTik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zaWxlbnRseURpc21pc3NOb3RpZmljYXRpb24oc3RhY2tOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpc1tzdGFja05hbWVdLmFjdGl2ZU5vdGlmaWNhdGlvbiQubmV4dChub3RpZmljYXRpb24pO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcHJpdmF0ZSB1cGRhdGVTdGFja05vdGlmaWNhdGlvbkxpc3QgPSAoXHJcbiAgICBub3RpZmljYXRpb25UeXBlOiBBdmxOb3RpZmljYXRpb25UeXBlXHJcbiAgKTogQXZsTm90aWZpY2F0aW9uW10gPT4ge1xyXG4gICAgY29uc3Qgc3RhY2sgPSB0aGlzW3RoaXMuZ2V0U3RhY2sobm90aWZpY2F0aW9uVHlwZSldO1xyXG4gICAgaWYgKHN0YWNrKSB7XHJcbiAgICAgIHN0YWNrLm5vdGlmaWNhdGlvbkxpc3QgPSB0aGlzLm5vdGlmaWNhdGlvbkxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBub3RpZmljYXRpb25UeXBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGFjay5ub3RpZmljYXRpb25MaXN0O1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgc2lsZW50bHlEaXNtaXNzTm90aWZpY2F0aW9uID0gKHN0YWNrTmFtZTogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzW3N0YWNrTmFtZV0uZGlzbWlzc2VkU2lsZW50bHkgPSB0cnVlO1xyXG4gICAgdGhpc1tzdGFja05hbWVdLm1ldGhvZERlc2NyaXB0aW9uID0gbmV3IFNuYWNrYmFyTWV0aG9kRGVzY3JpcHRpb24oJ2hpZGUnLCBmYWxzZSk7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBzZXRTdGFja0FuaW1hdGlvbiA9IChcclxuICAgIG5vdGlmaWNhdGlvblR5cGU6IEF2bE5vdGlmaWNhdGlvblR5cGUsXHJcbiAgICBhbmltYXRpb24/OiBQb3NpdGlvbkFuaW1hdGlvblxyXG4gICk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFN0YWNrID0gdGhpcy5nZXRTdGFjayhub3RpZmljYXRpb25UeXBlKTtcclxuICAgIGNvbnN0IHByZXZpb3VzU3RhY2sgPSB0aGlzLmdldFN0YWNrKG5vdGlmaWNhdGlvblR5cGUsIHRydWUpO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgdGhpc1twcmV2aW91c1N0YWNrXT8ubm90aWZpY2F0aW9uTGlzdD8ubGVuZ3RoID4gMCAmJlxyXG4gICAgICB0aGlzLnByZXZpb3VzTm90aWZpY2F0aW9uPy50eXBlICE9PSBub3RpZmljYXRpb25UeXBlXHJcbiAgICApIHtcclxuICAgICAgdGhpc1twcmV2aW91c1N0YWNrXS5zdGFja0FuaW1hdGlvbiA9IGFuaW1hdGlvbiB8fCBQb3NpdGlvbkFuaW1hdGlvbi5Ub0JvdHRvbTtcclxuXHJcbiAgICAgIHRoaXNbY3VycmVudFN0YWNrXS5zdGFja0FuaW1hdGlvbiA9XHJcbiAgICAgICAgYW5pbWF0aW9uID09PSBQb3NpdGlvbkFuaW1hdGlvbi5Ub1RvcFxyXG4gICAgICAgICAgPyBQb3NpdGlvbkFuaW1hdGlvbi5Ub0JvdHRvbVxyXG4gICAgICAgICAgOiBQb3NpdGlvbkFuaW1hdGlvbi5Ub1RvcDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIHJlbW92ZU5vdGlmaWNhdGlvbiA9IChub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbiwgc25hY2tUeXBlPzogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBzdGFja05hbWU6IHN0cmluZyA9IHRoaXMuZ2V0U3RhY2sobm90aWZpY2F0aW9uPy50eXBlKTtcclxuICAgIGlmICh0aGlzW3N0YWNrTmFtZV0uZGlzbWlzc2VkU2lsZW50bHkpIHtcclxuICAgICAgLy9ub3RpZmljYXRpb24gZGlzbWlzc2VkIHNpbGVudGx5XHJcbiAgICAgIGNvbnN0IHN0YWNrTmFtZTogc3RyaW5nID0gdGhpcy5nZXRTdGFjayh0aGlzLmFjdGl2ZU5vdGlmaWNhdGlvbj8udHlwZSk7XHJcbiAgICAgIHRoaXNbc3RhY2tOYW1lXS5hY3RpdmVOb3RpZmljYXRpb24kLm5leHQodGhpcy5hY3RpdmVOb3RpZmljYXRpb24pO1xyXG4gICAgICB0aGlzLnJlb3BlbiA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy9ub3RpZmljYXRpb24gZGlzbWlzc2VkXHJcbiAgICAgIHRoaXMubm90aWZpY2F0aW9uTGlzdCA9IHRoaXMubm90aWZpY2F0aW9uTGlzdC5maWx0ZXIoXHJcbiAgICAgICAgY3VycmVudE5vdGlmaWNhdGlvbiA9PiBjdXJyZW50Tm90aWZpY2F0aW9uLmlkICE9PSBub3RpZmljYXRpb24uaWRcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5yZW9wZW5MYXN0Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgc3RhY2tOYW1lKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIHJlb3Blbkxhc3ROb3RpZmljYXRpb24gPSAobm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24sIHN0YWNrTmFtZTogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICBsZXQgc3RhY2tOb3RpZmljYXRpb25MaXN0OiBBdmxOb3RpZmljYXRpb25bXSA9IHRoaXNbc3RhY2tOYW1lXT8ubm90aWZpY2F0aW9uTGlzdDtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5pc0xhc3ROb3RpZmljYXRpb25EaXNtaXNzZWQobm90aWZpY2F0aW9uLCB0aGlzW3N0YWNrTmFtZV0pICYmXHJcbiAgICAgIHN0YWNrTm90aWZpY2F0aW9uTGlzdD8ubGVuZ3RoID4gMFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXNbc3RhY2tOYW1lXS5yZW9wZW4gPSB0cnVlO1xyXG5cclxuICAgICAgc3RhY2tOb3RpZmljYXRpb25MaXN0ID0gdGhpcy51cGRhdGVTdGFja05vdGlmaWNhdGlvbkxpc3Qobm90aWZpY2F0aW9uLnR5cGUpO1xyXG4gICAgICBjb25zdCBsYXN0Tm90aWZpY2F0aW9uID0gc3RhY2tOb3RpZmljYXRpb25MaXN0W3N0YWNrTm90aWZpY2F0aW9uTGlzdC5sZW5ndGggLSAxXTtcclxuICAgICAgaWYgKGxhc3ROb3RpZmljYXRpb24pIHtcclxuICAgICAgICB0aGlzW3N0YWNrTmFtZV0uYWN0aXZlTm90aWZpY2F0aW9uJC5uZXh0KGxhc3ROb3RpZmljYXRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXNbc3RhY2tOYW1lXS5zdGFja0luZGljYXRvciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXNbc3RhY2tOYW1lXS5yZW9wZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzW3N0YWNrTmFtZV0uYW5pbWF0ZVN0YWNrID0gUG9zaXRpb25BbmltYXRpb24uVG9Cb3R0b207XHJcbiAgICAgICAgdGhpcy5zZXRTdGFja0FuaW1hdGlvbihub3RpZmljYXRpb24udHlwZSwgUG9zaXRpb25BbmltYXRpb24uVG9Ub3ApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBpc0xhc3ROb3RpZmljYXRpb25EaXNtaXNzZWQgPSAoXHJcbiAgICBub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbixcclxuICAgIHN0YWNrOiBTbmFja2JhclN0YWNrXHJcbiAgKTogYm9vbGVhbiA9PiB7XHJcbiAgICBjb25zdCBsYXN0Tm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24gPVxyXG4gICAgICBzdGFjay5ub3RpZmljYXRpb25MaXN0W3N0YWNrLm5vdGlmaWNhdGlvbkxpc3QubGVuZ3RoIC0gMV07XHJcbiAgICByZXR1cm4gbGFzdE5vdGlmaWNhdGlvbj8uaWQgPT09IG5vdGlmaWNhdGlvbj8uaWQ7XHJcbiAgfTtcclxuICBwcml2YXRlIGdldFN0YWNrKG5vdGlmaWNhdGlvblR5cGU6IG51bWJlciwgcHJldmlvdXM/OiBib29sZWFuKTogc3RyaW5nIHtcclxuICAgIGxldCBzdGFja1R5cGU6IEF2bE5vdGlmaWNhdGlvblR5cGU7XHJcbiAgICBpZiAoXHJcbiAgICAgIG5vdGlmaWNhdGlvblR5cGUgPT09IEF2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZyB8fFxyXG4gICAgICBub3RpZmljYXRpb25UeXBlID09PSBBdmxOb3RpZmljYXRpb25UeXBlLkVycm9yXHJcbiAgICApIHtcclxuICAgICAgc3RhY2tUeXBlID0gcHJldmlvdXMgPyBBdmxOb3RpZmljYXRpb25UeXBlLkluZm8gOiBBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdGFja1R5cGUgPSBwcmV2aW91cyA/IEF2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZyA6IEF2bE5vdGlmaWNhdGlvblR5cGUuSW5mbztcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmdldFN0YWNrTmFtZShzdGFja1R5cGUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTdGFja05hbWUgPSAoc3RhY2tUeXBlOiBBdmxOb3RpZmljYXRpb25UeXBlKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBzdGFja1R5cGUgPT09IDEgPyAnd2FybmluZ1N0YWNrJyA6ICdpbmZvU3RhY2snO1xyXG4gIH07XHJcbn1cclxuIl19
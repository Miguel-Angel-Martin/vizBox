var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { AfterViewChecked, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';
import { Observable } from 'rxjs';
import '@avl-controls/core/dist/avl-snackbar/avl-snackbar';
import { takeUntil } from 'rxjs/operators';
import { SnackbarMethodDescription } from './directives/show-hide-snackbar.directive';
import { Subject } from 'rxjs';
import { SnackbarStack } from './snackbar-stack';
import { ANIMATION_DURATION } from './avl-notification-container.consts';
const NOTIFICATION_TYPE = new Map([
    [0 /* Error */, 'Error'],
    [1 /* Warning */, 'Warning'],
    [2 /* Info */, 'Info'],
    [3 /* OK */, 'OK']
]);
let AvlNotificationContainerComponent = class AvlNotificationContainerComponent {
    constructor(cdRef) {
        this.cdRef = cdRef;
        /** Observable emits notifications. Default observable emits dummy notifications every 3s for 100s. */
        this.notification$ = new Observable(function subscribe(subscriber) {
            let i = 0;
            const intervalId = setInterval(() => {
                const warning = Math.round(Math.random());
                subscriber.next({
                    id: i++,
                    module: 'notification-container',
                    timestamp: new Date(),
                    type: warning ? 1 /* Warning */ : 2 /* Info */,
                    messageText: 'Snackbar with notification' + new Date().toTimeString(),
                    read: false,
                    link: 'https://vizbox.avl.com'
                });
            }, 3000);
            setTimeout(() => {
                clearInterval(intervalId);
            }, 100000);
        });
        this.openMenu = new EventEmitter();
        /** @hidden */
        this.stackHeight = {};
        /** @hidden */
        this.notificationList = [];
        this.destroyed$ = new Subject();
        /** @hidden */
        this.onButtonClicked = (event) => {
            if (event) {
                this.openMenu.emit();
                this.dismissAll();
            }
        };
        /** @hidden */
        this.onNotificationDismissed = (event, notification) => {
            var _a, _b;
            if (event) {
                const snackType = (_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.id) === null || _b === void 0 ? void 0 : _b.replace('Snackbar', '');
                this.removeNotification(notification, snackType);
            }
        };
        /** @hidden */
        this.openFromStack = (notification) => {
            const stackName = this.getStackName(notification.type);
            this[stackName].methodDescription = new SnackbarMethodDescription('hide', true);
        };
        /** @hidden */
        this.dismissAll = () => {
            this.notificationList = [];
            this.warningStack.activeNotification$.next(undefined);
            this.infoStack.activeNotification$.next(undefined);
        };
        this.handleNotification = (notification) => {
            this.previousNotification = this.notificationList[this.notificationList.length - 1];
            this.notificationList.push(notification);
            this.updateStackActiveNotification(notification);
            this.setStackAnimation(notification.type);
        };
        this.updateStackActiveNotification = (notification) => {
            var _a;
            const stackName = this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            this.updateStackNotificationList(notification.type);
            this.activeNotification = notification;
            if (this[stackName].notificationList.length > 1) {
                this.reopen = true;
                if (((_a = this.previousNotification) === null || _a === void 0 ? void 0 : _a.type) === notification.type) {
                    this[stackName].snackbarAnimation = 3 /* ToStack */;
                    // silently dismiss notification after previous notification animation
                    const timeout = setTimeout(() => {
                        this.silentlyDismissNotification(stackName);
                        this[stackName].snackbarAnimation = null;
                        clearTimeout(timeout);
                    }, ANIMATION_DURATION);
                }
                else {
                    this.silentlyDismissNotification(stackName);
                }
            }
            else {
                this[stackName].activeNotification$.next(notification);
            }
        };
        this.updateStackNotificationList = (notificationType) => {
            const stack = this[this.getStack(notificationType)];
            if (stack) {
                stack.notificationList = this.notificationList.filter(item => item.type === notificationType);
            }
            return stack.notificationList;
        };
        this.silentlyDismissNotification = (stackName) => {
            this[stackName].dismissedSilently = true;
            this[stackName].methodDescription = new SnackbarMethodDescription('hide', false);
        };
        this.setStackAnimation = (notificationType, animation) => {
            var _a, _b, _c;
            const currentStack = this.getStack(notificationType);
            const previousStack = this.getStack(notificationType, true);
            if (((_b = (_a = this[previousStack]) === null || _a === void 0 ? void 0 : _a.notificationList) === null || _b === void 0 ? void 0 : _b.length) > 0 &&
                ((_c = this.previousNotification) === null || _c === void 0 ? void 0 : _c.type) !== notificationType) {
                this[previousStack].stackAnimation = animation || 2 /* ToBottom */;
                this[currentStack].stackAnimation =
                    animation === 1 /* ToTop */
                        ? 2 /* ToBottom */
                        : 1 /* ToTop */;
            }
        };
        this.removeNotification = (notification, snackType) => {
            var _a;
            const stackName = this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            if (this[stackName].dismissedSilently) {
                //notification dismissed silently
                const stackName = this.getStack((_a = this.activeNotification) === null || _a === void 0 ? void 0 : _a.type);
                this[stackName].activeNotification$.next(this.activeNotification);
                this.reopen = false;
            }
            else {
                //notification dismissed
                this.notificationList = this.notificationList.filter(currentNotification => currentNotification.id !== notification.id);
                this.reopenLastNotification(notification, stackName);
            }
        };
        this.reopenLastNotification = (notification, stackName) => {
            var _a;
            let stackNotificationList = (_a = this[stackName]) === null || _a === void 0 ? void 0 : _a.notificationList;
            if (this.isLastNotificationDismissed(notification, this[stackName]) &&
                (stackNotificationList === null || stackNotificationList === void 0 ? void 0 : stackNotificationList.length) > 0) {
                this[stackName].reopen = true;
                stackNotificationList = this.updateStackNotificationList(notification.type);
                const lastNotification = stackNotificationList[stackNotificationList.length - 1];
                if (lastNotification) {
                    this[stackName].activeNotification$.next(lastNotification);
                }
                else {
                    this[stackName].stackIndicator = false;
                    this[stackName].reopen = false;
                    this[stackName].animateStack = 2 /* ToBottom */;
                    this.setStackAnimation(notification.type, 1 /* ToTop */);
                }
            }
        };
        this.isLastNotificationDismissed = (notification, stack) => {
            const lastNotification = stack.notificationList[stack.notificationList.length - 1];
            return (lastNotification === null || lastNotification === void 0 ? void 0 : lastNotification.id) === (notification === null || notification === void 0 ? void 0 : notification.id);
        };
        this.getStackName = (stackType) => {
            return stackType === 1 ? 'warningStack' : 'infoStack';
        };
        this.warningStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(1 /* Warning */)).toLowerCase());
        this.infoStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(2 /* Info */)).toLowerCase());
    }
    ngOnDestroy() {
        this.destroyed$.next();
        this.destroyed$.complete();
    }
    ngAfterViewChecked() {
        this.cdRef.detectChanges();
    }
    /** @hidden */
    ngOnInit() {
        var _a, _b;
        this.positionTop = ((_a = document.querySelector('main')) === null || _a === void 0 ? void 0 : _a.offsetTop) + 12 + 'px';
        (_b = this.notification$) === null || _b === void 0 ? void 0 : _b.pipe(takeUntil(this.destroyed$)).subscribe(notification => {
            this.handleNotification(notification);
        });
    }
    getStack(notificationType, previous) {
        let stackType;
        if (notificationType === 1 /* Warning */ ||
            notificationType === 0 /* Error */) {
            stackType = previous ? 2 /* Info */ : 1 /* Warning */;
        }
        else {
            stackType = previous ? 1 /* Warning */ : 2 /* Info */;
        }
        return this.getStackName(stackType);
    }
};
AvlNotificationContainerComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
__decorate([
    HostBinding('style.top'),
    __metadata("design:type", String)
], AvlNotificationContainerComponent.prototype, "positionTop", void 0);
__decorate([
    ViewChild('warningStackElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "warningStackElement", void 0);
__decorate([
    ViewChild('infoStackElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "infoStackElement", void 0);
__decorate([
    ViewChild('infoStackIndicatorElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "infoStackIndicatorElement", void 0);
__decorate([
    ViewChild('infoStackIndicatorElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "warningStackIndicatorElement", void 0);
__decorate([
    Input('display-icon'),
    __metadata("design:type", Boolean)
], AvlNotificationContainerComponent.prototype, "displayIcon", void 0);
__decorate([
    Input('notification$'),
    __metadata("design:type", Observable)
], AvlNotificationContainerComponent.prototype, "notification$", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], AvlNotificationContainerComponent.prototype, "openMenu", void 0);
AvlNotificationContainerComponent = __decorate([
    Component({
        selector: 'avl-notification-container',
        template: "<div class=\"snackbar\" *ngIf=\"notification$ | async as notification\">\r\n  <div\r\n    [animateStack]=\"warningStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? infoSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"warningStack.methodDescription\"\r\n    class=\"snackbar-stack\"\r\n    id=\"warningStack\"\r\n    #warningStackElement\r\n  >\r\n    <div [animateSnackbar]=\"warningStack.snackbarAnimation\" id=\"warningSnack\" #warningSnackElement>\r\n      <avl-snackbar\r\n        *ngIf=\"warningStack.activeNotification$ | async as activeWarningNotification\"\r\n        id=\"warningSnackbar\"\r\n        [message]=\"activeWarningNotification?.messageText\"\r\n        [actionButtonLabel]=\"warningStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeWarningNotification.link\"\r\n        [messageType]=\"activeWarningNotification.type\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeWarningNotification)\"\r\n        snackbarListener\r\n        #warningSnackbar\r\n        showHideSnackbar=\"warningSnackbar\"\r\n        [methodDescription]=\"warningStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"warningStack.notificationList.length>1\" #warningStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': warningStack.stackIndicatorButtonLabel}\">\r\n            <avl-icon icon=\"icons:warning\" id=\"warningIcon\" class=\"warning\"></avl-icon>\r\n            <p id=\"snackbarMessage\">{{ warningStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n          <button id=\"actionButton\" *ngIf=\"warningStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(warningStack.previousNotification)\">\r\n            <div class=\"button-label\">{{ warningStack.stackIndicatorButtonLabel }}</div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    class=\"snackbar-stack\"\r\n    id=\"infoStack\"\r\n    [animateStack]=\"infoStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? warningSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"infoStack.methodDescription\"\r\n    #infoStackElement\r\n  >\r\n    <div [animateSnackbar]=\"infoStack.snackbarAnimation\" id=\"infoSnack\" #infoSnackElement>\r\n      <avl-snackbar\r\n        id=\"infoSnackbar\"\r\n        *ngIf=\"infoStack.activeNotification$ | async as activeInfoNotification\"\r\n        [message]=\"activeInfoNotification.messageText\"\r\n        [actionButtonLabel]=\"infoStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeInfoNotification.link\"\r\n        [messageType]=\"activeInfoNotification.type\"\r\n        [displayIcon]=\"displayIcon\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeInfoNotification)\"\r\n        snackbarListener\r\n        #infoSnackbar\r\n        showHideSnackbar=\"infoSnackbar\"\r\n        [methodDescription]=\"infoStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"infoStack.notificationList.length>1\" #infoStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': infoStack.stackIndicatorButtonLabel}\">\r\n            <p id=\"snackbarMessage\">{{ infoStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n        </div>\r\n        <button id=\"actionButton\" *ngIf=\"infoStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(infoStack.previousNotification)\">\r\n          <div class=\"button-label\">{{ infoStack.stackIndicatorButtonLabel }}</div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    animateButton\r\n    [infoStackHeight]=\"infoStack?.notificationList?.length > 0 ? infoSnackElement.offsetHeight : 0\"\r\n    [warningStackHeight]=\"warningStack?.notificationList?.length > 0 ? warningSnackElement.offsetHeight : 0\"\r\n    [infoStackIndicatorHeight]=\"infoStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    [warningStackIndicatorHeight]=\"warningStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    class=\"dismiss-all\"\r\n    *ngIf=\"notificationList?.length > 1\"\r\n  >\r\n    <avl-button id=\"dismissAll\" (click)=\"dismissAll()\">{{'VizBox.NotificationContainer.DismissAll' | translate}}</avl-button>\r\n  </div>\r\n</div>\r\n\r\n\r\n",
        styles: [":host{position:fixed;right:0;width:445px;display:flex;flex-direction:column;--avl-snackbar-text-color:var(--avl-on-background-info-color)}.snackbar{width:100%;display:flex;flex-direction:column}.snackbar.displayed{flex:1;max-height:100%}.snackbar-stack{position:absolute;top:0;left:0;right:0;width:100%}.stack-indicator-container{margin:0 12px;position:absolute;width:calc(100% - 12px);top:12px;z-index:-1}.snackbar-container{margin-top:0;margin-left:0;margin-right:0;width:100%}.button-label{text-align:left;text-transform:none}.stack-indicator{background-color:var(--avl-background-message-color);top:0;left:0;width:calc(100% - 24px);border-radius:4px;position:relative;height:100%;z-index:-1;box-shadow:0 3px 5px -1px rgb(0 0 0 / 20%),0 6px 10px 0 rgb(0 0 0 / 14%),0 1px 18px 0 rgb(0 0 0 / 12%)}.notification{display:flex;flex:1 1 100%;align-items:center;flex-direction:row;padding:0 12px 0 16px;justify-content:flex-start;cursor:pointer;text-overflow:ellipsis}.notification p{flex-grow:1;-webkit-line-clamp:3;max-height:48px;text-overflow:ellipsis;line-height:19px;font-size:14px;margin:0 0 0 12px;padding:12px 0;font-family:var(--avl-font-family);color:var(--avl-on-background-info-color)}button#actionButton{font-family:var(--avl-font-family);font-weight:500;font-size:14px;color:var(--avl-on-background-message-link-color);background-color:var(--avl-button-background-default-color);max-height:48px;height:48px;width:100%;cursor:pointer;padding:12px;margin:-12px 0 0;border-radius:2px;border:0;outline:0}div#actionButton:hover{color:var(--avl-on-background-message-link-hover-color)}#warningIcon{--avl-icon-custom-color:var(--avl-on-background-message-warning-color);flex:0 0 24px;--avl-icon-custom-color:var(--avl-warning-color)}#errorIcon{--avl-icon-custom-color:var(--avl-on-background-message-error-color);flex:0 0 24px}#infoIcon{--avl-icon-custom-color:var(--avl-on-background-message-emphasis-medium-color);flex:0 0 24px}#OKIcon{--avl-icon-custom-color:var(--avl-on-background-message-ok-color);flex:0 0 24px}.dismiss-all{position:absolute;padding:0 16px;border-radius:25px;background-color:var(--avl-background-message-color);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;top:12px}#dismissAll{--avl-flat-button-label-color:var(--avl-on-background-message-link-color)}avl-icon-button{flex:0 0 48px;margin-left:12px;cursor:pointer;--avl-icon-button-color:var(--avl-on-background-message-icon-default-color);--avl-icon-ink-hover-color:var(--avl-on-background-message-icon-hover-color);--avl-icon-ink-focus-color:var(--avl-on-background-message-icon-focus-color);--avl-icon-ink-pressed-color:var(--avl-on-background-message-icon-pressed-color)}@media only screen and (min-width:320px) and (max-width:376px){:host{width:calc(100% - 32px)}}@media only screen and (min-width:460px){:host{width:445px}}@media only screen and (min-width:376px) and (max-width:400px){:host{width:376px}}"]
    }),
    __metadata("design:paramtypes", [ChangeDetectorRef])
], AvlNotificationContainerComponent);
export { AvlNotificationContainerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGF2bC1uZy1jb250cm9scy9ub3RpZmljYXRpb24vIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9hdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lci9hdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUNMLGdCQUFnQixFQUNoQixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLE1BQU0sRUFDTixTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsQyxPQUFPLG1EQUFtRCxDQUFDO0FBRTNELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUN0RixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRS9CLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUV6RSxNQUFNLGlCQUFpQixHQUFHLElBQUksR0FBRyxDQUFpQjtJQUNoRCxnQkFBNEIsT0FBTyxDQUFDO0lBQ3BDLGtCQUE4QixTQUFTLENBQUM7SUFDeEMsZUFBMkIsTUFBTSxDQUFDO0lBQ2xDLGFBQXlCLElBQUksQ0FBQztDQUMvQixDQUFDLENBQUM7QUFNSCxJQUFhLGlDQUFpQyxHQUE5QyxNQUFhLGlDQUFpQztJQWdFNUMsWUFBcUIsS0FBd0I7UUFBeEIsVUFBSyxHQUFMLEtBQUssQ0FBbUI7UUE3QzdD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QSxTQUFTLEdBQUcsUUFBUSxDQUFDLENBQUMsY0FBMEIsQ0FBQyxnQkFBNEIsQ0FBQztTQUMvRTthQUFNO1lBQ0wsU0FBUyxHQUFHLFFBQVEsQ0FBQyxDQUFDLGlCQUE2QixDQUFDLGFBQXlCLENBQUM7U0FDL0U7UUFDRCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEMsQ0FBQztDQUtGLENBQUE7O1lBdEw2QixpQkFBaUI7O0FBOURuQjtJQUF6QixXQUFXLENBQUMsV0FBVyxDQUFDOztzRUFBcUI7QUFHWjtJQUFqQyxTQUFTLENBQUMscUJBQXFCLENBQUM7OEJBQXNCLFVBQVU7OEVBQUM7QUFHbkM7SUFBOUIsU0FBUyxDQUFDLGtCQUFrQixDQUFDOzhCQUFtQixVQUFVOzJFQUFDO0FBR3BCO0lBQXZDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQzs4QkFBNEIsVUFBVTtvRkFBQztBQUd0QztJQUF2QyxTQUFTLENBQUMsMkJBQTJCLENBQUM7OEJBQStCLFVBQVU7dUZBQUM7QUFHMUQ7SUFBdEIsS0FBSyxDQUFDLGNBQWMsQ0FBQzs7c0VBQTZCO0FBRzNCO0lBQXZCLEtBQUssQ0FBQyxlQUFlLENBQUM7OEJBQXVCLFVBQVU7d0VBb0J0RDtBQUVRO0lBQVQsTUFBTSxFQUFFOzhCQUFXLFlBQVk7bUVBQWtDO0FBMUN2RCxpQ0FBaUM7SUFMN0MsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLDRCQUE0QjtRQUN0QyxzNUpBQTBEOztLQUUzRCxDQUFDO3FDQWlFNEIsaUJBQWlCO0dBaEVsQyxpQ0FBaUMsQ0FzUDdDO1NBdFBZLGlDQUFpQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDb21wb25lbnQsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSG9zdEJpbmRpbmcsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgVmlld0NoaWxkXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0ICdAYXZsLWNvbnRyb2xzL2NvcmUvZGlzdC9hdmwtc25hY2tiYXIvYXZsLXNuYWNrYmFyJztcclxuaW1wb3J0IHsgQXZsTm90aWZpY2F0aW9uLCBBdmxOb3RpZmljYXRpb25UeXBlIH0gZnJvbSAnQGF2bC1jb250cm9scy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBTbmFja2Jhck1ldGhvZERlc2NyaXB0aW9uIH0gZnJvbSAnLi9kaXJlY3RpdmVzL3Nob3ctaGlkZS1zbmFja2Jhci5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFBvc2l0aW9uQW5pbWF0aW9uIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2FuaW1hdGUtc3RhY2suZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgU25hY2tiYXJTdGFjayB9IGZyb20gJy4vc25hY2tiYXItc3RhY2snO1xyXG5pbXBvcnQgeyBBTklNQVRJT05fRFVSQVRJT04gfSBmcm9tICcuL2F2bC1ub3RpZmljYXRpb24tY29udGFpbmVyLmNvbnN0cyc7XHJcblxyXG5jb25zdCBOT1RJRklDQVRJT05fVFlQRSA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KFtcclxuICBbQXZsTm90aWZpY2F0aW9uVHlwZS5FcnJvciwgJ0Vycm9yJ10sXHJcbiAgW0F2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZywgJ1dhcm5pbmcnXSxcclxuICBbQXZsTm90aWZpY2F0aW9uVHlwZS5JbmZvLCAnSW5mbyddLFxyXG4gIFtBdmxOb3RpZmljYXRpb25UeXBlLk9LLCAnT0snXVxyXG5dKTtcclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2F2bC1ub3RpZmljYXRpb24tY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9hdmwtbm90aWZpY2F0aW9uLWNvbnRhaW5lci5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIEF2bE5vdGlmaWNhdGlvbkNvbnRhaW5lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdDaGVja2VkIHtcclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBIb3N0QmluZGluZygnc3R5bGUudG9wJykgcG9zaXRpb25Ub3A6IHN0cmluZztcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCd3YXJuaW5nU3RhY2tFbGVtZW50Jykgd2FybmluZ1N0YWNrRWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCdpbmZvU3RhY2tFbGVtZW50JykgaW5mb1N0YWNrRWxlbWVudDogRWxlbWVudFJlZjtcclxuIFxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQFZpZXdDaGlsZCgnaW5mb1N0YWNrSW5kaWNhdG9yRWxlbWVudCcpIGluZm9TdGFja0luZGljYXRvckVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcbiAgXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCdpbmZvU3RhY2tJbmRpY2F0b3JFbGVtZW50Jykgd2FybmluZ1N0YWNrSW5kaWNhdG9yRWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgLyoqIElmIHNldCBvcHRpb25hbCBpY29uIChmb3IgaW5mbyBhbmQgT0sgbm90aWZpY2F0aW9ucykgaXMgZGlzcGxheWVkLCBoaWRkZW4gb3RoZXJ3aXNlLiAqL1xyXG4gIEBJbnB1dCgnZGlzcGxheS1pY29uJykgcHVibGljIGRpc3BsYXlJY29uOiBib29sZWFuO1xyXG5cclxuICAvKiogT2JzZXJ2YWJsZSBlbWl0cyBub3RpZmljYXRpb25zLiBEZWZhdWx0IG9ic2VydmFibGUgZW1pdHMgZHVtbXkgbm90aWZpY2F0aW9ucyBldmVyeSAzcyBmb3IgMTAwcy4gKi9cclxuICBASW5wdXQoJ25vdGlmaWNhdGlvbiQnKSBwdWJsaWMgbm90aWZpY2F0aW9uJDogT2JzZXJ2YWJsZTxBdmxOb3RpZmljYXRpb24+ID0gbmV3IE9ic2VydmFibGUoXHJcbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUoc3Vic2NyaWJlcikge1xyXG4gICAgICBsZXQgaSA9IDA7XHJcbiAgICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSk7XHJcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHtcclxuICAgICAgICAgIGlkOiBpKyssXHJcbiAgICAgICAgICBtb2R1bGU6ICdub3RpZmljYXRpb24tY29udGFpbmVyJyxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHR5cGU6IHdhcm5pbmcgPyBBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmcgOiBBdmxOb3RpZmljYXRpb25UeXBlLkluZm8sXHJcbiAgICAgICAgICBtZXNzYWdlVGV4dDogJ1NuYWNrYmFyIHdpdGggbm90aWZpY2F0aW9uJyArIG5ldyBEYXRlKCkudG9UaW1lU3RyaW5nKCksXHJcbiAgICAgICAgICByZWFkOiBmYWxzZSxcclxuICAgICAgICAgIGxpbms6ICdodHRwczovL3ZpemJveC5hdmwuY29tJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCAzMDAwKTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XHJcbiAgICAgIH0sIDEwMDAwMCk7XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgQE91dHB1dCgpIG9wZW5NZW51OiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIHdhcm5pbmdTdGFjazogU25hY2tiYXJTdGFjaztcclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBpbmZvU3RhY2s6IFNuYWNrYmFyU3RhY2s7XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIHByZXZpb3VzTm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb247XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIHN0YWNrSGVpZ2h0OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIHJlb3BlbjogYm9vbGVhbjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgbm90aWZpY2F0aW9uTGlzdDogQXZsTm90aWZpY2F0aW9uW10gPSBbXTtcclxuXHJcbiAgcHJpdmF0ZSBhY3RpdmVOb3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbjtcclxuICBwcml2YXRlIGRlc3Ryb3llZCQ6IFN1YmplY3Q8dm9pZD4gPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcclxuICAgIHRoaXMud2FybmluZ1N0YWNrID0gbmV3IFNuYWNrYmFyU3RhY2soXHJcbiAgICAgIFN0cmluZyhOT1RJRklDQVRJT05fVFlQRS5nZXQoQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nKSkudG9Mb3dlckNhc2UoKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmluZm9TdGFjayA9IG5ldyBTbmFja2JhclN0YWNrKFxyXG4gICAgICBTdHJpbmcoTk9USUZJQ0FUSU9OX1RZUEUuZ2V0KEF2bE5vdGlmaWNhdGlvblR5cGUuSW5mbykpLnRvTG93ZXJDYXNlKClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGVzdHJveWVkJC5uZXh0KCk7XHJcbiAgICB0aGlzLmRlc3Ryb3llZCQuY29tcGxldGUoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBvc2l0aW9uVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpPy5vZmZzZXRUb3AgKyAxMiArICdweCc7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbiQ/LnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpLnN1YnNjcmliZShub3RpZmljYXRpb24gPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBvbkJ1dHRvbkNsaWNrZWQgPSAoZXZlbnQ6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgIHRoaXMub3Blbk1lbnUuZW1pdCgpO1xyXG4gICAgICB0aGlzLmRpc21pc3NBbGwoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBvbk5vdGlmaWNhdGlvbkRpc21pc3NlZCA9IChldmVudDogYW55LCBub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbik6IHZvaWQgPT4ge1xyXG4gICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgIGNvbnN0IHNuYWNrVHlwZSA9IChldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy5pZD8ucmVwbGFjZSgnU25hY2tiYXInLCAnJyk7XHJcbiAgICAgIHRoaXMucmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgc25hY2tUeXBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBvcGVuRnJvbVN0YWNrID0gKG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBzdGFja05hbWUgPSB0aGlzLmdldFN0YWNrTmFtZShub3RpZmljYXRpb24udHlwZSk7XHJcbiAgICB0aGlzW3N0YWNrTmFtZV0ubWV0aG9kRGVzY3JpcHRpb24gPSBuZXcgU25hY2tiYXJNZXRob2REZXNjcmlwdGlvbignaGlkZScsIHRydWUpO1xyXG4gIH07XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIGRpc21pc3NBbGwgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbkxpc3QgPSBbXTtcclxuICAgIHRoaXMud2FybmluZ1N0YWNrLmFjdGl2ZU5vdGlmaWNhdGlvbiQubmV4dCh1bmRlZmluZWQpO1xyXG4gICAgdGhpcy5pbmZvU3RhY2suYWN0aXZlTm90aWZpY2F0aW9uJC5uZXh0KHVuZGVmaW5lZCk7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVOb3RpZmljYXRpb24gPSAobm90aWZpY2F0aW9uOiBhbnkpOiB2b2lkID0+IHtcclxuICAgIHRoaXMucHJldmlvdXNOb3RpZmljYXRpb24gPSB0aGlzLm5vdGlmaWNhdGlvbkxpc3RbdGhpcy5ub3RpZmljYXRpb25MaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25MaXN0LnB1c2gobm90aWZpY2F0aW9uKTtcclxuICAgIHRoaXMudXBkYXRlU3RhY2tBY3RpdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKTtcclxuICAgIHRoaXMuc2V0U3RhY2tBbmltYXRpb24obm90aWZpY2F0aW9uLnR5cGUpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlU3RhY2tBY3RpdmVOb3RpZmljYXRpb24gPSAobm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24pOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHN0YWNrTmFtZTogc3RyaW5nID0gdGhpcy5nZXRTdGFjayhub3RpZmljYXRpb24/LnR5cGUpO1xyXG4gICAgdGhpcy51cGRhdGVTdGFja05vdGlmaWNhdGlvbkxpc3Qobm90aWZpY2F0aW9uLnR5cGUpO1xyXG4gICAgdGhpcy5hY3RpdmVOb3RpZmljYXRpb24gPSBub3RpZmljYXRpb247XHJcblxyXG4gICAgaWYgKHRoaXNbc3RhY2tOYW1lXS5ub3RpZmljYXRpb25MaXN0Lmxlbmd0aCA+IDEpIHtcclxuICAgICAgdGhpcy5yZW9wZW4gPSB0cnVlO1xyXG4gICAgICBpZiAodGhpcy5wcmV2aW91c05vdGlmaWNhdGlvbj8udHlwZSA9PT0gbm90aWZpY2F0aW9uLnR5cGUpIHtcclxuICAgICAgICB0aGlzW3N0YWNrTmFtZV0uc25hY2tiYXJBbmltYXRpb24gPSBQb3NpdGlvbkFuaW1hdGlvbi5Ub1N0YWNrO1xyXG5cclxuICAgICAgICAvLyBzaWxlbnRseSBkaXNtaXNzIG5vdGlmaWNhdGlvbiBhZnRlciBwcmV2aW91cyBub3RpZmljYXRpb24gYW5pbWF0aW9uXHJcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zaWxlbnRseURpc21pc3NOb3RpZmljYXRpb24oc3RhY2tOYW1lKTtcclxuICAgICAgICAgIHRoaXNbc3RhY2tOYW1lXS5zbmFja2JhckFuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgfSwgQU5JTUFUSU9OX0RVUkFUSU9OKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNpbGVudGx5RGlzbWlzc05vdGlmaWNhdGlvbihzdGFja05hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzW3N0YWNrTmFtZV0uYWN0aXZlTm90aWZpY2F0aW9uJC5uZXh0KG5vdGlmaWNhdGlvbik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBwcml2YXRlIHVwZGF0ZVN0YWNrTm90aWZpY2F0aW9uTGlzdCA9IChcclxuICAgIG5vdGlmaWNhdGlvblR5cGU6IEF2bE5vdGlmaWNhdGlvblR5cGVcclxuICApOiBBdmxOb3RpZmljYXRpb25bXSA9PiB7XHJcbiAgICBjb25zdCBzdGFjayA9IHRoaXNbdGhpcy5nZXRTdGFjayhub3RpZmljYXRpb25UeXBlKV07XHJcbiAgICBpZiAoc3RhY2spIHtcclxuICAgICAgc3RhY2subm90aWZpY2F0aW9uTGlzdCA9IHRoaXMubm90aWZpY2F0aW9uTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IG5vdGlmaWNhdGlvblR5cGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YWNrLm5vdGlmaWNhdGlvbkxpc3Q7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBzaWxlbnRseURpc21pc3NOb3RpZmljYXRpb24gPSAoc3RhY2tOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgIHRoaXNbc3RhY2tOYW1lXS5kaXNtaXNzZWRTaWxlbnRseSA9IHRydWU7XHJcbiAgICB0aGlzW3N0YWNrTmFtZV0ubWV0aG9kRGVzY3JpcHRpb24gPSBuZXcgU25hY2tiYXJNZXRob2REZXNjcmlwdGlvbignaGlkZScsIGZhbHNlKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHNldFN0YWNrQW5pbWF0aW9uID0gKFxyXG4gICAgbm90aWZpY2F0aW9uVHlwZTogQXZsTm90aWZpY2F0aW9uVHlwZSxcclxuICAgIGFuaW1hdGlvbj86IFBvc2l0aW9uQW5pbWF0aW9uXHJcbiAgKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhY2sgPSB0aGlzLmdldFN0YWNrKG5vdGlmaWNhdGlvblR5cGUpO1xyXG4gICAgY29uc3QgcHJldmlvdXNTdGFjayA9IHRoaXMuZ2V0U3RhY2sobm90aWZpY2F0aW9uVHlwZSwgdHJ1ZSk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzW3ByZXZpb3VzU3RhY2tdPy5ub3RpZmljYXRpb25MaXN0Py5sZW5ndGggPiAwICYmXHJcbiAgICAgIHRoaXMucHJldmlvdXNOb3RpZmljYXRpb24/LnR5cGUgIT09IG5vdGlmaWNhdGlvblR5cGVcclxuICAgICkge1xyXG4gICAgICB0aGlzW3ByZXZpb3VzU3RhY2tdLnN0YWNrQW5pbWF0aW9uID0gYW5pbWF0aW9uIHx8IFBvc2l0aW9uQW5pbWF0aW9uLlRvQm90dG9tO1xyXG5cclxuICAgICAgdGhpc1tjdXJyZW50U3RhY2tdLnN0YWNrQW5pbWF0aW9uID1cclxuICAgICAgICBhbmltYXRpb24gPT09IFBvc2l0aW9uQW5pbWF0aW9uLlRvVG9wXHJcbiAgICAgICAgICA/IFBvc2l0aW9uQW5pbWF0aW9uLlRvQm90dG9tXHJcbiAgICAgICAgICA6IFBvc2l0aW9uQW5pbWF0aW9uLlRvVG9wO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgcmVtb3ZlTm90aWZpY2F0aW9uID0gKG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uLCBzbmFja1R5cGU/OiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHN0YWNrTmFtZTogc3RyaW5nID0gdGhpcy5nZXRTdGFjayhub3RpZmljYXRpb24/LnR5cGUpO1xyXG4gICAgaWYgKHRoaXNbc3RhY2tOYW1lXS5kaXNtaXNzZWRTaWxlbnRseSkge1xyXG4gICAgICAvL25vdGlmaWNhdGlvbiBkaXNtaXNzZWQgc2lsZW50bHlcclxuICAgICAgY29uc3Qgc3RhY2tOYW1lOiBzdHJpbmcgPSB0aGlzLmdldFN0YWNrKHRoaXMuYWN0aXZlTm90aWZpY2F0aW9uPy50eXBlKTtcclxuICAgICAgdGhpc1tzdGFja05hbWVdLmFjdGl2ZU5vdGlmaWNhdGlvbiQubmV4dCh0aGlzLmFjdGl2ZU5vdGlmaWNhdGlvbik7XHJcbiAgICAgIHRoaXMucmVvcGVuID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvL25vdGlmaWNhdGlvbiBkaXNtaXNzZWRcclxuICAgICAgdGhpcy5ub3RpZmljYXRpb25MaXN0ID0gdGhpcy5ub3RpZmljYXRpb25MaXN0LmZpbHRlcihcclxuICAgICAgICBjdXJyZW50Tm90aWZpY2F0aW9uID0+IGN1cnJlbnROb3RpZmljYXRpb24uaWQgIT09IG5vdGlmaWNhdGlvbi5pZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnJlb3Blbkxhc3ROb3RpZmljYXRpb24obm90aWZpY2F0aW9uLCBzdGFja05hbWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgcmVvcGVuTGFzdE5vdGlmaWNhdGlvbiA9IChub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbiwgc3RhY2tOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgIGxldCBzdGFja05vdGlmaWNhdGlvbkxpc3Q6IEF2bE5vdGlmaWNhdGlvbltdID0gdGhpc1tzdGFja05hbWVdPy5ub3RpZmljYXRpb25MaXN0O1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmlzTGFzdE5vdGlmaWNhdGlvbkRpc21pc3NlZChub3RpZmljYXRpb24sIHRoaXNbc3RhY2tOYW1lXSkgJiZcclxuICAgICAgc3RhY2tOb3RpZmljYXRpb25MaXN0Py5sZW5ndGggPiAwXHJcbiAgICApIHtcclxuICAgICAgdGhpc1tzdGFja05hbWVdLnJlb3BlbiA9IHRydWU7XHJcblxyXG4gICAgICBzdGFja05vdGlmaWNhdGlvbkxpc3QgPSB0aGlzLnVwZGF0ZVN0YWNrTm90aWZpY2F0aW9uTGlzdChub3RpZmljYXRpb24udHlwZSk7XHJcbiAgICAgIGNvbnN0IGxhc3ROb3RpZmljYXRpb24gPSBzdGFja05vdGlmaWNhdGlvbkxpc3Rbc3RhY2tOb3RpZmljYXRpb25MaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgICBpZiAobGFzdE5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHRoaXNbc3RhY2tOYW1lXS5hY3RpdmVOb3RpZmljYXRpb24kLm5leHQobGFzdE5vdGlmaWNhdGlvbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpc1tzdGFja05hbWVdLnN0YWNrSW5kaWNhdG9yID0gZmFsc2U7XHJcbiAgICAgICAgdGhpc1tzdGFja05hbWVdLnJlb3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXNbc3RhY2tOYW1lXS5hbmltYXRlU3RhY2sgPSBQb3NpdGlvbkFuaW1hdGlvbi5Ub0JvdHRvbTtcclxuICAgICAgICB0aGlzLnNldFN0YWNrQW5pbWF0aW9uKG5vdGlmaWNhdGlvbi50eXBlLCBQb3NpdGlvbkFuaW1hdGlvbi5Ub1RvcCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIGlzTGFzdE5vdGlmaWNhdGlvbkRpc21pc3NlZCA9IChcclxuICAgIG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uLFxyXG4gICAgc3RhY2s6IFNuYWNrYmFyU3RhY2tcclxuICApOiBib29sZWFuID0+IHtcclxuICAgIGNvbnN0IGxhc3ROb3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbiA9XHJcbiAgICAgIHN0YWNrLm5vdGlmaWNhdGlvbkxpc3Rbc3RhY2subm90aWZpY2F0aW9uTGlzdC5sZW5ndGggLSAxXTtcclxuICAgIHJldHVybiBsYXN0Tm90aWZpY2F0aW9uPy5pZCA9PT0gbm90aWZpY2F0aW9uPy5pZDtcclxuICB9O1xyXG4gIHByaXZhdGUgZ2V0U3RhY2sobm90aWZpY2F0aW9uVHlwZTogbnVtYmVyLCBwcmV2aW91cz86IGJvb2xlYW4pOiBzdHJpbmcge1xyXG4gICAgbGV0IHN0YWNrVHlwZTogQXZsTm90aWZpY2F0aW9uVHlwZTtcclxuICAgIGlmIChcclxuICAgICAgbm90aWZpY2F0aW9uVHlwZSA9PT0gQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nIHx8XHJcbiAgICAgIG5vdGlmaWNhdGlvblR5cGUgPT09IEF2bE5vdGlmaWNhdGlvblR5cGUuRXJyb3JcclxuICAgICkge1xyXG4gICAgICBzdGFja1R5cGUgPSBwcmV2aW91cyA/IEF2bE5vdGlmaWNhdGlvblR5cGUuSW5mbyA6IEF2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN0YWNrVHlwZSA9IHByZXZpb3VzID8gQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nIDogQXZsTm90aWZpY2F0aW9uVHlwZS5JbmZvO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhY2tOYW1lKHN0YWNrVHlwZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFN0YWNrTmFtZSA9IChzdGFja1R5cGU6IEF2bE5vdGlmaWNhdGlvblR5cGUpOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIHN0YWNrVHlwZSA9PT0gMSA/ICd3YXJuaW5nU3RhY2snIDogJ2luZm9TdGFjayc7XHJcbiAgfTtcclxufVxyXG4iXX0=
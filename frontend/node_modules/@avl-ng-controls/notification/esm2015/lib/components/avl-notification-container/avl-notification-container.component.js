import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from './directives/animate-stack.directive';
import * as ɵngcc3 from './directives/animate-snackbar.directive';
import * as ɵngcc4 from '@avl-controls/ng-binders';
import * as ɵngcc5 from './directives/snackbar-listener.directive';
import * as ɵngcc6 from './directives/show-hide-snackbar.directive';
import * as ɵngcc7 from './directives/animate-button.directive';
import * as ɵngcc8 from '@ngx-translate/core';

const _c0 = ["warningStackElement"];
const _c1 = ["infoStackElement"];
const _c2 = ["infoStackIndicatorElement"];
function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template(rf, ctx) { if (rf & 1) {
    const _r14 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "avl-snackbar", 14, 15);
    ɵngcc0.ɵɵlistener("buttonClicked", function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template_avl_snackbar_buttonClicked_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.onButtonClicked($event); })("notificationDismissed", function AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template_avl_snackbar_notificationDismissed_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const activeWarningNotification_r11 = ctx.ngIf; const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.onNotificationDismissed($event, activeWarningNotification_r11); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const activeWarningNotification_r11 = ctx.ngIf;
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("message", activeWarningNotification_r11 == null ? null : activeWarningNotification_r11.messageText)("actionButtonLabel", ctx_r4.warningStack.stackIndicatorButtonLabel)("link", activeWarningNotification_r11.link)("messageType", activeWarningNotification_r11.type)("methodDescription", ctx_r4.warningStack.methodDescription);
} }
function AvlNotificationContainerComponent_div_0_div_7_button_9_Template(rf, ctx) { if (rf & 1) {
    const _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 25);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_7_button_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(3); return ctx_r18.openFromStack(ctx_r18.warningStack.previousNotification); });
    ɵngcc0.ɵɵelementStart(1, "div", 26);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r17 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r17.warningStack.stackIndicatorButtonLabel);
} }
const _c3 = function (a1) { return { "notification": true, "has-action": a1 }; };
function AvlNotificationContainerComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 16, 17);
    ɵngcc0.ɵɵelementStart(2, "div", 18);
    ɵngcc0.ɵɵelementStart(3, "div", 19);
    ɵngcc0.ɵɵelementStart(4, "div", 20);
    ɵngcc0.ɵɵelement(5, "avl-icon", 21);
    ɵngcc0.ɵɵelementStart(6, "p", 22);
    ɵngcc0.ɵɵtext(7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(8, "avl-icon-button", 23);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(9, AvlNotificationContainerComponent_div_0_div_7_button_9_Template, 3, 1, "button", 24);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(3, _c3, ctx_r5.warningStack.stackIndicatorButtonLabel));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ctx_r5.warningStack.previousNotification == null ? null : ctx_r5.warningStack.previousNotification.messageText);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5.warningStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template(rf, ctx) { if (rf & 1) {
    const _r23 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "avl-snackbar", 27, 28);
    ɵngcc0.ɵɵlistener("buttonClicked", function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template_avl_snackbar_buttonClicked_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r22 = ɵngcc0.ɵɵnextContext(2); return ctx_r22.onButtonClicked($event); })("notificationDismissed", function AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template_avl_snackbar_notificationDismissed_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const activeInfoNotification_r20 = ctx.ngIf; const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.onNotificationDismissed($event, activeInfoNotification_r20); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const activeInfoNotification_r20 = ctx.ngIf;
    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("message", activeInfoNotification_r20.messageText)("actionButtonLabel", ctx_r8.infoStack.stackIndicatorButtonLabel)("link", activeInfoNotification_r20.link)("messageType", activeInfoNotification_r20.type)("displayIcon", ctx_r8.displayIcon)("methodDescription", ctx_r8.infoStack.methodDescription);
} }
function AvlNotificationContainerComponent_div_0_div_14_button_8_Template(rf, ctx) { if (rf & 1) {
    const _r28 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 25);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_14_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r27 = ɵngcc0.ɵɵnextContext(3); return ctx_r27.openFromStack(ctx_r27.infoStack.previousNotification); });
    ɵngcc0.ɵɵelementStart(1, "div", 26);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r26 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r26.infoStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_div_14_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 16, 29);
    ɵngcc0.ɵɵelementStart(2, "div", 18);
    ɵngcc0.ɵɵelementStart(3, "div", 19);
    ɵngcc0.ɵɵelementStart(4, "div", 20);
    ɵngcc0.ɵɵelementStart(5, "p", 22);
    ɵngcc0.ɵɵtext(6);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(7, "avl-icon-button", 23);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(8, AvlNotificationContainerComponent_div_0_div_14_button_8_Template, 3, 1, "button", 24);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(3, _c3, ctx_r9.infoStack.stackIndicatorButtonLabel));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r9.infoStack.previousNotification == null ? null : ctx_r9.infoStack.previousNotification.messageText);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r9.infoStack.stackIndicatorButtonLabel);
} }
function AvlNotificationContainerComponent_div_0_div_15_Template(rf, ctx) { if (rf & 1) {
    const _r30 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 30);
    ɵngcc0.ɵɵelementStart(1, "avl-button", 31);
    ɵngcc0.ɵɵlistener("click", function AvlNotificationContainerComponent_div_0_div_15_Template_avl_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.dismissAll(); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵpipe(3, "translate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    ɵngcc0.ɵɵnextContext();
    const _r7 = ɵngcc0.ɵɵreference(11);
    const _r3 = ɵngcc0.ɵɵreference(4);
    const ctx_r10 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("infoStackHeight", (ctx_r10.infoStack == null ? null : ctx_r10.infoStack.notificationList == null ? null : ctx_r10.infoStack.notificationList.length) > 0 ? _r7.offsetHeight : 0)("warningStackHeight", (ctx_r10.warningStack == null ? null : ctx_r10.warningStack.notificationList == null ? null : ctx_r10.warningStack.notificationList.length) > 0 ? _r3.offsetHeight : 0)("infoStackIndicatorHeight", ctx_r10.infoStackIndicatorElement == null ? null : ctx_r10.infoStackIndicatorElement.nativeElement == null ? null : ctx_r10.infoStackIndicatorElement.nativeElement.offsetHeight)("warningStackIndicatorHeight", ctx_r10.warningStackIndicatorElement == null ? null : ctx_r10.warningStackIndicatorElement.nativeElement == null ? null : ctx_r10.warningStackIndicatorElement.nativeElement.offsetHeight);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 5, "VizBox.NotificationContainer.DismissAll"));
} }
function AvlNotificationContainerComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "div", 2, 3);
    ɵngcc0.ɵɵelementStart(3, "div", 4, 5);
    ɵngcc0.ɵɵtemplate(5, AvlNotificationContainerComponent_div_0_avl_snackbar_5_Template, 2, 5, "avl-snackbar", 6);
    ɵngcc0.ɵɵpipe(6, "async");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(7, AvlNotificationContainerComponent_div_0_div_7_Template, 10, 5, "div", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(8, "div", 8, 9);
    ɵngcc0.ɵɵelementStart(10, "div", 10, 11);
    ɵngcc0.ɵɵtemplate(12, AvlNotificationContainerComponent_div_0_avl_snackbar_12_Template, 2, 6, "avl-snackbar", 12);
    ɵngcc0.ɵɵpipe(13, "async");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(14, AvlNotificationContainerComponent_div_0_div_14_Template, 9, 5, "div", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(15, AvlNotificationContainerComponent_div_0_div_15_Template, 4, 7, "div", 13);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r3 = ɵngcc0.ɵɵreference(4);
    const _r7 = ɵngcc0.ɵɵreference(11);
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("animateStack", ctx_r0.warningStack == null ? null : ctx_r0.warningStack.stackAnimation)("previousStackHeight", ctx_r0.infoStack.notificationList.length > 0 ? _r7.offsetHeight : 0)("snackbarMethodDescription", ctx_r0.warningStack.methodDescription);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("animateSnackbar", ctx_r0.warningStack.snackbarAnimation);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(6, 13, ctx_r0.warningStack.activeNotification$));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.warningStack.notificationList.length > 1);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("animateStack", ctx_r0.infoStack == null ? null : ctx_r0.infoStack.stackAnimation)("previousStackHeight", ctx_r0.infoStack.notificationList.length > 0 ? _r3.offsetHeight : 0)("snackbarMethodDescription", ctx_r0.infoStack.methodDescription);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("animateSnackbar", ctx_r0.infoStack.snackbarAnimation);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(13, 15, ctx_r0.infoStack.activeNotification$));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.infoStack.notificationList.length > 1);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", (ctx_r0.notificationList == null ? null : ctx_r0.notificationList.length) > 1);
} }
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { AfterViewChecked, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';
import { Observable } from 'rxjs';
import '@avl-controls/core/dist/avl-snackbar/avl-snackbar';
import { takeUntil } from 'rxjs/operators';
import { SnackbarMethodDescription } from './directives/show-hide-snackbar.directive';
import { Subject } from 'rxjs';
import { SnackbarStack } from './snackbar-stack';
import { ANIMATION_DURATION } from './avl-notification-container.consts';
const NOTIFICATION_TYPE = new Map([
    [0 /* Error */, 'Error'],
    [1 /* Warning */, 'Warning'],
    [2 /* Info */, 'Info'],
    [3 /* OK */, 'OK']
]);
let AvlNotificationContainerComponent = class AvlNotificationContainerComponent {
    constructor(cdRef) {
        this.cdRef = cdRef;
        /** Observable emits notifications. Default observable emits dummy notifications every 3s for 100s. */
        this.notification$ = new Observable(function subscribe(subscriber) {
            let i = 0;
            const intervalId = setInterval(() => {
                const warning = Math.round(Math.random());
                subscriber.next({
                    id: i++,
                    module: 'notification-container',
                    timestamp: new Date(),
                    type: warning ? 1 /* Warning */ : 2 /* Info */,
                    messageText: 'Snackbar with notification' + new Date().toTimeString(),
                    read: false,
                    link: 'https://vizbox.avl.com'
                });
            }, 3000);
            setTimeout(() => {
                clearInterval(intervalId);
            }, 100000);
        });
        this.openMenu = new EventEmitter();
        /** @hidden */
        this.stackHeight = {};
        /** @hidden */
        this.notificationList = [];
        this.destroyed$ = new Subject();
        /** @hidden */
        this.onButtonClicked = (event) => {
            if (event) {
                this.openMenu.emit();
                this.dismissAll();
            }
        };
        /** @hidden */
        this.onNotificationDismissed = (event, notification) => {
            var _a, _b;
            if (event) {
                const snackType = (_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.id) === null || _b === void 0 ? void 0 : _b.replace('Snackbar', '');
                this.removeNotification(notification, snackType);
            }
        };
        /** @hidden */
        this.openFromStack = (notification) => {
            const stackName = this.getStackName(notification.type);
            this[stackName].methodDescription = new SnackbarMethodDescription('hide', true);
        };
        /** @hidden */
        this.dismissAll = () => {
            this.notificationList = [];
            this.warningStack.activeNotification$.next(undefined);
            this.infoStack.activeNotification$.next(undefined);
        };
        this.handleNotification = (notification) => {
            this.previousNotification = this.notificationList[this.notificationList.length - 1];
            this.notificationList.push(notification);
            this.updateStackActiveNotification(notification);
            this.setStackAnimation(notification.type);
        };
        this.updateStackActiveNotification = (notification) => {
            var _a;
            const stackName = this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            this.updateStackNotificationList(notification.type);
            this.activeNotification = notification;
            if (this[stackName].notificationList.length > 1) {
                this.reopen = true;
                if (((_a = this.previousNotification) === null || _a === void 0 ? void 0 : _a.type) === notification.type) {
                    this[stackName].snackbarAnimation = 3 /* ToStack */;
                    // silently dismiss notification after previous notification animation
                    const timeout = setTimeout(() => {
                        this.silentlyDismissNotification(stackName);
                        this[stackName].snackbarAnimation = null;
                        clearTimeout(timeout);
                    }, ANIMATION_DURATION);
                }
                else {
                    this.silentlyDismissNotification(stackName);
                }
            }
            else {
                this[stackName].activeNotification$.next(notification);
            }
        };
        this.updateStackNotificationList = (notificationType) => {
            const stack = this[this.getStack(notificationType)];
            if (stack) {
                stack.notificationList = this.notificationList.filter(item => item.type === notificationType);
            }
            return stack.notificationList;
        };
        this.silentlyDismissNotification = (stackName) => {
            this[stackName].dismissedSilently = true;
            this[stackName].methodDescription = new SnackbarMethodDescription('hide', false);
        };
        this.setStackAnimation = (notificationType, animation) => {
            var _a, _b, _c;
            const currentStack = this.getStack(notificationType);
            const previousStack = this.getStack(notificationType, true);
            if (((_b = (_a = this[previousStack]) === null || _a === void 0 ? void 0 : _a.notificationList) === null || _b === void 0 ? void 0 : _b.length) > 0 &&
                ((_c = this.previousNotification) === null || _c === void 0 ? void 0 : _c.type) !== notificationType) {
                this[previousStack].stackAnimation = animation || 2 /* ToBottom */;
                this[currentStack].stackAnimation =
                    animation === 1 /* ToTop */
                        ? 2 /* ToBottom */
                        : 1 /* ToTop */;
            }
        };
        this.removeNotification = (notification, snackType) => {
            var _a;
            const stackName = this.getStack(notification === null || notification === void 0 ? void 0 : notification.type);
            if (this[stackName].dismissedSilently) {
                //notification dismissed silently
                const stackName = this.getStack((_a = this.activeNotification) === null || _a === void 0 ? void 0 : _a.type);
                this[stackName].activeNotification$.next(this.activeNotification);
                this.reopen = false;
            }
            else {
                //notification dismissed
                this.notificationList = this.notificationList.filter(currentNotification => currentNotification.id !== notification.id);
                this.reopenLastNotification(notification, stackName);
            }
        };
        this.reopenLastNotification = (notification, stackName) => {
            var _a;
            let stackNotificationList = (_a = this[stackName]) === null || _a === void 0 ? void 0 : _a.notificationList;
            if (this.isLastNotificationDismissed(notification, this[stackName]) &&
                (stackNotificationList === null || stackNotificationList === void 0 ? void 0 : stackNotificationList.length) > 0) {
                this[stackName].reopen = true;
                stackNotificationList = this.updateStackNotificationList(notification.type);
                const lastNotification = stackNotificationList[stackNotificationList.length - 1];
                if (lastNotification) {
                    this[stackName].activeNotification$.next(lastNotification);
                }
                else {
                    this[stackName].stackIndicator = false;
                    this[stackName].reopen = false;
                    this[stackName].animateStack = 2 /* ToBottom */;
                    this.setStackAnimation(notification.type, 1 /* ToTop */);
                }
            }
        };
        this.isLastNotificationDismissed = (notification, stack) => {
            const lastNotification = stack.notificationList[stack.notificationList.length - 1];
            return (lastNotification === null || lastNotification === void 0 ? void 0 : lastNotification.id) === (notification === null || notification === void 0 ? void 0 : notification.id);
        };
        this.getStackName = (stackType) => {
            return stackType === 1 ? 'warningStack' : 'infoStack';
        };
        this.warningStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(1 /* Warning */)).toLowerCase());
        this.infoStack = new SnackbarStack(String(NOTIFICATION_TYPE.get(2 /* Info */)).toLowerCase());
    }
    ngOnDestroy() {
        this.destroyed$.next();
        this.destroyed$.complete();
    }
    ngAfterViewChecked() {
        this.cdRef.detectChanges();
    }
    /** @hidden */
    ngOnInit() {
        var _a, _b;
        this.positionTop = ((_a = document.querySelector('main')) === null || _a === void 0 ? void 0 : _a.offsetTop) + 12 + 'px';
        (_b = this.notification$) === null || _b === void 0 ? void 0 : _b.pipe(takeUntil(this.destroyed$)).subscribe(notification => {
            this.handleNotification(notification);
        });
    }
    getStack(notificationType, previous) {
        let stackType;
        if (notificationType === 1 /* Warning */ ||
            notificationType === 0 /* Error */) {
            stackType = previous ? 2 /* Info */ : 1 /* Warning */;
        }
        else {
            stackType = previous ? 1 /* Warning */ : 2 /* Info */;
        }
        return this.getStackName(stackType);
    }
};
AvlNotificationContainerComponent.ɵfac = function AvlNotificationContainerComponent_Factory(t) { return new (t || AvlNotificationContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };
AvlNotificationContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AvlNotificationContainerComponent, selectors: [["avl-notification-container"]], viewQuery: function AvlNotificationContainerComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
        ɵngcc0.ɵɵviewQuery(_c2, true);
        ɵngcc0.ɵɵviewQuery(_c2, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.warningStackElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.infoStackElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.infoStackIndicatorElement = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.warningStackIndicatorElement = _t.first);
    } }, hostVars: 2, hostBindings: function AvlNotificationContainerComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("top", ctx.positionTop);
    } }, inputs: { notification$: "notification$", displayIcon: ["display-icon", "displayIcon"] }, outputs: { openMenu: "openMenu" }, decls: 2, vars: 3, consts: [["class", "snackbar", 4, "ngIf"], [1, "snackbar"], ["id", "warningStack", 1, "snackbar-stack", 3, "animateStack", "previousStackHeight", "snackbarMethodDescription"], ["warningStackElement", ""], ["id", "warningSnack", 3, "animateSnackbar"], ["warningSnackElement", ""], ["id", "warningSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "warningSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "methodDescription", "buttonClicked", "notificationDismissed", 4, "ngIf"], ["class", "stack-indicator-container", 4, "ngIf"], ["id", "infoStack", 1, "snackbar-stack", 3, "animateStack", "previousStackHeight", "snackbarMethodDescription"], ["infoStackElement", ""], ["id", "infoSnack", 3, "animateSnackbar"], ["infoSnackElement", ""], ["id", "infoSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "infoSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "displayIcon", "methodDescription", "buttonClicked", "notificationDismissed", 4, "ngIf"], ["animateButton", "", "class", "dismiss-all", 3, "infoStackHeight", "warningStackHeight", "infoStackIndicatorHeight", "warningStackIndicatorHeight", 4, "ngIf"], ["id", "warningSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "warningSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "methodDescription", "buttonClicked", "notificationDismissed"], ["warningSnackbar", ""], [1, "stack-indicator-container"], ["warningStackIndicator", ""], [1, "stack-indicator"], [1, "notification-container"], [3, "ngClass"], ["icon", "icons:warning", "id", "warningIcon", 1, "warning"], ["id", "snackbarMessage"], ["id", "closeButton", "icon", "icons:close"], ["id", "actionButton", 3, "click", 4, "ngIf"], ["id", "actionButton", 3, "click"], [1, "button-label"], ["id", "infoSnackbar", "sliding", "", "snackbarListener", "", "showHideSnackbar", "infoSnackbar", 3, "message", "actionButtonLabel", "link", "messageType", "displayIcon", "methodDescription", "buttonClicked", "notificationDismissed"], ["infoSnackbar", ""], ["infoStackIndicator", ""], ["animateButton", "", 1, "dismiss-all", 3, "infoStackHeight", "warningStackHeight", "infoStackIndicatorHeight", "warningStackIndicatorHeight"], ["id", "dismissAll", 3, "click"]], template: function AvlNotificationContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, AvlNotificationContainerComponent_div_0_Template, 16, 17, "div", 0);
        ɵngcc0.ɵɵpipe(1, "async");
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.notification$));
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.AnimateStack, ɵngcc3.AnimateSnackbar, ɵngcc4.AvlInteractionControlDirective, ɵngcc4.AvlSnackbarDirective, ɵngcc5.SnackbarListener, ɵngcc6.ShowHideSnackbarDirective, ɵngcc1.NgClass, ɵngcc4.AvlIconButtonDirective, ɵngcc7.AnimateButton], pipes: [ɵngcc1.AsyncPipe, ɵngcc8.TranslatePipe], styles: ["[_nghost-%COMP%]{position:fixed;right:0;width:445px;display:flex;flex-direction:column;--avl-snackbar-text-color:var(--avl-on-background-info-color)}.snackbar[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.snackbar.displayed[_ngcontent-%COMP%]{flex:1;max-height:100%}.snackbar-stack[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;width:100%}.stack-indicator-container[_ngcontent-%COMP%]{margin:0 12px;position:absolute;width:calc(100% - 12px);top:12px;z-index:-1}.snackbar-container[_ngcontent-%COMP%]{margin-top:0;margin-left:0;margin-right:0;width:100%}.button-label[_ngcontent-%COMP%]{text-align:left;text-transform:none}.stack-indicator[_ngcontent-%COMP%]{background-color:var(--avl-background-message-color);top:0;left:0;width:calc(100% - 24px);border-radius:4px;position:relative;height:100%;z-index:-1;box-shadow:0 3px 5px -1px rgb(0 0 0 / 20%),0 6px 10px 0 rgb(0 0 0 / 14%),0 1px 18px 0 rgb(0 0 0 / 12%)}.notification[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;align-items:center;flex-direction:row;padding:0 12px 0 16px;justify-content:flex-start;cursor:pointer;text-overflow:ellipsis}.notification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex-grow:1;-webkit-line-clamp:3;max-height:48px;text-overflow:ellipsis;line-height:19px;font-size:14px;margin:0 0 0 12px;padding:12px 0;font-family:var(--avl-font-family);color:var(--avl-on-background-info-color)}button#actionButton[_ngcontent-%COMP%]{font-family:var(--avl-font-family);font-weight:500;font-size:14px;color:var(--avl-on-background-message-link-color);background-color:var(--avl-button-background-default-color);max-height:48px;height:48px;width:100%;cursor:pointer;padding:12px;margin:-12px 0 0;border-radius:2px;border:0;outline:0}div#actionButton[_ngcontent-%COMP%]:hover{color:var(--avl-on-background-message-link-hover-color)}#warningIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-warning-color);flex:0 0 24px;--avl-icon-custom-color:var(--avl-warning-color)}#errorIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-error-color);flex:0 0 24px}#infoIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-emphasis-medium-color);flex:0 0 24px}#OKIcon[_ngcontent-%COMP%]{--avl-icon-custom-color:var(--avl-on-background-message-ok-color);flex:0 0 24px}.dismiss-all[_ngcontent-%COMP%]{position:absolute;padding:0 16px;border-radius:25px;background-color:var(--avl-background-message-color);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;top:12px}#dismissAll[_ngcontent-%COMP%]{--avl-flat-button-label-color:var(--avl-on-background-message-link-color)}avl-icon-button[_ngcontent-%COMP%]{flex:0 0 48px;margin-left:12px;cursor:pointer;--avl-icon-button-color:var(--avl-on-background-message-icon-default-color);--avl-icon-ink-hover-color:var(--avl-on-background-message-icon-hover-color);--avl-icon-ink-focus-color:var(--avl-on-background-message-icon-focus-color);--avl-icon-ink-pressed-color:var(--avl-on-background-message-icon-pressed-color)}@media only screen and (min-width:320px) and (max-width:376px){[_nghost-%COMP%]{width:calc(100% - 32px)}}@media only screen and (min-width:460px){[_nghost-%COMP%]{width:445px}}@media only screen and (min-width:376px) and (max-width:400px){[_nghost-%COMP%]{width:376px}}"] });
AvlNotificationContainerComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
__decorate([
    HostBinding('style.top'),
    __metadata("design:type", String)
], AvlNotificationContainerComponent.prototype, "positionTop", void 0);
__decorate([
    ViewChild('warningStackElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "warningStackElement", void 0);
__decorate([
    ViewChild('infoStackElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "infoStackElement", void 0);
__decorate([
    ViewChild('infoStackIndicatorElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "infoStackIndicatorElement", void 0);
__decorate([
    ViewChild('infoStackIndicatorElement'),
    __metadata("design:type", ElementRef)
], AvlNotificationContainerComponent.prototype, "warningStackIndicatorElement", void 0);
__decorate([
    Input('display-icon'),
    __metadata("design:type", Boolean)
], AvlNotificationContainerComponent.prototype, "displayIcon", void 0);
__decorate([
    Input('notification$'),
    __metadata("design:type", Observable)
], AvlNotificationContainerComponent.prototype, "notification$", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], AvlNotificationContainerComponent.prototype, "openMenu", void 0);
AvlNotificationContainerComponent = __decorate([ __metadata("design:paramtypes", [ChangeDetectorRef])
], AvlNotificationContainerComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AvlNotificationContainerComponent, [{
        type: Component,
        args: [{
                selector: 'avl-notification-container',
                template: "<div class=\"snackbar\" *ngIf=\"notification$ | async as notification\">\r\n  <div\r\n    [animateStack]=\"warningStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? infoSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"warningStack.methodDescription\"\r\n    class=\"snackbar-stack\"\r\n    id=\"warningStack\"\r\n    #warningStackElement\r\n  >\r\n    <div [animateSnackbar]=\"warningStack.snackbarAnimation\" id=\"warningSnack\" #warningSnackElement>\r\n      <avl-snackbar\r\n        *ngIf=\"warningStack.activeNotification$ | async as activeWarningNotification\"\r\n        id=\"warningSnackbar\"\r\n        [message]=\"activeWarningNotification?.messageText\"\r\n        [actionButtonLabel]=\"warningStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeWarningNotification.link\"\r\n        [messageType]=\"activeWarningNotification.type\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeWarningNotification)\"\r\n        snackbarListener\r\n        #warningSnackbar\r\n        showHideSnackbar=\"warningSnackbar\"\r\n        [methodDescription]=\"warningStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"warningStack.notificationList.length>1\" #warningStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': warningStack.stackIndicatorButtonLabel}\">\r\n            <avl-icon icon=\"icons:warning\" id=\"warningIcon\" class=\"warning\"></avl-icon>\r\n            <p id=\"snackbarMessage\">{{ warningStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n          <button id=\"actionButton\" *ngIf=\"warningStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(warningStack.previousNotification)\">\r\n            <div class=\"button-label\">{{ warningStack.stackIndicatorButtonLabel }}</div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    class=\"snackbar-stack\"\r\n    id=\"infoStack\"\r\n    [animateStack]=\"infoStack?.stackAnimation\"\r\n    [previousStackHeight] = \"infoStack.notificationList.length>0 ? warningSnackElement.offsetHeight : 0\"\r\n    [snackbarMethodDescription] = \"infoStack.methodDescription\"\r\n    #infoStackElement\r\n  >\r\n    <div [animateSnackbar]=\"infoStack.snackbarAnimation\" id=\"infoSnack\" #infoSnackElement>\r\n      <avl-snackbar\r\n        id=\"infoSnackbar\"\r\n        *ngIf=\"infoStack.activeNotification$ | async as activeInfoNotification\"\r\n        [message]=\"activeInfoNotification.messageText\"\r\n        [actionButtonLabel]=\"infoStack.stackIndicatorButtonLabel\"\r\n        [link]=\"activeInfoNotification.link\"\r\n        [messageType]=\"activeInfoNotification.type\"\r\n        [displayIcon]=\"displayIcon\"\r\n        sliding\r\n        (buttonClicked)=\"onButtonClicked($event)\"\r\n        (notificationDismissed)=\"onNotificationDismissed($event, activeInfoNotification)\"\r\n        snackbarListener\r\n        #infoSnackbar\r\n        showHideSnackbar=\"infoSnackbar\"\r\n        [methodDescription]=\"infoStack.methodDescription\"\r\n      ></avl-snackbar>\r\n    </div>\r\n\r\n    <div class=\"stack-indicator-container\" *ngIf=\"infoStack.notificationList.length>1\" #infoStackIndicator>\r\n      <div class=\"stack-indicator\">\r\n        <div class=\"notification-container\">\r\n          <div [ngClass]=\"{'notification': true, 'has-action': infoStack.stackIndicatorButtonLabel}\">\r\n            <p id=\"snackbarMessage\">{{ infoStack.previousNotification?.messageText }}</p>\r\n            <avl-icon-button id=\"closeButton\" icon=\"icons:close\"></avl-icon-button>\r\n          </div>\r\n        </div>\r\n        <button id=\"actionButton\" *ngIf=\"infoStack.stackIndicatorButtonLabel\" (click)=\"openFromStack(infoStack.previousNotification)\">\r\n          <div class=\"button-label\">{{ infoStack.stackIndicatorButtonLabel }}</div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    animateButton\r\n    [infoStackHeight]=\"infoStack?.notificationList?.length > 0 ? infoSnackElement.offsetHeight : 0\"\r\n    [warningStackHeight]=\"warningStack?.notificationList?.length > 0 ? warningSnackElement.offsetHeight : 0\"\r\n    [infoStackIndicatorHeight]=\"infoStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    [warningStackIndicatorHeight]=\"warningStackIndicatorElement?.nativeElement?.offsetHeight\"\r\n    class=\"dismiss-all\"\r\n    *ngIf=\"notificationList?.length > 1\"\r\n  >\r\n    <avl-button id=\"dismissAll\" (click)=\"dismissAll()\">{{'VizBox.NotificationContainer.DismissAll' | translate}}</avl-button>\r\n  </div>\r\n</div>\r\n\r\n\r\n",
                styles: [":host{position:fixed;right:0;width:445px;display:flex;flex-direction:column;--avl-snackbar-text-color:var(--avl-on-background-info-color)}.snackbar{width:100%;display:flex;flex-direction:column}.snackbar.displayed{flex:1;max-height:100%}.snackbar-stack{position:absolute;top:0;left:0;right:0;width:100%}.stack-indicator-container{margin:0 12px;position:absolute;width:calc(100% - 12px);top:12px;z-index:-1}.snackbar-container{margin-top:0;margin-left:0;margin-right:0;width:100%}.button-label{text-align:left;text-transform:none}.stack-indicator{background-color:var(--avl-background-message-color);top:0;left:0;width:calc(100% - 24px);border-radius:4px;position:relative;height:100%;z-index:-1;box-shadow:0 3px 5px -1px rgb(0 0 0 / 20%),0 6px 10px 0 rgb(0 0 0 / 14%),0 1px 18px 0 rgb(0 0 0 / 12%)}.notification{display:flex;flex:1 1 100%;align-items:center;flex-direction:row;padding:0 12px 0 16px;justify-content:flex-start;cursor:pointer;text-overflow:ellipsis}.notification p{flex-grow:1;-webkit-line-clamp:3;max-height:48px;text-overflow:ellipsis;line-height:19px;font-size:14px;margin:0 0 0 12px;padding:12px 0;font-family:var(--avl-font-family);color:var(--avl-on-background-info-color)}button#actionButton{font-family:var(--avl-font-family);font-weight:500;font-size:14px;color:var(--avl-on-background-message-link-color);background-color:var(--avl-button-background-default-color);max-height:48px;height:48px;width:100%;cursor:pointer;padding:12px;margin:-12px 0 0;border-radius:2px;border:0;outline:0}div#actionButton:hover{color:var(--avl-on-background-message-link-hover-color)}#warningIcon{--avl-icon-custom-color:var(--avl-on-background-message-warning-color);flex:0 0 24px;--avl-icon-custom-color:var(--avl-warning-color)}#errorIcon{--avl-icon-custom-color:var(--avl-on-background-message-error-color);flex:0 0 24px}#infoIcon{--avl-icon-custom-color:var(--avl-on-background-message-emphasis-medium-color);flex:0 0 24px}#OKIcon{--avl-icon-custom-color:var(--avl-on-background-message-ok-color);flex:0 0 24px}.dismiss-all{position:absolute;padding:0 16px;border-radius:25px;background-color:var(--avl-background-message-color);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;top:12px}#dismissAll{--avl-flat-button-label-color:var(--avl-on-background-message-link-color)}avl-icon-button{flex:0 0 48px;margin-left:12px;cursor:pointer;--avl-icon-button-color:var(--avl-on-background-message-icon-default-color);--avl-icon-ink-hover-color:var(--avl-on-background-message-icon-hover-color);--avl-icon-ink-focus-color:var(--avl-on-background-message-icon-focus-color);--avl-icon-ink-pressed-color:var(--avl-on-background-message-icon-pressed-color)}@media only screen and (min-width:320px) and (max-width:376px){:host{width:calc(100% - 32px)}}@media only screen and (min-width:460px){:host{width:445px}}@media only screen and (min-width:376px) and (max-width:400px){:host{width:376px}}"]
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { notification$: [{
            type: Input,
            args: ['notification$']
        }], openMenu: [{
            type: Output
        }], positionTop: [{
            type: HostBinding,
            args: ['style.top']
        }], warningStackElement: [{
            type: ViewChild,
            args: ['warningStackElement']
        }], infoStackElement: [{
            type: ViewChild,
            args: ['infoStackElement']
        }], infoStackIndicatorElement: [{
            type: ViewChild,
            args: ['infoStackIndicatorElement']
        }], warningStackIndicatorElement: [{
            type: ViewChild,
            args: ['infoStackIndicatorElement']
        }], displayIcon: [{
            type: Input,
            args: ['display-icon']
        }] }); })();
export { AvlNotificationContainerComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJuZzovQGF2bC1uZy1jb250cm9scy9ub3RpZmljYXRpb24vbGliL2NvbXBvbmVudHMvYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIvYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQ0wsZ0JBQWdCLEVBQ2hCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUNMLFNBQVMsRUFDVCxNQUFNLEVBQ04sTUFBTSxFQUNOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xDLE9BQU8sbURBQW1ELENBQUM7QUFFM0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBRXpFLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxHQUFHLENBQWlCO0FBQ2xELElBQUUsZ0JBQTRCLE9BQU8sQ0FBQztBQUN0QyxJQUFFLGtCQUE4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LEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQVVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBS0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQTZCQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQWNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQXBMQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQTZJQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUtBLEFBQUEsQUF0TEEsQUFBQSxBQTlEQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQW9CQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBMUNBLEFBQUEsQUFMQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBaUVBLEFBQUEsQUFoRUEsQUFBQSxBQXNQQSxBQXRQQSxBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBBZnRlclZpZXdDaGVja2VkLFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBIb3N0QmluZGluZyxcclxuICBJbnB1dCxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT25Jbml0LFxyXG4gIE91dHB1dCxcclxuICBWaWV3Q2hpbGRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgJ0BhdmwtY29udHJvbHMvY29yZS9kaXN0L2F2bC1zbmFja2Jhci9hdmwtc25hY2tiYXInO1xyXG5pbXBvcnQgeyBBdmxOb3RpZmljYXRpb24sIEF2bE5vdGlmaWNhdGlvblR5cGUgfSBmcm9tICdAYXZsLWNvbnRyb2xzL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFNuYWNrYmFyTWV0aG9kRGVzY3JpcHRpb24gfSBmcm9tICcuL2RpcmVjdGl2ZXMvc2hvdy1oaWRlLXNuYWNrYmFyLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgUG9zaXRpb25BbmltYXRpb24gfSBmcm9tICcuL2RpcmVjdGl2ZXMvYW5pbWF0ZS1zdGFjay5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBTbmFja2JhclN0YWNrIH0gZnJvbSAnLi9zbmFja2Jhci1zdGFjayc7XHJcbmltcG9ydCB7IEFOSU1BVElPTl9EVVJBVElPTiB9IGZyb20gJy4vYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29uc3RzJztcclxuXHJcbmNvbnN0IE5PVElGSUNBVElPTl9UWVBFID0gbmV3IE1hcDxudW1iZXIsIHN0cmluZz4oW1xyXG4gIFtBdmxOb3RpZmljYXRpb25UeXBlLkVycm9yLCAnRXJyb3InXSxcclxuICBbQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nLCAnV2FybmluZyddLFxyXG4gIFtBdmxOb3RpZmljYXRpb25UeXBlLkluZm8sICdJbmZvJ10sXHJcbiAgW0F2bE5vdGlmaWNhdGlvblR5cGUuT0ssICdPSyddXHJcbl0pO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2F2bC1ub3RpZmljYXRpb24tY29udGFpbmVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYXZsLW5vdGlmaWNhdGlvbi1jb250YWluZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2F2bC1ub3RpZmljYXRpb24tY29udGFpbmVyLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXZsTm90aWZpY2F0aW9uQ29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0NoZWNrZWQge1xyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS50b3AnKSBwb3NpdGlvblRvcDogc3RyaW5nO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBWaWV3Q2hpbGQoJ3dhcm5pbmdTdGFja0VsZW1lbnQnKSB3YXJuaW5nU3RhY2tFbGVtZW50OiBFbGVtZW50UmVmO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBWaWV3Q2hpbGQoJ2luZm9TdGFja0VsZW1lbnQnKSBpbmZvU3RhY2tFbGVtZW50OiBFbGVtZW50UmVmO1xyXG4gXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBAVmlld0NoaWxkKCdpbmZvU3RhY2tJbmRpY2F0b3JFbGVtZW50JykgaW5mb1N0YWNrSW5kaWNhdG9yRWxlbWVudDogRWxlbWVudFJlZjtcclxuICBcclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIEBWaWV3Q2hpbGQoJ2luZm9TdGFja0luZGljYXRvckVsZW1lbnQnKSB3YXJuaW5nU3RhY2tJbmRpY2F0b3JFbGVtZW50OiBFbGVtZW50UmVmO1xyXG5cclxuICAvKiogSWYgc2V0IG9wdGlvbmFsIGljb24gKGZvciBpbmZvIGFuZCBPSyBub3RpZmljYXRpb25zKSBpcyBkaXNwbGF5ZWQsIGhpZGRlbiBvdGhlcndpc2UuICovXHJcbiAgQElucHV0KCdkaXNwbGF5LWljb24nKSBwdWJsaWMgZGlzcGxheUljb246IGJvb2xlYW47XHJcblxyXG4gIC8qKiBPYnNlcnZhYmxlIGVtaXRzIG5vdGlmaWNhdGlvbnMuIERlZmF1bHQgb2JzZXJ2YWJsZSBlbWl0cyBkdW1teSBub3RpZmljYXRpb25zIGV2ZXJ5IDNzIGZvciAxMDBzLiAqL1xyXG4gIEBJbnB1dCgnbm90aWZpY2F0aW9uJCcpIHB1YmxpYyBub3RpZmljYXRpb24kOiBPYnNlcnZhYmxlPEF2bE5vdGlmaWNhdGlvbj4gPSBuZXcgT2JzZXJ2YWJsZShcclxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShzdWJzY3JpYmVyKSB7XHJcbiAgICAgIGxldCBpID0gMDtcclxuICAgICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICBzdWJzY3JpYmVyLm5leHQoe1xyXG4gICAgICAgICAgaWQ6IGkrKyxcclxuICAgICAgICAgIG1vZHVsZTogJ25vdGlmaWNhdGlvbi1jb250YWluZXInLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdHlwZTogd2FybmluZyA/IEF2bE5vdGlmaWNhdGlvblR5cGUuV2FybmluZyA6IEF2bE5vdGlmaWNhdGlvblR5cGUuSW5mbyxcclxuICAgICAgICAgIG1lc3NhZ2VUZXh0OiAnU25hY2tiYXIgd2l0aCBub3RpZmljYXRpb24nICsgbmV3IERhdGUoKS50b1RpbWVTdHJpbmcoKSxcclxuICAgICAgICAgIHJlYWQ6IGZhbHNlLFxyXG4gICAgICAgICAgbGluazogJ2h0dHBzOi8vdml6Ym94LmF2bC5jb20nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIDMwMDApO1xyXG5cclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcclxuICAgICAgfSwgMTAwMDAwKTtcclxuICAgIH1cclxuICApO1xyXG5cclxuICBAT3V0cHV0KCkgb3Blbk1lbnU6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgd2FybmluZ1N0YWNrOiBTbmFja2JhclN0YWNrO1xyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIGluZm9TdGFjazogU25hY2tiYXJTdGFjaztcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgcHJldmlvdXNOb3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbjtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgc3RhY2tIZWlnaHQ6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgcmVvcGVuOiBib29sZWFuO1xyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBub3RpZmljYXRpb25MaXN0OiBBdmxOb3RpZmljYXRpb25bXSA9IFtdO1xyXG5cclxuICBwcml2YXRlIGFjdGl2ZU5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uO1xyXG4gIHByaXZhdGUgZGVzdHJveWVkJDogU3ViamVjdDx2b2lkPiA9IG5ldyBTdWJqZWN0KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge1xyXG4gICAgdGhpcy53YXJuaW5nU3RhY2sgPSBuZXcgU25hY2tiYXJTdGFjayhcclxuICAgICAgU3RyaW5nKE5PVElGSUNBVElPTl9UWVBFLmdldChBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmcpKS50b0xvd2VyQ2FzZSgpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuaW5mb1N0YWNrID0gbmV3IFNuYWNrYmFyU3RhY2soXHJcbiAgICAgIFN0cmluZyhOT1RJRklDQVRJT05fVFlQRS5nZXQoQXZsTm90aWZpY2F0aW9uVHlwZS5JbmZvKSkudG9Mb3dlckNhc2UoKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZXN0cm95ZWQkLm5leHQoKTtcclxuICAgIHRoaXMuZGVzdHJveWVkJC5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICAvKiogQGhpZGRlbiAqL1xyXG4gIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMucG9zaXRpb25Ub3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk/Lm9mZnNldFRvcCArIDEyICsgJ3B4JztcclxuICAgIHRoaXMubm90aWZpY2F0aW9uJD8ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQkKSkuc3Vic2NyaWJlKG5vdGlmaWNhdGlvbiA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIG9uQnV0dG9uQ2xpY2tlZCA9IChldmVudDogYW55KTogdm9pZCA9PiB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgdGhpcy5vcGVuTWVudS5lbWl0KCk7XHJcbiAgICAgIHRoaXMuZGlzbWlzc0FsbCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIG9uTm90aWZpY2F0aW9uRGlzbWlzc2VkID0gKGV2ZW50OiBhbnksIG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uKTogdm9pZCA9PiB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgY29uc3Qgc25hY2tUeXBlID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCk/LmlkPy5yZXBsYWNlKCdTbmFja2JhcicsICcnKTtcclxuICAgICAgdGhpcy5yZW1vdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uLCBzbmFja1R5cGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKiBAaGlkZGVuICovXHJcbiAgcHVibGljIG9wZW5Gcm9tU3RhY2sgPSAobm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24pOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHN0YWNrTmFtZSA9IHRoaXMuZ2V0U3RhY2tOYW1lKG5vdGlmaWNhdGlvbi50eXBlKTtcclxuICAgIHRoaXNbc3RhY2tOYW1lXS5tZXRob2REZXNjcmlwdGlvbiA9IG5ldyBTbmFja2Jhck1ldGhvZERlc2NyaXB0aW9uKCdoaWRlJywgdHJ1ZSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqIEBoaWRkZW4gKi9cclxuICBwdWJsaWMgZGlzbWlzc0FsbCA9ICgpOiB2b2lkID0+IHtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uTGlzdCA9IFtdO1xyXG4gICAgdGhpcy53YXJuaW5nU3RhY2suYWN0aXZlTm90aWZpY2F0aW9uJC5uZXh0KHVuZGVmaW5lZCk7XHJcbiAgICB0aGlzLmluZm9TdGFjay5hY3RpdmVOb3RpZmljYXRpb24kLm5leHQodW5kZWZpbmVkKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIGhhbmRsZU5vdGlmaWNhdGlvbiA9IChub3RpZmljYXRpb246IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5wcmV2aW91c05vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9uTGlzdFt0aGlzLm5vdGlmaWNhdGlvbkxpc3QubGVuZ3RoIC0gMV07XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbkxpc3QucHVzaChub3RpZmljYXRpb24pO1xyXG4gICAgdGhpcy51cGRhdGVTdGFja0FjdGl2ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgdGhpcy5zZXRTdGFja0FuaW1hdGlvbihub3RpZmljYXRpb24udHlwZSk7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVTdGFja0FjdGl2ZU5vdGlmaWNhdGlvbiA9IChub3RpZmljYXRpb246IEF2bE5vdGlmaWNhdGlvbik6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgc3RhY2tOYW1lOiBzdHJpbmcgPSB0aGlzLmdldFN0YWNrKG5vdGlmaWNhdGlvbj8udHlwZSk7XHJcbiAgICB0aGlzLnVwZGF0ZVN0YWNrTm90aWZpY2F0aW9uTGlzdChub3RpZmljYXRpb24udHlwZSk7XHJcbiAgICB0aGlzLmFjdGl2ZU5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcclxuXHJcbiAgICBpZiAodGhpc1tzdGFja05hbWVdLm5vdGlmaWNhdGlvbkxpc3QubGVuZ3RoID4gMSkge1xyXG4gICAgICB0aGlzLnJlb3BlbiA9IHRydWU7XHJcbiAgICAgIGlmICh0aGlzLnByZXZpb3VzTm90aWZpY2F0aW9uPy50eXBlID09PSBub3RpZmljYXRpb24udHlwZSkge1xyXG4gICAgICAgIHRoaXNbc3RhY2tOYW1lXS5zbmFja2JhckFuaW1hdGlvbiA9IFBvc2l0aW9uQW5pbWF0aW9uLlRvU3RhY2s7XHJcblxyXG4gICAgICAgIC8vIHNpbGVudGx5IGRpc21pc3Mgbm90aWZpY2F0aW9uIGFmdGVyIHByZXZpb3VzIG5vdGlmaWNhdGlvbiBhbmltYXRpb25cclxuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNpbGVudGx5RGlzbWlzc05vdGlmaWNhdGlvbihzdGFja05hbWUpO1xyXG4gICAgICAgICAgdGhpc1tzdGFja05hbWVdLnNuYWNrYmFyQW5pbWF0aW9uID0gbnVsbDtcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICB9LCBBTklNQVRJT05fRFVSQVRJT04pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2lsZW50bHlEaXNtaXNzTm90aWZpY2F0aW9uKHN0YWNrTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXNbc3RhY2tOYW1lXS5hY3RpdmVOb3RpZmljYXRpb24kLm5leHQobm90aWZpY2F0aW9uKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHByaXZhdGUgdXBkYXRlU3RhY2tOb3RpZmljYXRpb25MaXN0ID0gKFxyXG4gICAgbm90aWZpY2F0aW9uVHlwZTogQXZsTm90aWZpY2F0aW9uVHlwZVxyXG4gICk6IEF2bE5vdGlmaWNhdGlvbltdID0+IHtcclxuICAgIGNvbnN0IHN0YWNrID0gdGhpc1t0aGlzLmdldFN0YWNrKG5vdGlmaWNhdGlvblR5cGUpXTtcclxuICAgIGlmIChzdGFjaykge1xyXG4gICAgICBzdGFjay5ub3RpZmljYXRpb25MaXN0ID0gdGhpcy5ub3RpZmljYXRpb25MaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gbm90aWZpY2F0aW9uVHlwZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhY2subm90aWZpY2F0aW9uTGlzdDtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHNpbGVudGx5RGlzbWlzc05vdGlmaWNhdGlvbiA9IChzdGFja05hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgdGhpc1tzdGFja05hbWVdLmRpc21pc3NlZFNpbGVudGx5ID0gdHJ1ZTtcclxuICAgIHRoaXNbc3RhY2tOYW1lXS5tZXRob2REZXNjcmlwdGlvbiA9IG5ldyBTbmFja2Jhck1ldGhvZERlc2NyaXB0aW9uKCdoaWRlJywgZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgc2V0U3RhY2tBbmltYXRpb24gPSAoXHJcbiAgICBub3RpZmljYXRpb25UeXBlOiBBdmxOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgYW5pbWF0aW9uPzogUG9zaXRpb25BbmltYXRpb25cclxuICApOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTdGFjayA9IHRoaXMuZ2V0U3RhY2sobm90aWZpY2F0aW9uVHlwZSk7XHJcbiAgICBjb25zdCBwcmV2aW91c1N0YWNrID0gdGhpcy5nZXRTdGFjayhub3RpZmljYXRpb25UeXBlLCB0cnVlKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXNbcHJldmlvdXNTdGFja10/Lm5vdGlmaWNhdGlvbkxpc3Q/Lmxlbmd0aCA+IDAgJiZcclxuICAgICAgdGhpcy5wcmV2aW91c05vdGlmaWNhdGlvbj8udHlwZSAhPT0gbm90aWZpY2F0aW9uVHlwZVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXNbcHJldmlvdXNTdGFja10uc3RhY2tBbmltYXRpb24gPSBhbmltYXRpb24gfHwgUG9zaXRpb25BbmltYXRpb24uVG9Cb3R0b207XHJcblxyXG4gICAgICB0aGlzW2N1cnJlbnRTdGFja10uc3RhY2tBbmltYXRpb24gPVxyXG4gICAgICAgIGFuaW1hdGlvbiA9PT0gUG9zaXRpb25BbmltYXRpb24uVG9Ub3BcclxuICAgICAgICAgID8gUG9zaXRpb25BbmltYXRpb24uVG9Cb3R0b21cclxuICAgICAgICAgIDogUG9zaXRpb25BbmltYXRpb24uVG9Ub3A7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVOb3RpZmljYXRpb24gPSAobm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24sIHNuYWNrVHlwZT86IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgc3RhY2tOYW1lOiBzdHJpbmcgPSB0aGlzLmdldFN0YWNrKG5vdGlmaWNhdGlvbj8udHlwZSk7XHJcbiAgICBpZiAodGhpc1tzdGFja05hbWVdLmRpc21pc3NlZFNpbGVudGx5KSB7XHJcbiAgICAgIC8vbm90aWZpY2F0aW9uIGRpc21pc3NlZCBzaWxlbnRseVxyXG4gICAgICBjb25zdCBzdGFja05hbWU6IHN0cmluZyA9IHRoaXMuZ2V0U3RhY2sodGhpcy5hY3RpdmVOb3RpZmljYXRpb24/LnR5cGUpO1xyXG4gICAgICB0aGlzW3N0YWNrTmFtZV0uYWN0aXZlTm90aWZpY2F0aW9uJC5uZXh0KHRoaXMuYWN0aXZlTm90aWZpY2F0aW9uKTtcclxuICAgICAgdGhpcy5yZW9wZW4gPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vbm90aWZpY2F0aW9uIGRpc21pc3NlZFxyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbkxpc3QgPSB0aGlzLm5vdGlmaWNhdGlvbkxpc3QuZmlsdGVyKFxyXG4gICAgICAgIGN1cnJlbnROb3RpZmljYXRpb24gPT4gY3VycmVudE5vdGlmaWNhdGlvbi5pZCAhPT0gbm90aWZpY2F0aW9uLmlkXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMucmVvcGVuTGFzdE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24sIHN0YWNrTmFtZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSByZW9wZW5MYXN0Tm90aWZpY2F0aW9uID0gKG5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uLCBzdGFja05hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgbGV0IHN0YWNrTm90aWZpY2F0aW9uTGlzdDogQXZsTm90aWZpY2F0aW9uW10gPSB0aGlzW3N0YWNrTmFtZV0/Lm5vdGlmaWNhdGlvbkxpc3Q7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuaXNMYXN0Tm90aWZpY2F0aW9uRGlzbWlzc2VkKG5vdGlmaWNhdGlvbiwgdGhpc1tzdGFja05hbWVdKSAmJlxyXG4gICAgICBzdGFja05vdGlmaWNhdGlvbkxpc3Q/Lmxlbmd0aCA+IDBcclxuICAgICkge1xyXG4gICAgICB0aGlzW3N0YWNrTmFtZV0ucmVvcGVuID0gdHJ1ZTtcclxuXHJcbiAgICAgIHN0YWNrTm90aWZpY2F0aW9uTGlzdCA9IHRoaXMudXBkYXRlU3RhY2tOb3RpZmljYXRpb25MaXN0KG5vdGlmaWNhdGlvbi50eXBlKTtcclxuICAgICAgY29uc3QgbGFzdE5vdGlmaWNhdGlvbiA9IHN0YWNrTm90aWZpY2F0aW9uTGlzdFtzdGFja05vdGlmaWNhdGlvbkxpc3QubGVuZ3RoIC0gMV07XHJcbiAgICAgIGlmIChsYXN0Tm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdGhpc1tzdGFja05hbWVdLmFjdGl2ZU5vdGlmaWNhdGlvbiQubmV4dChsYXN0Tm90aWZpY2F0aW9uKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzW3N0YWNrTmFtZV0uc3RhY2tJbmRpY2F0b3IgPSBmYWxzZTtcclxuICAgICAgICB0aGlzW3N0YWNrTmFtZV0ucmVvcGVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpc1tzdGFja05hbWVdLmFuaW1hdGVTdGFjayA9IFBvc2l0aW9uQW5pbWF0aW9uLlRvQm90dG9tO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhY2tBbmltYXRpb24obm90aWZpY2F0aW9uLnR5cGUsIFBvc2l0aW9uQW5pbWF0aW9uLlRvVG9wKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgaXNMYXN0Tm90aWZpY2F0aW9uRGlzbWlzc2VkID0gKFxyXG4gICAgbm90aWZpY2F0aW9uOiBBdmxOb3RpZmljYXRpb24sXHJcbiAgICBzdGFjazogU25hY2tiYXJTdGFja1xyXG4gICk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgbGFzdE5vdGlmaWNhdGlvbjogQXZsTm90aWZpY2F0aW9uID1cclxuICAgICAgc3RhY2subm90aWZpY2F0aW9uTGlzdFtzdGFjay5ub3RpZmljYXRpb25MaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgcmV0dXJuIGxhc3ROb3RpZmljYXRpb24/LmlkID09PSBub3RpZmljYXRpb24/LmlkO1xyXG4gIH07XHJcbiAgcHJpdmF0ZSBnZXRTdGFjayhub3RpZmljYXRpb25UeXBlOiBudW1iZXIsIHByZXZpb3VzPzogYm9vbGVhbik6IHN0cmluZyB7XHJcbiAgICBsZXQgc3RhY2tUeXBlOiBBdmxOb3RpZmljYXRpb25UeXBlO1xyXG4gICAgaWYgKFxyXG4gICAgICBub3RpZmljYXRpb25UeXBlID09PSBBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmcgfHxcclxuICAgICAgbm90aWZpY2F0aW9uVHlwZSA9PT0gQXZsTm90aWZpY2F0aW9uVHlwZS5FcnJvclxyXG4gICAgKSB7XHJcbiAgICAgIHN0YWNrVHlwZSA9IHByZXZpb3VzID8gQXZsTm90aWZpY2F0aW9uVHlwZS5JbmZvIDogQXZsTm90aWZpY2F0aW9uVHlwZS5XYXJuaW5nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3RhY2tUeXBlID0gcHJldmlvdXMgPyBBdmxOb3RpZmljYXRpb25UeXBlLldhcm5pbmcgOiBBdmxOb3RpZmljYXRpb25UeXBlLkluZm87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5nZXRTdGFja05hbWUoc3RhY2tUeXBlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U3RhY2tOYW1lID0gKHN0YWNrVHlwZTogQXZsTm90aWZpY2F0aW9uVHlwZSk6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gc3RhY2tUeXBlID09PSAxID8gJ3dhcm5pbmdTdGFjaycgOiAnaW5mb1N0YWNrJztcclxuICB9O1xyXG59XHJcbiJdfQ==
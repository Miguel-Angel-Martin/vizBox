<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>Automotive Controls</title>
  <meta name="description" content="Automotive Controls">
  <script src="./node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <link rel="stylesheet" href="./node_modules/@avl-styles/common/dist/avl-styles.css">  

  <style>
    a::after {
      content: "\A";
      white-space: pre;
    }

    body {
      display: flex;
      justify-content: flex-start;
      flex-direction: row;
      height: 100%;
    }

    .sidenav {
      padding-left: 10px;
      width: 200px;
    }

    iframe {
      width: 99%;
      height: 95vh;
    }
  </style>

</head>

<body class="mdc-typography">
  <div class="sidenav">
      <input type="checkbox" id="themeToggle">
      <label for="themeToggle">Dark theme</label>
      <br>

      <a href="dist/avl-alphanum/demo/avl-alphanum.demo.html">Avl Alphanum</a>

  </div>

  <iframe title="Demo" src=""></iframe>

  <script>
    (function() {
      let isDarkTheme = false;
      // all anchor tags should change src attribute of iframe
      let iframe = document.body.querySelector('iframe');
      document.body.querySelectorAll('a').forEach(function (a) {
        a.addEventListener('click', function (e) {
          iframe.src = a.href; 
          e.preventDefault(); 
          return false;
        });
      });

      let themeToggle = document.body.querySelector('#themeToggle');
      themeToggle.addEventListener('click', (event) => {
        isDarkTheme = themeToggle.checked;
        changeTheme();
      });

      iframe.onload = function() {
        changeTheme();  
      }; 

      function changeTheme() {
        let theme = isDarkTheme ? 'dark' : 'light';
        let iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
        iframeDocument.body.setAttribute('theme', theme);
      }
    })();
  </script>

</body>

</html>

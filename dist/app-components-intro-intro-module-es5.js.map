{"version":3,"sources":["webpack:///node_modules/@avl-controls/core/dist/avl-card/avl-card.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-card/avl-card.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-card/avl-card.js","webpack:///node_modules/@avl-controls/core/dist/avl-chip-list/avl-chip-list.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-chip-list/avl-chip-list.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-chip-list/avl-chip-list.js","webpack:///node_modules/@avl-controls/core/dist/avl-chips-chip/avl-chips-chip.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-chips-chip/avl-chips-chip.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-chips-chip/avl-chips-chip.js","webpack:///node_modules/@avl-controls/core/dist/avl-list/avl-list.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-list/avl-list.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-list/avl-list.js","webpack:///node_modules/@avl-controls/core/dist/avl-list/drag-and-drop.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-file-view/avl-file-view.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-file-view/avl-file-view.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-file-view/avl-file-view.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-dialog/avl-upload-dialog.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-dialog/avl-upload-dialog.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-dialog/avl-upload-dialog.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-progress/avl-upload-progress.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-progress/avl-upload-progress.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload-progress/avl-upload-progress.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload.css.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload.html.js","webpack:///node_modules/@avl-controls/core/dist/avl-upload/avl-upload.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/array-data-provider.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-column-selector-dialog/avl-column-selector-dialog.css.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-column-selector-dialog/avl-column-selector-dialog.html.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-column-selector-dialog/avl-column-selector-dialog.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-datatable.consts.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-datatable.css.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-datatable.html.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-datatable.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/avl-datatable.models.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/column-definitions.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/themes/vaadin-grid-material-theme.css.js","webpack:///node_modules/@avl-controls/datatable/dist/avl-datatable/themes/vaadin-grid-sorter-material-theme.css.js","webpack:///node_modules/@avl-controls/interfaces/index.js","webpack:///node_modules/@avl-controls/interfaces/src/avl-dataprovider.js","webpack:///node_modules/@polymer/iron-image/iron-image.js","webpack:///node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///node_modules/@vaadin/vaadin-checkbox/src/vaadin-checkbox.js","webpack:///node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///node_modules/@vaadin/vaadin-element-mixin/vaadin-dir-helper.js","webpack:///node_modules/@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js","webpack:///node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/all-imports.js","webpack:///node_modules/@vaadin/vaadin-grid/src/iron-list.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-a11y-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-active-item-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-array-data-provider-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-group.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-reordering-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column-resizing-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-column.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-data-provider-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-drag-and-drop-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-dynamic-columns-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-event-context-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter-column.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-filter.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-keyboard-navigation-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-row-details-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroll-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-scroller.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-selection-column.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-selection-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-column.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sort-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-sorter.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styles.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-styling-mixin.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-templatizer.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-tree-column.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid-tree-toggle.js","webpack:///node_modules/@vaadin/vaadin-grid/src/vaadin-grid.js","webpack:///node_modules/@vaadin/vaadin-material-styles/color.js","webpack:///node_modules/@vaadin/vaadin-material-styles/font-icons.js","webpack:///node_modules/@vaadin/vaadin-material-styles/version.js","webpack:///node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///node_modules/@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js","webpack:///node_modules/@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js","webpack:///node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","webpack:///node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js","webpack:///src/app/components/intro/intro.component.html","webpack:///src/app/components/intro/pet-detail/pet-detail.component.html","webpack:///src/app/components/intro/pet-dialog/pet-dialog.component.html","webpack:///src/app/components/intro/pets/pets.component.html","webpack:///src/app/components/intro/intro-routing.module.ts","webpack:///src/app/components/intro/intro.component.css","webpack:///src/app/components/intro/intro.component.ts","webpack:///src/app/components/intro/intro.module.ts","webpack:///src/app/components/intro/pet-detail/pet-detail.component.css","webpack:///src/app/components/intro/pet-detail/pet-detail.component.ts","webpack:///src/app/components/intro/pet-detail/pet-photo.ts","webpack:///src/app/components/intro/pet-dialog/pet-dialog.component.css","webpack:///src/app/components/intro/pet-dialog/pet-dialog.component.ts","webpack:///src/app/components/intro/pets/pets.component.css","webpack:///src/app/components/intro/pets/pets.component.ts","webpack:///src/app/components/intro/pets/sort-order.ts","webpack:///src/pet-store/api/api.ts","webpack:///src/pet-store/index.ts","webpack:///src/pet-store/model/models.ts","webpack:///src/pet-store/model/pet.ts"],"names":["style","template","AvlCardImpl","arguments","titleBelowImage","image","String","Boolean","titleIcon","customElements","define","is","AvlChipListImpl","selectedIndexes","selectedValues","notSelectable","initialized","ignoreCheckedEvents","addEventListener","event","focused","singleSelect","multiSelect","selectedValue","undefined","selectedValueChange","selectedIndex","selectedIndexChange","length","selectedValuesChanged","selectedIndexesChanged","dispatchEvent","CustomEvent","detail","value","target","items","findIndex","item","disabled","readonly","chip","shadowRoot","querySelectorAll","index","x","checked","i","newSelectedIndexes","find","push","arraysEqual","splice","refreshSelectedIndexes","newSelectedValues","refreshSelectedValues","chips","indexOf","findIndexOfValue","allowDeselection","a","b","type","Array","observer","reflectToAttribute","Object","notify","Number","label","AvlChipsChipImpl","removeIcon","key","onPressed","toggleChecked","onUnpressed","tabindex","active","thumbnailIcon","thumbnailImage","e","filter","invalid","AvlListImpl","visibleRows","rows","totalRows","cachedRows","cachedRowHeights","pageCached","pageSize","defaultItemHeight","fakeFocus","fakeFocusIndex","focusedIndex","_selectedIndexes","values","locked","set","_selectedValues","hideDraggedElement","itemElements","$","itemContainer","itemEl","dnd","draggedRow","display","selectRows","map","val","unlock","sort","initDnd","preventDefault","Math","max","scrollItemIntoView","focusItem","min","getRows","allowActiveRow","waitForRender","then","itemHeight","querySelector","children","scrollHeight","r","activeRow","scrollTop","el","Promise","resolve","reject","interval","setInterval","childElementCount","clearInterval","destruct","focus","resetFakeFocus","currentFirstIndex","tagName","toLowerCase","itemSelect","selectAndFocusCorrectItem","selectableWithCheckboxChecked","slice","row","scrollable","getItemPosition","getTotalHeight","dummyFocusable","prepareVisibleRows","scrollableScroll","height","position","currentHeight","firstIndex","getFirstVisibleIndex","lastIndex","getLastVisibleIndex","clientHeight","itemPositioner","top","forEach","startIndex","dataProvider","params","page","dataProviderChanged","setAttribute","start","n","res","j","selectedValueChanged","selectedIndexChanged","floor","itemsTemplate","render","dragoverRow","before","oldIndex","insertIndex","newCachedRows","newIndex","dy","draggedElementContainer","dragAndDrop","dndItemMousedown","itemMousedown","dndItemMousemove","itemMousemove","dragging","itemDisabled","itemReadonly","overflowMenuItems","rightCheckbox","dragIndicator","DragAndDrop","rerender","dragStartCallback","dropCallback","scrollBy","getItemElements","predragging","window","matchMedia","matches","TouchEvent","lastX","touches","clientX","lastY","clientY","scrollableMousemove","refreshDragoverRow","MouseEvent","draggedElement","pow","dragStartX","dragStartY","notDraggedYet","clonedItem","cloneNode","propertiesToCopy","keys","get","properties","prop","width","clientWidth","cursor","zIndex","document","createElement","child","parentElement","list","__dataHost","hasAttribute","hasOverflowMenu","dragIcon","id","styles","paddingLeft","paddingRight","paddingTop","color","justifyContent","flexDirection","flex","assign","appendChild","backgroundColor","touchAction","boxShadow","itemRect","getBoundingClientRect","left","dragOffsetY","y","dragOffsetX","predragTimeout","setTimeout","mouseMoveListener","mouseupListener","escapeListener","cancelDrag","scrollRect","bottom","dragScrollInterval","scrollSpeed","removeDragListeners","dragoverBefore","resetDrag","pointInsideElement","removeChild","removeEventListener","clearTimeout","element","rect","right","AvlFileViewImpl","percentage","resetMenuItems","retryMenuItem","setFileStatus","upload","downloadMenuItem","file","downloadUrl","download","overflowMenu","open","status","url","service","downloadFile","blob","objectUrl","URL","createObjectURL","downloadAnchor","href","name","click","revokeObjectURL","completeMenuItems","removeMenuItem","abortMenuItems","failMenuItems","additionalMenuItems","concat","_file","abortUploadAction","uploadFile","onUploadProgress","bind","onComplete","onError","progress","lengthComputable","setUploadProgress","loaded","size","indeterminateProgress","setDownloadUrl","errorResponse","error","currentStatus","accept","failErrorMessage","abortErrorMessage","UploadDialogImpl","failErrorTypeMessage","failErrorTypeTitle","failErrorFiles","AvlLocalizationService","translationService","translate","errorFiles","ProgressBarImpl","indeterminate","isTypeAccepted","acceptArray","split","filenameSegments","ext","mediaType","mimeAll","test","AvlUploadServiceImpl","progressCallback","completeCallback","failCallback","formData","FormData","append","xhr","XMLHttpRequest","response","JSON","parse","send","abort","responseType","Blob","statusText","err","AvlFileImpl","AvlUploadImpl","mouseEvent","isErrorDialogOpen","errorArray","dragAreaMessage","retryMenuItemLabel","removeMenuItemLabel","downloadMenuItemLabel","uploadService","browseLabel","browse","_invalid","fileChange","required","hasComplete","validationCallback","files","doValidate","path","f","hasCompletedFile","removeAttribute","translateLabels","fileInput","filesToUpload","from","handleAddFiles","fileListElement","activeElement","fileViewFiles","allItemElements","currentItemIndex","userItem","itemIndexToMoveTo","navigate","dropArea","browseFiles","preventDefaults","classList","add","remove","handleDrop","nameArray","fileNameVerification","_","openErrorDialog","dt","dataTransfer","draggedFiles","firstFileView","stopPropagation","errorMessage","keyPressed","computed","Function","alreadyUploadedFiles","getValueFromPath","current","part","getParentObjectFromPath","parts","createArrayDataProvider","data","tmpData","parentItem","updateHasChildren","updateDescendantsMatchFilter","filters","globalFilterFields","filtersExist","ancestorsMatchFilter","descendantsMatchFilter","matchesFilter","sortOrders","reverse","order","toLowercase","value1","value2","ret","ascending","hasChildren","rowHasChildren","descMatchFilter","valueOnPathMatchesFilter","globalFilter","found","paths","toLocaleLowerCase","parent","parentsAncestors","findAncestors","ancestor","descendant","ancestors","includes","isAncestorOf","potentialAncestor","chipsOptions","AvlColumnSelectorDialogImpl","opened","columnItems","allColumns","selectItems","selected","reordered","firstOpen","isDialogFooter","leafColumnsFlag","columnHeight","dialogBottom","isLists","isSelectClick","isAllSelectClick","openDialog","leafColumns","hidden","defaultLeafColumns","stringify","resetPromise","columns","caption","valueField","icon","headerIcon","headerImage","indexes","All","console","log","togglePromise","screenY","leafColumnsChanged","Selected","reorderedArray","c","selectedValuePromise","dialogFooter","desktop","columnsLabel","applyButtonLabel","resetButtonLabel","MAX_PAGES_PER_SECTION","MIN_PAGES_PER_SECTION","DEFAULT_PAGE_SIZE","DEFAULT_PAGE_SIZE_LABEL","DEFAULT_PAGE_SIZE_OPTIONS","MAX_SAFE_INTEGER","AvlDatatableImpl","checkboxAllSelectClicked","selectedPage","globalFilterLabel","treeColumn","pageSizeOptions","pageSizeLabel","pageSizeIndex","pages","_data","_lastFilters","Map","dataProviderCalled","recreatingHeaders","isLazyLoading","checkboxClicked","row2formattedRow","idx2formattedRow","rowIndexPropertyName","rowPropertyName","columnSelectorLabel","totalNumOfRows","__rowsCache","__formattedRowsCache","lastActiveItem","range","end","formatColumn","column","sortable","flexWidth","formatter","formatNumber","numberOptions","Date","formatDateTime","dateTimeOptions","selectionColumnRenderer","cell","rowData","checkbox","firstElementChild","grid","selectedItems","__item","formattedRow","headerCheckboxState","className","call","selectionHeaderRenderer","refresh","createCheckBox","doLoadGridTask","hasChildNodes","firstChild","getColumnNameFromEvent","header","resizedColumn","getLabel","content","headerContent","getAttribute","HTMLImageElement","innerHTML","getColumnNameFromTargetElement","vaadinGridfilter","getElementsByTagName","subscribeToSortDirectionChanged","eventSubscription","gridSorterList","gridSorterLength","sorter","columnName","sortDirection","numOfRows","setVaadinGridSize","pageSizeChanged","columnDefinitions","clearCache","prevOrders","newOrders","prevFilters","newFilters","globalFilterableTypes","Text","Button","Link","IconText","globalFilterPaths","traverseColumnsAndPerformAction","expandedItems","orders","direction","calculatedFilters","globalFilterValue","formattedRows","idx","formatRow","callback","calculateSortOrders","calculateFilters","tableDataRequestParams","getFieldsForGlobalFilter","providerData","formatRows","cacheRowsForLookup","setTotalRows","updateExpandedItems","deselectEverything","resetCheckboxes","ofMenu","activeItemChanged","constructEventDetail","t","trigger","handleOverflowMenuClick","columnSize","overflowMenuItemClickedListener","cellId","parseInt","menuItems","action","stack","shift","childColumns","unshift","leafCol","object","parentObject","propertyName","totalPages","ceil","middle","startMiddle","pagination","isNaN","truncatedNumber","trunc","option","updateTable","gridSize","setPages","areFiltersEqual","collapseEverything","model","childColumnsExist","columnSelector","Error","createHeaders","oldColumns","col","createGridHeaderHTML","filterable","filterLeafColumn","testLabel","createGroupGridHeaderHTML","getLeafColumnHTML","columnGroupHeader","resizable","headerTemplate","defaultStyle","Icon","Image","Checkbox","IconButton","doNotFollowLinks","OverflowMenu","columnIndex","iconOrImageHtml","variableName","replace","columnEl","toString","itemTemplate","itemTemplateString","getLeafColumnTemplate","join","_a","tableHeaderCheckbox","_item","_content","numChilds","filterGridFilterElement","filterTextfield","filterKey","tableIdx","activeItem","parentNode","deselectItem","selectItem","isArray","_grid","OrderImpl","VaadinGrid","Column","LeafColumn","GroupColumn","ColumnType","isLeafColumn","isGroupColumn","$_documentContainer","head","globalFilterKey","_template","src","alt","crossorigin","preventLoad","sizing","preload","placeholder","fade","readOnly","loading","observers","created","_resolvedSrc","_imgOnLoad","img","_resolveSrc","_setLoading","_setLoaded","_setError","_imgOnError","sizedImgDiv","backgroundImage","_computePlaceholderHidden","_computePlaceholderClassName","_computeImgDivHidden","_computeImgDivARIAHidden","_computeImgDivARIALabel","resolved","pop","_computeImgHidden","_widthChanged","_heightChanged","_loadStateObserver","newResolvedSrc","_placeholderChanged","_transformChanged","sizedImgDivStyle","placeholderStyle","backgroundSize","backgroundPosition","backgroundRepeat","testSrc","baseURIAnchor","location","origin","protocol","host","IronScrollTargetBehavior","scrollTarget","HTMLElement","_defaultScrollTarget","_shouldHaveListener","_scrollTargetChanged","isAttached","eventTarget","_oldScrollTarget","_toggleScrollListener","_doc","domHost","ownerDocument","_isValidScrollTarget","_scrollHandler","scrollHandler","documentElement","_scrollTop","pageYOffset","_scrollLeft","pageXOffset","scrollLeft","scrollTo","scroll","leftOrOptions","_scrollTargetWidth","innerWidth","offsetWidth","_scrollTargetHeight","innerHeight","offsetHeight","yes","_boundScrollHandler","toggleScrollListener","CheckboxElement","_nativeCheckbox","_handleClick","_addActiveListeners","attrName","_updateLabelAttribute","assignedNodes","_isAssignedNodesEmpty","nodes","nodeType","Node","TEXT_NODE","textContent","trim","_addEventListenerToNode","__interactionsAllowed","keyCode","_toggleChecked","localName","composedPath","composed","bubbles","_storedName","keyboardActive","capture","TabIndexMixin","superClass","ShadyDOM","ControlStateMixin","contains","relatedTarget","_focus","focusElement","_setFocused","ensureEventComposed","cancelable","defaultPrevented","shiftKey","_isShiftTabbing","prototype","apply","firefox","navigator","userAgent","match","parseFloat","nextSibling","fakeTarget","opacity","tabIndex","insertBefore","autofocus","requestAnimationFrame","blur","_previousTabIndex","setProperties","warn","DEV_MODE_CODE_REGEXP","FlowClients","Vaadin","Flow","clients","isMinified","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","localStorage","getItem","hostname","productionModeApps","client","productionMode","args","exec","runIfDevelopmentMode","developmentMode","DirHelper","dummy","dir","fontSize","overflow","body","cachedType","scrollType","scrollWidth","directionSubscribers","directionUpdater","documentDir","getDocumentDir","alignDirs","directionObserver","MutationObserver","observe","attributes","attributeFilter","DirMixin","__subscribe","oldValue","newValue","newValueEqlDocDir","newValueEmptied","newDiffValue","getNormalizedScrollLeft","setNormalizedScrollLeft","detectScrollType","registrations","developmentModeCallback","statsJob","registered","Set","ElementMixin","has","debounce","doctype","IOS","IOS_TOUCH_SCROLLING","DEFAULT_PHYSICAL_COUNT","ANIMATION_FRAME","IDLE_TIME","MICRO_TASK","PolymerIronList","behaviors","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_collection","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_itemsPerRow","_rowHeight","_templateCost","_physicalBottom","_scrollBottom","_virtualEnd","_virtualStart","_physicalCount","_hiddenContentSize","_physicalRows","_maxScrollTop","_scrollOffset","_maxVirtualStart","virtualCount","_convertIndexToCompleteRow","_clamp","_virtualStartVal","_physicalStart","_physicalStartVal","_physicalEnd","_physicalCountVal","_optPhysicalSize","Infinity","_isVisible","firstVisibleIndex","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","lastVisibleIndex","_estRowsInView","attached","_debounce","_render","listen","detached","unlisten","updateViewportBoundaries","getComputedStyle","_isRTL","_updateGridMetrics","delta","isScrollingDown","abs","idxAdjustment","round","_update","reusables","_getReusables","physicalTop","_increasePoolIfNeeded","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","virtualStart","virtualEnd","physicalCount","scrollBottom","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","_positionItems","_updateScrollerSize","_isClientFull","count","nextPhysicalCount","nextIncrease","ts","performance","now","_createPool","_isIndexRendered","_getPhysicalIndex","_itemsChanged","change","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","fn","rtn","_computeVidx","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","_adjustScrollPosition","translate3d","deltaHeight","pos","forceUpdate","_virtualRowCount","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","v","cb","asyncModule","_debouncers","A11yMixin","_columnTree","level","some","_headerTemplate","headerRenderer","bodyColumns","table","_a11yGetHeaderRowCount","_a11yGetFooterRowCount","_a11yUpdateHeaderRows","_a11yUpdateFooterRows","headerRow","footer","footerRow","detailsOpened","detailsCell","colspan","cellContent","assignedSlot","ActiveItemMixin","scroller","_onClick","_activateItem","clickedItem","_itemsEqual","getRootNode","cellContentHasFocus","_ie","_isFocusable","__getRowModel","isFocusable","focusables","isFocusableElement","ArrayDataProviderMixin","splices","_arrayDataProvider","_ensureFirstPageLoaded","opts","_filters","_checkPaths","_filter","_sorters","_multiSort","arrayToCheck","result","parentProperty","_compare","reduce","p","_normalizeEmptyValue","filterValueLowercase","GridColumnGroupElement","_addNodeObserver","_updateFlexAndWidth","_observer","disconnect","_preventHiddenCascade","_updateVisibleChildColumns","_childColumns","frozen","_lastFrozen","rootColumns","_rootColumns","_order","trailingZeros","childCountDigits","LN10","scope","reorderStatus","_reorderStatus","_visibleChildColumns","_autoHidden","_setWidth","prev","curr","substring","_setFlexGrow","flexGrow","_ignoreVisibleChildColumns","_columnPropChanged","visibleChildColumns","_colSpan","colSpan","headerCell","footerCell","_a11yUpdateCellColspan","getFlattenedNodes","_isColumnElement","info","addedNodes","removedNodes","_getChildColumns","run","_updateColumnTree","flush","node","ELEMENT_NODE","ColumnReorderingMixin","_onTrackEvent","_reorderGhost","_onTouchStart","_onTouchMove","_onTouchEnd","_onContextMenu","_startTouchReorderTimeout","_onTrackStart","_draggedColumn","_onTrackEnd","state","_touchDevice","_onTrack","columnReorderingAllowed","_cellFromPoint","_toggleAttribute","_column","_setSiblingsReorderStatus","_updateGhost","visibility","_updateGhostPosition","_autoScroller","targetCell","targetColumn","_getTargetColumn","_isSwapAllowed","_isSwappableByPosition","_swapColumnOrders","_lastDragClientX","_getColumnsInOrder","elementFromPoint","eventClientX","eventClientY","ghostRect","targetLeft","targetTop","_left","_top","transform","childNodes","_getInnerText","ghost","columnTree","_orderBaseScope","sibling","rightDiff","leftDiff","async","column1","column2","differentColumns","sameParent","sameFrozen","sourceCellRect","targetRect","_updateLastFrozen","_updateFirstAndLastColumn","draggedColumn","candidate","ColumnResizingMixin","_onHeaderTrack","handle","columnRowCells","minWidth","borderLeftWidth","borderRightWidth","marginLeft","marginRight","maxWidth","__isRTL","array","ColumnBaseMixin","_bodyTemplate","templatizer","_footerTemplate","_templateObserver","_allCells","_findHostGrid","_gridValue","_cells","_emptyCells","_headerCell","_footerCell","textAlign","footerRenderer","_prepareHeaderTemplate","_prepareFooterTemplate","_prepareBodyTemplate","_prepareTemplatizer","_findTemplate","instanceProps","dataHost","_instanceProps","__runRenderer","renderer","cells","_renderer","inst","createInstance","root","_instance","__setColumnTemplateOrRenderer","footerTemplate","__updateHeaderFooterRowVisibility","_selectFirstTemplate","_rootDataHost","__forceReflow","_frozenCellsChanged","lastFrozen","bodyTemplate","hasHeaderText","__setTextContent","pathRenderer","owner","_generateHeader","substr","lastIndexOf","toUpperCase","bool","existingHandle","textAlignFallback","_previousHidden","_debouncerHiddenChanged","_renderColumnTree","notifyResize","_resetKeyboardNavigation","GridColumnElement","autoWidth","ItemCache","parentCache","itemCaches","effectiveSize","pendingRequests","isLoading","getCacheAndIndex","cache","scaledIndex","_isExpanded","subCache","updateSize","_loadPage","thisLevelIndex","expandedIndex","DataProviderMixin","_cache","_effectiveSize","_updateItem","ensureSubCacheForScaledIndex","_getPageForIndex","expandItem","collapseItem","itemIdPath","__expandedKeys","getItemId","__cacheExpandedKeys","_getItemIndexInArray","_hasData","_mapSorters","_mapFilters","currentItems","itemsIndex","itemIndex","_debouncerApplyCachedData","after","cachedItem","getItemForIndex","_getItem","__itemsReceived","_setPendingProperty","oldPageSize","oldDataProvider","_scrollToIndex","_firstVisibleIndex","_debouncerCheckSize","_checkSize","item1","item2","DropMode","BETWEEN","ON_TOP","ON_TOP_OR_BETWEEN","ON_GRID","DropLocation","ABOVE","BELOW","EMPTY","DragAndDropMixin","_onDragStart","_onDragEnd","_onDragOver","_onDragLeave","_onDrop","dropMode","rowsDraggable","_safari","rowRect","_ios","setDragImage","_isSelected","__getViewportRows","dragFilter","setData","__formatDefaultTransferData","updateStyles","draggedItems","setDragData","setDraggedItemsCount","originalEvent","_clearDragStyles","_dropLocation","_dragOverItem","__dndAutoScroll","dropAbove","__dndAutoScrolling","headerBottom","footerTop","topDiff","__dndAutoScrollThreshold","bottomDiff","scrollTopDelta","scrollTopChanged","dragData","types","getData","dropTargetItem","dropLocation","dropFilter","filterDragAndDrop","_filterDragAndDrop","dragDisabled","dropDisabled","draggableElements","DynamicColumnsMixin","_hasColumnGroups","_flattenColumnGroups","_getColumnTree","_arrayEquals","rowDetailsTemplate","_rowDetailsTemplate","_debouncerCheckImports","_checkImports","arr1","arr2","l","elementName","_updateFirstAndLastColumnForRow","cellIndex","EventContextMixin","context","section","GridFilterColumnElement","FilterMixin","_filterChanged","GridFilterElement","_connected","connected","_previousValue","_debouncerFilterChanged","KeyboardNavigationMixin","_android","_onKeyDown","_onKeyUp","_onFocusIn","_onFocusOut","_onCellFocusIn","_onCellFocusOut","_isMousedown","focusable","oldFocusable","keyGroup","_detectInteracting","targetRowInDom","indexOfChildElement","visibleItemsCount","_lastVisibleIndex","dx","ctrlKey","activeCell","isRowDetails","_elementMatches","activeRowGroup","maxRowIndex","rowIndex","_focusedItemIndex","dstRowIndex","dstIsRowDetails","dstItem","_isDetailsOpened","_focusedColumnOrder","_getColumns","dstColumns","dstSortedColumnOrders","maxOrderedColumnIndex","orderedColumnIndex","dstOrderedColumnIndex","_ensureScrolledToIndex","columnIndexByOrder","acc","dstColumnIndex","dstRow","dstCell","_scrollHorizontallyToCell","dstRect","tableIndex","rowGroup","localTarget","localTargetIsTextInput","wantInteracting","_parseEventPath","focusTarget","srcElement","step","tabOrder","_headerFocusable","_itemsFocusable","_footerFocusable","focusexit","_predictFocusStepTarget","itemsFocusTarget","targetRow","focusedItemRow","wasNavigating","rootTarget","_activeRowGroup","_detectFocusedItemIndex","_navigatingIsHidden","columnTreeLevel","firstVisibleIndexRow","dstCellRect","dstCellIndex","tableRect","leftBoundary","rightBoundary","query","RowDetailsMixin","rowDetailsRenderer","_updateRow","_a11yUpdateRowDetailsOpened","detailsOpenedItems","_toggleDetailsCell","changeRecord","detailsHidden","hiddenChanged","removeProperty","setProperty","instance","openItemDetails","closeItemDetails","_detailsCells","ScrollMixin","SCROLLING","IGNORE_WHEEL","_frozenCells","_rowWithFocusedElement","Element","_deltaYAcc","_useSticky","CSS","supports","_scrollLineHeight","_getScrollLineHeight","_scrollPageHeight","outerscroller","_onWheel","__mouseDown","__pendingReorder","_reorderRows","_timeouts","_accessIronListAPI","_hasScrolledAncestor","deltaX","deltaY","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","_wheelAnimationFrame","_debouncerWheelAnimationFrame","momentum","_canScroll","_hasResidualMomentum","_ignoreNewWheel","_debouncerIgnoreNewWheel","_previousMomentum","_scrollingFrame","_debounceScrolling","cancelAnimationFrame","_translateStationaryElements","_scheduleScrolling","_updateOverflow","_debounceOverflow","adjustedVirtualStart","_vidxOffset","targetPhysicalIndex","_debouncerCacheElements","_updateScrollerMeasurements","__scrollerMetrics","columnsRow","leftOffset","topOffset","footerOffset","offsetTop","_getTranslate","__getNormalizedScrollLeft","frozenCellTransform","GridScrollerElement","_warnPrivateAPIAccess","_scrollingToIndex","_adjustVirtualIndexOffset","headerOffset","fvi","fviOffset","maxVirtualItems","_edge","__updateFooterPositioning","rePosition","_canPopulate","_initialPoolCreated","_debounceIncreasePool","remainingPhysicalSize","estimatedMissingRowCount","__reorderChildNodes","rowsInOrder","inOrder","currentIndex","row1","row2","fragment","createDocumentFragment","physicalItems","_createScrollerRows","_getRowTarget","slot","_updateScrollerItem","oldOffset","_afterScroll","_noScale","scale","offset","threshold","maxShift","maxOffset","_warnPrivateAPIAccessAsyncEnabled","returnValue","_debouncerWarnPrivateAPIAccess","apiName","GridSelectionColumnElement","__cleanCellsOfTemplateProperties","defaultHeaderTemplate","defaultBodyTemplate","selectAll","autoSelect","_indeterminate","_previousActiveItem","_selectAllHidden","_boundOnActiveItemChanged","_onActiveItemChanged","_boundOnDataProviderChanged","_onDataProviderChanged","_boundOnSelectedItemsChanged","_onSelectedItemsChanged","isSafari","nextElementSibling","_selectAllChangeLock","_toggleItem","_arrayContains","SelectionMixin","GridSortColumnElement","SortMixin","_onSorterChanged","sorters","_removeArrayItem","multiSort","_previousSorters","_a11yUpdateSorters","GridSorterElement","_isConnected","isConnected","VaadinGridStyles","register","StylingMixin","cellClassGenerator","generateCellClassNames","_generateCellClassNames","__generatedClasses","cellClassNameGenerator","GridTemplatizer","_templateInstances","_parentPathValues","expanded","_ensureTemplatized","_TemplateClass","addInstance","notifyPath","parentModel","forwardHostProp","_forwardParentProp","notifyInstanceProp","originalProp","itemPrefix","gridCallback","addedCount","keyName","GridTreeColumnElement","itemHasChildrenPath","GridTreeToggleElement","leaf","_debouncerUpdateLevel","TOUCH_DEVICE","createEvent","GridElement","MSStream","platform","maxTouchPoints","_firefox","heightByRows","_recalculateColumnWidthOnceLoadingFinished","_onAnimationEnd","recalculateColumnWidths","__hasRowsWithClientHeight","cols","_origFlexGrow","_currentWidth","cellWidth","_recalculateColumnWidths","contentId","_contentIndex","slotName","chrome","mouseUpListener","isColumnRow","noNotify","contentsFragment","_vacant","_createCell","_configureDetailsCell","_a11ySetRowDetailsCell","visibleRowCells","_preventScrollerRotatingCellFocus","_a11yUpdateRowRowindex","sizer","paddingBottom","isOldIOS","minHeight","maxHeight","_a11yUpdateRowSelected","_a11yUpdateRowLevel","__detailsOpened__","__selected__","__level__","__expanded__","_debouncerUpdateHeights","_updateDetailsCellHeights","animationName","webkitOverflowScrolling","_getIndexLevel","_renderHeaderAndFooter","_debouncerForceReflow","Material","HOST_PROPS","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","subclass","_createMethodObserver","__preventInput","stopImmediatePropagation","preventInvalidInput","input","inputElement","checkValidity","_inputDebouncer","__fromClearButton","__userInput","clearButtonVisible","hasValue","clearButton","_valueClearing","changeEvent","sourceEvent","newVal","oldVal","validate","_setOrToggleAttribute","helperText","slottedNodes","flatten","_hasSlottedHelper","slotted","_slottedTagName","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","attributesValues","attributeNames","minlength","maxlength","pattern","__forceCheckValidity","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_boundOnPaste","_boundOnDrop","_boundOnBeforeInput","_createConstraintsObserver","_onInput","_onChange","_onBlur","_onFocus","_onPaste","_onBeforeInput","defaultInput","_onSlotChange","_onHelperSlotChange","ShadyCSS","nativeCss","_onClearButtonClick","uniqueId","_uniqueId","_errorId","constructor","_labelId","_helperTextId","_inputId","__observeOffsetHeight","autoselect","select","setSelectionRange","clear","inputEvent","Event","dispatchChange","_enabledCharPattern","__shouldAcceptKey","metaKey","__enabledCharRegExp","pastedText","clipboardData","__enabledTextRegExp","draggedText","RegExp","_shouldPreventInput","_createPropertyObserver","errorId","helperTextId","hasSlottedHelper","ids","sizePropertyName","previousSizePropertyName","__observeOffsetHeightDebouncer","_dispatchIronResizeEventIfNeeded","WEBKIT_PROPERTY","__dataValue","autocomplete","autocorrect","autocapitalize","i18n","TextFieldElement","title","ThemableMixin","hasOwnTemplate","inheritedTemplate","getPrototypeOf","s","_includeStyle","_includeMatchingThemes","domModule","modules","hasThemes","defaultModuleName","moduleNameA","moduleNameB","vaadinA","vaadinB","vaadinThemePrefixes","vaadinThemeA","prefix","vaadinThemeB","moduleName","themeFor","themeForToken","styleEl","ThemePropertyMixin","_setTheme","theme","maybeGatherAndSendStats","usageStatistics","introRoutes","component","canActivate","IntroRoutingModule","imports","forChild","exports","IntroComponent","selector","IntroModule","declarations","schemas","providers","provide","useClass","PetDetailComponent","sanitizer","changes","pet","currentValue","photoUrls","preloadPhotos","petPhotos","nonCachedPhotoUrl","petImage","onload","visible","onerror","bypassSecurityTrustUrl","PetPhoto","PetDialogComponent","translateService","basePath","edit","cancel","save","statusOptions","getStatusOptions","dialogPet","getNewPet","uploadedFiles","numFilesUploading","uploadPath","closeDialog","emit","instant","formValid","StatusEnum","enumLabel","PetsComponent","petService","selectedPetChanged","isEditing","addEditDialogOpen","petStoreProvider","getPetStoreProvider","selectedPet","petsTable","petsTableElement","nativeElement","deletePet","subscribe","updatePet","addPet","observable","sorting","sortBy","sortOrder","Ascending","Descending","nameFilter","getPets","handleError","SortOrder","APIS","Pet","Available","Pending","Sold"],"mappings":"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","file":"app-components-intro-intro-module-es5.js","sourcesContent":["import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host {\r\n  --avl-card-background-color: var(--avl-background-color);\r\n  --avl-card-text-color: var(--avl-foreground-color);\r\n  --avl-card-action-background-color: var(--avl-background-color);\r\n  --avl-card-shadow: var(--avl-box-shadow-1dp);\r\n  \r\n  font-family: var(--avl-font-family);\r\n  background-color: var(--avl-card-background-color);\r\n  color: var(--avl-card-text-color);\r\n  \r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  border-radius: 2px;\r\n  font-size: 14px;\r\n  box-shadow: var(--avl-card-shadow);\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.thumbnail {\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-right: 16px;\r\n  align-self: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.heading-content {\r\n  padding: 16px 24px;\r\n}\r\n\r\n.heading-content > div {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n:host ::slotted([slot=\"title\"]) {\r\n  margin: 0px;\r\n  font-size: 24px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  line-height: 26px;\r\n}\r\n\r\n.avl-card ::slotted([slot=\"title\"]) {\r\n  margin: 0px;\r\n  font-size: 24px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  line-height: 26px;\r\n  font-size: 24px;\r\n}\r\n\r\n.avl-card ::slotted([slot=\"subtitle\"]) {\r\n  margin: 0px;\r\n  font-size: 24px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  line-height: 26px;\r\n  font-size: 16px;\r\n}\r\n\r\n:host ::slotted([slot=\"subtitle\"]) {\r\n  margin: 0px;\r\n  font-size: 16px;\r\n  padding-top: 2px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  line-height: 24px;\r\n}\r\n\r\n.title {\r\n  display: inline-grid;\r\n}\r\n\r\n::slotted([slot=\"content\"]) {\r\n  padding: 0px;\r\n  position: relative;\r\n}\r\n\r\n::slotted(div) {\r\n  padding: 0px;\r\n}\r\n\r\n.content {\r\n  display: block;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n}\r\n\r\n.header {\r\n  position: relative;\r\n  padding: 0;\r\n  color: var(--avl-card-text-color);\r\n}\r\n\r\niron-image {\r\n  --iron-image-width: 100%;\r\n  --iron-image-height: auto;\r\n  display: block;\r\n}\r\n\r\n.image {\r\n  padding-bottom: 16px;\r\n}\r\n\r\ndiv.content {\r\n  padding: 0px 24px 16px;\r\n}\r\n\r\ndiv.actions{\r\n  padding: 0px 16px;\r\n}\r\n\r\n.actions {\r\n  margin-top: auto;\r\n  bottom: 0;\r\n  background-color: var(--avl-card-action-background-color);\r\n}\r\n\r\n.actions ::slotted([slot=\"actions\"]) {\r\n  padding: 0px;\r\n  float: left;\r\n}\r\n\r\n.actions ::slotted([slot=\"actions-right\"]) {\r\n  padding: 0px;\r\n  float: right;\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-card.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-card.css';\nimport { allInitial } from '../all-initial.css';\nimport '../avl-icon/avl-icon';\nimport '@polymer/iron-image/iron-image.js';\nexport let template = html `\r\n  ${allInitial}\r\n  ${style}\r\n\r\n  <div class=\"header\" class$={{getHeaderClass()}}>\r\n    <template is=\"dom-if\" if=\"{{titleBelowImage}}\">\r\n      <iron-image src=\"[[image]]\" > </iron-image>\r\n      <div class=\"heading-content\">\r\n        <div>\r\n          <template is=\"dom-if\" if=\"[[titleIcon]]\">\r\n            <avl-icon class=\"thumbnail\" icon=\"[[titleIcon]]\"></avl-icon>\r\n          </template>\r\n          <div class=\"title\">\r\n            <slot name=\"title\"> </slot>\r\n            <slot name=\"subtitle\"> </slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <template is=\"dom-if\" if=\"{{!titleBelowImage}}\">\r\n      <div class=\"heading-content\">\r\n        <div>\r\n          <template is=\"dom-if\" if=\"[[titleIcon]]\">\r\n            <avl-icon class=\"thumbnail\" icon=\"[[titleIcon]]\"></avl-icon>\r\n          </template>\r\n      \r\n          <div class=\"title\">\r\n            <slot name=\"title\"> </slot>\r\n            <slot name=\"subtitle\"> </slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <template is=\"dom-if\" if=\"[[image]]\">\r\n        <iron-image src=\"[[image]]\" class=\"image\" > </iron-image>\r\n      </template>\r\n    </template>\r\n  </div>\r\n\r\n  <div class=\"content\">\r\n    <slot> </slot>\r\n    <slot name=\"content\"> </slot>\r\n  </div>\r\n\r\n  <div class=\"actions\">\r\n    <slot name=\"actions\"> </slot>\r\n    <slot name=\"actions-right\"> </slot>\r\n  </div>`;\n\r\n//# sourceMappingURL=avl-card.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-card.html';\nclass AvlCardImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.titleBelowImage = false;\n    }\n    static get is() {\n        return 'avl-card';\n    }\n    static get template() {\n        return template;\n    }\n    static get properties() {\n        return {\n            image: String,\n            titleBelowImage: Boolean,\n            titleIcon: String,\n        };\n    }\n    getHeaderClass() {\n        if (this.image == null) {\n            return 'header no-image';\n        }\n        return 'header';\n    }\n}\ncustomElements.define(AvlCardImpl.is, AvlCardImpl);\n\n//# sourceMappingURL=avl-card.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host{\r\n  display: inline-block;\r\n  flex-wrap: wrap;\r\n}\r\n\r\navl-chips-chip:hover{\r\n  cursor: pointer;\r\n}\r\n\r\navl-chips-chip{\r\n  margin: 4px;\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\r\n  transition-property: box-shadow;\r\n  transition-duration: 0.2s; \r\n  display: inline-flex;\r\n}\r\n\r\navl-chips-chip[disabled]{\r\n  cursor: default;\r\n}\r\n\r\navl-chips-chip[readonly]{\r\n  cursor: default;\r\n}\r\n\r\navl-chips-chip:active:not([disabled]){\r\n  background-color: var(--avl-chips-chip-pressed-color, var(--avl-ink-pressed-color));\r\n  box-shadow: var(--avl-chips-shadow ,var(--avl-box-shadow-8dp));\r\n}\r\n\r\n.title{\r\n  padding-top:2px;\r\n  font-family: Roboto, sans-serif;\r\n  font-size: 14px;\r\n  color: var(--avl-foreground-color);\r\n}\r\n\r\n.container{\r\n  display: inline-flex;\r\n  flex-wrap: wrap;\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-chip-list.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element.js';\nimport { style } from './avl-chip-list.css';\nimport { allInitial } from '../all-initial.css';\nimport '../avl-chips-chip/avl-chips-chip';\nexport let template = html `\r\n  ${allInitial}\r\n  ${style}\r\n  <template is=\"dom-if\" if=\"[[label]]\">\r\n      <div class=\"title\">{{label}}</div>\r\n    </template>\r\n    <div class=\"container\">\r\n      <template is=\"dom-repeat\" items=\"[[items]]\" on-dom-change=\"start\">\r\n        <avl-chips-chip label=\"[[item.label]]\" value=\"[[item]]\" disabled=\"{{isDisabled(item,disabled)}}\"\r\n          readonly=\"{{isReadOnly(item, readonly)}}\" on-checked-changed=\"chipSelected\" filter=\"[[multiSelect]]\"\r\n          not-selectable=\"[[notSelectable]]\"></avl-chips-chip>\r\n      </template>\r\n    </div>`;\n\r\n//# sourceMappingURL=avl-chip-list.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-chip-list.html';\nclass AvlChipListImpl extends PolymerElement {\n    constructor() {\n        super();\n        this.selectedIndexes = [];\n        this.selectedValues = [];\n        this.notSelectable = true;\n        this.initialized = false;\n        this.ignoreCheckedEvents = false;\n        this.addEventListener('focusin', (event) => {\n            this.focused = true;\n        });\n        this.addEventListener('focusout', (event) => {\n            this.focused = false;\n        });\n    }\n    static get is() { return 'avl-chip-list'; }\n    static get template() {\n        return template;\n    }\n    static get properties() {\n        return {\n            items: {\n                type: Array,\n                observer: 'itemsChange'\n            },\n            disabled: {\n                type: Boolean,\n                reflectToAttribute: true\n            },\n            selectedValue: {\n                type: Object,\n                notify: true,\n                observer: 'selectedValueChange'\n            },\n            selectedIndex: {\n                type: Number,\n                value: -1,\n                reflectToAttribute: true,\n                observer: 'selectedIndexChange',\n                notify: true\n            },\n            selectedValues: {\n                type: Array,\n                notify: true\n            },\n            selectedIndexes: {\n                type: Array,\n                notify: true\n            },\n            focused: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true\n            },\n            readonly: {\n                type: Boolean,\n                reflectToAttribute: true\n            },\n            allowDeselection: {\n                type: Boolean,\n                reflectToAttribute: true\n            },\n            singleSelect: {\n                type: Boolean,\n                observer: 'singleSelectChanged',\n                reflectToAttribute: true\n            },\n            multiSelect: {\n                type: Boolean,\n                observer: 'multiSelectChanged',\n                reflectToAttribute: true\n            },\n            label: {\n                type: String,\n                notify: true\n            }\n        };\n    }\n    static get observers() {\n        return [\n            'selectedValuesChanged(selectedValues.splices)',\n            'selectedIndexesChanged(selectedIndexes.splices)',\n        ];\n    }\n    itemsChange() {\n        this.initialized = false;\n    }\n    singleSelectChanged() {\n        this.notSelectable = this.singleSelect ? false : true;\n    }\n    multiSelectChanged() {\n        this.notSelectable = this.multiSelect ? false : true;\n    }\n    start() {\n        this.initialized = true;\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (!this.multiSelect) {\n            if (this.selectedValue !== undefined)\n                this.selectedValueChange();\n            if (this.selectedIndex !== -1)\n                this.selectedIndexChange();\n        }\n        else {\n            if (this.selectedValues.length)\n                this.selectedValuesChanged();\n            if (this.selectedIndexes.length)\n                this.selectedIndexesChanged();\n        }\n    }\n    refreshSelectedIndexes() {\n        this.selectedIndexesChanged();\n        this.dispatchEvent(new CustomEvent('selected-indexes-changed', { detail: { value: this.selectedIndexes } }));\n    }\n    refreshSelectedValues() {\n        this.selectedValuesChanged();\n        this.dispatchEvent(new CustomEvent('selected-values-changed', { detail: { value: this.selectedValues } }));\n    }\n    findIndexOfValue(target) {\n        if (!this.items || !target)\n            return -1;\n        return this.items.findIndex((item) => item.value === target.value);\n    }\n    isDisabled(item, disabled) {\n        return item.disabled || this.disabled;\n    }\n    isReadOnly(item, readonly) {\n        return item.readonly || this.readonly;\n    }\n    selectedValueChange() {\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (this.items && !this.multiSelect) {\n            if (this.selectedValue != undefined) {\n                let chip = [...this.shadowRoot.querySelectorAll(\"avl-chips-chip\")];\n                if (chip.length != 0) {\n                    let index = chip.findIndex((x) => x.value == this.selectedValue);\n                    if (chip[index] && chip[index].disabled !== true) {\n                        chip[index].checked = true;\n                        this.selectedIndex = index;\n                    }\n                }\n            }\n            else {\n                this.selectedIndex = -1;\n            }\n        }\n    }\n    selectedIndexChange() {\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (this.items && !this.multiSelect) {\n            const chip = [...this.shadowRoot.querySelectorAll(\"avl-chips-chip\")];\n            if (this.selectedIndex > -1 && chip.length > this.selectedIndex) {\n                chip[this.selectedIndex].checked = true;\n                this.selectedValue = this.items[this.selectedIndex];\n            }\n            for (var i = 0; i < chip.length; i++) {\n                /** removes checked chip when another one is pressed*/\n                if (this.selectedIndex != i) {\n                    chip[i].checked = false;\n                }\n            }\n        }\n    }\n    selectedValuesChanged() {\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (this.multiSelect && this.items) {\n            let newSelectedIndexes = [];\n            if (this.items.length != 0) {\n                for (var i = 0; i < this.items.length; i++) {\n                    if (this.selectedValues.find((x) => x == this.items[i])) {\n                        newSelectedIndexes.push(i);\n                    }\n                }\n            }\n            if (!this.arraysEqual(this.selectedIndexes, newSelectedIndexes)) {\n                this.selectedIndexes.splice(0, this.selectedIndexes.length, ...newSelectedIndexes);\n                this.refreshSelectedIndexes();\n            }\n        }\n    }\n    selectedIndexesChanged() {\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (this.multiSelect && this.items) {\n            let newSelectedValues = [];\n            if (this.items.length != 0) {\n                for (var i = 0; i < this.selectedIndexes.length; i++) {\n                    const index = this.selectedIndexes[i];\n                    if (index < this.items.length) {\n                        newSelectedValues.push(this.items[index]);\n                    }\n                }\n                if (!this.arraysEqual(this.selectedValues, newSelectedValues)) {\n                    this.selectedValues.splice(0, this.selectedValues.length, ...newSelectedValues);\n                    this.refreshSelectedValues();\n                }\n            }\n            const chips = [...this.shadowRoot.querySelectorAll(\"avl-chips-chip\")];\n            this.ignoreCheckedEvents = true;\n            for (let i = 0; i < chips.length; i++) {\n                if (this.selectedIndexes.indexOf(i) != -1) {\n                    chips[i].checked = true;\n                }\n                else {\n                    chips[i].checked = false;\n                }\n            }\n            this.ignoreCheckedEvents = false;\n        }\n    }\n    chipSelected(event) {\n        if (!this.initialized || this.ignoreCheckedEvents)\n            return;\n        if (!this.multiSelect && !this.singleSelect) {\n            return;\n        }\n        if (!this.multiSelect) {\n            if (event.detail.value) {\n                const index = this.findIndexOfValue(event.target.value);\n                this.selectedIndex = index;\n                this.selectedValue = event.target.value;\n            }\n            else if (event.target.value === this.selectedValue) {\n                if (this.allowDeselection) {\n                    this.selectedIndex = -1;\n                    this.selectedValue = undefined;\n                }\n                else {\n                    this.selectedValueChange();\n                }\n            }\n        }\n        else {\n            let index = this.selectedValues.findIndex(x => x == event.target.value);\n            if (index > -1) {\n                this.selectedValues.splice(index, 1);\n                this.refreshSelectedValues();\n            }\n            else {\n                this.selectedValues.push(event.target.value);\n                this.refreshSelectedValues();\n            }\n        }\n    }\n    arraysEqual(a, b) {\n        if (!a || !b)\n            return false;\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++) {\n            if (a[i] !== b[i])\n                return false;\n        }\n        return true;\n    }\n}\ncustomElements.define(AvlChipListImpl.is, AvlChipListImpl);\n\n//# sourceMappingURL=avl-chip-list.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host {\r\n    display: flex;\r\n    position: relative;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 30px;\r\n    padding: 0 16px;\r\n    border-radius: 16px;\r\n    border: 1px solid;\r\n    border-color: var(--avl-chips-border-color, var(--avl-border-focus-color));\r\n    color: var(--avl-chips-text-color, var(--avl-link-color));\r\n    font-family: Roboto, sans-serif;\r\n    font-size: 14px;\r\n    white-space: nowrap;\r\n  }\r\n\r\npaper-ripple {\r\n  background-position: center;\r\n  transition: background 0.2s;\r\n  position: absolute;\r\n  width:100%;\r\n  height: 100%;\r\n  color: var(--avl-chips-ripple-color, var(--avl-ink-pressed-color));\r\n}\r\n\r\n:host([disabled]) paper-ripple {\r\n  color: rgba(0,0,0,0);\r\n}\r\n\r\n:host([readonly]) paper-ripple {\r\n  color: rgba(0,0,0,0);\r\n}\r\n\r\n:host([invalid]) paper-ripple {\r\n  color: var(--avl-chips-pressed-error-color, var(--avl-ink-error-pressed-color));\r\n}\r\n\r\n:host(:hover){\r\n background-color: var(--avl-chips-hover-color, var(--avl-ink-hover-color));\r\n}\r\n\r\n:host(:active) {\r\n  background-color: var(--avl-chips-pressed-color, var(--avl-ink-pressed-color));\r\n}\r\n\r\n:host([disabled]){\r\n  background-color:  var(--avl-chips-disabled-background-color, var(--avl-background-disabled-color));\r\n  color: var(--avl-chips-disabled-text-color, var(--avl-foreground-disabled-color));\r\n  border-color: var(--avl-chips-disabled-border-color, var(--avl-border-disabled-color));\r\n  outline:none;\r\n}\r\n\r\n:host([readonly]){\r\n  border-color: var(--avl-chip-list-readonly-border-color, var(--avl-border-emphasis-high-color));\r\n  color: var(--avl-chip-list-readonly-text-color, var(--avl-foreground-color));\r\n  outline:none;\r\n  pointer-events: none;\r\n  cursor: default;\r\n}\r\n\r\n:host(:not([disabled]):not([readonly]):not([invalid])[focused]){\r\n  background-color: var(--avl-chips-focused-color,var(--avl-ink-focus-color));\r\n  outline: none;\r\n}\r\n\r\n:host(:not([disabled]):not([readonly])[invalid][focused]){\r\nbackground-color: var(--avl-chips-focused-invalid-color,var(--avl-ink-error-focus-color));\r\noutline: none;\r\n} \r\n \r\navl-icon.checkIcon{\r\n  --avl-icon-custom-color:  var(--avl-chips-icon-color, var(--avl-icon-default-emphasis-high-color));\r\n}\r\n\r\navl-icon.removeIcon{\r\n  --avl-icon-custom-color: var(--avl-chips-removeIcon-color, var(--avl-emphasis-medium-color));\r\n}\r\n\r\navl-icon.thumbnail{\r\n  --avl-icon-custom-color: var(--avl-chips-thumbnail-color, var(--avl-emphasis-medium-color));\r\n}\r\n\r\n:host([invalid]) avl-icon.removeIcon{\r\n  --avl-icon-custom-color: var(--avl-chips-removeIcon-color, var(--avl-error-color));\r\n}\r\n\r\n:host([disabled]) avl-icon.thumbnail{\r\n  --avl-icon-custom-color: var(--avl-chips-thumbnail-disabled-color, var(--avl-foreground-disabled-color));\r\n}\r\n\r\n:host([disabled]) avl-icon.removeIcon{\r\n  --avl-icon-custom-color: var(--avl-chips-removeIcon-disabled-color, var(--avl-foreground-disabled-color));\r\n}\r\n\r\n:host([invalid]) {\r\n  border-color: var(--avl-chips-border-error-color, var(--avl-error-color));\r\n  color: var(--avl-chip-list-readonly-text-color, var(--avl-error-color));\r\n}\r\n\r\n :host([invalid]:hover)  {\r\n  border-color: var(--avl-chips-border-error-color, var(--avl-error-color));\r\n  background-color: var(--avl-chips-hover-error-color, var(--avl-ink-error-hover-color));\r\n}\r\n\r\n:host([invalid][checked][focused]) paper-ripple {\r\n  border-color: var(--avl-chips-border-error-color, var(--avl-error-color));\r\n  background-color: var(--avl-chips-focused-error-color, var(--avl-ink-error-focus-color));\r\n}\r\n\r\n:host([invalid][checked][active]) paper-ripple {\r\n  border-color: var(--avl-chips-border-error-color, var(--avl-error-color));\r\n  background-color: var(--avl-chips-pressed-error-color, var(--avl-ink-error-pressed-color));\r\n}  \r\n\r\n:host avl-icon.checkIcon{\r\n  display: none;\r\n}\r\n\r\n:host avl-icon.removeIcon:not([removeIcon]){\r\n  display: none;\r\n}\r\n\r\n:host([checked][filter]) avl-icon.checkIcon{\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  margin-right: 8px;\r\n}\r\n\r\n:host avl-icon.thumbnail{\r\n  display: inline-block;\r\n  position: relative;\r\n  left: -12px;\r\n  margin-right: -4px;\r\n}\r\n\r\n:host avl-icon.thumbnail:not([thumbnail]){\r\n  display: none;\r\n}\r\n\r\n:host([remove-icon]) avl-icon.removeIcon {\r\n  display: inline-block;\r\n  position: relative;\r\n  right: -12px;\r\n  margin-left: -4px;\r\n}\r\n\r\n:host([checked][filter][readonly]) avl-icon.checkIcon{\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  margin-right: 8px;\r\n  --avl-icon-custom-color:var(--avl-emphasis-medium-color);\r\n}\r\n\r\n:host([checked][filter]){\r\n  padding-left: 0px;\r\n}\r\n\r\n:host(:hover:not([disabled]):not([readonly])[checked]){\r\n  background-color: var(--avl-chips-selected-hover-background-color, var(--avl-background-selected-hover-color));\r\n}\r\n\r\n:host(:not([disabled]):not([readonly])[checked][focused]){\r\n  background-color: var(--avl-chips-selected-focus-background-color, var(--avl-background-selected-focus-color));\r\n}\r\n\r\n:host(:not([disabled]):not([readonly])[checked]:not([invalid])){\r\n  background-color: var(--avl-chips-selected-pressed-background-color, var(--avl-background-selected-pressed-color));\r\n}\r\n\r\n:host(:not([disabled]):not([readonly])[checked][invalid]){\r\n  background-color: var(--avl-chips-selected-pressed-invalid-background-color, var(--avl-ink-error-pressed-color)); /* needs to be done (color is not specified) */\r\n  border-color: var(--avl-chips-border-error-color, var(--avl-error-color));\r\n}\r\n\r\n:host([disabled]) avl-icon.checkIcon{\r\n  display: none;\r\n}\r\n\r\navl-chips-chip[readonly]{\r\n  cursor: default;\r\n}\r\n\r\n:host(:not([disabled])[checked]){\r\n  background-color: var(--avl-chips-selected-background-color, var(--avl-background-selected-color));\r\n  color: var(--avl-chips-selected-text-color,var(--avl-foreground-color));\r\n  border-color: var(--avl-chips-selected-border-color, var(--avl-border-pressed-color));\r\n}\r\n\r\n:host(:not([disabled])[checked][readonly]){\r\n  background-color:var(--avl-chip-list-readonly-selected-background-color, var(--avl-background-disabled-color));\r\n  color: var(--avl-chip-list-readonly-text-color, var(--avl-foreground-color));\r\n  border-color: var(--avl-chip-list-readonly-border-color, var(--avl-border-emphasis-high-color));\r\n}\r\n\r\n/* box-shadow: 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12), 0 5px 5px -3px rgba(0,0,0,0.20); */\r\n</style>`;\n\r\n//# sourceMappingURL=avl-chips-chip.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element.js';\nimport { style } from './avl-chips-chip.css';\nimport { allInitial } from '../all-initial.css';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport '../avl-icon/avl-icon';\nexport let template = html `\r\n  ${allInitial}\r\n  ${style}\r\n\r\n  <avl-icon class=\"checkIcon\" icon=\"check\"></avl-icon>\r\n  <avl-icon class=\"thumbnail\" icon=\"[[thumbnailIcon]]\" src=\"[[thumbnailImage]]\" thumbnail$=\"[[hasThumbnail()]]\"></avl-icon>\r\n  <div class=\"text\" label=\"[[label]]\" value=\"{{value}}\"> {{label}} </div>\r\n  <avl-icon class=\"removeIcon\" icon=\"icons:clear\" on-click=\"removeIconClicked\" removeIcon$=\"[[hasRemoveIcon()]]\"></avl-icon>\r\n  <paper-ripple initial-opacity=\"1\" opacity-decay-velocity=\"3.2\"></paper-ripple>`;\n\r\n//# sourceMappingURL=avl-chips-chip.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-chips-chip.html';\nclass AvlChipsChipImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.removeIcon = false;\n    }\n    static get is() {\n        return 'avl-chips-chip';\n    }\n    static get template() {\n        return template;\n    }\n    static get properties() {\n        return {\n            checked: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n                notify: true\n            },\n            focused: {\n                type: Boolean,\n                notify: true,\n                reflectToAttribute: true,\n            },\n            active: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n            },\n            disabled: {\n                type: Boolean,\n                value: false,\n                notify: true,\n                reflectToAttribute: true,\n                observer: 'tabIndexChanged'\n            },\n            readonly: {\n                type: Boolean,\n                notify: true,\n                reflectToAttribute: true,\n                observer: 'tabIndexChanged'\n            },\n            filter: {\n                type: Boolean,\n                reflectToAttribute: true,\n            },\n            label: {\n                type: String,\n                reflectToAttribute: true,\n            },\n            tabindex: {\n                type: Number,\n                reflectToAttribute: true\n            },\n            value: {\n                type: Object,\n                notify: true\n            },\n            notSelectable: {\n                type: Boolean\n            },\n            thumbnailIcon: {\n                type: String,\n            },\n            removeIcon: {\n                type: Boolean,\n                reflectToAttribute: true\n            },\n            thumbnailImage: {\n                type: String,\n            },\n            invalid: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true,\n                value: false,\n                observer: 'invalidChanged'\n            }\n        };\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('keydown', (event) => {\n            if (event.key == ' ' || event.key == 'Enter') {\n                this.onPressed();\n                this.toggleChecked();\n            }\n        });\n        this.addEventListener('focusin', () => {\n            this.focused = true;\n        });\n        this.addEventListener('focusout', () => {\n            this.focused = false;\n        });\n        this.addEventListener('mouseup', () => {\n            if (!this.disabled) {\n                this.onUnpressed();\n            }\n        });\n        this.addEventListener('mousedown', () => {\n            if (!this.disabled) {\n                this.onPressed();\n                this.toggleChecked();\n            }\n        });\n    }\n    tabIndexChanged() {\n        this.tabindex = (this.readonly || this.disabled) ? -1 : 0;\n    }\n    toggleChecked() {\n        if (!this.disabled && !this.notSelectable) {\n            this.checked = !this.checked;\n        }\n    }\n    onUnpressed(event) {\n        if (this.active) {\n            this.active = false;\n        }\n    }\n    onPressed() {\n        if (!this.disabled)\n            this.active = true;\n    }\n    hasThumbnail() {\n        return this.thumbnailIcon != null || this.thumbnailImage != null;\n    }\n    hasRemoveIcon() {\n        return this.removeIcon;\n    }\n    removeIconClicked(e) {\n        this.dispatchEvent(new CustomEvent('chips-removed', { detail: e.detail }));\n    }\n    invalidChanged(value) {\n        this.dispatchEvent(new CustomEvent('chips-invalid-changed', { detail: value }));\n    }\n}\ncustomElements.define(AvlChipsChipImpl.is, AvlChipsChipImpl);\n\n//# sourceMappingURL=avl-chips-chip.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host {\r\n  display: block;\r\n  font-family: var(--avl-font-family);\r\n  height: 200px;\r\n  width: 250px;\r\n  --avl-item-padding-left: var(--avl-list-item-padding-left, 24px);\r\n  --avl-item-padding-right: var(--avl-list-item-padding-right, 24px);\r\n  --avl-item-height: var(--avl-list-item-height, 48px);\r\n\r\n  --avl-item-background-color: var(--avl-list-item-background-color, var(--avl-background-color));\r\n  --avl-list-item-selected-color: var(--avl-background-selected-color);\r\n  --avl-list-item-hover-color: var(--avl-ink-default-hover-color);\r\n  --avl-list-item-focused-color: var(--avl-ink-default-focus-color);\r\n  --avl-list-item-pressed-color: var(--avl-ink-default-pressed-color);\r\n  --avl-list-item-selected-hover-color: var(--avl-background-selected-hover-color);\r\n  --avl-list-item-selected-focus-color: var(--avl-background-selected-focus-color);\r\n  --avl-list-item-selected-pressed-color: var(--avl-background-selected-pressed-color);\r\n  --avl-list-item-disabled-text-color: var(--avl-foreground-disabled-color);\r\n}\r\n\r\navl-item {\r\n  cursor: pointer;\r\n}\r\navl-item[focused] {\r\n  cursor: pointer;\r\n}\r\navl-item[focused][drag-and-drop] {\r\n  cursor: -moz-grab;\r\n  cursor: -webkit-grab;\r\n  cursor: grab;\r\n}\r\navl-item[dragging] {\r\n  cursor: -moz-grabbing;\r\n  cursor: -webkit-grabbing;\r\n  cursor: grabbing;\r\n}\r\n\r\n\r\navl-item[fake-focus] {\r\n  background-color: var(--avl-list-item-focused-color);\r\n}\r\n\r\navl-item[checked][fake-focus] {\r\n  background-color: var(--avl-list-item-selected-focus-color);\r\n}\r\n\r\navl-item[readonly]{\r\n  cursor: default;\r\n}\r\n\r\navl-item[disabled]{\r\n  cursor: default;\r\n  --avl-item-disabled-text-color: var(--avl-list-item-disabled-text-color);\r\n}\r\n\r\navl-item[image]{\r\n  --avl-item-height: 56px;\r\n}\r\n\r\navl-item[sublabel]{\r\n  --avl-item-height: 64px;\r\n}\r\n\r\navl-item:hover[readonly]:not([checked]){\r\n  background-color: var(--avl-background-color);\r\n}\r\n\r\navl-item[readonly][checked]{\r\n  background-color: var(--avl-background-disabled-color);\r\n}\r\n\r\navl-item:hover:not([nohover]):not([readonly]):not([disabled]){\r\n  background-color: var(--avl-list-item-hover-color);\r\n}\r\n\r\navl-item:not([readonly]):not([checked]):not([nohover])[pressed]{\r\n  background-color: var(--avl-list-item-pressed-color);\r\n}\r\n\r\navl-item:not([readonly])[focused]:not([checked]):not([pressed]){\r\n  background-color: var(--avl-list-item-focused-color);\r\n}\r\n\r\navl-item:not([readonly])[checked]{\r\n  background-color: var(--avl-list-item-selected-color);\r\n}\r\n\r\navl-item:not([readonly])[checked]:hover:not([nohover]){\r\n  background-color: var(--avl-list-item-selected-hover-color);\r\n}\r\n\r\navl-item:not([readonly])[checked][focused]{\r\n  background-color: var(--avl-list-item-selected-focus-color);\r\n}\r\n\r\navl-item:not([readonly])[checked][pressed]:not([nohover]){\r\n  background-color: var(--avl-list-item-selected-pressed-color);\r\n}\r\n\r\navl-item { /* Fixes text selection in Edge while dragging */\r\n  -ms-user-select: none;\r\n}\r\n\r\navl-item[selectable-with-checkbox]{\r\n  --avl-item-padding-left: 12px;\r\n}\r\n\r\navl-item[right-checkbox]{\r\n  --avl-item-padding-right: 12px;\r\n}\r\n\r\navl-item[overflow-menu]{\r\n  --avl-item-padding-right: 12px;\r\n}\r\n\r\n#scrollable {\r\n  height: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n#itemPositioner {\r\n  position: absolute;\r\n  width: 100%;\r\n}\r\n\r\n#dummyFocusable {\r\n  width: 0px;\r\n  height: 0px;\r\n}\r\n\r\n#placeholderElement {\r\n  background-color: var(--avl-drop-area-color);\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-list.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-list.css';\nimport { allInitial } from '../all-initial.css';\nimport '../avl-item/avl-item';\nimport '../avl-overflow-menu/avl-overflow-menu';\nimport '../avl-icon-button/avl-icon-button';\nimport '../avl-icon/avl-icon';\nexport let template = html ` ${allInitial} ${style}\r\n\r\n  <div id=\"scrollable\" on-scroll=\"handleScroll\">\r\n    <div id=\"itemContainer\">\r\n      <div id=\"itemPositioner\" on-mousemove=\"dndItemMousemove\" on-touchmove=\"dndItemMousemove\">\r\n        <template\r\n          id=\"itemsTemplate\"\r\n          is=\"dom-repeat\"\r\n          items=\"[[visibleRows]]\"\r\n          index-as=\"[[index]]\"\r\n          restamp=\"true\"\r\n          mutable-data=\"true\"\r\n          on-dom-change=\"itemsRendered\"\r\n        >\r\n          <template is=\"dom-if\" if=\"[[isDragoverRow(item, dnd.dragoverRow, dnd.dragging)]]\">\r\n            <template is=\"dom-if\" if=\"[[isDndBefore(dnd.dragoverBefore, item)]]\">\r\n              <div id=\"placeholderElement\" style=\"height: 48px; width: 100%;\"></div>\r\n            </template>\r\n          </template>\r\n\r\n          <avl-item\r\n            value=\"[[item]]\"\r\n            label=\"[[item.label]]\"\r\n            sublabel=\"[[item.sublabel]]\"\r\n            tabindex=\"{{tabindex}}\"\r\n            badge-value=\"[[item.badgeValue]]\"\r\n            icon=\"[[item.icon]]\"\r\n            image=\"[[item.image]]\"\r\n            disabled$=\"{{isDisabled(item.disabled,disabled)}}\"\r\n            readonly$=\"{{isReadonly(item.readonly, readonly)}}\"\r\n            on-click=\"itemClick\"\r\n            on-keydown=\"onKeydown\"\r\n            drag-indicator=\"[[dragIndicator]]\"\r\n            drag-and-drop=\"[[dragAndDrop]]\"\r\n            on-focused-changed=\"itemFocusedChanged\"\r\n            selectable-with-checkbox=\"[[multiSelect]]\"\r\n            on-selection-checkbox-changed=\"selectionCheckboxClicked\"\r\n            right-checkbox=\"[[hasRightCheckbox(item)]]\"\r\n            right-checkbox-value=\"{{item.rightCheckbox}}\"\r\n            on-right-checkbox-value-changed=\"rightCheckboxValueChanged\"\r\n            overflow-menu=\"[[hasOverflowMenu(overflowMenuItems)]]\"\r\n            index$=\"[[index]]\"\r\n            nohover$=\"[[isNohover(dnd.dragging, item)]]\"\r\n            on-mousedown=\"dndItemMousedown\"\r\n            on-touchstart=\"dndItemMousedown\"\r\n            on-dragstart=\"dragstart\"\r\n            fake-focus-enabled=\"[[fakeFocus]]\"\r\n          >\r\n            <template is=\"dom-if\" if=\"[[overflowMenuItems]]\">\r\n              <avl-overflow-menu\r\n                slot=\"overflow-menu\"\r\n                items=\"[[overflowMenuItems]]\"\r\n                disabled=\"{{isDisabled(item.disabled,disabled)}}\"\r\n                row=\"[[item]]\"\r\n                on-item-clicked=\"overflowMenuItemClicked\"\r\n              >\r\n                <avl-icon-button\r\n                  tabindex=\"-1\"\r\n                  icon=\"more-vert\"\r\n                  slot=\"trigger\"\r\n                  disabled-tabindex\r\n                  disabled=\"{{isDisabled(item.disabled,disabled)}}\"\r\n                ></avl-icon-button>\r\n              </avl-overflow-menu>\r\n            </template>\r\n          </avl-item>\r\n\r\n          <template is=\"dom-if\" if=\"[[isDragoverRow(item, dnd.dragoverRow, dnd.dragging)]]\">\r\n            <template is=\"dom-if\" if=\"[[!isDndBefore(dnd.dragoverBefore, item)]]\">\r\n              <div id=\"placeholderElement\" style=\"height: 48px; width: 100%;\"></div>\r\n            </template>\r\n          </template>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id=\"dummyFocusable\" tabindex$=\"{{tabindex}}\"></div>\r\n  <div\r\n    id=\"draggedElementContainer\"\r\n    on-mousemove=\"dndItemMousemove\"\r\n    on-touchmove=\"dndItemMousemove\"\r\n  ></div>`;\n\r\n//# sourceMappingURL=avl-list.html.js.map\r\n","import { DragAndDrop } from './drag-and-drop';\nimport { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-list.html';\nclass AvlListImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.selectedIndex = -1;\n        this.tabindex = 0;\n        this.visibleRows = [];\n        this.rows = [];\n        this.totalRows = 0;\n        this.cachedRows = [];\n        this.cachedRowHeights = [];\n        this.pageCached = {};\n        this.pageSize = 10;\n        this.defaultItemHeight = 48;\n        this.fakeFocus = false;\n        this.fakeFocusIndex = -1;\n        this.focusedIndex = -1;\n        this._selectedIndexes = { values: [], locked: false, set: false };\n        this._selectedValues = { values: [], locked: false, set: false };\n        this.hideDraggedElement = () => {\n            const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n            for (const itemEl of itemElements) {\n                if (this.dnd && itemEl['value'] === this.dnd.draggedRow) {\n                    itemEl.style.display = 'none';\n                }\n                else {\n                    itemEl.style.display = 'block';\n                }\n            }\n        };\n    }\n    static get is() { return 'avl-list'; }\n    static get template() {\n        return template;\n    }\n    static get properties() {\n        return {\n            rows: {\n                type: Array,\n                observer: 'rowsChanged'\n            },\n            dataProvider: {\n                type: Object,\n                observer: 'dataProviderChanged'\n            },\n            selectedValue: {\n                type: Object,\n                observer: 'selectedValueChanged',\n                notify: true\n            },\n            selectedIndex: {\n                type: Number,\n                observer: 'selectedIndexChanged',\n                notify: true\n            },\n            pageSize: {\n                type: Number,\n                observer: 'pageSizeChanged'\n            },\n            disabled: {\n                type: Boolean,\n                observer: 'disabledChanged',\n                reflectToAttribute: true\n            },\n            readonly: {\n                type: Boolean,\n                observer: 'disabledChanged',\n                reflectToAttribute: true\n            },\n            focused: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true\n            },\n            _selectedValues: {\n                type: Array,\n                notify: true,\n            },\n            _selectedIndexes: {\n                type: Array,\n                notify: true,\n            },\n            selectedValues: {\n                type: Array,\n                notify: true,\n                observer: 'selectedValuesChanged'\n            },\n            selectedIndexes: {\n                type: Array,\n                notify: true,\n                observer: 'selectedIndexesChanged'\n            },\n            singleSelect: {\n                type: Boolean,\n                observer: 'singleSelectChanged',\n                reflectToAttribute: true\n            },\n            multiSelect: {\n                type: Boolean,\n                observer: 'multiSelectChanged',\n                reflectToAttribute: true\n            },\n            allowActiveRow: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true\n            },\n            activeRow: {\n                type: Object,\n                observer: 'activeRowChanged',\n                notify: true\n            },\n            dragAndDrop: {\n                type: Boolean,\n                observer: 'dragAndDropChanged',\n            },\n            dragIndicator: {\n                type: Boolean,\n            },\n            fakeFocus: {\n                type: Boolean,\n                observer: 'fakeFocusChanged',\n            }\n        };\n    }\n    unlock() {\n        if (this._selectedValues.locked && this._selectedIndexes.locked) {\n            this._selectedIndexes.locked = false;\n            this._selectedValues.locked = false;\n        }\n        this.selectRows();\n    }\n    selectedValuesChanged() {\n        if (this.selectedValues.length === 0 && !this._selectedValues.set) {\n            return;\n        }\n        this._selectedValues.values = this.selectedValues;\n        this._selectedValues.locked = true;\n        if (!this._selectedValues.set) {\n            this._selectedValues.set = true;\n        }\n        if (this.rows == null || this.rows.length === 0) {\n            this.selectRows();\n        }\n        if (this.rows && this.rows.length > 0) {\n            this._selectedIndexes.values = this.selectedValues.map(val => this.rows.indexOf(val));\n            if (!this._selectedIndexes.locked) {\n                this.selectedIndexes = this._selectedIndexes.values;\n                this.unlock();\n            }\n        }\n    }\n    selectedIndexesChanged() {\n        if (this.selectedIndexes.length === 0 && !this._selectedIndexes.set) {\n            return;\n        }\n        this._selectedIndexes.values = this.selectedIndexes.sort();\n        this._selectedIndexes.locked = true;\n        if (!this._selectedIndexes.set) {\n            this._selectedIndexes.set = true;\n        }\n        this._selectedIndexes.set = true;\n        if (this.rows && this.rows.length > 0) {\n            this._selectedValues.values = this.selectedIndexes.map(index => this.rows[index]);\n            if (!this._selectedValues.locked) {\n                this.selectedValues = this._selectedValues.values;\n                this.unlock();\n            }\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.initDnd();\n        // change focussed state\n        this.addEventListener('focusin', (e) => {\n            if (!this.readonly)\n                this.focused = true;\n        });\n        this.addEventListener('focusout', (e) => {\n            this.focused = false;\n        });\n        this.addEventListener('keydown', (e) => {\n            switch (e.key) {\n                case 'Up':\n                case 'ArrowUp':\n                    e.preventDefault();\n                    this.focusedIndex = Math.max(0, this.focusedIndex - 1);\n                    this.scrollItemIntoView(this.focusedIndex);\n                    this.focusItem(this.focusedIndex);\n                    break;\n                case 'Down':\n                case 'ArrowDown':\n                    e.preventDefault();\n                    this.focusedIndex = Math.min(this.totalRows - 1, this.focusedIndex + 1);\n                    this.scrollItemIntoView(this.focusedIndex);\n                    this.focusItem(this.focusedIndex);\n                    break;\n                case ' ':\n                    e.preventDefault();\n                    break;\n                case 'Enter':\n                    e.preventDefault();\n                    break;\n            }\n        });\n        this.getRows(0, 1);\n        if (this.allowActiveRow) {\n            this.waitForRender(this).then(() => {\n                let itemHeight = this.shadowRoot.querySelector('#scrollable').children[0].querySelector('avl-item').scrollHeight;\n                let index = this.rows.findIndex(r => r.label == this.activeRow.label);\n                this.shadowRoot.querySelector('#scrollable').scrollTop = itemHeight * index;\n            });\n        }\n    }\n    waitForRender(el) {\n        return new Promise(function (resolve, reject) {\n            let interval = setInterval(() => {\n                if (el.shadowRoot.querySelector('#itemPositioner').childElementCount > 1) {\n                    clearInterval(interval);\n                    resolve();\n                }\n            }, 100);\n        });\n    }\n    disconnectedCallback() {\n        super['disconnectedCallback']();\n        if (this.dnd)\n            this.dnd.destruct();\n    }\n    focus() {\n        const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n        if (itemElements.length) {\n            itemElements[0].focus();\n        }\n    }\n    fakeFocusNext() {\n        if (!this.fakeFocus)\n            return;\n        this.resetFakeFocus();\n        const itemElements = this.$.itemContainer.querySelectorAll('avl-item');\n        this.fakeFocusIndex = Math.min(this.totalRows - 1, this.fakeFocusIndex + 1);\n        this.scrollItemIntoView(this.fakeFocusIndex);\n        const item = itemElements[this.fakeFocusIndex - this.currentFirstIndex];\n        if (item) {\n            item.fakeFocus = true;\n        }\n    }\n    fakeFocusPrevious() {\n        if (!this.fakeFocus)\n            return;\n        this.resetFakeFocus();\n        const itemElements = this.$.itemContainer.querySelectorAll('avl-item');\n        this.fakeFocusIndex = Math.max(0, this.fakeFocusIndex - 1);\n        this.scrollItemIntoView(this.fakeFocusIndex);\n        const item = itemElements[this.fakeFocusIndex - this.currentFirstIndex];\n        if (item) {\n            item.fakeFocus = true;\n        }\n    }\n    getFakeFocusRow() {\n        return this.cachedRows[this.fakeFocusIndex];\n    }\n    itemClick(e) {\n        const item = e.target;\n        if (item.tagName.toLowerCase() != 'avl-item')\n            return;\n        this.itemSelect(item);\n    }\n    onKeydown(e) {\n        if (e.key === 'Enter' || e.key === ' ') {\n            const item = e.target;\n            if (item.tagName.toLowerCase() != 'avl-item')\n                return;\n            this.itemSelect(item);\n        }\n    }\n    itemSelect(item) {\n        const value = item.value;\n        if (!item.disabled && !item.readonly && this.singleSelect) {\n            this.selectedValue = value;\n            item.checked = true;\n        }\n        else if (!item.disabled && !item.readonly && this.multiSelect && this.allowActiveRow) {\n            this.activeRow = value;\n        }\n    }\n    activeRowChanged() {\n        this.selectAndFocusCorrectItem();\n    }\n    selectionCheckboxClicked(event) {\n        const item = event.target;\n        if (!item.disabled && !item.readonly && this.multiSelect) {\n            if (item.selectableWithCheckboxChecked) {\n                if (!this.selectedValues) {\n                    this.selectedValues = [item.value];\n                }\n                else {\n                    this.selectedValues.push(item.value);\n                    this.selectedValues = this.selectedValues.slice();\n                }\n            }\n            else {\n                this.selectedValues = this.selectedValues.filter((x) => x !== item.value);\n            }\n        }\n        this.selectAndFocusCorrectItem();\n    }\n    rightCheckboxValueChanged(e) {\n        const row = e.target['value'];\n        this.dispatchEvent(new CustomEvent('right-checkbox-changed', { detail: { value: e.detail.value, row: row } }));\n    }\n    overflowMenuItemClicked(e) {\n        const row = e.target['row'];\n        this.dispatchEvent(new CustomEvent('overflow-menu-item-clicked', { detail: { item: e.detail, row: row } }));\n    }\n    scrollItemIntoView(index) {\n        if (index < 0 || index > this.totalRows)\n            return;\n        const item = this.cachedRows[index];\n        if (item) {\n            const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n            const itemEl = itemElements.find(el => el.value == item);\n            if (!itemEl) {\n                this.$.scrollable.scrollTop = Math.min(Math.max(0, this.getItemPosition(index)), this.getTotalHeight());\n            }\n        }\n    }\n    focusItem(index) {\n        if (index < 0 || index > this.totalRows)\n            return;\n        const item = this.cachedRows[index];\n        if (item) {\n            const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n            const itemEl = itemElements.find(el => el.value == item);\n            if (itemEl) {\n                if (!itemEl.focused) {\n                    itemEl.focus();\n                }\n            }\n            else {\n                this.$.dummyFocusable.focus();\n            }\n        }\n    }\n    itemFocusedChanged(e) {\n        if (e.detail.value) {\n            this.focusedIndex = this.cachedRows.findIndex(row => row == e.target.value);\n        }\n    }\n    handleScroll(e) {\n        this.prepareVisibleRows();\n        this.selectAndFocusCorrectItem();\n        this.dnd.scrollableScroll(e);\n    }\n    getTotalHeight() {\n        let height = 0;\n        for (let i = 0; i < this.totalRows; ++i) {\n            if (this.cachedRowHeights[i] !== undefined) {\n                height += this.cachedRowHeights[i];\n            }\n            else {\n                height += this.defaultItemHeight;\n            }\n        }\n        return height;\n    }\n    getItemPosition(index) {\n        let position = 0;\n        for (let i = 0; i < index; ++i) {\n            if (this.cachedRowHeights[i] !== undefined) {\n                position += this.cachedRowHeights[i];\n            }\n            else {\n                position += this.defaultItemHeight;\n            }\n        }\n        return position;\n    }\n    getFirstVisibleIndex(scrollTop) {\n        let currentHeight = 0;\n        for (let i = 0; i < this.totalRows; ++i) {\n            if (this.cachedRowHeights[i] !== undefined) {\n                currentHeight += this.cachedRowHeights[i];\n            }\n            else {\n                currentHeight += this.defaultItemHeight;\n            }\n            if (currentHeight > scrollTop) {\n                return i;\n            }\n        }\n        return this.totalRows;\n    }\n    getLastVisibleIndex(height, firstIndex) {\n        let currentHeight = 0;\n        for (let i = firstIndex; i < this.totalRows; ++i) {\n            if (this.cachedRowHeights[i] !== undefined) {\n                currentHeight += this.cachedRowHeights[i];\n            }\n            else {\n                currentHeight += this.defaultItemHeight;\n            }\n            if (currentHeight > height) {\n                return i + 1;\n            }\n        }\n        return this.totalRows;\n    }\n    prepareVisibleRows() {\n        this.$.itemContainer.style.height = `${this.getTotalHeight()}px`;\n        const firstIndex = this.getFirstVisibleIndex(this.$.scrollable.scrollTop);\n        const lastIndex = this.getLastVisibleIndex(this.$.scrollable.clientHeight, firstIndex);\n        this.currentFirstIndex = firstIndex;\n        this.getRows(firstIndex, lastIndex - firstIndex);\n        this.visibleRows = this.cachedRows.slice(firstIndex, lastIndex);\n        this.$.itemPositioner.style.top = `${this.getItemPosition(firstIndex)}px`;\n    }\n    selectRows(itemElements) {\n        if (!this.multiSelect) {\n            return;\n        }\n        if (itemElements == null) {\n            itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n        }\n        if (this._selectedValues) {\n            itemElements.forEach(el => {\n                el.selectableWithCheckboxChecked = false;\n                this._selectedValues.values.forEach(val => {\n                    if (el.value === val) {\n                        el.selectableWithCheckboxChecked = true;\n                    }\n                });\n            });\n        }\n    }\n    itemsRendered() {\n        this.selectAndFocusCorrectItem();\n        this.hideDraggedElement();\n        // update cached row heights\n        const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n        if (itemElements.length) {\n            const startIndex = this.cachedRows.findIndex(row => row === itemElements[0].value);\n            for (let i = 0; i < itemElements.length; ++i) {\n                if (this.dnd && itemElements[i].value !== this.dnd.draggedRow) {\n                    this.cachedRowHeights[startIndex + i] = itemElements[i].clientHeight;\n                }\n            }\n        }\n        this.selectRows(itemElements);\n        if (this.fakeFocus) {\n            const item = itemElements[0];\n            if (item && item.fakeFocus)\n                item.fakeFocus = false;\n            if (item && this.currentFirstIndex === 0) {\n                item.fakeFocus = true;\n                this.fakeFocusIndex = 0;\n                this.dispatchEvent(new CustomEvent('initial-fake-focus', { detail: { value: item.value } }));\n            }\n        }\n        if (this.fakeFocus) {\n            this.resetFakeFocus();\n            if (this.currentFirstIndex === 0 && this.fakeFocusIndex == -1) {\n                const item = itemElements[0];\n                if (item) {\n                    item.fakeFocus = true;\n                    this.fakeFocusIndex = 0;\n                    this.dispatchEvent(new CustomEvent('initial-fake-focus', { detail: { value: item.value } }));\n                }\n            }\n            else if (this.fakeFocusIndex !== -1) {\n                const item = itemElements[this.fakeFocusIndex - this.currentFirstIndex];\n                if (item) {\n                    item.fakeFocus = true;\n                }\n            }\n        }\n    }\n    rowsChanged() {\n        this.dataProvider = (params) => new Promise(resolve => {\n            /**\n             * There's an issue in angular where an async pipe where gives you a null as an initial value:\n             * https://github.com/angular/angular/issues/16982\n             * So rows couldn't be used with an async pipe without this.\n             */\n            if (this.rows == null) {\n                resolve({\n                    rows: [],\n                    totalRows: 0\n                });\n            }\n            else {\n                resolve({\n                    rows: this.rows.slice(params.page * params.pageSize, (params.page + 1) * params.pageSize),\n                    totalRows: this.rows.length\n                });\n            }\n        });\n    }\n    dataProviderChanged() {\n        this.cachedRows = [];\n        this.cachedRowHeights = [];\n        this.pageCached = {};\n        this.prepareVisibleRows();\n    }\n    pageSizeChanged() {\n        this.dataProviderChanged();\n    }\n    selectAndFocusCorrectItem() {\n        const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n        for (const itemEl of itemElements) {\n            if (this.singleSelect) {\n                itemEl.checked = itemEl.value === this.selectedValue;\n            }\n            else if (this.multiSelect) {\n                itemEl.checked = itemEl.value === this.activeRow;\n            }\n        }\n        this.focusItem(this.focusedIndex);\n    }\n    selectedValueChanged() {\n        if (!this.cachedRows)\n            return;\n        for (let i = 0; i < this.cachedRows.length; ++i) {\n            if (this.cachedRows[i] === this.selectedValue) {\n                this.selectedIndex = i;\n                break;\n            }\n        }\n        this.selectAndFocusCorrectItem();\n        this.resetFakeFocus();\n        this.fakeFocusIndex = -1;\n    }\n    selectedIndexChanged() {\n        if (!this.cachedRows || this.selectedIndex == undefined)\n            return;\n        if (this.cachedRows[this.selectedIndex]) {\n            this.selectedValue = this.cachedRows[this.selectedIndex];\n        }\n    }\n    resetFakeFocus() {\n        const itemElements = [...this.$.itemContainer.querySelectorAll('avl-item')];\n        for (const item of itemElements) {\n            if (item.fakeFocus) {\n                item.fakeFocus = false;\n            }\n        }\n    }\n    disabledChanged() {\n        this.tabindex = (this.disabled || this.readonly) ? -1 : 0;\n    }\n    fakeFocusChanged(val) {\n        if (val) {\n            this.setAttribute('tabindex', '-1');\n        }\n    }\n    multiSelectChanged() {\n    }\n    singleSelectChanged() {\n        this.selectAndFocusCorrectItem();\n    }\n    getRows(start, n) {\n        if (!this.dataProvider)\n            return;\n        for (let page = Math.floor(start / this.pageSize); page < Math.floor((start + n) / this.pageSize) + 1; ++page) {\n            if (!this.pageCached[page]) {\n                this.pageCached[page] = true;\n                this.dataProvider({ page: page, pageSize: this.pageSize }).then(res => {\n                    const rows = res.rows;\n                    const totalRows = res.totalRows;\n                    for (let j = 0; j < rows.length; ++j) {\n                        this.cachedRows[page * this.pageSize + j] = rows[j];\n                    }\n                    this.totalRows = totalRows;\n                    this.prepareVisibleRows();\n                    // check if some of the newly fetched items are selected\n                    if (this.singleSelect) {\n                        if (this.selectedValue) {\n                            this.selectedValueChanged();\n                        }\n                        else if (this.selectedIndex != -1) {\n                            this.selectedIndexChanged();\n                        }\n                    }\n                    if (this.multiSelect) {\n                        if (this.selectedValues && this.selectedValues.length > 0) {\n                            this._selectedIndexes.locked = true;\n                            this.selectedValuesChanged();\n                            this._selectedIndexes.locked = false;\n                        }\n                        else if (this.selectedIndexes && this.selectedIndexes.length > 0) {\n                            this._selectedValues.locked = true;\n                            this.selectedIndexesChanged();\n                            this._selectedIndexes.locked = false;\n                        }\n                    }\n                });\n            }\n        }\n    }\n    initDnd() {\n        this.dnd = new DragAndDrop(() => this.$.itemsTemplate.render(), () => {\n            this.focusedIndex = -1;\n            this.$.dummyFocusable.focus();\n        }, (draggedRow, dragoverRow, before) => {\n            if (!draggedRow || !dragoverRow)\n                return;\n            const oldIndex = this.cachedRows.indexOf(draggedRow);\n            let insertIndex = this.cachedRows.indexOf(dragoverRow);\n            if (!before) {\n                insertIndex++;\n            }\n            const newCachedRows = this.cachedRows.slice();\n            newCachedRows.splice(oldIndex, 1, null);\n            newCachedRows.splice(insertIndex, 0, draggedRow);\n            newCachedRows.splice(newCachedRows.indexOf(null), 1);\n            const newIndex = newCachedRows.indexOf(draggedRow);\n            if (this.rows.length > 0) {\n                this.splice('rows', 0, newCachedRows.length, ...newCachedRows);\n            }\n            if (newIndex !== oldIndex) {\n                this.cachedRows = newCachedRows;\n                this.prepareVisibleRows();\n                this.dispatchEvent(new CustomEvent('row-reordered', { detail: { row: draggedRow, index: newIndex, oldIndex: oldIndex } }));\n                if (this.singleSelect) {\n                    this.selectedValueChanged();\n                }\n                else if (this.multiSelect) {\n                    this.selectedValuesChanged();\n                }\n            }\n        }, dy => this.$.scrollable.scrollTop = Math.min(Math.max(0, this.$.scrollable.scrollTop + dy), this.getTotalHeight()), this.hideDraggedElement, () => [...this.$.itemContainer.querySelectorAll('avl-item')], this.$.draggedElementContainer, this.$.scrollable);\n        this.dnd.disabled = !this.dragAndDrop || this.readonly;\n        this.dndItemMousedown = this.dnd.itemMousedown;\n        this.dndItemMousemove = this.dnd.itemMousemove;\n    }\n    // prevents ghost image dragging\n    dragstart(e) {\n        e.preventDefault();\n        return false;\n    }\n    dragAndDropChanged() {\n        if (this.dnd) {\n            this.dnd.disabled = !this.dragAndDrop;\n        }\n    }\n    isDraggedRow(item) {\n        return this.dnd && this.dnd.dragging && item === this.dnd.draggedRow;\n    }\n    isDragoverRow(item) {\n        return this.dnd && this.dnd.dragging && item === this.dnd.dragoverRow;\n    }\n    isDndBefore(before) {\n        return before;\n    }\n    isNohover() {\n        return this.dnd && this.dnd.dragging;\n    }\n    isDisabled(itemDisabled) {\n        return itemDisabled || this.disabled;\n    }\n    isReadonly(itemReadonly) {\n        return itemReadonly || this.readonly;\n    }\n    hasOverflowMenu() {\n        return this.overflowMenuItems && this.overflowMenuItems.length;\n    }\n    hasRightCheckbox(item) {\n        if (item)\n            return item.rightCheckbox !== undefined;\n        else\n            return false;\n    }\n    arraysEqual(a, b) {\n        if (!a || !b)\n            return false;\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++) {\n            if (a[i] !== b[i])\n                return false;\n        }\n        return true;\n    }\n}\ncustomElements.define(AvlListImpl.is, AvlListImpl);\n\n//# sourceMappingURL=avl-list.js.map\n","export class DragAndDrop {\n    constructor(rerender, dragStartCallback, dropCallback, scrollBy, hideDraggedElement, getItemElements, draggedElementContainer, scrollable) {\n        this.rerender = rerender;\n        this.dragStartCallback = dragStartCallback;\n        this.dropCallback = dropCallback;\n        this.scrollBy = scrollBy;\n        this.hideDraggedElement = hideDraggedElement;\n        this.getItemElements = getItemElements;\n        this.draggedElementContainer = draggedElementContainer;\n        this.scrollable = scrollable;\n        this.dragging = false;\n        this.predragging = false; // item has been clicked, but the dragging is not yet started\n        this.itemMousemove = (e) => {\n            if (window.matchMedia('(pointer:coarse)').matches) {\n                if (!this.dragging)\n                    return;\n                if (window['TouchEvent'] && e instanceof TouchEvent) {\n                    // prevent scrolling\n                    e.preventDefault();\n                    this.lastX = e.touches[0].clientX;\n                    this.lastY = e.touches[0].clientY;\n                }\n                this.scrollableMousemove(e);\n                this.refreshDragoverRow();\n            }\n            else {\n                if (e instanceof MouseEvent) {\n                    this.lastX = e.clientX;\n                    this.lastY = e.clientY;\n                    if (this.draggedElement) {\n                        this.hideDraggedElement();\n                        this.refreshDragoverRow();\n                    }\n                    else if (Math.pow(this.lastX - this.dragStartX, 2) + Math.pow(this.lastY - this.dragStartY, 2) >\n                        25) {\n                        this.predragging = true;\n                        if (this.disabled)\n                            return;\n                        const item = e.target;\n                        if (item.tagName.toLowerCase() != 'avl-item')\n                            return;\n                        this.predragging = false;\n                        this.dragging = true;\n                        this.notDraggedYet = true;\n                        this.dragStartCallback();\n                        // clone item element\n                        this.draggedRow = item['value'];\n                        const clonedItem = item.cloneNode(true);\n                        const propertiesToCopy = Object.keys(customElements.get('avl-item').properties);\n                        for (let prop of propertiesToCopy) {\n                            clonedItem[prop] = item[prop];\n                        }\n                        clonedItem.style.width = `${item.clientWidth}px`;\n                        clonedItem.style.cursor = 'inherit';\n                        clonedItem.style.zIndex = '2000';\n                        // prevents ghost image dragging\n                        clonedItem.addEventListener('dragstart', (e) => {\n                            e.preventDefault();\n                            return false;\n                        });\n                        this.draggedElement = document.createElement('div');\n                        //get parent avl-list\n                        const child = item.parentElement.parentElement.parentElement;\n                        const list = child.__dataHost;\n                        if (list.hasAttribute('drag-indicator') && !list.hasOverflowMenu()) {\n                            let dragIcon = document.createElement('avl-icon');\n                            dragIcon.setAttribute('icon', 'custom-icons:drag-handle-icon');\n                            dragIcon.id = 'dragIcon';\n                            const styles = {\n                                paddingLeft: '',\n                                float: 'right',\n                                paddingRight: '24px',\n                                paddingTop: '12px',\n                                color: 'var(--avl-item-iron-color, var(--avl-emphasis-medium-color))',\n                                display: 'flex',\n                                justifyContent: 'center',\n                                flexDirection: 'column',\n                                flex: '0 0 auto'\n                            };\n                            Object.assign(dragIcon.style, styles);\n                            this.draggedElement.appendChild(dragIcon);\n                        }\n                        this.draggedElement.style.backgroundColor = 'var(--avl-background-color)';\n                        this.draggedElement.appendChild(clonedItem);\n                        this.draggedElementContainer.appendChild(this.draggedElement);\n                        clonedItem.setAttribute('pressed', '');\n                        this.draggedElement.style.position = 'fixed';\n                        this.draggedElement.style.touchAction = 'none';\n                        this.draggedElement.style.boxShadow =\n                            '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)';\n                        const itemRect = item.getBoundingClientRect();\n                        const top = itemRect.top;\n                        const left = itemRect.left;\n                        if (e instanceof MouseEvent) {\n                            this.dragOffsetY = e.y - top;\n                            this.dragOffsetX = e.x - left;\n                            // so that grabbing the bottom half doesn't displace the next element\n                            this.lastY = top + 1;\n                            this.lastX = left + 1;\n                        }\n                    }\n                    this.scrollableMousemove(e);\n                }\n            }\n        };\n        this.itemMousedown = (e) => {\n            if (window.matchMedia('(pointer:coarse)').matches) {\n                if (this.disabled)\n                    return;\n                const item = e.target;\n                if (item.tagName.toLowerCase() != 'avl-item')\n                    return;\n                this.predragging = true;\n                this.predragTimeout = window.setTimeout(() => {\n                    if (this.predragging) {\n                        this.predragging = false;\n                        this.dragging = true;\n                        this.notDraggedYet = true;\n                        this.dragStartCallback();\n                        // clone item element\n                        this.draggedRow = item['value'];\n                        const clonedItem = item.cloneNode(true);\n                        const propertiesToCopy = Object.keys(customElements.get('avl-item').properties);\n                        for (let prop of propertiesToCopy) {\n                            clonedItem[prop] = item[prop];\n                        }\n                        clonedItem.style.width = `${item.clientWidth}px`;\n                        clonedItem.style.cursor = 'inherit';\n                        clonedItem.style.zIndex = '2000';\n                        // prevents ghost image dragging\n                        clonedItem.addEventListener('dragstart', (e) => {\n                            e.preventDefault();\n                            return false;\n                        });\n                        this.draggedElement = document.createElement('div');\n                        this.draggedElement.style.backgroundColor = 'var(--avl-background-color)';\n                        this.draggedElement.appendChild(clonedItem);\n                        this.draggedElementContainer.appendChild(this.draggedElement);\n                        clonedItem.setAttribute('pressed', '');\n                        this.draggedElement.style.position = 'fixed';\n                        this.draggedElement.style.touchAction = 'none';\n                        this.draggedElement.style.boxShadow =\n                            '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)';\n                        const itemRect = item.getBoundingClientRect();\n                        const top = itemRect.top;\n                        const left = itemRect.left;\n                        if (window['TouchEvent'] && e instanceof TouchEvent) {\n                            this.dragOffsetY = e.touches[0].clientY - top;\n                            this.dragOffsetX = e.touches[0].clientX - left;\n                        }\n                        // so that grabbing the bottom half doesn't displace the next element\n                        this.lastY = top + 1;\n                        this.lastX = left + 1;\n                        this.hideDraggedElement();\n                        this.refreshDragoverRow();\n                        this.mouseMoveListener(e);\n                    }\n                }, 500);\n            }\n            else {\n                if (e instanceof MouseEvent) {\n                    this.dragStartX = e.clientX;\n                    this.dragStartY = e.clientY;\n                }\n            }\n            document.addEventListener('mousemove', this.mouseMoveListener);\n            document.addEventListener('touchmove', this.mouseMoveListener);\n            document.addEventListener('mouseup', this.mouseupListener);\n            document.addEventListener('touchend', this.mouseupListener);\n            window.addEventListener('keydown', this.escapeListener);\n            window.addEventListener('blur', this.cancelDrag);\n        };\n        this.scrollableMousemove = (e) => {\n            if (!this.dragging)\n                return;\n            let y;\n            if (e instanceof MouseEvent) {\n                y = e.y;\n            }\n            else if (window['TouchEvent'] && e instanceof TouchEvent) {\n                y = e.touches[0].clientY;\n            }\n            const scrollRect = this.scrollable.getBoundingClientRect();\n            const top = scrollRect.top;\n            const bottom = scrollRect.bottom;\n            if (y > bottom - 30) {\n                if (this.dragScrollInterval == undefined) {\n                    this.scrollSpeed = 5;\n                    this.dragScrollInterval = window.setInterval(() => {\n                        this.scrollSpeed = Math.min(this.scrollSpeed + 3, 40);\n                        this.scrollBy(this.scrollSpeed);\n                    }, 150);\n                }\n            }\n            else if (y < top + 30) {\n                if (this.dragScrollInterval == undefined) {\n                    this.scrollSpeed = 5;\n                    this.dragScrollInterval = window.setInterval(() => {\n                        this.scrollSpeed = Math.min(this.scrollSpeed + 3, 40);\n                        this.scrollBy(-this.scrollSpeed);\n                    }, 150);\n                }\n            }\n            else {\n                if (this.dragScrollInterval !== undefined) {\n                    clearInterval(this.dragScrollInterval);\n                    this.dragScrollInterval = undefined;\n                }\n            }\n        };\n        this.mouseMoveListener = (e) => {\n            if (this.predragging) {\n                this.cancelDrag();\n                return;\n            }\n            if (!this.dragging)\n                return;\n            if (this.notDraggedYet) {\n                this.draggedElement.style.cursor = 'grab';\n                this.notDraggedYet = false;\n            }\n            else {\n                this.draggedElement.style.cursor = 'grabbing';\n            }\n            if (e instanceof MouseEvent) {\n                this.draggedElement.style.top = `${e.y - this.dragOffsetY}px`;\n                this.draggedElement.style.left = `${e.x - this.dragOffsetX}px`;\n            }\n            else if (window['TouchEvent'] && e instanceof TouchEvent) {\n                this.draggedElement.style.top = `${e.touches[0].clientY - this.dragOffsetY}px`;\n                this.draggedElement.style.left = `${e.touches[0].clientX - this.dragOffsetX}px`;\n            }\n        };\n        this.mouseupListener = (e) => {\n            this.removeDragListeners();\n            if (this.dragging) {\n                this.dropCallback(this.draggedRow, this.dragoverRow, this.dragoverBefore);\n            }\n            this.resetDrag();\n        };\n        this.cancelDrag = () => {\n            this.removeDragListeners();\n            this.resetDrag();\n        };\n        this.escapeListener = (e) => {\n            switch (e.key) {\n                case 'Esc':\n                case 'Escape':\n                    this.cancelDrag();\n                    break;\n            }\n        };\n    }\n    destruct() {\n        this.cancelDrag();\n    }\n    scrollableScroll(e) {\n        this.refreshDragoverRow();\n    }\n    refreshDragoverRow() {\n        const items = this.getItemElements();\n        for (let item of items) {\n            if (this.pointInsideElement(this.lastX, this.lastY, item)) {\n                this.dragoverRow = item['value'];\n                const itemRect = item.getBoundingClientRect();\n                const top = itemRect.top;\n                const height = itemRect.height;\n                this.dragoverBefore = this.lastY < top + height / 2;\n                this.rerender();\n                return;\n            }\n        }\n        if (this.notDraggedYet) {\n            this.dragoverBefore = false;\n            this.dragoverRow = items[items.length - 1]['value'];\n            this.rerender();\n        }\n    }\n    resetDrag() {\n        this.dragStartX = undefined;\n        this.dragStartY = undefined;\n        this.draggedRow = undefined;\n        this.dragoverRow = undefined;\n        this.predragging = false;\n        this.hideDraggedElement();\n        if (this.draggedElement) {\n            this.draggedElementContainer.removeChild(this.draggedElement);\n            this.draggedElement = undefined;\n        }\n        if (this.dragging) {\n            this.dragging = false;\n            this.rerender();\n        }\n    }\n    removeDragListeners() {\n        document.removeEventListener('mouseup', this.mouseupListener);\n        document.removeEventListener('touchend', this.mouseupListener);\n        document.removeEventListener('mousemove', this.mouseMoveListener);\n        document.removeEventListener('touchmove', this.mouseMoveListener);\n        window.removeEventListener('keydown', this.escapeListener);\n        window.removeEventListener('blur', this.cancelDrag);\n        if (this.dragScrollInterval !== undefined) {\n            clearInterval(this.dragScrollInterval);\n            this.dragScrollInterval = undefined;\n        }\n        if (this.predragTimeout !== undefined) {\n            clearTimeout(this.predragTimeout);\n            this.predragTimeout = undefined;\n        }\n    }\n    pointInsideElement(x, y, element) {\n        const rect = element.getBoundingClientRect();\n        return x > rect.left && x < rect.right && y > rect.top && y < rect.bottom;\n    }\n}\n\n//# sourceMappingURL=drag-and-drop.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n.item-container {\r\n  display: grid;\r\n  grid-template-columns: auto 24px;\r\n  grid-template-rows: 24px 4px;\r\n  grid-column-gap: 16px;\r\n  grid-row-gap: 0px;\r\n  padding-right: 12px;\r\n}\r\n\r\n:host([focused]) .item-container {\r\n  background-color: var(--avl-upload-file-focus-color);\r\n}\r\n\r\n.item-container .item-name {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  align-self: center;\r\n  font-size: 14px;\r\n}\r\n\r\n.item-container .item-icon {\r\n  align-self: center;\r\n  justify-self: center;\r\n  cursor: pointer;\r\n  grid-column: 2;\r\n  --avl-icon-button-color: var(--avl-upload-icons-color);\r\n}\r\n\r\n.item-container.complete {\r\n  grid-template-rows: 24px;\r\n  \r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n}\r\n\r\n:host(:hover) .item-container.complete {\r\n  background-color: var(--avl-upload-file-hover-color);\r\n}\r\n\r\n.item-container.complete a{\r\n  color: var(--avl-upload-file-uploaded-color);\r\n  text-decoration: none;\r\n  outline:none;\r\n  cursor: pointer;\r\n}\r\n\r\n:host(:hover) .item-container.complete a{\r\n  color: var(--avl-upload-file-label-hover-color);\r\n  text-decoration: none;\r\n\r\n}\r\n\r\n.item-container.complete .item-icon {\r\n  grid-row: 1;\r\n}\r\n\r\n.item-container.loading {\r\n  color: var(--avl-upload-file-name-color);\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.item-container.fail .error-message {\r\n  font-size: 12px;\r\n  color: var(--avl-upload-file-error-message-color);\r\n}\r\n\r\n.item-container.fail {\r\n  grid-template-rows: 24px 12px;\r\n  padding-top: 6px;\r\n  padding-bottom: 6px;\r\n}\r\n\r\n.item-container.fail .item-icon {\r\n  grid-column-start: 2; \r\n  grid-column-end: 3; \r\n  grid-row-start: 1; \r\n  grid-row-end: 3;\r\n}\r\n\r\n.item-container.fail .item-name {\r\n  color: var(--avl-upload-file-fail-color);\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-file-view.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-file-view.css';\nimport '../avl-upload-progress/avl-upload-progress';\nimport '../../avl-overflow-menu/avl-overflow-menu';\nimport '../../avl-icon-button/avl-icon-button';\n//<link rel=\"import\" href=\"../avl-upload-progress/avl-upload-progress.html\">\nexport let template = html `\r\n  ${style}\r\n    <template is=\"dom-if\" if=\"[[checkStatus(_file.status, 'uploading')]]\">\r\n      <div class=\"item-container loading\">\r\n        <avl-overflow-tooltip class=\"item-name\">[[_file.name]]</avl-overflow-tooltip>\r\n        <avl-icon-button id=\"abortIcon\" class=\"item-icon\" icon=\"icons:close\" on-click=\"abortUpload\" ></avl-icon-button>\r\n        <avl-upload-progress percentage=\"[[percentage]]\" indeterminate=\"[[indeterminateProgress]]\"></avl-upload-progress>\r\n      </div>\r\n    </template>\r\n    <template is=\"dom-if\" if=\"[[checkStatus(_file.status, 'complete')]]\">\r\n      <div class=\"item-container complete\">\r\n        <div class=\"item-name\">\r\n          <template is=\"dom-if\" if=\"[[_file.downloadUrl]]\">\r\n            <a tabindex=\"-1\" on-click=\"fileLinkClicked\">\r\n              [[_file.name]]\r\n            </a>\r\n          </template>\r\n          <template is=\"dom-if\" if=\"[[!_file.downloadUrl]]\">\r\n            [[_file.name]]\r\n          </template>\r\n        </div>\r\n        <avl-overflow-menu tabindex=\"-1\" class=\"item-icon\" items=\"[[completeMenuItems]]\" on-item-clicked=\"fileMenuItemClicked\" disabled=\"[[disabled]]\">\r\n          <avl-icon-button icon=\"more-vert\" slot=\"trigger\" disabled=\"[[disabled]]\"></avl-icon-button>\r\n        </avl-overflow-menu>\r\n      </div>\r\n    </template>\r\n    <template is=\"dom-if\" if=\"[[checkStatus(_file.status, 'fail')]]\">\r\n      <div class=\"item-container fail\">\r\n        <avl-overflow-tooltip class=\"item-name\">[[_file.name]]</avl-overflow-tooltip>\r\n        <avl-overflow-menu tabindex=\"-1\" class=\"item-icon\" items=\"[[failMenuItems]]\" on-item-clicked=\"fileMenuItemClicked\" disabled=\"[[disabled]]\">\r\n          <avl-icon-button icon=\"more-vert\" slot=\"trigger\" disabled=\"[[disabled]]\"></avl-icon-button>\r\n        </avl-overflow-menu>\r\n        <div class=\"error-message\">[[failErrorMessage]]</div>\r\n      </div>\r\n    </template>\r\n    <template is=\"dom-if\" if=\"[[checkStatus(_file.status, 'abort')]]\">\r\n      <div class=\"item-container fail\">\r\n        <avl-overflow-tooltip class=\"item-name\">[[_file.name]]</avl-overflow-tooltip>\r\n        <avl-overflow-menu tabindex=\"-1\" class=\"item-icon\" items=\"[[abortMenuItems]]\" on-item-clicked=\"fileMenuItemClicked\" disabled=\"[[disabled]]\">\r\n          <avl-icon-button icon=\"more-vert\" slot=\"trigger\" disabled=\"[[disabled]]\"></avl-icon-button>\r\n        </avl-overflow-menu>\r\n        <div class=\"error-message\">[[abortErrorMessage]]</div>\r\n      </div>\r\n    </template>\r\n    <a id=\"downloadAnchor\" style=\"display:none\"></a>`;\n\r\n//# sourceMappingURL=avl-file-view.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-file-view.html';\nclass AvlFileViewImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.percentage = 0;\n    }\n    static get is() { return 'avl-file-view'; }\n    static get properties() {\n        return {\n            focused: {\n                type: Boolean,\n                reflectToAttribute: true,\n            },\n            disabled: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true\n            },\n            file: {\n                type: Object,\n                observer: 'fileChanged'\n            },\n            target: {\n                type: String\n            },\n            service: {\n                type: Object\n            },\n            accept: {\n                type: String\n            },\n            additionalMenuItems: {\n                type: Array,\n                observer: 'resetMenuItems'\n            },\n            indeterminateProgress: {\n                type: Boolean,\n                value: false\n            },\n            failErrorMessage: {\n                type: String\n            },\n            abortErrorMessage: {\n                type: String\n            },\n            retryMenuItem: {\n                type: Object,\n                observer: 'resetMenuItems'\n            },\n            removeMenuItem: {\n                type: Object,\n                observer: 'resetMenuItems'\n            },\n            downloadMenuItem: {\n                type: Object,\n                observer: 'resetMenuItems'\n            }\n        };\n    }\n    static get template() {\n        return template;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.resetMenuItems();\n        this.addEventListener(\"focusin\", (event) => {\n            this.focused = true;\n        });\n        this.addEventListener(\"blur\", (event) => {\n            this.focused = false;\n        });\n        this.addEventListener('menu-item-clicked', (event) => {\n            if (event.detail.item === this.retryMenuItem) {\n                this.setFileStatus('notStarted');\n                this.upload();\n            }\n            if (event.detail.item === this.downloadMenuItem && this.file.downloadUrl) {\n                this.download(this.file.downloadUrl);\n            }\n            this.focus();\n        });\n        this.addEventListener('keydown', (e) => {\n            if (e.key == 'Enter' || e.key == ' ') {\n                const overflowMenu = this.shadowRoot.querySelectorAll('avl-overflow-menu');\n                if (overflowMenu.length > 1) {\n                    overflowMenu[0].open = false;\n                    overflowMenu[1].open = true;\n                }\n                else\n                    overflowMenu[0].open = true;\n            }\n        });\n        this.addEventListener('keydown', (e) => {\n            if (e.key == 'Escapce' || e.key == 'Esc') {\n                const overflowMenu = this.shadowRoot.querySelector('avl-overflow-menu');\n                overflowMenu.open = false;\n            }\n        });\n    }\n    /* focused */\n    focusedIn() {\n        this.focused = true;\n    }\n    focusedOut() {\n        this.focused = false;\n    }\n    setFileStatus(status) {\n        this.file.status = status;\n        this.set('_file.status', status);\n        this.dispatchEvent(new CustomEvent('file-status-changed', { detail: { value: this.file.status } }));\n    }\n    download(url) {\n        this.service.downloadFile(url)\n            .then((blob) => {\n            const objectUrl = window.URL.createObjectURL(blob);\n            this.$.downloadAnchor.href = objectUrl;\n            this.$.downloadAnchor.target = '_blank';\n            this.$.downloadAnchor.download = this.file.name;\n            this.$.downloadAnchor.click();\n            window.URL.revokeObjectURL(objectUrl);\n        });\n    }\n    resetMenuItems() {\n        this.completeMenuItems = [this.downloadMenuItem, this.removeMenuItem];\n        this.abortMenuItems = [this.retryMenuItem, this.removeMenuItem];\n        this.failMenuItems = [this.retryMenuItem, this.removeMenuItem];\n        if (this.additionalMenuItems) {\n            Object.keys(this.additionalMenuItems).forEach((status) => {\n                if (['abort', 'fail', 'complete'].indexOf(status) !== -1) {\n                    this[`${status}MenuItems`] = this[`${status}MenuItems`].concat(this.additionalMenuItems[`${status}`]);\n                }\n            });\n        }\n    }\n    fileChanged(file) {\n        this._file = Object.assign({}, file);\n        if (file && file.status === 'notStarted') {\n            this.upload();\n        }\n    }\n    upload() {\n        this.abortUploadAction = this.service.uploadFile(this.file, this.target, this.onUploadProgress.bind(this), this.onComplete.bind(this), this.onError.bind(this));\n        this.setFileStatus('uploading');\n        this.dispatchEvent(new CustomEvent('upload-start', { detail: { value: this.file } }));\n    }\n    onUploadProgress(progress) {\n        if (progress.lengthComputable) {\n            this.setUploadProgress(progress.loaded);\n            this.percentage = 100 * (this.file.loaded / this.file.size);\n        }\n        else {\n            this.indeterminateProgress = true;\n        }\n    }\n    setUploadProgress(loaded) {\n        this.file.loaded = loaded;\n        this.set('_file.loaded', loaded);\n    }\n    onComplete(downloadUrl) {\n        this.setFileStatus('complete');\n        if (downloadUrl) {\n            this.setDownloadUrl(downloadUrl);\n        }\n        this.dispatchEvent(new CustomEvent('upload-complete', { detail: { value: this.file } }));\n    }\n    setDownloadUrl(url) {\n        this.set('_file.downloadUrl', url);\n        this.file.downloadUrl = url;\n    }\n    onError(errorResponse) {\n        this.setFileStatus('fail');\n        this.dispatchEvent(new CustomEvent('upload-fail', { detail: { value: this.file, error: errorResponse } }));\n    }\n    checkStatus(currentStatus, status) {\n        return currentStatus === status;\n    }\n    abortUpload(file) {\n        this.abortUploadAction();\n        this.setFileStatus('abort');\n        this.dispatchEvent(new CustomEvent('upload-abort', { detail: { value: this.file } }));\n    }\n    fileLinkClicked(e) {\n        e.preventDefault();\n        if (this.file.downloadUrl)\n            this.download(this.file.downloadUrl);\n    }\n    fileMenuItemClicked(e) {\n        const item = e.detail.value;\n        this.dispatchEvent(new CustomEvent('menu-item-clicked', { detail: { value: this.file, item: item } }));\n    }\n}\ncustomElements.define(AvlFileViewImpl.is, AvlFileViewImpl);\n\n//# sourceMappingURL=avl-file-view.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n.avl-upload-modal {\r\n  display: block;\r\n  position: fixed;\r\n  z-index: 1000;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n\r\n.avl-upload-modal-content {\r\n  background-color: var(--avl-background-color);\r\n  margin: 15% auto;\r\n  padding: 20px 20px 0 20px;\r\n  width: 200px;\r\n  box-shadow: var(--avl-box-shadow-24dp);\r\n}\r\n\r\n.avl-upload-modal-content h1 {\r\n  font-size: 16px;\r\n  font-weight: bolder;\r\n}\r\n\r\n.avl-upload-modal-content p.errorFileName {\r\n  margin: 0;\r\n}\r\n\r\n.avl-upload-modal-content-footer {\r\n  width: 100%;\r\n  text-align: right;\r\n  position: relative;\r\n  left: 20px;\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-upload-dialog.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-upload-dialog.css';\nimport '../../avl-button/avl-button';\nexport let template = html `\r\n  ${style}\r\n      <div id=\"container\">\r\n        <div id=\"avl-upload-modal\" class=\"avl-upload-modal\">\r\n          <div class=\"avl-upload-modal-content\">\r\n            <h1>{{failErrorTypeTitle}}</h1>\r\n            <p>{{failErrorTypeMessage}}</p>\r\n            <template is=\"dom-if\" if=\"[[errorFiles]]\">\r\n              <b>{{failErrorFiles}}:</b>\r\n              <template is=\"dom-repeat\" items=\"{{errorFiles}}\">\r\n                <p class=\"errorFileName\">{{displayIndex(index)}}) {{item.name}}</p>\r\n              </template>\r\n            </template>\r\n            <div class=\"avl-upload-modal-content-footer\">\r\n              <avl-button id=\"avl-upload-dialog-button\" on-click=\"closeDialog\">OK</avl-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>`;\n\r\n//# sourceMappingURL=avl-upload-dialog.html.js.map\r\n","import { template } from './avl-upload-dialog.html';\nimport { PolymerElement } from '@polymer/polymer/polymer-element';\nclass UploadDialogImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.failErrorTypeMessage = 'The format of the file(s) you are trying to upload is not acceptable by software.';\n        this.failErrorTypeTitle = 'Unsupported File Format';\n        this.failErrorFiles = 'File(s)';\n    }\n    static get is() { return 'avl-upload-dialog'; }\n    static get properties() {\n        return {\n            errorFiles: {\n                type: Array,\n            }\n        };\n    }\n    static get template() {\n        return template;\n    }\n    closeDialog() {\n        this.dispatchEvent(new CustomEvent('close', { detail: 'true' }));\n    }\n    async translateLabels() {\n        if (!AvlLocalizationService || !AvlLocalizationService.translationService)\n            return;\n        let translationService = AvlLocalizationService.translationService;\n        this.failErrorTypeMessage = await translationService.translate('VizBox.AvlUpload.FormatIsUnsupportedMessage');\n        this.failErrorTypeTitle = await translationService.translate('VizBox.AvlUpload.FormatIsUnsupported');\n        this.failErrorFiles = await translationService.translate('VizBox.AvlUpload.FailErrorFiles');\n    }\n    displayIndex(index) {\n        return index + 1;\n    }\n}\ncustomElements.define(UploadDialogImpl.is, UploadDialogImpl);\n\n//# sourceMappingURL=avl-upload-dialog.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n#container {\r\n  background-color: var(--avl-upload-progress-bar-color);\r\n  height: 4px;\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n#indicator {\r\n  background-color: var(--avl-upload-progress-bar-indicator-color);\r\n  height: 100%;\r\n}\r\n\r\n:host([indeterminate]) #indicator {\r\n  background-color: var(--avl-upload-progress-bar-color);\r\n  width: 100%;\r\n}\r\n\r\n.indeterminate::after {\r\n  content: '';\r\n  display: block;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: right center;\r\n  animation: indeterminate-bar 1s linear infinite;\r\n  background-color: var(--avl-upload-progress-bar-indicator-color);\r\n}\r\n\r\n@keyframes indeterminate-bar {\r\n  0% {\r\n    transform: scaleX(1) translateX(-100%);\r\n  }\r\n  50% {\r\n    transform: scaleX(1) translateX(0%);\r\n  }\r\n  75% {\r\n    transform: scaleX(1) translateX(0%);\r\n    animation-timing-function: cubic-bezier(.28,.62,.37,.91);\r\n  }\r\n  100% {\r\n    transform: scaleX(0) translateX(0%);\r\n  }\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-upload-progress.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-upload-progress.css';\nexport let template = html `\r\n  ${style}\r\n\r\n  <div id=\"container\">\r\n    <template is=\"dom-if\" if=\"[[!indeterminate]]\">\r\n      <div id=\"indicator\" style$=\"width: {{percentage}}%;\"></div>\r\n    </template>\r\n    <template is=\"dom-if\" if=\"[[indeterminate]]\">\r\n      <div id=\"indicator\" class=\"indeterminate\"></div>\r\n    </template>\r\n  </div>`;\n\r\n//# sourceMappingURL=avl-upload-progress.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-upload-progress.html';\nclass ProgressBarImpl extends PolymerElement {\n    static get is() { return 'avl-upload-progress'; }\n    static get properties() {\n        return {\n            percentage: {\n                type: Number\n            },\n            indeterminate: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true\n            }\n        };\n    }\n    static get template() {\n        return template;\n    }\n}\ncustomElements.define(ProgressBarImpl.is, ProgressBarImpl);\n\n//# sourceMappingURL=avl-upload-progress.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n:host {\r\n  --avl-icon-custom-color: var(--avl-upload-drop-zone-icon-color, var(--avl-icon-default-color));\r\n\r\n  --avl-upload-file-uploaded-color: var(--avl-link-color);\r\n  --avl-upload-file-label-hover-color: var(--avl-link-hover-color);\r\n  --avl-upload-file-error-message-color: var(--avl-error-color);\r\n  --avl-upload-file-fail-color: var(--avl-foreground-disabled-color);\r\n  --avl-upload-file-name-color: var(--avl-foreground-medium-color);\r\n  --avl-upload-file-hover-color: var(--avl-ink-default-hover-color);\r\n  --avl-upload-file-focus-color: var(--avl-ink-default-focus-color);\r\n  \r\n  --avl-upload-icons-color: var(--avl-icon-color);\r\n\r\n  --avl-upload-progress-bar-color: var(--avl-progress-25-color);\r\n  --avl-upload-progress-bar-indicator-color: var(--avl-progress-color);\r\n\r\n  --avl-upload-drop-zone-border-color: var(--avl-divider-color);\r\n  --avl-upload-drop-zone-active-border-color: var(--avl-border-color);\r\n\r\n  --avl-upload-drop-zone-hover-background-color: var(--avl-ink-default-hover-color);\r\n  --avl-upload-drop-zone-hover-border-color: var(--avl-border-color);\r\n  --avl-upload-drop-zone-focus-background-color: var(--avl-ink-default-focus-color);\r\n\r\n  --avl-upload-drop-zone-disabled-background-color: var(--avl-background-color);\r\n  --avl-upload-drop-zone-disabled-border-color: var(--avl-ink-default-hover-color);\r\n  --avl-upload-drop-zone-disabled-text-color: var(--avl-foreground-disabled-color);\r\n\r\n  --avl-upload-drop-zone-invalid-border-color: var(--avl-error-color);\r\n  --avl-upload-drop-zone-invalid-text-color: var(--avl-error-color);\r\n  --avl-upload-drop-zone-invalid-background-color: var(--avl-background-color);\r\n  \r\n  --avl-upload-drop-zone-disabled-icon-color: var(--avl-icon-disabled-color);\r\n  --avl-upload-drop-zone-pressed-color: var(--avl-ink-default-pressed-color);\r\n\r\n  width: 300px;\r\n  \r\n  font-family: var(--avl-font-family);\r\n  color: var(--avl-upload-default-text-color, var(--avl-foreground-color));\r\n  background-color: var(--avl-upload-drop-zone-background-color, var(--avl-background-color));\r\n  display: block;\r\n\r\n  max-height: 256px;\r\n  margin-top: 4px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\navl-file-view {\r\n  outline: none;\r\n  display: block;\r\n}\r\n\r\nspan{\r\n  color: var(--avl-link-color);\r\n}\r\n\r\n#uploadContainer {\r\n  font-size: 12px;\r\n  display: flex; \r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  align-items: stretch;\r\n  max-height: inherit;\r\n  height: inherit;\r\n}\r\n\r\n.file-list {\r\n  max-height: 100%;\r\n  height: 100%;\r\n  outline: none;\r\n  flex: 0 1 auto;\r\n  overflow-y: auto;\r\n}\r\n\r\n.dropzone{\r\n  outline: none;\r\n  min-height: 46px;\r\n  cursor: pointer;\r\n  padding: 8px; \r\n  position: relative;\r\n  text-align: center;\r\n  border: 1px solid;\r\n  border-color: var(--avl-upload-drop-zone-border-color);\r\n  background-color: var(--avl-upload-drop-zone-background-color);\r\n  transition-property: background-color;\r\n  transition-duration: 0.35s;\r\n  border-radius: 2px;\r\n}\r\n\r\n.dropzone:hover:not([disabled]){\r\n  background-color: var(--avl-upload-drop-zone-hover-background-color);\r\n  border-color: var(--avl-upload-drop-zone-hover-border-color);\r\n}\r\n\r\n:host([readonly]) .dropzone {\r\n  display: none;\r\n}\r\n\r\n.dropzone.focusDropzone{\r\n  background-color: var(--avl-upload-drop-zone-focus-background-color);\r\n  border-color: var(--avl-upload-drop-zone-hover-border-color);\r\n}\r\n\r\n:host([disabled]) .dropzone{\r\n  background-color: var(--avl-upload-drop-zone-disabled-background-color);\r\n  border-color: var(--avl-upload-drop-zone-disabled-border-color);\r\n  color:  var(--avl-upload-drop-zone-disabled-text-color);\r\n  cursor: default;\r\n}\r\n\r\n:host([disabled]){\r\n  --avl-upload-drop-zone-icon-color: var(--avl-upload-drop-zone-disabled-icon-color);\r\n}\r\n\r\n:host([invalid]) .dropzone{\r\n  border-color:  var(--avl-upload-drop-zone-invalid-border-color);\r\n  color: var(--avl-upload-drop-zone-invalid-text-color);\r\n  background-color: var(--avl-upload-drop-zone-invalid-background-color);\r\n}\r\n\r\n:host([invalid]){\r\n  --avl-upload-drop-zone-icon-color: var(--avl-upload-drop-zone-disabled-icon-color);\r\n}\r\n\r\n.dropzone[active]{\r\n  border-color: var(--avl-upload-drop-zone-active-border-color);\r\n}\r\n\r\n.dropzone.dragged{\r\n  background-color: var(--avl-upload-drop-zone-focus-background-color);\r\n}\r\n\r\npaper-ripple {\r\n  background-position: center;\r\n  transition: background 0.2s;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  color: var(--avl-upload-drop-zone-pressed-color);\r\n}\r\n\r\n#fileInput {\r\n  display: none;\r\n}</style>`;\n\r\n//# sourceMappingURL=avl-upload.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport { style } from './avl-upload.css';\nimport { allInitial } from '../all-initial.css';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport './avl-file-view/avl-file-view';\nimport './avl-upload-dialog/avl-upload-dialog';\nimport '../avl-overflow-menu/avl-overflow-menu';\nexport let template = html `\r\n  ${allInitial}\r\n  ${style}\r\n\r\n  <div id=\"uploadContainer\">\r\n    <div class=\"header\">\r\n      [[label]]\r\n    </div>\r\n    \r\n    <div class=\"file-list\" tabindex=\"0\" on-focus=\"fileListFocus\" on-mousedown=\"fileListMouseDown\">\r\n      <template is=\"dom-repeat\" items=\"{{files}}\">\r\n        <avl-file-view class=\"file-view\" tabindex=\"-1\" service=\"[[uploadService]]\" accept=\"[[accept]]\"\r\n                        target=\"[[target]]\" file=\"{{item}}\" additional-menu-items=\"[[additionalMenuItems]]\"\r\n                        indeterminate-progress=\"[[indeterminateProgress]]\"\r\n                        fail-error-message=\"[[failErrorMessage]]\"\r\n                        abort-error-message=\"[[abortErrorMessage]]\"\r\n                        retry-menu-item=\"[[retryMenuItem]]\"\r\n                        remove-menu-item=\"[[removeMenuItem]]\"\r\n                        download-menu-item=\"[[downloadMenuItem]]\"\r\n                        on-upload-start=\"redispatchFileEvent\"\r\n                        on-upload-fail=\"redispatchFileEvent\"\r\n                        on-upload-complete=\"redispatchFileEvent\"\r\n                        on-upload-abort=\"redispatchFileEvent\"\r\n                        on-menu-item-clicked=\"redispatchFileEvent\"\r\n                        on-file-rejected=\"redispatchFileEvent\"\r\n                        on-file-status-changed=\"onFileStatusChange\"\r\n                        disabled=\"[[disabled]]\"\r\n                        on-focus=\"focusedIn\" \r\n                        on-focusout=\"focusedOut\">\r\n        </avl-file-view>\r\n      </template>\r\n    </div>\r\n\r\n    <div id=\"dropzone\" tabindex=\"0\" class=\"dropzone\" on-click=\"browseFiles\" on-focus=\"focusedIn\" on-focusout=\"focusedOut\">\r\n      <avl-icon icon=\"icons:cloud-upload\"></avl-icon>\r\n      <template is=\"dom-if\" if=\"[[shouldShowError(invalid, errorMessage)]]\">\r\n        <div>{{errorMessage}}</div>\r\n      </template>\r\n      <template is=\"dom-if\" if=\"[[!shouldShowError(invalid, errorMessage)]]\">\r\n        <!-- property innerHTML when written as an attibute according to polymer rules (camelCase to kebab-case) is inner-h-t-m-l -->\r\n        <div inner-h-t-m-l=\"[[dragAreaMessage]]\"></div>\r\n      </template>\r\n      <template is=\"dom-if\" if=\"[[!disabled]]\">\r\n        <template is=\"dom-if\" if=\"[[!readonly]]\">\r\n          <paper-ripple initial-opacity=\"1\"></paper-ripple>\r\n        </template>\r\n      </template>\r\n    </div>\r\n    <template is=\"dom-if\" if=\"[[isErrorDialogOpen]]\">\r\n        <avl-upload-dialog on-close=\"closeErrorDialog\" error-files=\"[[errorArray]]\"></avl-upload-dialog>\r\n    </template>\r\n  </div>\r\n\r\n  <input id=\"fileInput\" type=\"file\" multiple accept=\"{{accept}}\">`;\n\r\n//# sourceMappingURL=avl-upload.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-upload.html';\nimport '../avl-localization-service/avl-localization-service.js';\nfunction isTypeAccepted(file, accept) {\n    const acceptArray = accept.split(',');\n    const filenameSegments = file.name.split('.');\n    const ext = `.${filenameSegments.slice(-1)}`;\n    const mediaType = file.type;\n    // if some mimetypes are defined with asterisk e.g. image/*\n    const mimeAll = acceptArray.filter(item => {\n        return /\\w+\\/\\*/.test(item);\n    }).map(item => item.split('/')[0]);\n    if (mimeAll.indexOf('*') === -1 &&\n        mimeAll.indexOf(mediaType.split('/')[0]) === -1 &&\n        acceptArray.indexOf(ext) === -1 &&\n        acceptArray.indexOf(mediaType) === -1) {\n        return false;\n    }\n    return true;\n}\nclass AvlUploadServiceImpl {\n    uploadFile(file, target, progressCallback, completeCallback, failCallback) {\n        const formData = new FormData();\n        formData.append('file', file.file);\n        const xhr = new XMLHttpRequest();\n        xhr.upload.addEventListener('progress', (e) => {\n            if (progressCallback) {\n                progressCallback(e);\n            }\n        });\n        xhr.open('POST', target, true);\n        xhr.addEventListener('load', (e) => {\n            if (completeCallback && xhr.status === 200) {\n                const response = JSON.parse(xhr.response);\n                if (response && response.downloadUrl) {\n                    completeCallback(response.downloadUrl);\n                }\n                else {\n                    completeCallback();\n                }\n            }\n            else if (failCallback) {\n                failCallback({\n                    status: xhr.status,\n                    response: xhr.response\n                });\n            }\n        });\n        xhr.addEventListener('error', (e) => {\n            if (failCallback) {\n                failCallback({\n                    status: xhr.status,\n                    response: xhr.response\n                });\n            }\n        });\n        xhr.send(formData);\n        return xhr.abort.bind(xhr);\n    }\n    downloadFile(url) {\n        return new Promise((resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.responseType = 'blob';\n            xhr.addEventListener('load', (e) => {\n                if (xhr.status === 200 && xhr.response instanceof Blob) {\n                    resolve(xhr.response);\n                }\n                else {\n                    reject(xhr.statusText);\n                }\n            });\n            xhr.addEventListener('error', (err) => {\n                reject(err);\n            });\n            xhr.send();\n        });\n    }\n}\nexport class AvlFileImpl {\n    constructor(file) {\n        this.file = file;\n        this.loaded = 0;\n        this.status = 'notStarted';\n        this.name = file.name;\n        this.type = file.type;\n        this.size = file.size;\n    }\n}\nclass AvlUploadImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.mouseEvent = false;\n        this.isErrorDialogOpen = false;\n        this.errorArray = [];\n        this.failErrorMessage = 'Upload is unsuccessful.';\n        this.abortErrorMessage = 'Upload aborted.';\n        this.dragAreaMessage = 'Drag a file to attach, or <span>browse</span>';\n        this.retryMenuItemLabel = 'Retry';\n        this.removeMenuItemLabel = 'Remove';\n        this.downloadMenuItemLabel = 'Download';\n        this.uploadService = new AvlUploadServiceImpl;\n    }\n    static get is() { return 'avl-upload'; }\n    static get properties() {\n        return {\n            focused: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true\n            },\n            disabled: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n                observer: 'resetMenuItems'\n            },\n            accept: {\n                type: String\n            },\n            target: {\n                type: String\n            },\n            label: {\n                type: String\n            },\n            additionalMenuItems: {\n                type: Object,\n            },\n            required: {\n                type: Boolean,\n                reflectToAttribute: true,\n                value: false\n            },\n            invalid: {\n                type: Boolean,\n                reflectToAttribute: true,\n                notify: true,\n                computed: 'computeInvalid(_invalid, files.*, required, hasComplete)'\n            },\n            validationCallback: {\n                type: Function\n            },\n            alreadyUploadedFiles: {\n                type: Array,\n                value: []\n            },\n            uploadService: {\n                type: Object,\n            },\n            errorMessage: {\n                type: String,\n            },\n            files: {\n                type: Array,\n            },\n            readonly: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n                observer: 'resetMenuItems'\n            }\n        };\n    }\n    static get observers() {\n        return [\n            'filesListChanged(files)',\n        ];\n    }\n    static get template() {\n        return template;\n    }\n    async translateLabels() {\n        if (!AvlLocalizationService || !AvlLocalizationService.translationService)\n            return;\n        let translationService = AvlLocalizationService.translationService;\n        this.failErrorMessage = await translationService.translate('VizBox.AvlUpload.UploadIsUnsuccessful');\n        this.abortErrorMessage = await translationService.translate('VizBox.AvlUpload.UploadAborted');\n        let browseLabel = await translationService.translate('VizBox.AvlUpload.Browse');\n        this.dragAreaMessage = await translationService.translate('VizBox.AvlUpload.DragAreaMessage', { browse: `<span>${browseLabel}</span>` });\n        this.retryMenuItemLabel = await translationService.translate('VizBox.AvlUpload.Retry');\n        this.removeMenuItemLabel = await translationService.translate('VizBox.AvlUpload.Remove');\n        this.downloadMenuItemLabel = await translationService.translate('VizBox.AvlUpload.Download');\n        this.resetMenuItems();\n    }\n    computeInvalid(_invalid, fileChange, required, hasComplete) {\n        if (_invalid != null) {\n            return _invalid;\n        }\n        if (required === false && !this.validationCallback) {\n            return false;\n        }\n        const files = fileChange.value;\n        const doValidate = fileChange.path === 'files' && files != null;\n        if (!doValidate)\n            return this.invalid;\n        if (doValidate) {\n            if (this.validationCallback && files) {\n                return !this.validationCallback(files);\n            }\n            if (required === true && (files == null || files.length === 0 || (files.length > 0 && !hasComplete))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        return false;\n    }\n    hasCompletedFile() {\n        return this.files.find(f => f.status === 'complete') != null;\n    }\n    filesListChanged() {\n        this.dispatchEvent(new CustomEvent('files-changed', { detail: { value: this.files } }));\n    }\n    onFileStatusChange(event) {\n        this.set('hasComplete', this.hasCompletedFile());\n        if (this.validationCallback) {\n            this.set('_invalid', !this.validationCallback(this.files));\n        }\n    }\n    resetMenuItems() {\n        if (this.disabled) {\n            this.setAttribute(\"tabindex\", \"-1\");\n        }\n        else {\n            this.removeAttribute(\"tabindex\");\n        }\n        if (!this.disabled && !this.readonly) {\n            this.retryMenuItem = { label: this.retryMenuItemLabel };\n            this.removeMenuItem = { label: this.removeMenuItemLabel };\n            this.downloadMenuItem = { label: this.downloadMenuItemLabel };\n        }\n        else {\n            this.retryMenuItem = { label: this.retryMenuItemLabel };\n            this.removeMenuItem = undefined;\n            this.downloadMenuItem = { label: this.downloadMenuItemLabel };\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (AvlLocalizationService && AvlLocalizationService.translationService) {\n            this.translateLabels();\n        }\n        this.files = this.files || [];\n        this.resetMenuItems();\n        this.$.fileInput.addEventListener('change', (e) => {\n            this.errorArray = [];\n            const fileInput = this.$.fileInput;\n            const filesToUpload = Array.from(fileInput.files).map(file => new AvlFileImpl(file));\n            this.handleAddFiles(filesToUpload);\n            fileInput.value = '';\n        });\n        this.addEventListener('menu-item-clicked', (e) => {\n            if (e.detail.item === this.removeMenuItem) {\n                const file = e.detail.value;\n                const index = this.files.indexOf(file);\n                if (index !== -1) {\n                    this.files = [...this.files.slice(0, index), ...this.files.slice(index + 1)];\n                    this.$.fileInput.value = null;\n                    this.set('hasComplete', this.hasCompletedFile());\n                }\n            }\n        });\n        this.fileListElement = this.shadowRoot.querySelector('.file-list');\n        this.fileListElement.addEventListener('keydown', (event) => {\n            if (event.key === 'ArrowUp' || event.key === 'Up' || event.key === 'ArrowDown' || event.key === 'Down') {\n                event.preventDefault();\n                let overflowMenu;\n                (this.shadowRoot.querySelectorAll('avl-file-view')).forEach((item) => {\n                    if (item === document.activeElement.shadowRoot.activeElement) {\n                        overflowMenu = item.shadowRoot.querySelector('avl-overflow-menu');\n                    }\n                });\n                if (overflowMenu) {\n                    if (!overflowMenu.open) {\n                        const fileViewFiles = this.shadowRoot.querySelectorAll('avl-file-view');\n                        const allItemElements = [];\n                        let currentItemIndex;\n                        fileViewFiles.forEach((userItem, index) => {\n                            if (userItem.focused == true) {\n                                currentItemIndex = index;\n                            }\n                            allItemElements.push(userItem);\n                        });\n                        if (!currentItemIndex) {\n                            currentItemIndex = 0;\n                        }\n                        const itemIndexToMoveTo = this.navigate(currentItemIndex, event.key);\n                        if (itemIndexToMoveTo !== undefined) {\n                            allItemElements[itemIndexToMoveTo].focus();\n                            event.preventDefault();\n                        }\n                    }\n                }\n            }\n        });\n        this.dropArea = this.shadowRoot.querySelector('#dropzone');\n        this.dropArea.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter' || e.key === ' ')\n                this.browseFiles();\n        });\n        this.dropArea.addEventListener('dragenter', this.preventDefaults, false);\n        this.dropArea.addEventListener('dragover', (e) => {\n            this.preventDefaults(e);\n            this.dropArea.classList.add(\"dragged\");\n        }, false);\n        this.dropArea.addEventListener('dragleave', (e) => {\n            this.preventDefaults(e);\n            this.dropArea.classList.remove(\"dragged\");\n        }, false);\n        this.dropArea.addEventListener('drop', (e) => {\n            this.preventDefaults(e);\n            this.dropArea.classList.remove(\"dragged\");\n        }, false);\n        if (!this.disabled) {\n            this.dropArea.addEventListener('drop', this.handleDrop.bind(this), false);\n        }\n    }\n    fileNameVerification(file) {\n        var i = 1;\n        let nameArray = file.name.split(/\\.(?=[^\\.]+$)/);\n        while (this.files.find(f => f.name == file.name)) {\n            file.name = nameArray[0] + '-(' + i + ').' + nameArray[1];\n            i++;\n        }\n    }\n    handleAddFiles(files) {\n        let filesToUpload = [];\n        for (const file of files) {\n            this.fileNameVerification(file);\n            if (this.accept && !isTypeAccepted(file, this.accept)) {\n                setTimeout(_ => this.dispatchEvent(new CustomEvent('file-rejected', { detail: { value: file } })));\n                this.errorArray.push(file);\n            }\n            else {\n                filesToUpload = [...filesToUpload, file];\n            }\n        }\n        if (this.errorArray.length > 0) {\n            this.openErrorDialog();\n        }\n        if (filesToUpload.length > 0) {\n            this.files = [...this.files, ...filesToUpload];\n        }\n    }\n    handleDrop(e) {\n        this.errorArray = [];\n        let dt = e.dataTransfer;\n        const draggedFiles = dt.files;\n        const filesToUpload = Array.from(draggedFiles).map(file => new AvlFileImpl(file));\n        this.handleAddFiles(filesToUpload);\n    }\n    focusedIn(event) {\n        if (event.target.id === \"dropzone\") {\n            event.target.classList.add(\"focusDropzone\");\n        }\n        if (!this.disabled) {\n            this.focused = true;\n        }\n    }\n    focusedOut(event) {\n        if (event.target.id === \"dropzone\") {\n            event.target.classList.remove(\"focusDropzone\");\n        }\n        this.focused = false;\n    }\n    fileListFocus() {\n        const firstFileView = this.shadowRoot.querySelector('.file-view');\n        if (firstFileView && !this.disabled && !this.mouseEvent) {\n            firstFileView.focus();\n        }\n        this.mouseEvent = false;\n    }\n    fileListMouseDown() {\n        this.mouseEvent = true;\n    }\n    preventDefaults(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n    browseFiles() {\n        if (!this.disabled && !this.readonly) {\n            this.$.fileInput.click();\n        }\n    }\n    redispatchFileEvent(e) {\n        this.dispatchEvent(new CustomEvent(e.type, { detail: e.detail }));\n    }\n    shouldShowError(invalid, errorMessage) {\n        return invalid === true && errorMessage != null;\n    }\n    openErrorDialog() {\n        this.isErrorDialogOpen = true;\n    }\n    closeErrorDialog() {\n        this.isErrorDialogOpen = false;\n    }\n    navigate(currentItemIndex, keyPressed) {\n        switch (keyPressed) {\n            case 'ArrowUp':\n            case 'Up':\n                if (currentItemIndex === 0) {\n                    return undefined;\n                }\n                return currentItemIndex - 1;\n            case 'ArrowDown':\n            case 'Down':\n                if (currentItemIndex === this.files.length - 1) {\n                    return undefined;\n                }\n                return currentItemIndex + 1;\n            default:\n                return undefined;\n        }\n    }\n}\ncustomElements.define(AvlUploadImpl.is, AvlUploadImpl);\n\n//# sourceMappingURL=avl-upload.js.map\n","import { globalFilterKey } from '@avl-controls/interfaces';\n/** Returns undefined if the path doesn't exist. */\nexport const getValueFromPath = (row, path) => {\n    let current = row;\n    for (const part of path.split('.')) {\n        if (typeof current !== 'object' || current === null) {\n            return undefined;\n        }\n        current = current[part];\n    }\n    return current;\n};\nexport const getParentObjectFromPath = (row, path) => {\n    let current = row;\n    const parts = path.split('.');\n    for (let i = 0; i < parts.length - 1; ++i) {\n        if (current[parts[i]] === undefined || current[parts[i]] === null) {\n            return current;\n        }\n        else {\n            current = current[parts[i]];\n        }\n    }\n    return current;\n};\n/**\n * Creates a [[DataProvider]] from an array.\n * @param data - Array with data\n */\nconst createArrayDataProvider = (data) => {\n    return (params) => new Promise((resolve, reject) => {\n        let tmpData;\n        if (params.parentItem) {\n            tmpData = params.parentItem.children;\n        }\n        else {\n            tmpData = data === undefined ? [] : data.slice();\n        }\n        updateHasChildren(tmpData);\n        updateDescendantsMatchFilter(tmpData, params.filters, params.globalFilterFields);\n        if (filtersExist(params.filters)) {\n            // If any of the ancestors match filter, then don't filter the children\n            if (!params.parentItem || !ancestorsMatchFilter(params.parentItem, params.filters, params.globalFilterFields, data)) {\n                tmpData = tmpData.filter((item) => item.descendantsMatchFilter || matchesFilter(item, params.filters, params.globalFilterFields));\n            }\n        }\n        // Sort the items\n        if (params.sortOrders.length) {\n            for (const order of params.sortOrders.reverse()) {\n                tmpData.sort((a, b) => {\n                    const toLowercase = (value) => typeof value === 'string' ? value.toLowerCase() : value;\n                    const value1 = toLowercase(getValueFromPath(a, order.path));\n                    const value2 = toLowercase(getValueFromPath(b, order.path));\n                    let ret;\n                    if (value1 === null || value1 === undefined || value1 === '' || value2 === null || value2 === undefined || value2 === '') {\n                        ret = (value1 === null || value1 === undefined || value1 === '') ? 1 : -1;\n                    }\n                    else {\n                        ret = value1 >= value2 ? 1 : -1;\n                    }\n                    return order.ascending ? ret : ret * -1;\n                });\n            }\n        }\n        resolve({ rows: tmpData.slice(params.page * params.pageSize, (params.page + 1) * params.pageSize), totalRows: tmpData.length });\n    });\n};\n/** Add a hasChildren property to the rows */\nfunction updateHasChildren(data) {\n    for (const row of data) {\n        const hasChildren = rowHasChildren(row);\n        if (hasChildren || row.hasChildren !== undefined) {\n            row.hasChildren = hasChildren;\n        }\n    }\n}\nfunction updateDescendantsMatchFilter(data, filters, globalFilterFields) {\n    for (const row of data) {\n        const descMatchFilter = descendantsMatchFilter(row, filters, globalFilterFields);\n        if (descMatchFilter || row.descendantsMatchFilter !== undefined) {\n            row.descendantsMatchFilter = descMatchFilter;\n        }\n    }\n}\nconst valueOnPathMatchesFilter = (row, path, filter) => {\n    const value = getValueFromPath(row, path);\n    if (typeof value !== 'string') {\n        return false;\n    }\n    return getValueFromPath(row, path).toLowerCase().indexOf(filter) !== -1;\n};\nfunction matchesFilter(row, filters, globalFilterFields) {\n    if (!filtersExist(filters)) {\n        return true;\n    }\n    for (const [path, value] of filters) {\n        if (path === globalFilterKey) {\n            if (globalFilterFields && globalFilterFields.length > 0) {\n                const globalFilter = filters.get(globalFilterKey).toLowerCase();\n                let found = false;\n                for (const paths of globalFilterFields) {\n                    if (valueOnPathMatchesFilter(row, paths, globalFilter)) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found) {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n        else if (!valueOnPathMatchesFilter(row, path, value.toLocaleLowerCase())) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction descendantsMatchFilter(row, filters, globalFilterFields) {\n    if (!rowHasChildren(row)) {\n        return false;\n    }\n    if (!filtersExist(filters)) {\n        return false;\n    }\n    for (const child of row.children) {\n        if (matchesFilter(child, filters, globalFilterFields)) {\n            return true;\n        }\n        if (descendantsMatchFilter(child, filters, globalFilterFields)) {\n            return true;\n        }\n    }\n    return false;\n}\n/** Do any of the ancestors match the filter, including the parent */\nfunction ancestorsMatchFilter(parent, filters, globalFilterFields, data) {\n    const parentsAncestors = findAncestors(data, parent);\n    for (const ancestor of [parent, ...parentsAncestors]) {\n        if (matchesFilter(ancestor, filters, globalFilterFields)) {\n            return true;\n        }\n    }\n    return false;\n}\n/** Returns all ancestors. */\nfunction findAncestors(data, descendant) {\n    const ancestors = [];\n    // No ancestors, it's a top level item.\n    if (data.includes(descendant)) {\n        return [];\n    }\n    for (const row of data) {\n        if (isAncestorOf(row, descendant, ancestors)) {\n            return ancestors;\n        }\n    }\n    return ancestors;\n}\nfunction isAncestorOf(potentialAncestor, descendant, ancestors) {\n    if (!rowHasChildren(potentialAncestor)) {\n        return false;\n    }\n    if (potentialAncestor.children.includes(descendant)) {\n        ancestors.push(potentialAncestor);\n        return true;\n    }\n    for (const row of potentialAncestor.children) {\n        if (isAncestorOf(row, descendant, ancestors)) {\n            ancestors.push(potentialAncestor);\n            return true;\n        }\n    }\n    return false;\n}\nfunction rowHasChildren(row) {\n    return row.children instanceof Array && row.children.length > 0;\n}\nfunction filtersExist(filters) {\n    if (filters.size === 0) {\n        return false;\n    }\n    for (const value of filters.values()) {\n        if (value !== '') {\n            return true;\n        }\n    }\n    return false;\n}\nexport default createArrayDataProvider;\n\n//# sourceMappingURL=array-data-provider.js.map\n","import { html } from \"@polymer/polymer\";\nexport const style = html `<style>\r\n.clickable {\r\n    cursor: pointer;\r\n    padding: 10px;\r\n    color: var(--avl-emphasis-medium-color);\r\n}\r\n\r\n.buttonLabel{\r\n    float: left;\r\n    line-height: 24px;\r\n}\r\n\r\n.dialog{\r\n    position: absolute;\r\n    right: 0;\r\n    background-color: var(--avl-menu-background-color);\r\n    width: 360px;\r\n    height: 444px;\r\n    overflow: auto;\r\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\r\n    z-index: 1300;\r\n}\r\n\r\n.items{\r\n    display:block;\r\n}\r\n\r\navl-icon{\r\n    color: var(--avl-emphasis-medium-color);\r\n}\r\n.wrapper{\r\n    position: relative;\r\n    outline: none;\r\n}\r\n.columnDefinitions{\r\n    display:block;\r\n    position: relative;\r\n    height:273px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.title{\r\n    border-bottom: 1px solid var(--avl-divider-color);\r\n    padding: 24px 24px 0 24px;\r\n}\r\n\r\n.titleText{\r\n    color: var(--avl-item-text-color, var(--avl-emphasis-high-color));\r\n    margin: 0;\r\n    font-weight: normal;\r\n    font-size: 20px;\r\n}\r\n\r\n.headerChipsContainer {\r\n    margin: 8px 0;\r\n}\r\n\r\n.buttonContainer{\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    height: 56px;\r\n    border-top: 1px solid var(--avl-divider-color);\r\n}\r\n\r\n.header-icon {\r\n    font-size: 12px;\r\n}\r\n\r\n.header-image {\r\n    height: auto;\r\n    width: auto;\r\n    max-height: 18px;\r\n} \r\n\r\navl-list {\r\n    width: 360px;\r\n    height: 273px;\r\n}\r\n\r\n    /* Desktop */\r\n:host([desktop]) .titleText{\r\n    color: var(--avl-primary-text-color);\r\n}\r\n\r\n:host([desktop]) avl-button{\r\n    margin:10px;\r\n}\r\n\r\n:host([desktop]) avl-checkbox{\r\n    margin-left:10px;\r\n}\r\n\r\n:host([desktop]) .clickable{\r\n    color: var(--avl-primary-text-color);\r\n}\r\n\r\n:host([desktop]) .dialog{\r\n    box-shadow: initial;\r\n    border: 1px solid black;\r\n}\r\n\r\n.icon{\r\n    color:var(--avl-primary-text-color);\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n</style>`;\n\r\n//# sourceMappingURL=avl-column-selector-dialog.css.js.map\r\n","import { html } from '@polymer/polymer/polymer-element';\nimport '@avl-controls/core/dist/avl-button/avl-button';\nimport '@avl-controls/core/dist/avl-checkbox/avl-checkbox';\nimport '@avl-controls/core/dist/avl-icon/avl-icon';\nimport '@avl-controls/core/dist/avl-list/avl-list';\nimport '@avl-controls/core/dist/avl-chip-list/avl-chip-list';\nimport { style } from './avl-column-selector-dialog.css';\nexport let template = html `\r\n  ${style}\r\n<div class=\"wrapper\" id=\"avl-column-selector-dialog\" on-focus=\"focusedIn\" tabindex=\"0\">\r\n    <div class=\"clickable\" id=\"btn-open-dialog\" on-click=\"toggleOpen\">\r\n        <template is=\"dom-if\" if=\"[[allColumns]]\">\r\n        <avl-icon-button src=\"data:image/svg+xml,%3Csvg id='baseline-view_column-24px' xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath id='Pfad_922' data-name='Pfad 922' d='M11.059,25h5.882V5H11.059ZM4,25H9.882V5H4ZM18.118,5V25H24V5Z' transform='translate(-2 -3)' fill='%233ca0b9'/%3E%3Cpath id='Pfad_923' data-name='Pfad 923' d='M0,0H24V24H0Z' fill='none'/%3E%3C/svg%3E\" id=\"icon-open-dialog\"></avl-icon-button>\r\n        </template>\r\n        <template is=\"dom-if\" if=\"[[!allColumns]]\">\r\n        <avl-icon-button src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cg id='Gruppe_1688' data-name='Gruppe 1688' transform='translate(-438 -55)'%3E%3Cg id='Columns' transform='translate(438 55)'%3E%3Cpath id='Pfad_924' data-name='Pfad 924' d='M21,22H17a1,1,0,0,1-1-1V3a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1V21A1,1,0,0,1,21,22ZM20,4H18V20h2Z' fill='%233ca0b9'/%3E%3Cpath id='Pfad_925' data-name='Pfad 925' d='M14,22H10a1,1,0,0,1-1-1V3a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1V21A1,1,0,0,1,14,22ZM13,4H11V20h2Z' fill='%233ca0b9'/%3E%3Cpath id='Pfad_926' data-name='Pfad 926' d='M7,22H3a1,1,0,0,1-1-1V3A1,1,0,0,1,3,2H7A1,1,0,0,1,8,3V21A1,1,0,0,1,7,22ZM6,4H4V20H6Z' fill='%233ca0b9'/%3E%3C/g%3E%3Crect id='Rechteck_1305' data-name='Rechteck 1305' width='24' height='24' transform='translate(438 55)' fill='none'/%3E%3C/g%3E%3C/svg%3E\" id=\"icon-open-dialog\"></avl-icon-button>\r\n        </template>\r\n    </div>\r\n    <template is=\"dom-if\" if=\"[[opened]]\">\r\n        <div class=\"dialog\" style=\"bottom: [[dialogBottom]]\">\r\n            <div class=\"title\">\r\n                <h2 class=\"titleText\">\r\n                    [[columnsLabel]]\r\n                </h2>\r\n                <div class=\"headerChipsContainer\">\r\n                    <avl-chip-list single-select id=\"selectedIndexChip\" items=\"{{selectItems}}\" selected-index={{selected}} on-selected-index-changed=\"selectedValueChanged\"></avl-chip-list>\r\n                </div>\r\n            </div>\r\n            <div class=\"columnDefinitions\" style=\"height: [[columnHeight]]\">\r\n                <template restamp is=\"dom-if\" if=\"[[isLists]]\">\r\n                    <avl-list class=\"avl-list-datatable\" multi-select id=\"multiSelection\" selected-indexes=\"{{selectedIndexes}}\" rows=\"{{columnItems}}\" on-row-reordered=\"rowReordered\" drag-and-drop style=\"height: [[columnHeight]]\"></avl-list>\r\n                </template>\r\n            </div>\r\n            <template is=\"dom-if\" if=\"[[isDialogFooter]]\">\r\n                <div class=\"buttonContainer\">\r\n                    <avl-button class=\"cancel-button\" id=\"btn-reset-dialog\" on-click=\"resetToDefault\">[[resetButtonLabel]]</avl-button>\r\n                </div>\r\n            </template>\r\n        </div>\r\n    </template>\r\n</div>\r\n`;\n\r\n//# sourceMappingURL=avl-column-selector-dialog.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport { template } from './avl-column-selector-dialog.html';\nexport var chipsOptions;\n(function (chipsOptions) {\n    chipsOptions[chipsOptions[\"Selected\"] = 0] = \"Selected\";\n    chipsOptions[chipsOptions[\"All\"] = 1] = \"All\";\n})(chipsOptions || (chipsOptions = {}));\nclass AvlColumnSelectorDialogImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.opened = false;\n        this.columnItems = [];\n        this.allColumns = true;\n        this.selectItems = [\n            {\n                label: 'Selected',\n                value: 0\n            },\n            {\n                label: 'All',\n                value: 1\n            }\n        ];\n        this.selected = 1;\n        this.reordered = false;\n        this.firstOpen = false;\n        this.isDialogFooter = false;\n        this.leafColumnsFlag = false;\n        this.columnHeight = '329px';\n        this.dialogBottom = '-444px';\n        this.isLists = true;\n        this.isSelectClick = false;\n        this.isAllSelectClick = false;\n        this.openDialog = false;\n    }\n    static get is() { return 'avl-column-selector-dialog'; }\n    static get properties() {\n        return {\n            leafColumns: {\n                type: Array,\n                observer: 'leafColumnsObserverChanged'\n            },\n            columns: {\n                type: Array\n            },\n            selectItems: {\n                type: Array\n            },\n            columnItems: {\n                type: Array\n            },\n            selectedIndexes: {\n                type: Array,\n                observer: 'selectedIndexesChanged',\n                notify: true,\n                value: []\n            },\n            focused: {\n                type: Boolean,\n                reflectToAttribute: true\n            },\n            label: {\n                type: String\n            },\n            selected: {\n                type: Number\n            },\n            desktop: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true\n            },\n            columnsLabel: {\n                type: String\n            },\n            applyButtonLabel: {\n                type: String\n            },\n            resetButtonLabel: {\n                type: String\n            },\n            dialogFooter: {\n                type: String,\n                observer: 'dialogFooterChanged',\n            }\n        };\n    }\n    static get template() {\n        return template;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        document.addEventListener('click', (e) => {\n            // e.preventDefault();\n            if ((this.shadowRoot.activeElement && this.shadowRoot.activeElement.id !== 'icon-open-dialog'\n                && this.shadowRoot.activeElement.id !== 'selectedIndexChip'\n                && this.shadowRoot.activeElement.id !== 'multiSelection'\n                && this.shadowRoot.activeElement.id !== 'avl-column-selector-dialog'\n                && this.shadowRoot.activeElement.id !== 'btn-reset-dialog'\n                && this.shadowRoot.activeElement.id !== 'btn-open-dialog')\n                || !this.shadowRoot.activeElement) {\n                this.focused = false;\n                this.opened = false;\n                this.firstOpen = false;\n            }\n        });\n    }\n    disconnectedCallback() {\n        super['disconnectedCallback']();\n    }\n    leafColumnsObserverChanged() {\n        var interval = setInterval(() => {\n            if (this.leafColumns.length > 0) {\n                clearInterval(interval);\n                if (this.leafColumns.find(i => i.hidden == true)) {\n                    this.allColumns = false;\n                }\n            }\n        }, 100);\n    }\n    leafColumnsChanged() {\n        if (this.leafColumns.length > 0 && !this.leafColumnsFlag) {\n            this.defaultLeafColumns = [];\n            this.leafColumns.forEach(item => {\n                this.defaultLeafColumns.push(JSON.parse(JSON.stringify(item)));\n            });\n            this.leafColumnsFlag = true;\n        }\n        // this.dispatchEvent(new CustomEvent('selected-columns-changed'));\n        // this.opened = false;\n    }\n    resetToDefault() {\n        const resetPromise = new Promise((resolve, reject) => {\n            this.isLists = false;\n            this.reordered = true;\n            let columns = this.defaultLeafColumns.map(item => {\n                return {\n                    label: item.caption,\n                    id: item.valueField,\n                    icon: item.headerIcon,\n                    image: item.headerImage,\n                    disabled: item.disabled ? item.disabled : false\n                };\n            });\n            if (JSON.stringify(this.columnItems) != JSON.stringify(columns)) {\n                this.columnItems = columns;\n            }\n            this.leafColumns = [];\n            this.defaultLeafColumns.forEach(item => {\n                this.leafColumns.push(JSON.parse(JSON.stringify(item)));\n            });\n            this.dispatchEvent(new CustomEvent('selected-columns-changed', {\n                detail: this.leafColumns\n            }));\n            if (this.defaultLeafColumns.length !== this.selectedIndexes.length) {\n                var indexes = [];\n                this.defaultLeafColumns.forEach((item, index) => {\n                    if (!item.hidden) {\n                        indexes.push(index);\n                    }\n                });\n                this.selectedIndexes = indexes;\n            }\n            resolve('true');\n        });\n        resetPromise.then(res => {\n            this.isLists = true;\n            this.reordered = false;\n            this.allColumns = true;\n            this.selected = chipsOptions.All;\n        });\n    }\n    focusedIn(event) {\n        this.focused = true;\n    }\n    toggleOpen(e) {\n        console.log('Toogle Open: ' + this.opened);\n        const togglePromise = new Promise((resolve, reject) => {\n            if (e.y >= 450 && ((e.screenY - e.y) < 450)) {\n                this.dialogBottom = '56px';\n            }\n            else {\n                this.dialogBottom = '-444px';\n            }\n            this.leafColumnsChanged();\n            this.focused = true;\n            this.opened = !this.opened;\n            this.firstOpen = true;\n            if (this.opened && this.leafColumns) {\n                this.selected = chipsOptions.Selected;\n                this.selectedIndexes = [];\n                this.columnItems = [];\n                this.leafColumns.forEach((item, index) => {\n                    if (!item.hidden) {\n                        this.columnItems.push({\n                            label: item.caption,\n                            id: item.valueField,\n                            icon: item.headerIcon,\n                            image: item.headerImage,\n                            disabled: item.disabled ? item.disabled : false,\n                            hidden: item.hidden ? item.hidden : false\n                        });\n                    }\n                });\n                this.columnItems.forEach((item, index) => {\n                    if (!item.hidden) {\n                        this.selectedIndexes.push(index);\n                    }\n                });\n                this.isLists = false;\n                resolve('true');\n            }\n        });\n        togglePromise.then(res => {\n            setTimeout(() => {\n                this.isLists = true;\n                this.firstOpen = false;\n            }, 0);\n        });\n    }\n    selectedIndexesChanged() {\n        if (this.selectedIndexes.length == 0 && !this.reordered && !this.firstOpen && !this.isSelectClick) {\n            this.leafColumns.map(item => {\n                item.hidden = true;\n            });\n            this.dispatchEvent(new CustomEvent('selected-columns-changed', {\n                detail: this.leafColumns\n            }));\n        }\n        else {\n            this.isSelectClick = false;\n        }\n        if (this.selectedIndexes.length > 0 && !this.reordered && !this.firstOpen) {\n            this.leafColumns.map(item => {\n                item.hidden = true;\n            });\n            for (var i = 0; i < this.selectedIndexes.length; i++) {\n                let index = this.leafColumns.findIndex(item => item.valueField == this.columnItems[this.selectedIndexes[i]].id);\n                this.leafColumns[index].hidden = false;\n            }\n            if (this.leafColumns.length !== this.selectedIndexes.length) {\n                this.allColumns = false;\n            }\n            else {\n                this.allColumns = true;\n            }\n            if (!this.isAllSelectClick) {\n                this.isAllSelectClick = false;\n                this.dispatchEvent(new CustomEvent('selected-columns-changed', {\n                    detail: this.leafColumns\n                }));\n            }\n            else {\n                this.isAllSelectClick = false;\n            }\n        }\n        else {\n            this.reordered = false;\n            this.isAllSelectClick = false;\n            if (this.selectedIndexes.length > 0) {\n                this.firstOpen = false;\n            }\n        }\n    }\n    rowReordered() {\n        this.reordered = true;\n        let reorderedArray = [];\n        this.columnItems.forEach(item => {\n            reorderedArray.push(this.leafColumns.find(c => c.valueField === item.id));\n        });\n        // this.leafColumns = reorderedArray;\n        this.dispatchEvent(new CustomEvent('selected-columns-changed', {\n            detail: reorderedArray\n        }));\n    }\n    selectedValueChanged(e) {\n        const selectedValuePromise = new Promise((resolve, reject) => {\n            this.isSelectClick = true;\n            this.firstOpen = false;\n            this.reordered = false;\n            switch (e.detail.value) {\n                case chipsOptions.Selected: {\n                    this.leafColumns.map(item => {\n                        item.hidden = true;\n                    });\n                    for (var i = 0; i < this.selectedIndexes.length; i++) {\n                        this.leafColumns[this.selectedIndexes[i]].hidden = false;\n                    }\n                    this.columnItems = [];\n                    this.selectedIndexes = [];\n                    this.leafColumns.forEach((item, index) => {\n                        if (!item.hidden) {\n                            this.columnItems.push({\n                                label: item.caption,\n                                id: item.valueField,\n                                icon: item.headerIcon,\n                                image: item.headerImage,\n                                disabled: item.disabled ? item.disabled : false\n                            });\n                        }\n                    });\n                    this.columnItems.forEach((item, index) => {\n                        this.selectedIndexes.push(index);\n                    });\n                    this.reordered = true;\n                    this.isLists = false;\n                    resolve('true');\n                    break;\n                }\n                case chipsOptions.All: {\n                    this.isAllSelectClick = true;\n                    this.selectedIndexes = [];\n                    this.columnItems = [];\n                    this.defaultLeafColumns.forEach(item => {\n                        if (!this.leafColumns.find(i => i.valueField === item.valueField)) {\n                            item.hidden = true;\n                            this.leafColumns.push(JSON.parse(JSON.stringify(item)));\n                        }\n                    });\n                    this.leafColumns.forEach((item, index) => {\n                        this.columnItems.push({\n                            label: item.caption,\n                            id: item.valueField,\n                            icon: item.headerIcon,\n                            image: item.headerImage,\n                            disabled: item.disabled ? item.disabled : false\n                        });\n                        if (!item.hidden) {\n                            this.selectedIndexes.push(index);\n                        }\n                    });\n                    this.isLists = false;\n                    resolve('true');\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        });\n        selectedValuePromise.then(res => {\n            setTimeout(() => {\n                this.isLists = true;\n                this.firstOpen = false;\n                this.reordered = false;\n            }, 0);\n        });\n    }\n    dialogFooterChanged() {\n        this.isDialogFooter = JSON.parse(this.dialogFooter);\n        if (this.isDialogFooter) {\n            this.columnHeight = '273px';\n        }\n    }\n}\ncustomElements.define(AvlColumnSelectorDialogImpl.is, AvlColumnSelectorDialogImpl);\n\n//# sourceMappingURL=avl-column-selector-dialog.js.map\n","export const MAX_PAGES_PER_SECTION = 7;\nexport const MIN_PAGES_PER_SECTION = 2;\n// Default properties values\nexport const DEFAULT_PAGE_SIZE = 10;\nexport const DEFAULT_PAGE_SIZE_LABEL = 'Choose page size';\nexport const DEFAULT_PAGE_SIZE_OPTIONS = [\n    { value: 10, label: 'Show 10 per page' },\n    { value: 50, label: 'Show 50 per page' },\n    { value: Number.MAX_SAFE_INTEGER, label: 'Show all' }\n];\n\n//# sourceMappingURL=avl-datatable.consts.js.map\n","import { html } from '@polymer/polymer';\nexport const style = html `<style>\r\n:host {\r\n  --avl-datatable-row-background-color: var(--avl-background-color);\r\n  --avl-datatable-header-icon-color: var(--avl-link-color);\r\n\r\n  --avl-datatable-column-header-color: var(--avl-link-color);\r\n  --avl-datatable-content-color: var(--avl-foreground-color);\r\n  --avl-datatable-row-hover-color: var(--avl-background-hover-color);\r\n  --avl-datatable-row-selection-color: var(--avl-background-selected-color);\r\n  --avl-datatable-divider-color: var(--avl-divider-color);\r\n  --avl-datatable-link-color: var(--avl-link-color);\r\n  --avl-datatable-link-hover-color: var(--avl-link-hover-color);\r\n\r\n  font-family: var(--avl-font-family);\r\n  display: block;\r\n  width: 100%;\r\n  height:420px;\r\n  font-size: 14px;\r\n}\r\n\r\nvaadin-grid {\r\n  border: 0;\r\n  background: var(--avl-datatable-row-background-color);\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\nvaadin-grid vaadin-grid-cell-content {\r\n  padding-right: 0px;\r\n  margin-right: 24px;\r\n}\r\n\r\n:host .cell-content {\r\n  font-size: 14px;\r\n}\r\n\r\n:host .header-content {\r\n  user-select: text;\r\n  -webkit-user-select: text;\r\n}\r\n\r\n.iconText{\r\n  color: var(--avl-datatable-content-color);\r\n}\r\n\r\n.textColumn{\r\n  color: var(--avl-datatable-content-color);\r\n}\r\n.dateColumn{\r\n  color: var(--avl-datatable-content-color);\r\n}\r\n.numberColumn{\r\n  color: var(--avl-datatable-content-color);\r\n}\r\n\r\n.header-image {\r\n  height: auto;\r\n  width: auto;\r\n  max-height: 18px;\r\n}\r\n\r\n.header-icon {\r\n  font-size: 14px;\r\n  --avl-icon-custom-color:var(--avl-datatable-header-icon-color);\r\n}\r\n\r\n/* Pagination */\r\n#pages {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: 20px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: var(--avl-secondary-color, #3ca0b9);\r\n}\r\n\r\n#pages > button {\r\n  color: var(--avl-secondary-color, #3ca0b9);\r\n  user-select: none;\r\n  padding: 2px 3px 2px;\r\n  margin: 0 5px;\r\n  border-radius: 10%;\r\n  border: 0;\r\n  background: transparent;\r\n  font: inherit;\r\n  outline: none;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n}\r\n\r\n#pages > button:not([disabled]):hover,\r\n#pages > button:not([disabled]):focus {\r\n  color: var(--avl-secondary-color, #3ca0b9);;\r\n  background-color: #f3f3f3;\r\n}\r\n\r\n#pages > button[selected],\r\n#pages > button[selected]:focus {\r\n  font-weight: bold;\r\n  color: var(--avl-menu-background-color, #FFFFFF);\r\n  background-color: var(--avl-secondary-color, #3ca0b9);\r\n}\r\n\r\n#pages > button[disabled] {\r\n  color: var(--avl-foreground-disabled-color);\r\n  cursor: default;\r\n}\r\n\r\n/* Space for the pagination buttons */\r\n#grid.with-pagination {\r\n  height: calc(100% - 65px);\r\n}\r\n\r\n.elipsis {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\navl-dropdown{\r\n  margin-top: 3px;\r\n}\r\n\r\navl-overflow-menu {\r\n  display: inline;\r\n}\r\n\r\n/* Global filter */\r\n.globalFilter {\r\n  margin-bottom: 10px;\r\n  width: auto;\r\n  flex-grow: 1;\r\n}\r\n\r\n#grid.with-global-filter, #grid.with-column-selector {\r\n  height: calc(100% - 72px);\r\n}\r\n\r\n#grid.with-pagination.with-global-filter, #grid.with-pagination.with-column-selector {\r\n  height: calc(100% - 170px);\r\n}\r\n\r\n/* Global filter and column selector */\r\n:host([global-filter]) .top-flex-container, :host([column-selector]) .top-flex-container {\r\n  height: 72px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\navl-column-selector-dialog {\r\n  flex-grow: 0;\r\n}\r\n\r\navl-icon{\r\n  width: 18px;\r\n  height: 18px;\r\n}\r\n.iconText{\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  height: 48px;\r\n}\r\n\r\n.iconText avl-icon{\r\n  padding-right: 16px;\r\n  width: 24px;\r\n  height: 24px;\r\n  flex-shrink: 0;\r\n}\r\n.iconText p{\r\n  font-size: 14px;\r\n}\r\n\r\n.numberColumn{\r\n  text-align: right;\r\n}\r\n\r\n.textColumn{\r\n  text-align: left;\r\n}\r\n\r\navl-checkbox {\r\n  margin-right: 0px;\r\n}\r\n\r\n.header-icon-content,\r\n.flex-center{\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\na {\r\n  color: var(--avl-datatable-link-color);\r\n  text-decoration: none;\r\n}\r\n\r\na:hover:not(:active) {\r\n  color: var(--avl-datatable-link-hover-color);\r\n}\r\n\r\n.table-checkbox {\r\n  margin: 0;\r\n  padding: 0;\r\n  text-align: center;\r\n}\r\n\r\n.table-header-checkbox {\r\n  margin: 0;\r\n  padding: 0;\r\n  text-align: center;\r\n}\r\n</style>`;\n\r\n//# sourceMappingURL=avl-datatable.css.js.map\r\n","import '@vaadin/vaadin-grid/src/all-imports';\nimport { html } from '@polymer/polymer/polymer-element';\nimport { allInitial } from '@avl-controls/core/dist/all-initial.css';\nimport '@avl-controls/core/dist/avl-checkbox/avl-checkbox';\nimport '@avl-controls/core/dist/avl-textfield/avl-textfield';\nimport '@avl-controls/core/dist/avl-button/avl-button';\nimport '@avl-controls/core/dist/avl-icon-button/avl-icon-button';\nimport '@avl-controls/core/dist/avl-dropdown/avl-dropdown';\nimport '@avl-controls/core/dist/avl-overflow-menu/avl-overflow-menu';\nimport './avl-column-selector-dialog/avl-column-selector-dialog';\nimport './themes/vaadin-grid-material-theme.css';\nimport './themes/vaadin-grid-sorter-material-theme.css';\nimport { style } from './avl-datatable.css';\nexport let template = html `\r\n  ${allInitial} ${style}\r\n\r\n  <avl-overflow-menu id=\"overflowMenu\"></avl-overflow-menu>\r\n\r\n  <div class=\"top-flex-container\">\r\n    <template is=\"dom-if\" if=\"[[globalFilter]]\">\r\n      <avl-textfield\r\n        class=\"globalFilter\"\r\n        value=\"{{globalFilterValue}}\"\r\n        label=\"[[globalFilterLabel]]\"\r\n        placeholder=\"[[globalFilterLabel]]\"\r\n        compact-mode\r\n      ></avl-textfield>\r\n    </template>\r\n\r\n    <template is=\"dom-if\" if=\"[[columnSelector]]\">\r\n      <avl-column-selector-dialog\r\n        columns-label=\"[[columnSelectorLabel]]\"\r\n        apply-button-label=\"[[applyButtonLabel]]\"\r\n        reset-button-label=\"[[resetButtonLabel]]\"\r\n        leaf-columns=\"[[leafColumns]]\"\r\n        on-selected-columns-changed=\"selectedColumnsChanged\"\r\n        dialog-footer=\"{{dialogFooter}}\"\r\n      ></avl-column-selector-dialog>\r\n    </template>\r\n  </div>\r\n\r\n  <vaadin-grid id=\"grid\" selected-items=\"{{selectedItems}}\" class$=\"{{getGridClass(pagination, globalFilter)}}\">\r\n    <template is=\"dom-if\" if=\"[[multiSelect]]\">\r\n      <vaadin-grid-selection-column\r\n        header-renderer=\"[[selectionHeaderRenderer]]\"\r\n        renderer=\"[[selectionColumnRenderer]]\"\r\n      ></vaadin-grid-selection-column>\r\n    </template>\r\n  </vaadin-grid>\r\n\r\n  <template is=\"dom-if\" if=\"[[pagination]]\">\r\n    <template is=\"dom-if\" if=\"[[totalNumOfRows]]\" restamp>\r\n      <div id=\"pages\">\r\n        <avl-dropdown\r\n          label=\"[[pageSizeLabel]]\"\r\n          selected-index=\"{{pageSizeIndex}}\"\r\n          no-label-float\r\n          compact-mode\r\n          items=\"[[pageSizeOptions]]\"\r\n        ></avl-dropdown>\r\n\r\n        <button on-click=\"_prev\" disabled=\"{{isLeftButtonDisabled(selectedPage)}}\" id=\"prevButton\">&lt;</button>\r\n\r\n        <template is=\"dom-if\" if=\"[[pages.left]]\">\r\n          <template is=\"dom-repeat\" items=\"[[pages.left]]\">\r\n            <button on-click=\"_select\" class=\"pageButton\" selected$=\"[[_isSelected(selectedPage, item)]]\">\r\n              [[item]]\r\n            </button>\r\n          </template>\r\n        </template>\r\n\r\n        <template is=\"dom-if\" if=\"[[pages.middle]]\">\r\n          <div class=\"threeDots\">...</div>\r\n          <template is=\"dom-repeat\" items=\"[[pages.middle]]\">\r\n            <button on-click=\"_select\" class=\"pageButton\" selected$=\"[[_isSelected(selectedPage, item)]]\">\r\n              [[item]]\r\n            </button>\r\n          </template>\r\n        </template>\r\n\r\n        <template is=\"dom-if\" if=\"[[pages.right]]\">\r\n          <div class=\"threeDots\">...</div>\r\n          <template is=\"dom-repeat\" items=\"[[pages.right]]\">\r\n            <button on-click=\"_select\" class=\"pageButton\" selected$=\"[[_isSelected(selectedPage, item)]]\">\r\n              [[item]]\r\n            </button>\r\n          </template>\r\n        </template>\r\n\r\n        <button on-click=\"_next\" disabled=\"{{isRightButtonDisabled(selectedPage, pageSize)}}\" id=\"nextButton\">\r\n          &gt;\r\n        </button>\r\n      </div>\r\n    </template>\r\n  </template>\r\n`;\n\r\n//# sourceMappingURL=avl-datatable.html.js.map\r\n","import { PolymerElement } from '@polymer/polymer/polymer-element';\nimport '@avl-controls/core/dist/avl-localization-service/avl-localization-service';\nimport { globalFilterKey, } from '@avl-controls/interfaces';\nimport { ColumnType, isGroupColumn, isLeafColumn } from './column-definitions';\nimport createArrayDataProvider, { getParentObjectFromPath, getValueFromPath } from './array-data-provider';\nimport { template } from './avl-datatable.html';\nimport { OrderImpl } from './avl-datatable.models';\nimport { DEFAULT_PAGE_SIZE, DEFAULT_PAGE_SIZE_LABEL, DEFAULT_PAGE_SIZE_OPTIONS, MAX_PAGES_PER_SECTION, MIN_PAGES_PER_SECTION, } from './avl-datatable.consts';\nclass AvlDatatableImpl extends PolymerElement {\n    constructor() {\n        super(...arguments);\n        this.singleSelect = false;\n        this.multiSelect = false;\n        this.allowActiveRow = false;\n        this.checkboxAllSelectClicked = false;\n        this.pageSize = DEFAULT_PAGE_SIZE;\n        this.selectedPage = 0;\n        this.globalFilter = false;\n        this.globalFilterLabel = 'Filter...';\n        this.treeColumn = false;\n        this.pageSizeOptions = DEFAULT_PAGE_SIZE_OPTIONS;\n        this.pageSizeLabel = DEFAULT_PAGE_SIZE_LABEL;\n        this.dialogFooter = false;\n        this.pageSizeIndex = 0;\n        this.leafColumns = [];\n        this.pages = {};\n        this._data = undefined;\n        this._lastFilters = new Map(); // only used for pagination\n        this.dataProviderCalled = false; // if vaadin data provider has been called since init\n        this.recreatingHeaders = false;\n        this.isLazyLoading = true;\n        this.checkboxClicked = false;\n        this.row2formattedRow = new Map();\n        this.idx2formattedRow = new Map();\n        this.rowIndexPropertyName = '__index';\n        this.rowPropertyName = '__row';\n        this.columnSelectorLabel = 'Manage columns';\n        this.resetButtonLabel = 'Reset to default';\n        // used for calculating pages\n        this.totalNumOfRows = 0;\n        // TODO: there are actually 2 arrays -> raw/real and formatted, formatted is passed to vaadin and used for\n        // selecting and deselecting but when returning data to user (upon selection) we want to return\n        // to user the raw/real data -> this wouldn't have to be so if directly used raw rows with vaadin row templates\n        this.__rowsCache = []; // caching remote data which is transformed to formatted data\n        this.__formattedRowsCache = []; // this is passed to vaadin grid and it is used for de/selecting rows\n        this.selectedIndex = undefined;\n        this.selectedValue = undefined;\n        this.selectedIndexes = [];\n        this.selectedValues = [];\n        this.lastActiveItem = undefined;\n        this.range = (start, end) => {\n            return [...Array(end - start).keys()].map((x) => x + start + 1);\n        };\n        this.formatColumn = (column) => {\n            if (!isLeafColumn(column)) {\n                return;\n            }\n            // default properties\n            column.sortable = !!column.sortable;\n            column.flexWidth = column.flexWidth || 0;\n            // default formatter based on type and only for certain types\n            switch (column.type) {\n                case ColumnType.Number:\n                    column.formatter =\n                        column.formatter || ((value) => AvlLocalizationService.formatNumber(value, column.numberOptions));\n                    break;\n                case ColumnType.Date:\n                    column.formatter =\n                        column.formatter || ((value) => AvlLocalizationService.formatDateTime(value, column.dateTimeOptions));\n                    break;\n                default:\n            }\n        };\n        this.selectionColumnRenderer = (cell, _, rowData) => {\n            let checkbox = cell.firstElementChild;\n            if (!checkbox) {\n                checkbox = document.createElement('avl-checkbox');\n                checkbox.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                    checkbox = e.target;\n                    if (checkbox.checked) {\n                        this.grid.selectedItems.push(checkbox.__item);\n                        this.selectedValues = this.grid.selectedItems.map((formattedRow) => formattedRow[this.rowPropertyName]);\n                        this.selectedIndexes = this.selectedValues.map((value) => {\n                            return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n                        });\n                    }\n                    else {\n                        const index = this.grid.selectedItems.indexOf(checkbox.__item);\n                        if (index !== -1) {\n                            this.grid.selectedItems.splice(index, 1);\n                        }\n                        this.checkboxClicked = false;\n                        this.selectedValues = this.grid.selectedItems.map((formattedRow) => formattedRow[this.rowPropertyName]);\n                        this.selectedIndexes = this.selectedValues.map((value) => {\n                            return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n                        });\n                        this.checkboxAllSelectClicked = false;\n                    }\n                    if (!this.isLazyLoading && this.grid.selectedItems.length === this.data.length) {\n                        this.checkboxClicked = true;\n                    }\n                    if (!this.isLazyLoading && !this.treeColumn) {\n                        this.headerCheckboxState();\n                    }\n                });\n                cell.className = 'table-checkbox';\n                cell.appendChild(checkbox);\n            }\n            const items = [].slice.call(this.grid.shadowRoot.querySelector('#items').children);\n            let i = 0;\n            if (i < items.length) {\n                i++;\n            }\n            else {\n                this.checkboxAllSelectClicked = false;\n            }\n            checkbox.__item = rowData.item;\n            checkbox.checked = rowData.selected;\n        };\n        // sets class on cell <vaadin-grid-cell-content>,\n        // creates checkbox and adds it inside it in cell content\n        this.selectionHeaderRenderer = (cell, _, refresh = false) => {\n            if (!cell) {\n                return;\n            }\n            const className = 'table-header-checkbox';\n            if (cell.className === className && !refresh) {\n                return;\n            }\n            cell.className = className;\n            cell.id = className;\n            const checkbox = this.createCheckBox();\n            this.doLoadGridTask().then(() => {\n                if (this.isLazyLoading || this.singleSelect || this.treeColumn) {\n                    return;\n                }\n                if (cell.hasChildNodes()) {\n                    cell.removeChild(cell.firstChild);\n                }\n                cell.append(checkbox);\n            });\n        };\n        this.getColumnNameFromEvent = (event) => {\n            const header = event.detail.resizedColumn.firstElementChild;\n            return this.getLabel(header.content);\n        };\n        this.getLabel = (headerContent) => {\n            const label = headerContent.getAttribute ? headerContent.getAttribute('aria-label') : null;\n            if (label) {\n                return label;\n            }\n            else if (headerContent.firstElementChild && !(headerContent.firstElementChild instanceof HTMLImageElement)) {\n                return this.getLabel(headerContent.firstElementChild);\n            }\n            else {\n                return headerContent.innerHTML;\n            }\n        };\n        this.getColumnNameFromTargetElement = (target) => {\n            const firstChild = target.firstElementChild;\n            const vaadinGridfilter = firstChild.getElementsByTagName('vaadin-grid-filter')[0];\n            const label = vaadinGridfilter ? vaadinGridfilter.firstElementChild['label'] : firstChild.firstElementChild.innerHTML;\n            return label;\n        };\n        this.subscribeToSortDirectionChanged = () => {\n            if (!this.eventSubscription) {\n                const gridSorterList = this.grid.querySelectorAll('vaadin-grid-sorter');\n                const gridSorterLength = gridSorterList.length;\n                gridSorterList.forEach((sorter, key) => {\n                    sorter.addEventListener('direction-changed', (event) => {\n                        const detail = {\n                            columnName: this.getColumnNameFromTargetElement(event.target),\n                            sortDirection: event.detail.value\n                        };\n                        if (event.detail.value) {\n                            // dispatches two events if another column have been sorted previously - for previously sorted column and sorted column\n                            this.dispatchEvent(new CustomEvent('column-sort-direction-changed', { detail: detail }));\n                        }\n                    });\n                    if (key === gridSorterLength - 1) {\n                        this.eventSubscription = true;\n                    }\n                });\n            }\n        };\n    }\n    static get is() {\n        return 'avl-datatable';\n    }\n    static get template() {\n        return template;\n    }\n    static get properties() {\n        return {\n            columnDefinitions: {\n                type: Array,\n                observer: 'columnDefinitionsChanged',\n            },\n            dataProvider: {\n                type: Function,\n                observer: 'dataProviderChanged',\n            },\n            pagination: {\n                type: Boolean,\n            },\n            dialogFooter: {\n                type: Boolean,\n            },\n            pageSize: {\n                type: Number,\n                notify: true,\n                observer: 'pageSizeChanged',\n            },\n            pageSizeIndex: {\n                type: Number,\n                observer: 'pageSizeIndexChanged',\n            },\n            selectedPage: {\n                type: Number,\n                notify: true,\n                observer: 'selectedPageChanged',\n            },\n            singleSelect: {\n                type: Boolean,\n                observer: 'singleSelectChanged',\n                reflectToAttribute: true,\n                value: false,\n            },\n            multiSelect: {\n                type: Boolean,\n                observer: 'multiSelectChanged',\n                reflectToAttribute: true,\n                value: false,\n            },\n            allowActiveRow: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n            },\n            activeRow: {\n                type: Object,\n                notify: true,\n            },\n            selectedIndex: {\n                type: Number,\n                observer: 'selectedIndexChanged',\n                notify: true,\n                value: undefined,\n            },\n            selectedValue: {\n                type: String,\n                observer: 'selectedValueChanged',\n                notify: true,\n                value: undefined,\n            },\n            selectedIndexes: {\n                type: Array,\n                observer: 'selectedIndexesChanged',\n                notify: true,\n                value: [],\n            },\n            selectedValues: {\n                type: Array,\n                observer: 'selectedValuesChanged',\n                notify: true,\n                value: [],\n            },\n            globalFilter: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n            },\n            globalFilterValue: {\n                type: String,\n                observer: 'globalFilterValueChanged',\n            },\n            globalFilterLabel: {\n                type: String,\n            },\n            treeColumn: {\n                type: Boolean,\n                value: false,\n                reflectToAttribute: true,\n                observer: 'treeColumnChanged',\n            },\n            columnSelector: {\n                type: Boolean,\n                reflectToAttribute: true,\n            },\n            pageSizeLabel: String,\n        };\n    }\n    get data() {\n        return this._data;\n    }\n    set data(data) {\n        this.__formattedRowsCache = [];\n        this._data = data;\n        this.dataProvider = createArrayDataProvider(this._data);\n        const cell = this.shadowRoot.querySelector('#table-header-checkbox');\n        this.selectionHeaderRenderer(cell, null, true);\n        if (this.isLazyLoading) {\n            this.isLazyLoading = false;\n        }\n    }\n    get grid() {\n        if (!this._grid) {\n            this._grid = this.shadowRoot.querySelector('#grid');\n        }\n        return this._grid;\n    }\n    setVaadinGridSize(pageSize) {\n        this.grid.setAttribute('size', String(pageSize));\n    }\n    setTotalRows(numOfRows) {\n        if (this.totalNumOfRows === numOfRows) {\n            return;\n        }\n        this.totalNumOfRows = numOfRows;\n        this.setVaadinGridSize(this.totalNumOfRows);\n        this.pageSizeChanged();\n    }\n    selectedColumnsChanged(e) {\n        this.columnDefinitions = e.detail || this.columnDefinitions.slice();\n        const cell = this.shadowRoot.querySelector('#table-header-checkbox');\n        this.selectionHeaderRenderer(cell, null, true);\n    }\n    clearCache() {\n        this.grid.clearCache();\n    }\n    areSortOrdersEqual(prevOrders, newOrders) {\n        if (prevOrders.length !== newOrders.length) {\n            return false;\n        }\n        return JSON.stringify(prevOrders) === JSON.stringify(newOrders);\n    }\n    areFiltersEqual(prevFilters, newFilters) {\n        if (prevFilters.size !== newFilters.size) {\n            return false;\n        }\n        for (const [key, value] of prevFilters) {\n            if (newFilters.get(key) !== value) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getFieldsForGlobalFilter() {\n        const globalFilterableTypes = [ColumnType.Text, ColumnType.Button, ColumnType.Link, ColumnType.IconText];\n        const globalFilterPaths = [];\n        if (this.columnDefinitions) {\n            this.traverseColumnsAndPerformAction((column) => {\n                if (!isLeafColumn(column) || column.hidden || !globalFilterableTypes.includes(column.type)) {\n                    return;\n                }\n                let path;\n                switch (column.type) {\n                    case ColumnType.Link:\n                        break;\n                    case ColumnType.IconText:\n                        path = column.valueField + '.text';\n                        break;\n                    default:\n                        path = column.valueField;\n                        break;\n                }\n                globalFilterPaths.push(path);\n            });\n        }\n        return globalFilterPaths;\n    }\n    updateExpandedItems(grid, rows) {\n        rows.filter((row) => row.descendantsMatchFilter).forEach((row) => grid.push('expandedItems', row));\n    }\n    collapseEverything() {\n        this.grid.expandedItems = [];\n    }\n    calculateSortOrders(orders) {\n        return orders.map((order) => new OrderImpl(order.path, order.direction === 'asc'));\n    }\n    calculateFilters(filters) {\n        const calculatedFilters = new Map();\n        for (const filter of filters) {\n            if (filter && filter.value !== '') {\n                calculatedFilters.set(filter.path, filter.value);\n            }\n        }\n        if (this.globalFilter && this.globalFilterValue) {\n            calculatedFilters.set(globalFilterKey, this.globalFilterValue);\n        }\n        return calculatedFilters;\n    }\n    formatRows(data, page, pageSize) {\n        const formattedRows = data.rows.map((row, idx) => {\n            const formattedRow = this.formatRow(row);\n            formattedRow[this.rowIndexPropertyName] = page * pageSize + idx;\n            formattedRow[this.rowPropertyName] = row;\n            return formattedRow;\n        });\n        return formattedRows;\n    }\n    dataProviderChanged() {\n        if (!this.grid) {\n            return;\n        }\n        this.grid.dataProvider = (params, callback) => {\n            if (this.recreatingHeaders) {\n                callback([], 0);\n                return;\n            }\n            // construct TableDataRequestParamsImpl from params\n            const sortOrders = this.calculateSortOrders(params.sortOrders);\n            const filters = this.calculateFilters(params.filters);\n            const tableDataRequestParams = {\n                page: params.page,\n                pageSize: Math.min(params.pageSize, this.pageSize),\n                filters,\n                globalFilterFields: this.getFieldsForGlobalFilter(),\n                sortOrders,\n                parentItem: params.parentItem ? params.parentItem[this.rowPropertyName] : params.parentItem,\n            };\n            this.dataProvider(tableDataRequestParams).then((providerData) => {\n                const formattedRows = this.formatRows(providerData, params.page, params.pageSize);\n                this.cacheRowsForLookup(providerData, params.page, params.pageSize, formattedRows);\n                if (tableDataRequestParams.parentItem) {\n                    callback(formattedRows, providerData.totalRows);\n                }\n                else {\n                    callback(formattedRows);\n                    this.setTotalRows(providerData.totalRows);\n                }\n                this.updateExpandedItems(this.grid, formattedRows);\n                this.dataProviderCalled = true;\n                this.deselectEverything();\n                this.subscribeToSortDirectionChanged();\n            });\n        };\n    }\n    globalFilterValueChanged() {\n        if (this.dataProviderCalled) {\n            this.clearCache();\n        }\n        this.resetCheckboxes();\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (AvlLocalizationService && AvlLocalizationService.translationService) {\n            this.translateLabels();\n        }\n        const ofMenu = this.$.overflowMenu;\n        this.grid.addEventListener('active-item-changed', (e) => this.activeItemChanged(e.detail.value));\n        this.grid.addEventListener('click', (e) => {\n            const constructEventDetail = (t) => ({\n                row: t['item'][this.rowPropertyName],\n                valueField: t.getAttribute('value-field'),\n            });\n            const target = e.target;\n            if (target.tagName.toLocaleLowerCase() === 'avl-button' ||\n                target.tagName.toLocaleLowerCase() === 'avl-icon-button') {\n                if (target.hasAttribute('overflow-menu')) {\n                    if (ofMenu.trigger !== e.target) {\n                        this.handleOverflowMenuClick(e);\n                    }\n                }\n                else {\n                    const detail = constructEventDetail(target);\n                    this.dispatchEvent(new CustomEvent('button-click', {\n                        detail: detail,\n                    }));\n                }\n            }\n            else if (target.tagName.toLowerCase() === 'a') {\n                if (target.hasAttribute('do-not-follow-links')) {\n                    e.preventDefault();\n                }\n                const detail = constructEventDetail(target);\n                this.dispatchEvent(new CustomEvent('link-click', {\n                    detail: detail,\n                }));\n            }\n        });\n        this.grid.addEventListener('column-resize', (event) => {\n            const detail = {\n                columnName: this.getColumnNameFromEvent(event),\n                columnSize: event.detail.resizedColumn.width\n            };\n            this.dispatchEvent(new CustomEvent('column-size-changed', { detail: detail }));\n        });\n    }\n    async translateLabels() {\n        if (!AvlLocalizationService || !AvlLocalizationService.translationService) {\n            return;\n        }\n        const translationService = AvlLocalizationService.translationService;\n        this.columnSelectorLabel = await translationService.translate('VizBox.AvlDatatable.Columns');\n        this.resetButtonLabel = await translationService.translate('VizBox.AvlDatatable.Reset');\n    }\n    handleOverflowMenuClick(e) {\n        const ofMenu = this.$.overflowMenu;\n        const target = e.target;\n        if (ofMenu.trigger !== target) {\n            ofMenu.removeEventListener('item-clicked', this.overflowMenuItemClickedListener);\n            this.overflowMenuItemClickedListener = (event) => {\n                const detail = {\n                    row: target['item'][this.rowPropertyName],\n                    valueField: target.getAttribute('value-field'),\n                    item: event.detail.value,\n                };\n                this.dispatchEvent(new CustomEvent('overflow-menu-item-click', {\n                    detail: detail,\n                }));\n            };\n            const cellId = parseInt(target.parentElement.getAttribute('column-index'), 10);\n            const menuItems = this.leafColumns[cellId].menuItems;\n            ofMenu.items = menuItems;\n            ofMenu.trigger = e.target;\n            setTimeout(() => {\n                ofMenu.open = true;\n            });\n            ofMenu.addEventListener('item-clicked', this.overflowMenuItemClickedListener);\n        }\n    }\n    traverseColumnsAndPerformAction(action) {\n        // copy list\n        const stack = this.columnDefinitions.slice();\n        // do DFS starting from left-most column\n        while (stack.length) {\n            const column = stack.shift();\n            // add children to stack\n            if (isGroupColumn(column) && column.childColumns) {\n                stack.unshift(...column.childColumns.slice());\n            }\n            action(column);\n        }\n    }\n    formatRow(row, index) {\n        // copy row\n        const formattedRow = JSON.parse(JSON.stringify(row));\n        for (const leafCol of this.leafColumns) {\n            // format for certain data types\n            if (leafCol.type === ColumnType.Number || leafCol.type === ColumnType.Date) {\n                const object = getValueFromPath(formattedRow, leafCol.valueField);\n                if (object !== undefined && object !== null) {\n                    const parentObject = getParentObjectFromPath(formattedRow, leafCol.valueField);\n                    const propertyName = leafCol.valueField.split('.')[leafCol.valueField.split('.').length - 1];\n                    if (leafCol.type === ColumnType.Date) {\n                        parentObject[propertyName] = new Date(parentObject[propertyName]);\n                    }\n                    parentObject[propertyName] = leafCol.formatter(parentObject[propertyName]);\n                }\n            }\n        }\n        return formattedRow;\n    }\n    setPages() {\n        if (!this.totalNumOfRows || !this.pageSize) {\n            return;\n        }\n        const pages = {};\n        const totalPages = Math.ceil(this.totalNumOfRows / this.pageSize);\n        if (totalPages <= MAX_PAGES_PER_SECTION + MIN_PAGES_PER_SECTION) {\n            // one section - too few pages to split them into multiple sections\n            pages.left = this.range(0, totalPages);\n        }\n        else if (this.selectedPage < MAX_PAGES_PER_SECTION - 1) {\n            // split pages into two sections with first one containing selected page\n            pages.left = this.range(0, MAX_PAGES_PER_SECTION);\n            pages.middle = this.range(totalPages - MIN_PAGES_PER_SECTION, totalPages);\n        }\n        else {\n            // left section has minimum number of pages\n            pages.left = this.range(0, MIN_PAGES_PER_SECTION);\n            if (this.selectedPage > totalPages - MAX_PAGES_PER_SECTION) {\n                // middle section has maximum number of pages (tail part of the array) and contains selected page\n                pages.middle = this.range(totalPages - MAX_PAGES_PER_SECTION, totalPages);\n            }\n            else {\n                // three sections with selected page in the middle one\n                const startMiddle = this.selectedPage - Math.floor(MAX_PAGES_PER_SECTION / 2);\n                pages.middle = this.range(startMiddle, startMiddle + MAX_PAGES_PER_SECTION);\n                pages.right = this.range(totalPages - MIN_PAGES_PER_SECTION, totalPages);\n            }\n        }\n        this.pages = pages;\n    }\n    pageSizeChanged() {\n        if (!this.pagination) {\n            this.pageSize = 50;\n            return;\n        }\n        if (Number.isNaN(this.pageSize) || this.pageSize < 1) {\n            return;\n        }\n        const truncatedNumber = Math.trunc(this.pageSize);\n        if (this.pageSize !== truncatedNumber) {\n            this.pageSize = truncatedNumber;\n            return;\n        }\n        // Adjusts the page size options dropdown, if value exists\n        this.pageSizeIndex = this.pageSizeOptions.findIndex((option) => option.value === this.pageSize);\n        this.updateTable();\n    }\n    updateTable() {\n        if (this.totalNumOfRows === 0) {\n            this.pages = {};\n            return;\n        }\n        this.selectedPage = 0;\n        const gridSize = Math.min(this.pageSize, this.totalNumOfRows);\n        this.setVaadinGridSize(gridSize);\n        this.setPages();\n    }\n    pageSizeIndexChanged() {\n        if (this.pageSizeIndex > -1) {\n            this.pageSize = this.pageSizeOptions[this.pageSizeIndex].value;\n        }\n    }\n    selectedPageChanged() {\n        this.setPages();\n        if (!this.grid || !this.dataProvider || !this.pagination) {\n            return;\n        }\n        this.grid.dataProvider = (params, callback) => {\n            // construct TableDataRequestParamsImpl from params\n            const sortOrders = this.calculateSortOrders(params.sortOrders);\n            const filters = this.calculateFilters(params.filters);\n            /* if filters changed since the last time dataProvider has been called we need to set selected\n            page to 0 because we don't know how many rows/pages there will be after fetching the data  */\n            if (!this.areFiltersEqual(this._lastFilters, filters)) {\n                this.selectedPage = 0;\n            }\n            this._lastFilters = filters;\n            const tableDataRequestParams = {\n                page: this.selectedPage,\n                pageSize: Math.min(this.totalNumOfRows, this.pageSize),\n                filters,\n                globalFilterFields: this.getFieldsForGlobalFilter(),\n                sortOrders,\n                parentItem: params.parentItem ? params.parentItem[this.rowPropertyName] : params.parentItem,\n            };\n            this.dataProvider(tableDataRequestParams).then((providerData) => {\n                // format rows\n                const formattedRows = this.formatRows(providerData, params.page, params.pageSize);\n                this.cacheRowsForLookup(providerData, params.page, params.pageSize, formattedRows);\n                if (tableDataRequestParams.parentItem) {\n                    callback(formattedRows, providerData.totalRows);\n                }\n                else {\n                    callback(formattedRows);\n                    this.setTotalRows(providerData.totalRows);\n                    // If this is the last page, number of rows might be smaller than the page size.\n                    if (this.selectedPage === Math.ceil(this.totalNumOfRows / this.pageSize) - 1) {\n                        this.setVaadinGridSize(providerData.rows.length);\n                    }\n                    else {\n                        // If the size was changed on the last page, set it back.\n                        this.setVaadinGridSize(this.pageSize);\n                    }\n                }\n                this.updateExpandedItems(this.grid, formattedRows);\n            });\n        };\n    }\n    isLeftButtonDisabled(page) {\n        return page === 0;\n    }\n    isRightButtonDisabled(page, pageSize) {\n        const totalPages = Math.ceil(this.totalNumOfRows / pageSize);\n        return this.totalNumOfRows === 0 || page === totalPages - 1;\n    }\n    deselectEverything() {\n        if (this.singleSelect) {\n            this.selectedValue = undefined;\n        }\n        if (this.multiSelect && this.selectedValues.length > 0) {\n            this.selectedValues = [];\n            this.selectedIndexes = [];\n        }\n    }\n    // Pagination\n    _isSelected(page, item) {\n        return page === item - 1;\n    }\n    _select(e) {\n        // selection is not persistent when changing pages\n        this.deselectEverything();\n        this.collapseEverything();\n        this.resetCheckboxes();\n        this.selectedPage = e.model.item - 1;\n    }\n    _next() {\n        // selection is not persistent when changing pages\n        this.deselectEverything();\n        this.collapseEverything();\n        this.resetCheckboxes();\n        const totalPages = Math.ceil(this.totalNumOfRows / this.pageSize);\n        this.selectedPage = Math.min(totalPages - 1, this.selectedPage + 1);\n    }\n    _prev() {\n        // selection is not persistent when changing pages\n        this.deselectEverything();\n        this.collapseEverything();\n        this.resetCheckboxes();\n        this.selectedPage = Math.max(0, this.selectedPage - 1);\n    }\n    columnDefinitionsChanged() {\n        if (!this.columnDefinitions) {\n            return;\n        }\n        const childColumnsExist = JSON.stringify(this.columnDefinitions).indexOf('childColumns') !== -1;\n        if (childColumnsExist && this.columnSelector) {\n            this.columnSelector = false;\n            throw new Error('Column selector is not supported with grouped headers');\n        }\n        this.createHeaders();\n    }\n    treeColumnChanged() {\n        if (!this.treeColumn || !this.columnDefinitions) {\n            return;\n        }\n        this.createHeaders();\n    }\n    createHeaders() {\n        const oldColumns = this.shadowRoot.querySelectorAll('vaadin-grid-column, vaadin-grid-column-group');\n        if (oldColumns.length) {\n            this.recreatingHeaders = true;\n            // reset filter and sorter when changing headers because vaadin still remembers them even if elements are removed\n            this.grid.querySelectorAll('.filter-textfield').forEach((el) => (el['value'] = ''));\n            this.grid.querySelectorAll('vaadin-grid-sorter').forEach((el) => (el['direction'] = null));\n            oldColumns.forEach((c) => c.parentElement.removeChild(c));\n        }\n        this.traverseColumnsAndPerformAction(this.formatColumn);\n        this.leafColumns = [];\n        this.columnDefinitions\n            .map((col, id) => this.createGridHeaderHTML(col, String(id)))\n            .filter((header) => header)\n            .forEach((header) => this.grid.appendChild(header));\n        if (this.recreatingHeaders) {\n            this.recreatingHeaders = false;\n            if (this.dataProviderCalled) {\n                this.clearCache();\n            }\n        }\n        this.leafColumns\n            .filter((col) => col.filterable)\n            .forEach((col) => setTimeout(() => this.filterLeafColumn(col), 0));\n    }\n    createGridHeaderHTML(col, testLabel) {\n        if (isGroupColumn(col)) {\n            return this.createGroupGridHeaderHTML(col, testLabel);\n        }\n        if (isLeafColumn(col)) {\n            this.leafColumns.push(col);\n            return this.getLeafColumnHTML(col, this.leafColumns.length - 1, testLabel);\n        }\n        throw new Error('Unknown type. Column definition for LeafColumn must have valueField property set' + col);\n    }\n    createGroupGridHeaderHTML(column, testLabel) {\n        const columnGroupHeader = document.createElement('vaadin-grid-column-group');\n        columnGroupHeader.resizable = true;\n        const headerTemplate = document.createElement('template');\n        headerTemplate.classList.add('header');\n        headerTemplate.innerHTML = `<span class=\"header-content\" test-label=\"${testLabel}\">${column.caption}</span>`;\n        columnGroupHeader.appendChild(headerTemplate);\n        column.childColumns\n            .map((col, id) => this.createGridHeaderHTML(col, testLabel + '>' + id))\n            .filter((col) => col)\n            .forEach((col) => columnGroupHeader.appendChild(col));\n        return columnGroupHeader;\n    }\n    getLeafColumnTemplate(column) {\n        const style = `${column.defaultStyle || ''}[[item.${column.valueField}Style]]`;\n        switch (column.type) {\n            case ColumnType.Text:\n                return `<div style=\"${style}\" class=\"textColumn\" title=\"[[item.${column.valueField}]]\">[[item.${column.valueField}]]</div>`;\n            case ColumnType.Number:\n                return `<div style=\"${style}\" class=\"numberColumn\" title=\"[[item.${column.valueField}]]\">[[item.${column.valueField}]]</div>`;\n            case ColumnType.Date:\n                return `<div style=\"${style}\" class=\"elipsis dateColumn\" title=\"[[item.${column.valueField}]]\">[[item.${column.valueField}]]</div>`;\n            case ColumnType.Icon:\n                return `<div class=\"flex-center\" ><avl-icon style=\"${style}\" icon=\"[[item.${column.valueField}]]\"></avl-icon></div>`;\n            case ColumnType.Image:\n                return `<img style=\"${style}\" src=\"[[item.${column.valueField}]]\">`;\n            case ColumnType.Checkbox:\n                return `<avl-checkbox style=\"${style}\" checked=\"[[item.${column.valueField}]]\" disabled></avl-checkbox>`;\n            case ColumnType.Button:\n                return `<template is=\"dom-if\" if=\"[[item.${column.valueField}]]\"><avl-button style=\"${style}\" item=\"{{item}}\" value-field=\"${column.valueField}\">[[item.${column.valueField}]]</avl-button></template>`;\n            case ColumnType.IconButton:\n                return `<avl-icon-button style=\"${style}\" item=\"{{item}}\" value-field=\"${column.valueField}\" icon=\"{{item.${column.valueField}}}\"></avl-icon-button>`;\n            case ColumnType.Link:\n                return `<a style=\"${style}\" href=\"[[item.${column.valueField}.href]]\" target=\"[[item.${column.valueField}.target]]\" item=\"{{item}}\" value-field=\"${column.valueField}\" ${column.doNotFollowLinks ? 'do-not-follow-links' : ''} >[[item.${column.valueField}.text]]</a>`;\n            case ColumnType.IconText:\n                return `<div class=\"iconText\"><avl-icon style=\"${style}\" icon=\"[[item.${column.valueField}.icon]]\"></avl-icon><p>[[item.${column.valueField}.text]]</p></div>`;\n            case ColumnType.OverflowMenu:\n                return `<avl-icon-button item=\"{{item}}\" overflow-menu icon=\"more-vert\" value-field=\"${column.valueField}\" style=\"${style}\"></avl-icon-button>`;\n            default:\n                return '';\n        }\n    }\n    getLeafColumnHTML(column, columnIndex, testLabel) {\n        if (column.hidden) {\n            return undefined;\n        }\n        let header;\n        // Header icon or image\n        let iconOrImageHtml = '';\n        if (column.headerIcon) {\n            iconOrImageHtml = `<avl-icon class=\"header-icon\" icon=\"${column.headerIcon}\"></avl-icon>`;\n        }\n        else if (column.headerImage) {\n            iconOrImageHtml = `<img class=\"header-image\" src=\"${column.headerImage}\"></i>`;\n        }\n        if (column.filterable) {\n            const variableName = '_' + column.valueField.replace('.', '_');\n            header = `<vaadin-grid-filter aria-label=\"${column.caption}\" path=\"${column.valueField}\" value=\"[[${variableName}]]\">\r\n                  <avl-textfield slot=\"filter\" no-label-float compact-mode class=\"filter-textfield\"\r\n                    label=\"${column.caption}\"\r\n                    value=\"{{${variableName}}}\" focus-target> </avl-textfield>\r\n                </vaadin-grid-filter>`;\n        }\n        else if (iconOrImageHtml) {\n            header = `<span class=\"header-icon-content\" test-label=\"${testLabel}\">${iconOrImageHtml}</span>`;\n        }\n        else {\n            header = `<span class=\"header-content\" test-label=\"${testLabel}\">${column.caption}</span>`;\n        }\n        if (column.sortable) {\n            const direction = column.sortDirection ? 'direction=\"' + column.sortDirection + '\"' : '';\n            header = `<vaadin-grid-sorter path=\"${column.valueField}\" ${direction}>\r\n                  <div class=\"cell sortable-header\">\r\n                    ${header}\r\n                  </div>\r\n                </vaadin-grid-sorter>`;\n        }\n        const columnEl = document.createElement('vaadin-grid-column');\n        columnEl.resizable = true;\n        if (column.width) {\n            columnEl.setAttribute('width', column.width);\n        }\n        columnEl.setAttribute('flex-grow', column.flexWidth.toString());\n        const headerTemplate = document.createElement('template');\n        headerTemplate.classList.add('header');\n        headerTemplate.innerHTML = header;\n        const itemTemplate = document.createElement('template');\n        let itemTemplateString = `<span class=\"cell-content\" column-index=\"${columnIndex}\" row-index$=\"{{index}}\">${this.getLeafColumnTemplate(column)}</span>`;\n        if (this.treeColumn && columnIndex === 0) {\n            itemTemplateString = `<vaadin-grid-tree-toggle leaf=\"[[!item.hasChildren]]\" expanded=\"{{expanded}}\" level=\"[[level]]\">\r\n              ${itemTemplateString}\r\n        </vaadin-grid-tree-toggle>`;\n        }\n        itemTemplate.innerHTML = itemTemplateString;\n        columnEl.appendChild(headerTemplate);\n        columnEl.appendChild(itemTemplate);\n        return columnEl;\n    }\n    getGridClass(pagination, globalFilter) {\n        const classList = [];\n        if (pagination) {\n            classList.push('with-pagination');\n        }\n        if (globalFilter) {\n            classList.push('with-global-filter');\n        }\n        if (this.columnSelector) {\n            classList.push('with-column-selector');\n        }\n        return classList.join(' ');\n    }\n    headerCheckboxState() {\n        var _a;\n        const tableHeaderCheckbox = this.grid.querySelector('#table-header-checkbox');\n        if (!((_a = tableHeaderCheckbox === null || tableHeaderCheckbox === void 0 ? void 0 : tableHeaderCheckbox.children) === null || _a === void 0 ? void 0 : _a.length)) {\n            return;\n        }\n        const child = this.grid.querySelector('#table-header-checkbox').children[0];\n        if (this.grid.selectedItems.length && this.grid.selectedItems.length !== this.grid.items.length) {\n            child.indeterminate = true;\n        }\n        else if (this.grid.selectedItems.length === this.grid.items.length) {\n            child.checked = true;\n            child.indeterminate = false;\n        }\n        else if (!this.grid.selectedItems.length) {\n            child.checked = false;\n            child.indeterminate = false;\n        }\n    }\n    createCheckBox() {\n        const checkbox = document.createElement('avl-checkbox');\n        checkbox.addEventListener('click', (e) => {\n            e.stopPropagation();\n            if (!this.checkboxClicked || !checkbox.checked) {\n                if (checkbox.checked) {\n                    this.checkboxAllSelectClicked = true;\n                    let items = [].slice.call(this.grid.shadowRoot.querySelector('#items').children);\n                    this.grid.selectedItems = [];\n                    items = items.slice(0, this.grid.items.length);\n                    items.forEach((item) => {\n                        this.grid.selectedItems.push(item._item);\n                        item.children[0]._content.children[0].checked = true;\n                    });\n                    if (this.pagination) {\n                        if (!this.isLazyLoading && this.grid.selectedItems.length === this.grid.items.length) {\n                            const values = this.grid.selectedItems.map((formattedRow) => formattedRow[this.rowPropertyName]);\n                            this.selectedValues = values.slice(0, this.grid.items.length);\n                            this.selectedIndexes = this.selectedValues.map((value) => {\n                                return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n                            });\n                        }\n                    }\n                    else {\n                        if (!this.isLazyLoading && this.grid.selectedItems.length === this.data.length) {\n                            this.selectedValues = this.grid.selectedItems.map((formattedRow) => formattedRow[this.rowPropertyName]);\n                            this.selectedIndexes = this.selectedValues.map((value) => {\n                                return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n                            });\n                        }\n                    }\n                }\n                else {\n                    this.grid.selectedItems = [];\n                    if (!this.isLazyLoading) {\n                        this.selectedValues = this.grid.selectedItems.map((formattedRow) => formattedRow[this.rowPropertyName]);\n                        this.selectedIndexes = this.selectedValues.map((value) => {\n                            return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n                        });\n                    }\n                    this.checkboxClicked = false;\n                    this.checkboxAllSelectClicked = false;\n                }\n            }\n            else {\n                this.checkboxClicked = false;\n            }\n        });\n        return checkbox;\n    }\n    resetCheckboxes() {\n        return new Promise((resolve) => {\n            if (this.grid.selectedItems.length > 0) {\n                this.selectedValues = [];\n            }\n            const tableHeaderCheckbox = this.grid.querySelector('#table-header-checkbox');\n            if (tableHeaderCheckbox && tableHeaderCheckbox.children.length > 0) {\n                tableHeaderCheckbox.children[0].checked = false;\n                tableHeaderCheckbox.children[0].indeterminate = false;\n            }\n            if (this.grid.selectedItems.length > 0) {\n                this.grid.selectedItems = [];\n            }\n            resolve('done');\n        });\n    }\n    doLoadGridTask() {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                const numChilds = this.grid.shadowRoot.querySelector('#items').childElementCount;\n                if (numChilds > 0) {\n                    resolve('done');\n                }\n            }, 100);\n        });\n    }\n    filterLeafColumn(col) {\n        if (this.grid.querySelector(`vaadin-grid-filter[path=\"${col.valueField}\"]`)) {\n            const filterGridFilterElement = this.grid.querySelector(`vaadin-grid-filter[path=\"${col.valueField}\"]`);\n            const filterTextfield = filterGridFilterElement.querySelector('avl-textfield');\n            filterTextfield.addEventListener('value-changed', (e) => {\n                this.resetCheckboxes();\n            });\n            filterTextfield['value'] = col.filterKey;\n        }\n    }\n    cacheRowsForLookup(data, page, pageSize, formattedRows) {\n        data.rows.forEach((row, idx) => {\n            const tableIdx = page * pageSize + idx;\n            this.row2formattedRow.set(row, formattedRows[idx]);\n            this.idx2formattedRow.set(tableIdx, formattedRows[idx]);\n        });\n    }\n    activeItemChanged(activeItem) {\n        if (activeItem === null) {\n            activeItem = this.lastActiveItem;\n        }\n        if (this.allowActiveRow) {\n            this.activeRow = activeItem;\n            this.grid.shadowRoot.querySelectorAll('#items tr').forEach((el) => el.removeAttribute('selected'));\n            this.grid.shadowRoot.activeElement.parentNode.setAttribute('selected', 'true');\n            // set properties\n            if (!this.singleSelect) {\n                this.selectedIndex = activeItem ? activeItem[this.rowIndexPropertyName] : undefined;\n                this.selectedValue = activeItem ? activeItem[this.rowPropertyName] : undefined;\n                this.grid.shadowRoot.activeElement.parentNode.setAttribute('selected', 'true');\n            }\n        }\n        this.lastActiveItem = activeItem;\n        // single select mode\n        if (this.singleSelect && activeItem) {\n            // select clicked item or deselect it if it was previously selected\n            if (this.grid.selectedItems[0] === activeItem) {\n                this.grid.deselectItem(activeItem);\n            }\n            else {\n                // only one can be selected in single select mode\n                this.grid.selectedItems = [];\n                this.grid.selectItem(activeItem);\n            }\n            // set properties\n            this.selectedIndex = this.grid.selectedItems[0] ? activeItem[this.rowIndexPropertyName] : undefined;\n            this.selectedValue = this.grid.selectedItems[0] ? activeItem[this.rowPropertyName] : undefined;\n            return;\n        }\n    }\n    singleSelectChanged() {\n        // reset multi select if someone turned on single select\n        if (this.singleSelect) {\n            this.multiSelect = false;\n            this.selectedIndexes = [];\n            this.selectedValues = [];\n        }\n        this.grid.selectedItems = [];\n    }\n    multiSelectChanged() {\n        // reset single select if someone turned on single select\n        if (this.multiSelect) {\n            // reset selectedIndex and selectedValue\n            this.singleSelect = false;\n            this.selectedIndex = undefined;\n            this.selectedValue = undefined;\n        }\n        this.grid.selectedItems = [];\n    }\n    selectedValueChanged() {\n        if (this.multiSelect) {\n            return;\n        }\n        this.grid.selectedItems = [];\n        // if invalid value or undefined just return\n        if (!this.singleSelect || !this.selectedValue) {\n            return;\n        }\n        // selectItem ignores undefined values\n        this.grid.selectItem(this.row2formattedRow.get(this.selectedValue));\n        // sync index\n        this.selectedIndex = this.row2formattedRow.get(this.selectedValue)[this.rowIndexPropertyName];\n    }\n    selectedIndexChanged() {\n        if (this.multiSelect) {\n            return;\n        }\n        // deselect everything\n        this.grid.selectedItems = [];\n        // if invalid value or undefined just return\n        if (!this.singleSelect || typeof this.selectedIndex !== 'number') {\n            return;\n        }\n        // selectItem ignores undefined values\n        this.grid.selectItem(this.idx2formattedRow.get(this.selectedIndex));\n        // properly set selected value\n        this.selectedValue = this.idx2formattedRow.get(this.selectedIndex)[this.rowPropertyName];\n    }\n    selectedValuesChanged() {\n        this.doLoadGridTask().then(() => {\n            this.refreshSelectedValues();\n            if (!this.isLazyLoading && !this.treeColumn) {\n                this.headerCheckboxState();\n            }\n        });\n    }\n    refreshSelectedValues() {\n        if (!this.multiSelect || !Array.isArray(this.selectedValues)) {\n            return;\n        }\n        // deselect everything\n        this.grid.selectedItems = [];\n        // selectItem ignores undefined values\n        this.selectedValues.forEach((value) => this.grid.selectItem(this.row2formattedRow.get(value)));\n        // compare if already set\n        const selectedIndexes = this.selectedValues.map((value) => {\n            return this.row2formattedRow.get(value)[this.rowIndexPropertyName];\n        });\n        if (this.selectedIndexes.length !== selectedIndexes.length) {\n            this.selectedIndexes = selectedIndexes;\n            return;\n        }\n        for (const idx in selectedIndexes) {\n            if (selectedIndexes[idx] !== this.selectedIndexes[idx]) {\n                this.selectedIndexes = selectedIndexes;\n                return;\n            }\n        }\n    }\n    selectedIndexesChanged() {\n        this.doLoadGridTask().then(() => {\n            this.refreshSelectedIndexes();\n            if (!this.isLazyLoading && !this.treeColumn) {\n                this.headerCheckboxState();\n            }\n        });\n    }\n    refreshSelectedIndexes() {\n        if (!this.multiSelect || !Array.isArray(this.selectedIndexes)) {\n            return;\n        }\n        // deselect everything\n        this.grid.selectedItems = [];\n        // selectItem ignores undefined values\n        this.selectedIndexes.forEach((idx) => this.grid.selectItem(this.idx2formattedRow.get(idx)));\n        // compare if already set\n        const selectedValues = this.selectedIndexes.map((idx) => {\n            return this.idx2formattedRow.get(idx)[this.rowPropertyName];\n        });\n        if (this.selectedValues.length !== selectedValues.length) {\n            this.selectedValues = selectedValues;\n            return;\n        }\n        for (const idx in selectedValues) {\n            if (selectedValues[idx] !== this.selectedValues[idx]) {\n                this.selectedValues = selectedValues;\n                return;\n            }\n        }\n    }\n}\ncustomElements.define(AvlDatatableImpl.is, AvlDatatableImpl);\n\n//# sourceMappingURL=avl-datatable.js.map\n","import { PolymerElement } from '@polymer/polymer';\nexport class OrderImpl {\n    constructor(path, ascending) {\n        this.path = path;\n        this.ascending = ascending;\n    }\n}\nexport class VaadinGrid extends PolymerElement {\n}\n\n//# sourceMappingURL=avl-datatable.models.js.map\n","export class Column {\n    constructor(caption) {\n        this.caption = caption;\n    }\n}\nexport class LeafColumn extends Column {\n    constructor(caption, valueField, type, sortable, filterable, flexWidth, width, formatter, defaultStyle, headerIcon, headerImage, hidden, numberOptions, dateTimeOptions, menuItems, doNotFollowLinks, disabled, sortDirection, filterKey) {\n        super(caption);\n        this.caption = caption;\n        this.valueField = valueField;\n        this.type = type;\n        this.sortable = sortable;\n        this.filterable = filterable;\n        this.flexWidth = flexWidth;\n        this.width = width;\n        this.formatter = formatter;\n        this.defaultStyle = defaultStyle;\n        this.headerIcon = headerIcon;\n        this.headerImage = headerImage;\n        this.hidden = hidden;\n        this.numberOptions = numberOptions;\n        this.dateTimeOptions = dateTimeOptions;\n        this.menuItems = menuItems;\n        this.doNotFollowLinks = doNotFollowLinks;\n        this.disabled = disabled;\n        this.sortDirection = sortDirection;\n        this.filterKey = filterKey;\n    }\n}\nexport class GroupColumn extends Column {\n    constructor(caption, childColumns) {\n        super(caption);\n        this.caption = caption;\n        this.childColumns = childColumns;\n    }\n}\nexport var ColumnType;\n(function (ColumnType) {\n    ColumnType[\"Text\"] = \"Text\";\n    ColumnType[\"Number\"] = \"Number\";\n    ColumnType[\"Date\"] = \"Date\";\n    ColumnType[\"Icon\"] = \"Icon\";\n    ColumnType[\"Image\"] = \"Image\";\n    ColumnType[\"Led\"] = \"Led\";\n    ColumnType[\"Checkbox\"] = \"Checkbox\";\n    ColumnType[\"Link\"] = \"Link\";\n    ColumnType[\"Button\"] = \"Button\";\n    ColumnType[\"IconButton\"] = \"IconButton\";\n    ColumnType[\"IconText\"] = \"IconText\";\n    ColumnType[\"OverflowMenu\"] = \"OverflowMenu\";\n})(ColumnType || (ColumnType = {}));\nexport function isLeafColumn(column) {\n    return !!column.valueField;\n}\nexport function isGroupColumn(column) {\n    return !!column.childColumns;\n}\n\n//# sourceMappingURL=column-definitions.js.map\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst $_documentContainer = html `<dom-module id=\"material-grid\" theme-for=\"vaadin-grid\">\r\n  <template>\r\n    <style>\r\n      /* From: https://github.com/vaadin/vaadin-material-theme */\r\n\r\n      :host {\r\n        font-family: Roboto, sans-serif;\r\n      }\r\n\r\n      [part~=\"body-cell\"] {\r\n        height: var(--avl-datatable-row-height, 48px);\r\n      }\r\n\r\n      [part~=\"header-cell\"] {\r\n        height: 48px;\r\n      }\r\n\r\n      [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\r\n        padding: 12px 24px;\r\n      }\r\n\r\n      [part~=\"details-cell\"] ::slotted(vaadin-grid-cell-content) {\r\n        padding: 14px 16px;\r\n      }\r\n\r\n      [part~=\"header-cell\"],\r\n      [part~=\"footer-cell\"] {\r\n        background-color: var(--avl-datatable-row-background-color);\r\n        color: var(--avl-datatable-column-header-color); \r\n        font-size: 14px;\r\n        font-weight: normal;\r\n      }\r\n\r\n      [part~=\"header-cell\"] {\r\n        text-transform: uppercase;\r\n      }\r\n\r\n      /* Header and footer divider between body rows */\r\n\r\n      [part~=\"body-cell\"],\r\n      [part~=\"details-cell\"],\r\n      [part~=\"row\"]:last-child > [part~=\"header-cell\"] {\r\n        border-bottom: 1px solid var(--avl-datatable-divider-color);\r\n      }\r\n\r\n      [part~=\"row\"]:first-child > [part~=\"footer-cell\"] {\r\n        border-top: 1px solid var(--avl-datatable-divider-color);\r\n      }\r\n\r\n      /* Body rows/cells */\r\n\r\n      [part~=\"body-cell\"] {\r\n        background-color: var(--avl-datatable-row-background-color);\r\n        overflow: hidden;\r\n      }\r\n\r\n      [part~=\"row\"]:hover > [part~=\"body-cell\"] {\r\n        background: var(--avl-datatable-row-hover-color);\r\n      }\r\n\r\n      /* Selected row */\r\n      [part~=\"body-cell\"]::before {\r\n        content: \"\";\r\n        pointer-events: none;\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        background-color: var(--avl-datatable-row-selection-color);\r\n        opacity: 0;\r\n        transition: opacity 0.1s cubic-bezier(0.4, 0.0, 0.2, 0.1);\r\n      }\r\n\r\n      :host(:not([reordering])) [part~=\"row\"][selected] > [part~=\"body-cell\"]::before {\r\n        opacity: 0.2;\r\n      }\r\n\r\n      [part~=\"body-cell\"] ::slotted(vaadin-grid-cell-content) {\r\n        /* NOTE(platosha): Raise cell content above background cell pseudo elements */\r\n        position: relative;\r\n      }\r\n\r\n      /* Column reordering */\r\n\r\n      :host([reordering]) [part~=\"cell\"] {\r\n        background: var(--material-secondary-background-color);\r\n      }\r\n\r\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"allowed\"] {\r\n        background: var(--material-background-color);\r\n      }\r\n\r\n      :host([reordering]) [part~=\"cell\"][reorder-status=\"dragging\"] {\r\n        background: var(--material-background-color);\r\n      }\r\n\r\n      /* Frozen columns */\r\n\r\n      [part~=\"cell\"][last-frozen] {\r\n        border-right: 1px solid var(--avl-datatable-divider-color);\r\n      }\r\n\r\n      /* Column resizing */\r\n\r\n      :host(:not([theme~=\"column-dividers\"])) [part~=\"cell\"]:not([last-frozen]) [part=\"resize-handle\"] {\r\n        border-right: 1px solid var(--avl-datatable-divider-color);\r\n      }\r\n\r\n      /* Keyboard navigation */\r\n\r\n      [part~=\"cell\"]:focus {\r\n        outline: none;\r\n      }\r\n\r\n      :host([navigating]) [part~=\"cell\"]:focus {\r\n        box-shadow: inset 0 0 0 1px var(--avl-datatable-column-header-color);\r\n      }\r\n    </style>\r\n  </template>\r\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n\r\n//# sourceMappingURL=vaadin-grid-material-theme.css.js.map\r\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst $_documentContainer = html `<dom-module id=\"material-grid-sorter\" theme-for=\"vaadin-grid-sorter\">\r\n  <template>\r\n    <style>\r\n      :host {\r\n        justify-content: flex-start;\r\n        height: 100%;\r\n        align-items: center;\r\n        -webkit-user-select: none;\r\n        -moz-user-select: none;\r\n        user-select: none;\r\n      }\r\n\r\n      :host([direction]) {\r\n        color: var(--material-body-text-color);\r\n      }\r\n\r\n      [part=\"indicators\"] {\r\n        order: -1;\r\n      }\r\n\r\n      [part=\"indicators\"]::before {\r\n        display: inline-block;\r\n        width: 24px;\r\n        font-family: \"material-icons\";\r\n        font-size: 18px;\r\n        line-height: 18px;\r\n        transition: .1s opacity cubic-bezier(.4, 0, .2, .1), .1s width cubic-bezier(.4, 0, .2, .1);\r\n        opacity: .5;\r\n      }\r\n\r\n      :host(:not([direction])) [part=\"indicators\"]::before {\r\n        content: var(--material-icons-arrow-upward);\r\n        width: 0;\r\n        opacity: 0;\r\n      }\r\n\r\n      :host([direction]) [part=\"indicators\"]::before {\r\n        opacity: 1;\r\n      }\r\n\r\n      :host([direction=\"asc\"]) [part=\"indicators\"]::before {\r\n        content: var(--material-icons-arrow-upward);\r\n      }\r\n\r\n      :host([direction=\"desc\"]) [part=\"indicators\"]::before {\r\n        content: var(--material-icons-arrow-downward);\r\n      }\r\n\r\n      :host(:hover) [part=\"indicators\"]::before {\r\n        width: 24px;\r\n        opacity: 1;\r\n      }\r\n\r\n      [part=\"order\"] {\r\n        right: 4px;\r\n        top: -8px;\r\n        font-size: 10px;\r\n      }\r\n    </style>\r\n  </template>\r\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n\r\n//# sourceMappingURL=vaadin-grid-sorter-material-theme.css.js.map\r\n","export * from './src/avl-dataprovider';\r\n","/**\r\n * Name of the key used to set global filter value in filters map.\r\n */\r\nexport const globalFilterKey = 'globalFilter';\r\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {resolveUrl} from '@polymer/polymer/lib/utils/resolve-url.js';\n\n/**\n`iron-image` is an element for displaying an image that provides useful sizing and\npreloading options not found on the standard `<img>` tag.\n\nThe `sizing` option allows the image to be either cropped (`cover`) or\nletterboxed (`contain`) to fill a fixed user-size placed on the element.\n\nThe `preload` option prevents the browser from rendering the image until the\nimage is fully loaded.  In the interim, either the element's CSS `background-color`\ncan be be used as the placeholder, or the `placeholder` property can be\nset to a URL (preferably a data-URI, for instant rendering) for an\nplaceholder image.\n\nThe `fade` option (only valid when `preload` is set) will cause the placeholder\nimage/color to be faded out once the image is rendered.\n\nExamples:\n\n  Basically identical to `<img src=\"...\">` tag:\n\n    <iron-image src=\"http://lorempixel.com/400/400\"></iron-image>\n\n  Will letterbox the image to fit:\n\n    <iron-image style=\"width:400px; height:400px;\" sizing=\"contain\"\n      src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will crop the image to fit:\n\n    <iron-image style=\"width:400px; height:400px;\" sizing=\"cover\"\n      src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will show light-gray background until the image loads:\n\n    <iron-image style=\"width:400px; height:400px; background-color: lightgray;\"\n      sizing=\"cover\" preload src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will show a base-64 encoded placeholder image until the image loads:\n\n    <iron-image style=\"width:400px; height:400px;\" placeholder=\"data:image/gif;base64,...\"\n      sizing=\"cover\" preload src=\"http://lorempixel.com/600/400\"></iron-image>\n\n  Will fade the light-gray background out once the image is loaded:\n\n    <iron-image style=\"width:400px; height:400px; background-color: lightgray;\"\n      sizing=\"cover\" preload fade src=\"http://lorempixel.com/600/400\"></iron-image>\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-image-placeholder` | Mixin applied to #placeholder | `{}`\n`--iron-image-width` | Sets the width of the wrapped image | `auto`\n`--iron-image-height` | Sets the height of the wrapped image | `auto`\n\n@group Iron Elements\n@element iron-image\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        overflow: hidden;\n        position: relative;\n      }\n\n      #baseURIAnchor {\n        display: none;\n      }\n\n      #sizedImgDiv {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        display: none;\n      }\n\n      #img {\n        display: block;\n        width: var(--iron-image-width, auto);\n        height: var(--iron-image-height, auto);\n      }\n\n      :host([sizing]) #sizedImgDiv {\n        display: block;\n      }\n\n      :host([sizing]) #img {\n        display: none;\n      }\n\n      #placeholder {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n\n        background-color: inherit;\n        opacity: 1;\n\n        @apply --iron-image-placeholder;\n      }\n\n      #placeholder.faded-out {\n        transition: opacity 0.5s linear;\n        opacity: 0;\n      }\n    </style>\n\n    <a id=\"baseURIAnchor\" href=\"#\"></a>\n    <div id=\"sizedImgDiv\" role=\"img\" hidden$=\"[[_computeImgDivHidden(sizing)]]\" aria-hidden$=\"[[_computeImgDivARIAHidden(alt)]]\" aria-label$=\"[[_computeImgDivARIALabel(alt, src)]]\"></div>\n    <img id=\"img\" alt$=\"[[alt]]\" hidden$=\"[[_computeImgHidden(sizing)]]\" crossorigin$=\"[[crossorigin]]\" on-load=\"_imgOnLoad\" on-error=\"_imgOnError\">\n    <div id=\"placeholder\" hidden$=\"[[_computePlaceholderHidden(preload, fade, loading, loaded)]]\" class$=\"[[_computePlaceholderClassName(preload, fade, loading, loaded)]]\"></div>\n`,\n\n  is: 'iron-image',\n\n  properties: {\n    /**\n     * The URL of an image.\n     */\n    src: {type: String, value: ''},\n\n    /**\n     * A short text alternative for the image.\n     */\n    alt: {type: String, value: null},\n\n    /**\n     * CORS enabled images support:\n     * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image\n     */\n    crossorigin: {type: String, value: null},\n\n    /**\n     * When true, the image is prevented from loading and any placeholder is\n     * shown.  This may be useful when a binding to the src property is known to\n     * be invalid, to prevent 404 requests.\n     */\n    preventLoad: {type: Boolean, value: false},\n\n    /**\n     * Sets a sizing option for the image.  Valid values are `contain` (full\n     * aspect ratio of the image is contained within the element and\n     * letterboxed) or `cover` (image is cropped in order to fully cover the\n     * bounds of the element), or `null` (default: image takes natural size).\n     */\n    sizing: {type: String, value: null, reflectToAttribute: true},\n\n    /**\n     * When a sizing option is used (`cover` or `contain`), this determines\n     * how the image is aligned within the element bounds.\n     */\n    position: {type: String, value: 'center'},\n\n    /**\n     * When `true`, any change to the `src` property will cause the\n     * `placeholder` image to be shown until the new image has loaded.\n     */\n    preload: {type: Boolean, value: false},\n\n    /**\n     * This image will be used as a background/placeholder until the src image\n     * has loaded.  Use of a data-URI for placeholder is encouraged for instant\n     * rendering.\n     */\n    placeholder: {type: String, value: null, observer: '_placeholderChanged'},\n\n    /**\n     * When `preload` is true, setting `fade` to true will cause the image to\n     * fade into place.\n     */\n    fade: {type: Boolean, value: false},\n\n    /**\n     * Read-only value that is true when the image is loaded.\n     */\n    loaded: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Read-only value that tracks the loading state of the image when the\n     * `preload` option is used.\n     */\n    loading: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Read-only value that indicates that the last set `src` failed to load.\n     */\n    error: {notify: true, readOnly: true, type: Boolean, value: false},\n\n    /**\n     * Can be used to set the width of image (e.g. via binding); size may also\n     * be set via CSS.\n     */\n    width: {observer: '_widthChanged', type: Number, value: null},\n\n    /**\n     * Can be used to set the height of image (e.g. via binding); size may also\n     * be set via CSS.\n     *\n     * @attribute height\n     * @type number\n     * @default null\n     */\n    height: {observer: '_heightChanged', type: Number, value: null},\n  },\n\n  observers: [\n    '_transformChanged(sizing, position)',\n    '_loadStateObserver(src, preventLoad)'\n  ],\n\n  created: function() {\n    this._resolvedSrc = '';\n  },\n\n  _imgOnLoad: function() {\n    if (this.$.img.src !== this._resolveSrc(this.src)) {\n      return;\n    }\n\n    this._setLoading(false);\n    this._setLoaded(true);\n    this._setError(false);\n  },\n\n  _imgOnError: function() {\n    if (this.$.img.src !== this._resolveSrc(this.src)) {\n      return;\n    }\n\n    this.$.img.removeAttribute('src');\n    this.$.sizedImgDiv.style.backgroundImage = '';\n\n    this._setLoading(false);\n    this._setLoaded(false);\n    this._setError(true);\n  },\n\n  _computePlaceholderHidden: function() {\n    return !this.preload || (!this.fade && !this.loading && this.loaded);\n  },\n\n  _computePlaceholderClassName: function() {\n    return (this.preload && this.fade && !this.loading && this.loaded) ?\n        'faded-out' :\n        '';\n  },\n\n  _computeImgDivHidden: function() {\n    return !this.sizing;\n  },\n\n  _computeImgDivARIAHidden: function() {\n    return this.alt === '' ? 'true' : undefined;\n  },\n\n  _computeImgDivARIALabel: function() {\n    if (this.alt !== null) {\n      return this.alt;\n    }\n\n    // Polymer.ResolveUrl.resolveUrl will resolve '' relative to a URL x to\n    // that URL x, but '' is the default for src.\n    if (this.src === '') {\n      return '';\n    }\n\n    // NOTE: Use of `URL` was removed here because IE11 doesn't support\n    // constructing it. If this ends up being problematic, we should\n    // consider reverting and adding the URL polyfill as a dev dependency.\n    var resolved = this._resolveSrc(this.src);\n    // Remove query parts, get file name.\n    return resolved.replace(/[?|#].*/g, '').split('/').pop();\n  },\n\n  _computeImgHidden: function() {\n    return !!this.sizing;\n  },\n\n  _widthChanged: function() {\n    this.style.width = isNaN(this.width) ? this.width : this.width + 'px';\n  },\n\n  _heightChanged: function() {\n    this.style.height = isNaN(this.height) ? this.height : this.height + 'px';\n  },\n\n  _loadStateObserver: function(src, preventLoad) {\n    var newResolvedSrc = this._resolveSrc(src);\n    if (newResolvedSrc === this._resolvedSrc) {\n      return;\n    }\n\n    this._resolvedSrc = '';\n    this.$.img.removeAttribute('src');\n    this.$.sizedImgDiv.style.backgroundImage = '';\n\n    if (src === '' || preventLoad) {\n      this._setLoading(false);\n      this._setLoaded(false);\n      this._setError(false);\n    } else {\n      this._resolvedSrc = newResolvedSrc;\n      this.$.img.src = this._resolvedSrc;\n      this.$.sizedImgDiv.style.backgroundImage =\n          'url(\"' + this._resolvedSrc + '\")';\n\n      this._setLoading(true);\n      this._setLoaded(false);\n      this._setError(false);\n    }\n  },\n\n  _placeholderChanged: function() {\n    this.$.placeholder.style.backgroundImage =\n        this.placeholder ? 'url(\"' + this.placeholder + '\")' : '';\n  },\n\n  _transformChanged: function() {\n    var sizedImgDivStyle = this.$.sizedImgDiv.style;\n    var placeholderStyle = this.$.placeholder.style;\n\n    sizedImgDivStyle.backgroundSize = placeholderStyle.backgroundSize =\n        this.sizing;\n\n    sizedImgDivStyle.backgroundPosition = placeholderStyle.backgroundPosition =\n        this.sizing ? this.position : '';\n\n    sizedImgDivStyle.backgroundRepeat = placeholderStyle.backgroundRepeat =\n        this.sizing ? 'no-repeat' : '';\n  },\n\n  _resolveSrc: function(testSrc) {\n    var resolved = resolveUrl(testSrc, this.$.baseURIAnchor.href);\n    // NOTE: Use of `URL` was removed here because IE11 doesn't support\n    // constructing it. If this ends up being problematic, we should\n    // consider reverting and adding the URL polyfill as a dev dependency.\n    if (resolved.length >= 2 && resolved[0] === '/' && resolved[1] !== '/') {\n      // In IE location.origin might not work\n      // https://connect.microsoft.com/IE/feedback/details/1763802/location-origin-is-undefined-in-ie-11-on-windows-10-but-works-on-windows-7\n      resolved = (location.origin || location.protocol + '//' + location.host) +\n          resolved;\n    }\n    return resolved;\n  }\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-checkbox>` is a Web Component for customized checkboxes.\n *\n * ```html\n * <vaadin-checkbox>\n *   Make my profile visible\n * </vaadin-checkbox>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name         | Description\n * ------------------|----------------\n * `checkbox`        | The wrapper element for the native <input type=\"checkbox\">\n * `label`           | The wrapper element in which the component's children, namely the label, is slotted\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|--------------\n * `active`     | Set when the checkbox is pressed down, either with mouse, touch or the keyboard. | `:host`\n * `disabled`   | Set when the checkbox is disabled. | `:host`\n * `focus-ring` | Set when the checkbox is focused using the keyboard. | `:host`\n * `focused`    | Set when the checkbox is focused. | `:host`\n * `indeterminate` | Set when the checkbox is in indeterminate mode. | `:host`\n * `checked` | Set when the checkbox is checked. | `:host`\n * `empty` | Set when there is no label provided. | `label`\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes ElementMixin\n * @mixes ControlStateMixin\n * @mixes ThemableMixin\n * @mixes GestureEventListeners\n * @demo demo/index.html\n */\nclass CheckboxElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        display: inline-flex;\n        align-items: baseline;\n        outline: none;\n      }\n\n      [part=\"checkbox\"] {\n        position: relative;\n        display: inline-block;\n        flex: none;\n      }\n\n      input[type=\"checkbox\"] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n        margin: 0;\n      }\n\n      :host([disabled]) {\n        -webkit-tap-highlight-color: transparent;\n      }\n    </style>\n\n    <label>\n      <span part=\"checkbox\">\n        <input type=\"checkbox\" checked=\"{{checked::change}}\" disabled\\$=\"[[disabled]]\" indeterminate=\"{{indeterminate::change}}\" role=\"presentation\" tabindex=\"-1\">\n      </span>\n\n      <span part=\"label\">\n        <slot></slot>\n      </span>\n    </label>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-checkbox';\n  }\n\n  static get version() {\n    return '2.5.0';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the checkbox is checked.\n       * @type {boolean}\n       */\n      checked: {\n        type: Boolean,\n        value: false,\n        notify: true,\n        observer: '_checkedChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * Indeterminate state of the checkbox when it's neither checked nor unchecked, but undetermined.\n       * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#Indeterminate_state_checkboxes\n       * @type {boolean}\n       */\n      indeterminate: {\n        type: Boolean,\n        notify: true,\n        observer: '_indeterminateChanged',\n        reflectToAttribute: true,\n        value: false\n      },\n\n      /**\n       * The value given to the data submitted with the checkbox's name to the server when the control is inside a form.\n       */\n      value: {\n        type: String,\n        value: 'on'\n      },\n\n      /** @private */\n      _nativeCheckbox: {\n        type: Object\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    /**\n     * @type {string}\n     * Name of the element.\n     */\n    this.name;\n  }\n\n  get name() {\n    return this.checked ? this._storedName : '';\n  }\n\n  set name(name) {\n    this._storedName = name;\n  }\n\n  ready() {\n    super.ready();\n\n    this.setAttribute('role', 'checkbox');\n\n    this._nativeCheckbox = this.shadowRoot.querySelector('input[type=\"checkbox\"]');\n\n    this.addEventListener('click', this._handleClick.bind(this));\n\n    this._addActiveListeners();\n\n    const attrName = this.getAttribute('name');\n    if (attrName) {\n      this.name = attrName;\n    }\n\n    this.shadowRoot.querySelector('[part~=\"label\"]').querySelector('slot')\n      .addEventListener('slotchange', this._updateLabelAttribute.bind(this));\n\n    this._updateLabelAttribute();\n  }\n\n  /** @private */\n  _updateLabelAttribute() {\n    const label = this.shadowRoot.querySelector('[part~=\"label\"]');\n    const assignedNodes = label.firstElementChild.assignedNodes();\n    if (this._isAssignedNodesEmpty(assignedNodes)) {\n      label.setAttribute('empty', '');\n    } else {\n      label.removeAttribute('empty');\n    }\n  }\n\n  /** @private */\n  _isAssignedNodesEmpty(nodes) {\n    // The assigned nodes considered to be empty if there is no slotted content or only one empty text node\n    return nodes.length === 0 ||\n          (nodes.length == 1\n          && nodes[0].nodeType == Node.TEXT_NODE\n          && nodes[0].textContent.trim() === '');\n  }\n\n  /** @private */\n  _checkedChanged(checked) {\n    if (this.indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', Boolean(checked));\n    }\n  }\n\n  /** @private */\n  _indeterminateChanged(indeterminate) {\n    if (indeterminate) {\n      this.setAttribute('aria-checked', 'mixed');\n    } else {\n      this.setAttribute('aria-checked', this.checked);\n    }\n  }\n\n  /** @private */\n  _addActiveListeners() {\n    // DOWN\n    this._addEventListenerToNode(this, 'down', (e) => {\n      if (this.__interactionsAllowed(e)) {\n        this.setAttribute('active', '');\n      }\n    });\n\n    // UP\n    this._addEventListenerToNode(this, 'up', () => this.removeAttribute('active'));\n\n    // KEYDOWN\n    this.addEventListener('keydown', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this.setAttribute('active', '');\n      }\n    });\n\n    // KEYUP\n    this.addEventListener('keyup', e => {\n      if (this.__interactionsAllowed(e) && e.keyCode === 32) {\n        e.preventDefault();\n        this._toggleChecked();\n        this.removeAttribute('active');\n\n        if (this.indeterminate) {\n          this.indeterminate = false;\n        }\n      }\n    });\n  }\n\n  /**\n   * @return {!HTMLInputElement}\n   * @protected\n   */\n  get focusElement() {\n    return this.shadowRoot.querySelector('input');\n  }\n\n  /**\n   * True if users' interactions (mouse or keyboard)\n   * should toggle the checkbox\n   */\n  __interactionsAllowed(e) {\n    if (this.disabled) {\n      return false;\n    }\n\n    // https://github.com/vaadin/vaadin-checkbox/issues/63\n    if (e.target.localName === 'a') {\n      return false;\n    }\n\n    return true;\n  }\n\n  /** @private */\n  _handleClick(e) {\n    if (this.__interactionsAllowed(e)) {\n      if (!this.indeterminate) {\n        if (e.composedPath()[0] !== this._nativeCheckbox) {\n          e.preventDefault();\n          this._toggleChecked();\n        }\n      } else {\n        /*\n         * Required for IE 11 and Edge.\n         * See issue here: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7344418/\n         */\n        this.indeterminate = false;\n        e.preventDefault();\n        this._toggleChecked();\n      }\n    }\n  }\n\n  /** @protected */\n  _toggleChecked() {\n    this.checked = !this.checked;\n    this.dispatchEvent(new CustomEvent('change', {composed: false, bubbles: true}));\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n}\n\ncustomElements.define(CheckboxElement.is, CheckboxElement);\n\nexport { CheckboxElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n// We consider the keyboard to be active if the window has received a keydown\n// event since the last mousedown event.\nlet keyboardActive = false;\n\n// Listen for top-level keydown and mousedown events.\n// Use capture phase so we detect events even if they're handled.\nwindow.addEventListener(\n  'keydown',\n  () => {\n    keyboardActive = true;\n  },\n  {capture: true}\n);\n\nwindow.addEventListener(\n  'mousedown',\n  () => {\n    keyboardActive = false;\n  },\n  {capture: true}\n);\n\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n * @private\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       * @private\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * @private\n       */\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  /**\n   * @protected\n   */\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        // Only focus if the focus is received from somewhere outside\n        if (!this.contains(e.relatedTarget)) {\n          this._focus();\n        }\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after Done is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = '0';\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  /**\n   * @param {boolean} focused\n   * @protected\n   */\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && keyboardActive) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   * @return {Element | null | undefined}\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  /**\n   * @protected\n   */\n  _focus() {\n    if (!this.focusElement || this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    if (!this.focusElement) {\n      return;\n    }\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  /**\n   * @param {boolean} disabled\n   * @private\n   */\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  /**\n   * @param {number | null | undefined} tabindex\n   * @private\n   */\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","/**\n@license\nCopyright (c) 2020 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * Helper that provides a set of functions for RTL.\n */\nclass DirHelper {\n  /**\n   * Get the scroll type in the current browser view.\n   *\n   * @return {string} the scroll type. Possible values are `default|reverse|negative`\n   */\n  static detectScrollType() {\n    const dummy = document.createElement('div');\n    dummy.textContent = 'ABCD';\n    dummy.dir = 'rtl';\n    dummy.style.fontSize = '14px';\n    dummy.style.width = '4px';\n    dummy.style.height = '1px';\n    dummy.style.position = 'absolute';\n    dummy.style.top = '-1000px';\n    dummy.style.overflow = 'scroll';\n    document.body.appendChild(dummy);\n\n    let cachedType = 'reverse';\n    if (dummy.scrollLeft > 0) {\n      cachedType = 'default';\n    } else {\n      dummy.scrollLeft = 2;\n      if (dummy.scrollLeft < 2) {\n        cachedType = 'negative';\n      }\n    }\n    document.body.removeChild(dummy);\n    return cachedType;\n  }\n\n  /**\n   * Get the scrollLeft value of the element relative to the direction\n   *\n   * @param {string} scrollType type of the scroll detected with `detectScrollType`\n   * @param {string} direction current direction of the element\n   * @param {Element} element\n   * @return {number} the scrollLeft value.\n  */\n  static getNormalizedScrollLeft(scrollType, direction, element) {\n    const {scrollLeft} = element;\n    if (direction !== 'rtl' || !scrollType) {\n      return scrollLeft;\n    }\n\n    switch (scrollType) {\n      case 'negative':\n        return element.scrollWidth - element.clientWidth + scrollLeft;\n      case 'reverse':\n        return element.scrollWidth - element.clientWidth - scrollLeft;\n    }\n    return scrollLeft;\n  }\n\n  /**\n   * Set the scrollLeft value of the element relative to the direction\n   *\n   * @param {string} scrollType type of the scroll detected with `detectScrollType`\n   * @param {string} direction current direction of the element\n   * @param {Element} element\n   * @param {number} scrollLeft the scrollLeft value to be set\n   */\n  static setNormalizedScrollLeft(scrollType, direction, element, scrollLeft) {\n    if (direction !== 'rtl' || !scrollType) {\n      element.scrollLeft = scrollLeft;\n      return;\n    }\n\n    switch (scrollType) {\n      case 'negative':\n        element.scrollLeft = element.clientWidth - element.scrollWidth + scrollLeft;\n        break;\n      case 'reverse':\n        element.scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;\n        break;\n      default:\n        element.scrollLeft = scrollLeft;\n        break;\n    }\n  }\n}\n\nexport { DirHelper };\n","import { DirHelper } from './vaadin-dir-helper.js';\n/**\n * Array of Vaadin custom element classes that have been subscribed to the dir changes.\n */\nconst directionSubscribers = [];\nconst directionUpdater = function() {\n  const documentDir = getDocumentDir();\n  directionSubscribers.forEach(element => {\n    alignDirs(element, documentDir);\n  });\n};\n\nlet scrollType;\n\nconst directionObserver = new MutationObserver(directionUpdater);\ndirectionObserver.observe(document.documentElement, {attributes: true, attributeFilter: ['dir']});\n\nconst alignDirs = function(element, documentDir) {\n  if (documentDir) {\n    element.setAttribute('dir', documentDir);\n  } else {\n    element.removeAttribute('dir');\n  }\n};\n\nconst getDocumentDir = function() {\n  return document.documentElement.getAttribute('dir');\n};\n\n/**\n * @polymerMixin\n */\nexport const DirMixin = superClass => class VaadinDirMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * @protected\n       */\n      dir: {\n        type: String,\n        readOnly: true\n      }\n    };\n  }\n\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    if (!scrollType) {\n      scrollType = DirHelper.detectScrollType();\n    }\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute('dir')) {\n      this.__subscribe();\n      alignDirs(this, getDocumentDir());\n    }\n  }\n\n  /** @protected */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name !== 'dir') {\n      return;\n    }\n\n    // New value equals to the document direction and the element is not subscribed to the changes\n    const newValueEqlDocDir = newValue === getDocumentDir() && directionSubscribers.indexOf(this) === -1;\n    // Value was emptied and the element is not subscribed to the changes\n    const newValueEmptied = !newValue && oldValue && directionSubscribers.indexOf(this) === -1;\n    // New value is different and the old equals to document direction and the element is not subscribed to the changes\n    const newDiffValue = newValue !== getDocumentDir() && oldValue === getDocumentDir();\n\n    if (newValueEqlDocDir || newValueEmptied) {\n      this.__subscribe();\n      alignDirs(this, getDocumentDir());\n    } else if (newDiffValue) {\n      this.__subscribe(false);\n    }\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.__subscribe(false);\n    this.removeAttribute('dir');\n  }\n\n  /** @private */\n  __subscribe(push = true) {\n    if (push) {\n      directionSubscribers.indexOf(this) === -1 &&\n        directionSubscribers.push(this);\n    } else {\n      directionSubscribers.indexOf(this) > -1 &&\n        directionSubscribers.splice(directionSubscribers.indexOf(this), 1);\n    }\n  }\n\n  /**\n   * @param {Element} element\n   * @return {number}\n   * @protected\n   */\n  __getNormalizedScrollLeft(element) {\n    return DirHelper.getNormalizedScrollLeft(scrollType, this.getAttribute('dir') || 'ltr', element);\n  }\n\n  /**\n   * @param {Element} element\n   * @param {number} scrollLeft\n   * @protected\n   */\n  __setNormalizedScrollLeft(element, scrollLeft) {\n    return DirHelper.setNormalizedScrollLeft(scrollType, this.getAttribute('dir') || 'ltr', element, scrollLeft);\n  }\n};\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\n\nimport { DirMixin } from './vaadin-dir-mixin.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\nconst registered = new Set();\n\n/**\n * @polymerMixin\n * @mixes DirMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends DirMixin(superClass) {\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const {is} = this;\n\n    // Registers a class prototype for telemetry purposes.\n    if (is && !registered.has(is)) {\n      window.Vaadin.registrations.push(this);\n      registered.add(is);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n\n  constructor() {\n    super();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","import './vaadin-grid.js';\nimport './vaadin-grid-column-group.js';\nimport './vaadin-grid-filter.js';\nimport './vaadin-grid-filter-column.js';\nimport './vaadin-grid-sorter.js';\nimport './vaadin-grid-sort-column.js';\nimport './vaadin-grid-selection-column.js';\nimport './vaadin-grid-tree-toggle.js';\nimport './vaadin-grid-tree-column.js';\n\n/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\n;\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n\nThis is a fork of <iron-list> for <vaadin-grid>'s internal purposes only!\nTo update:\n1. Get the most recent code from https://github.com/PolymerElements/iron-list/\n2. Remove the  <dom-module id=\"iron-list\"> to avoid collisions with actual <iron-list>\n3. Change \"Polymer({\" to \"window.PolymerIronList = Polymer.Class({\" to expose the class\n3.1. Add @namespace\n4. Optional: Remove all properties and functions not needed by <vaadin-grid>\n5. Profit!\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { IronScrollTargetBehavior } from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport { animationFrame, idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { Class } from '@polymer/polymer/lib/legacy/class.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { Debouncer, enqueueDebouncer } from '@polymer/polymer/lib/utils/debounce.js';\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar ANIMATION_FRAME = animationFrame;\nvar IDLE_TIME = idlePeriod;\nvar MICRO_TASK = microTask;\n\n/**\n * @constructor\n */\nexport const PolymerIronList = Class({\n\n  behaviors: [\n    IronResizableBehavior,\n    IronScrollTargetBehavior\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplatizerNode>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A Polymer collection for the items.\n   * @type {?Polymer.Collection}\n   */\n  _collection: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size = this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) % this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity : this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) || 0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(this._virtualCount, this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow - 1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop;\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop = this.scrollTarget === this ? 0 : parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment = Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce('_increasePoolIfNeeded', this._increasePoolIfNeeded.bind(this, 0), MICRO_TASK);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      offsetContent = bottom - scrollBottom;\n    }\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount || offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return {indexes: idxs, physicalTop: top - this._scrollOffset};\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 && this._physicalBottom - 1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(this._physicalCount + count,\n      DEFAULT_PHYSICAL_COUNT, this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the focused item.\n      // In this situation, the focused item is currently rendered and its model would\n      // have changed after increasing the pool if the physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) < this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          nextIncrease\n        ), MICRO_TASK);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is optimal.\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          this._clamp(Math.round(50 / this._templateCost), 1, nextIncrease)\n        ), IDLE_TIME);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._collection = this.items && undefined ?\n        undefined.get(this.items) : null;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, ANIMATION_FRAME);\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) + pidx;\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize = Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ?\n        oldPhysicalSize :\n        Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize = this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n        ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n        this._physicalAverageCount);\n    }\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    this._iterateItems(function(pidx, vidx) {\n      this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n      y += this._physicalSizes[pidx];\n    });\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ? this._physicalTop : Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight = (this._physicalBottom +\n          Math.max(this._virtualCount - this._physicalCount - this._virtualStart, 0) * this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate || this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate || this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate || Math.abs(this._estScrollHeight - this._scrollHeight) >= this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount - 1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart = this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop = targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      // Skip the resize event on touch devices when the address bar slides up.\n      this.updateViewportBoundaries();\n      if (this._isVisible) {\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, ANIMATION_FRAME);\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow : idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return (this._physicalStart + (vidx - this._virtualStart)) % this._physicalCount;\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    this._debouncers = this._debouncers || {};\n    this._debouncers[name] = Debouncer.debounce(\n      this._debouncers[name],\n      asyncModule,\n      cb.bind(this));\n    enqueueDebouncer(this._debouncers[name]);\n  }\n\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const A11yMixin = superClass => class A11yMixin extends superClass {\n  static get observers() {\n    return [\n      '_a11yUpdateGridSize(size, _columnTree, _columnTree.*)'\n    ];\n  }\n\n  /** @private */\n  _a11yGetHeaderRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer || col.path || col.header)).length;\n  }\n\n  /** @private */\n  _a11yGetFooterRowCount(_columnTree) {\n    return _columnTree.filter(level => level.some(col => col._headerTemplate || col.headerRenderer)).length;\n  }\n\n  /** @private */\n  _a11yUpdateGridSize(size, _columnTree) {\n    if (size === undefined || _columnTree === undefined) {\n      return;\n    }\n\n    const bodyColumns = _columnTree[_columnTree.length - 1];\n    this.$.table.setAttribute(\n      'aria-rowcount',\n      size + this._a11yGetHeaderRowCount(_columnTree) + this._a11yGetFooterRowCount(_columnTree)\n    );\n    this.$.table.setAttribute('aria-colcount', bodyColumns && bodyColumns.length || 0);\n\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n  }\n\n  /** @protected */\n  _a11yUpdateHeaderRows() {\n    Array.from(this.$.header.children).forEach((headerRow, index) =>\n      headerRow.setAttribute('aria-rowindex', index + 1)\n    );\n  }\n\n  /** @protected */\n  _a11yUpdateFooterRows() {\n    Array.from(this.$.footer.children).forEach((footerRow, index) =>\n      footerRow.setAttribute(\n        'aria-rowindex',\n        this._a11yGetHeaderRowCount(this._columnTree) + this.size + index + 1\n      )\n    );\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {number} index\n   * @protected\n   */\n  _a11yUpdateRowRowindex(row, index) {\n    row.setAttribute('aria-rowindex', index + this._a11yGetHeaderRowCount(this._columnTree) + 1);\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {boolean} selected\n   * @protected\n   */\n  _a11yUpdateRowSelected(row, selected) {\n    // Jaws reads selection only for rows, NVDA only for cells\n    row.setAttribute('aria-selected', Boolean(selected));\n    Array.from(row.children).forEach(cell =>\n      cell.setAttribute('aria-selected', Boolean(selected))\n    );\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {number} level\n   * @protected\n   */\n  _a11yUpdateRowLevel(row, level) {\n    row.setAttribute('aria-level', level + 1);\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {boolean} detailsOpened\n   * @protected\n   */\n  _a11yUpdateRowDetailsOpened(row, detailsOpened) {\n    Array.from(row.children).forEach(cell => {\n      if (typeof detailsOpened === 'boolean') {\n        cell.setAttribute('aria-expanded', detailsOpened);\n      } else {\n        if (cell.hasAttribute('aria-expanded')) {\n          cell.removeAttribute('aria-expanded');\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {!HTMLElement} detailsCell\n   * @protected\n   */\n  _a11ySetRowDetailsCell(row, detailsCell) {\n    Array.from(row.children).forEach(cell => {\n      if (cell !== detailsCell) {\n        cell.setAttribute('aria-controls', detailsCell.id);\n      }\n    });\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {number} colspan\n   * @protected\n   */\n  _a11yUpdateCellColspan(cell, colspan) {\n    cell.setAttribute('aria-colspan', Number(colspan));\n  }\n\n  /** @protected */\n  _a11yUpdateSorters() {\n    Array.from(this.querySelectorAll('vaadin-grid-sorter')).forEach(sorter => {\n      let cellContent = sorter.parentNode;\n      while (cellContent && cellContent.localName !== 'vaadin-grid-cell-content') {\n        cellContent = cellContent.parentNode;\n      }\n      if (cellContent && cellContent.assignedSlot) {\n        const cell = cellContent.assignedSlot.parentNode;\n        cell.setAttribute('aria-sort', {\n          'asc': 'ascending',\n          'desc': 'descending'\n        }[String(sorter.direction)] || 'none');\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const ActiveItemMixin = superClass => class ActiveItemMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * The item user has last interacted with. Turns to `null` after user deactivates\n       * the item by re-interacting with the currently active item.\n       * @type {GridItem}\n       */\n      activeItem: {\n        type: Object,\n        notify: true,\n        value: null\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this.$.scroller.addEventListener('click', this._onClick.bind(this));\n    this.addEventListener('cell-activate', this._activateItem.bind(this));\n  }\n\n  /** @private */\n  _activateItem(e) {\n    const model = e.detail.model;\n    const clickedItem = model ? model.item : null;\n\n    if (clickedItem) {\n      this.activeItem = !this._itemsEqual(this.activeItem, clickedItem) ? clickedItem : null;\n    }\n  }\n\n  /**\n   * We need to listen to click instead of tap because on mobile safari, the\n   * document.activeElement has not been updated (focus has not been shifted)\n   * yet at the point when tap event is being executed.\n   * @param {!MouseEvent} e\n   * @protected\n   */\n  _onClick(e) {\n    if (e.defaultPrevented) {\n      // Something has handled this click already, e. g., <vaadin-grid-sorter>\n      return;\n    }\n\n    const path = e.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n    if (!cell || cell.getAttribute('part').indexOf('details-cell') > -1) {\n      return;\n    }\n    const cellContent = cell._content;\n\n    const activeElement = this.getRootNode().activeElement;\n    const cellContentHasFocus = cellContent.contains(activeElement) &&\n      // MSIE bug: flex children receive focus. Make type & attributes check.\n      (!this._ie || this._isFocusable(activeElement));\n    if (!cellContentHasFocus && !this._isFocusable(e.target)) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  /**\n   * @param {!Element} target\n   * @return {boolean}\n   * @protected\n   */\n  _isFocusable(target) {\n    return isFocusable(target);\n  }\n};\n\n/**\n * @param {!Element} target\n * @return {boolean}\n * @protected\n */\nexport const isFocusable = (target) => {\n  if (!target.parentNode) {\n    return false;\n  }\n  const focusables = Array.from(target.parentNode\n    .querySelectorAll('[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]'))\n    .filter(element => element.getAttribute('part') !== 'cell body-cell');\n\n  const isFocusableElement = focusables.indexOf(target) !== -1;\n  return !target.disabled && isFocusableElement;\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n\n/**\n * @polymerMixin\n */\nexport const ArrayDataProviderMixin = superClass => class ArrayDataProviderMixin extends superClass {\n\n  static get properties() {\n\n    return {\n      /**\n       * An array containing the items which will be stamped to the column template\n       * instances.\n       *\n       * @type {Array<!GridItem> | undefined}\n       */\n      items: Array\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_itemsChanged(items, items.*, isAttached)'\n    ];\n  }\n\n  /** @private */\n  _itemsChanged(items, splices, isAttached) {\n    if (!isAttached) {\n      return;\n    }\n    if (!Array.isArray(items)) {\n      if (items === undefined || items === null) {\n        this.size = 0;\n      }\n      if (this.dataProvider === this._arrayDataProvider) {\n        this.dataProvider = undefined;\n      }\n      return;\n    }\n\n    this.size = items.length;\n    this.dataProvider = this.dataProvider || this._arrayDataProvider;\n    this.clearCache();\n    this._ensureFirstPageLoaded();\n  }\n\n  /**\n   * @param {GridDataProviderParams} opts\n   * @param {GridDataProviderCallback} cb\n   * @protected\n   */\n  _arrayDataProvider(opts, cb) {\n    let items = (Array.isArray(this.items) ? this.items : []).slice(0);\n\n    if (this._filters && this._checkPaths(this._filters, 'filtering', items)) {\n      items = this._filter(items);\n    }\n\n    this.size = items.length;\n\n    if (opts.sortOrders.length && this._checkPaths(this._sorters, 'sorting', items)) {\n      items = items.sort(this._multiSort.bind(this));\n    }\n\n    const start = opts.page * opts.pageSize;\n    const end = start + opts.pageSize;\n    const slice = items.slice(start, end);\n    cb(slice, items.length);\n  }\n\n  /**\n   * Check array of filters/sorters for paths validity, console.warn invalid items\n   * @param {!Array<!GridFilter | !GridSorter>} arrayToCheck The array of filters/sorters to check\n   * @param {string} action The name of action to include in warning (filtering, sorting)\n   * @param {!Array<!GridItem>} items\n   * @protected\n   */\n  _checkPaths(arrayToCheck, action, items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let result = true;\n\n    for (var i in arrayToCheck) {\n      const path = arrayToCheck[i].path;\n\n      // skip simple paths\n      if (!path || path.indexOf('.') === -1) {\n        continue;\n      }\n\n      const parentProperty = path.replace(/\\.[^\\.]*$/, ''); // a.b.c -> a.b\n      if (Base.get(parentProperty, items[0]) === undefined) {\n        console.warn(`Path \"${path}\" used for ${action} does not exist in all of the items, ${action} is disabled.`);\n        result = false;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * @param {unknown} a\n   * @param {unknown} b\n   * @return {number}\n   * @protected\n   */\n  _multiSort(a, b) {\n    return this._sorters.map(sort => {\n      if (sort.direction === 'asc') {\n        return this._compare(Base.get(sort.path, a), Base.get(sort.path, b));\n      } else if (sort.direction === 'desc') {\n        return this._compare(Base.get(sort.path, b), Base.get(sort.path, a));\n      }\n      return 0;\n    }).reduce((p, n) => {\n      return p ? p : n;\n    }, 0);\n  }\n\n  /**\n   * @param {unknown} value\n   * @return {string}\n   * @protected\n   */\n  _normalizeEmptyValue(value) {\n    if ([undefined, null].indexOf(value) >= 0) {\n      return '';\n    } else if (isNaN(value)) {\n      return value.toString();\n    } else {\n      return value;\n    }\n  }\n\n  /**\n   * @param {unknown} a\n   * @param {unknown} b\n   * @return {number}\n   * @protected\n   */\n  _compare(a, b) {\n    a = this._normalizeEmptyValue(a);\n    b = this._normalizeEmptyValue(b);\n\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  }\n\n  /**\n   * @param {!Array<!GridItem>} items\n   * @return {!Array<!GridItem>}\n   * @protected\n   */\n  _filter(items) {\n    return items.filter((item, index) => {\n      return this._filters.filter(filter => {\n        const value = this._normalizeEmptyValue(Base.get(filter.path, item));\n        const filterValueLowercase = this._normalizeEmptyValue(filter.value).toString().toLowerCase();\n        return value.toString().toLowerCase().indexOf(filterValueLowercase) === -1;\n      }).length === 0;\n    });\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { ColumnBaseMixin } from './vaadin-grid-column.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n/**\n * A `<vaadin-grid-column-group>` is used to make groups of columns in `<vaadin-grid>` and\n * to configure additional headers and footers.\n *\n * Groups can be nested to create complex header and footer configurations.\n *\n * The `class` attribute is used to differentiate header and footer templates.\n *\n * #### Example:\n * ```html\n * <vaadin-grid-column-group resizable>\n *  <template class=\"header\">Name</template>\n *\n *  <vaadin-grid-column>\n *    <template class=\"header\">First</template>\n *    <template>[[item.name.first]]</template>\n *  </vaadin-grid-column>\n *  <vaadin-grid-column>\n *    <template class=\"header\">Last</template>\n *    <template>[[item.name.last]]</template>\n *  </vaadin-grid-column>\n * </vaadin-grid-column-group>\n * ```\n *\n * @extends PolymerElement\n * @mixes ColumnBaseMixin\n */\nclass GridColumnGroupElement extends ColumnBaseMixin(PolymerElement) {\n\n  static get is() {\n    return 'vaadin-grid-column-group';\n  }\n\n  static get properties() {\n    return {\n      /** @private */\n      _childColumns: {\n        value: function() {\n          return this._getChildColumns(this);\n        }\n      },\n\n      /**\n       * Flex grow ratio for the column group as the sum of the ratios of its child columns.\n       * @attr {number} flex-grow\n       */\n      flexGrow: {\n        type: Number,\n        readOnly: true\n      },\n\n      /**\n       * Width of the column group as the sum of the widths of its child columns.\n       */\n      width: {\n        type: String,\n        readOnly: true\n      },\n\n      /** @private */\n      _visibleChildColumns: Array,\n\n      /** @private */\n      _colSpan: Number,\n\n      /** @private */\n      _rootColumns: Array\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateVisibleChildColumns(_childColumns)',\n      '_childColumnsChanged(_childColumns)',\n      '_groupFrozenChanged(frozen, _rootColumns)',\n      '_groupHiddenChanged(hidden, _rootColumns)',\n      '_visibleChildColumnsChanged(_visibleChildColumns)',\n      '_colSpanChanged(_colSpan, _headerCell, _footerCell)',\n      '_groupOrderChanged(_order, _rootColumns)',\n      '_groupReorderStatusChanged(_reorderStatus, _rootColumns)',\n      '_groupResizableChanged(resizable, _rootColumns)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this._addNodeObserver();\n    this._updateFlexAndWidth();\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._observer && this._observer.disconnect();\n  }\n\n  /**\n   * @param {string} path\n   * @param {unknown=} value\n   * @protected\n   */\n  _columnPropChanged(path, value) {\n    if (path === 'hidden') {\n      this._preventHiddenCascade = true;\n      this._updateVisibleChildColumns(this._childColumns);\n      this._preventHiddenCascade = false;\n    }\n\n    if (/flexGrow|width|hidden|_childColumns/.test(path)) {\n      this._updateFlexAndWidth();\n    }\n\n    if (path === 'frozen') {\n      // Dont unfreeze the frozen group because of a non-frozen child\n      this.frozen = this.frozen || value;\n    }\n\n    if (path === 'lastFrozen') {\n      // Dont unfreeze the frozen group because of a non-frozen child\n      this._lastFrozen = this._lastFrozen || value;\n    }\n  }\n\n  /** @private */\n  _groupOrderChanged(order, rootColumns) {\n    if (rootColumns) {\n      const _rootColumns = rootColumns.slice(0);\n\n      if (!order) {\n        _rootColumns.forEach(column => column._order = 0);\n        return;\n      }\n      // The parent column order number cascades downwards to it's children\n      // so that the resulting order numbering constructs as follows:\n      // [             1000              ]\n      // [     1100    ] | [     1200    ]\n      // [1110] | [1120] | [1210] | [1220]\n\n      // Trailing zeros are counted so we know the level on which we're working on.\n      const trailingZeros = /(0+)$/.exec(order).pop().length;\n\n      // In an unlikely situation where a group has more than 9 child columns,\n      // the child scope must have 1 digit less...\n      const childCountDigits = ~~(Math.log(rootColumns.length) / Math.log(Math.LN10)) + 1;\n\n      // Final scope for the child columns needs to mind both factors.\n      const scope = Math.pow(10, trailingZeros - childCountDigits);\n\n\n      if (_rootColumns[0] && _rootColumns[0]._order) {\n        _rootColumns.sort((a, b) => a._order - b._order);\n      }\n\n      _rootColumns.forEach((column, index) => column._order = order + ((index + 1) * scope));\n    }\n  }\n\n  /** @private */\n  _groupReorderStatusChanged(reorderStatus, rootColumns) {\n    if (reorderStatus === undefined || rootColumns === undefined) {\n      return;\n    }\n\n    rootColumns.forEach(column => column._reorderStatus = reorderStatus);\n  }\n\n  /** @private */\n  _groupResizableChanged(resizable, rootColumns) {\n    if (resizable === undefined || rootColumns === undefined) {\n      return;\n    }\n\n    rootColumns.forEach(column => column.resizable = resizable);\n  }\n\n  /** @private */\n  _updateVisibleChildColumns(childColumns) {\n    this._visibleChildColumns = Array.prototype.filter.call(childColumns, col => !col.hidden);\n  }\n\n  /** @private */\n  _childColumnsChanged(childColumns) {\n    if (!this._autoHidden && this.hidden) {\n      Array.prototype.forEach.call(childColumns, column => column.hidden = true);\n      this._updateVisibleChildColumns(childColumns);\n    }\n  }\n\n  /** @protected */\n  _updateFlexAndWidth() {\n    if (!this._visibleChildColumns) {\n      return;\n    }\n\n    if (this._visibleChildColumns.length) {\n      this._setWidth('calc(' + Array.prototype\n        .reduce.call(this._visibleChildColumns, (prev, curr) => prev += ' + ' + (curr.width || '0px')\n          .replace('calc', ''), '')\n        .substring(3) + ')');\n    } else {\n      this._setWidth('0px');\n    }\n\n    this._setFlexGrow(Array.prototype.reduce.call(this._visibleChildColumns, (prev, curr) => prev + curr.flexGrow, 0));\n  }\n\n  /** @private */\n  _groupFrozenChanged(frozen, rootColumns) {\n    if (rootColumns === undefined || frozen === undefined) {\n      return;\n    }\n\n    // Dont propagate the default `false` value.\n    if (frozen !== false) {\n      Array.from(rootColumns).forEach(col => col.frozen = frozen);\n    }\n  }\n\n  /** @private */\n  _groupHiddenChanged(hidden, rootColumns) {\n    if (rootColumns && !this._preventHiddenCascade) {\n      this._ignoreVisibleChildColumns = true;\n      rootColumns.forEach(column => column.hidden = hidden);\n      this._ignoreVisibleChildColumns = false;\n    }\n\n    this._columnPropChanged('hidden');\n  }\n\n  /** @private */\n  _visibleChildColumnsChanged(visibleChildColumns) {\n    this._colSpan = visibleChildColumns.length;\n\n    if (!this._ignoreVisibleChildColumns) {\n      if (visibleChildColumns.length === 0) {\n        this._autoHidden = this.hidden = true;\n      } else if (this.hidden && this._autoHidden) {\n        this._autoHidden = this.hidden = false;\n      }\n    }\n  }\n\n  /** @private */\n  _colSpanChanged(colSpan, headerCell, footerCell) {\n    if (headerCell) {\n      headerCell.setAttribute('colspan', colSpan);\n      this._grid && this._grid._a11yUpdateCellColspan(headerCell, colSpan);\n    }\n    if (footerCell) {\n      footerCell.setAttribute('colspan', colSpan);\n      this._grid && this._grid._a11yUpdateCellColspan(footerCell, colSpan);\n    }\n  }\n\n  /**\n   * @param {!GridColumnGroupElement} el\n   * @return {!Array<!GridColumnElement>}\n   * @protected\n   */\n  _getChildColumns(el) {\n    return FlattenedNodesObserver.getFlattenedNodes(el).filter(this._isColumnElement);\n  }\n\n  /** @private */\n  _addNodeObserver() {\n    this._observer = new FlattenedNodesObserver(this, info => {\n      if (info.addedNodes.filter(this._isColumnElement).length > 0 ||\n        info.removedNodes.filter(this._isColumnElement).length > 0) {\n\n        this._preventHiddenCascade = true;\n        this._rootColumns = this._getChildColumns(this);\n        this._childColumns = this._rootColumns;\n        this._preventHiddenCascade = false;\n\n        // Update the column tree with microtask timing to avoid shady style scope issues\n        microTask.run(() => {\n          this._grid && this._grid._updateColumnTree && this._grid._updateColumnTree();\n        });\n      }\n    });\n    this._observer.flush();\n  }\n\n  /**\n   * @param {!Node} node\n   * @return {boolean}\n   * @protected\n   */\n  _isColumnElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE && /\\bcolumn\\b/.test(node.localName);\n  }\n}\n\ncustomElements.define(GridColumnGroupElement.is, GridColumnGroupElement);\nexport { GridColumnGroupElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { useShadow } from '@polymer/polymer/lib/utils/settings.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnReorderingMixin = superClass => class ColumnReorderingMixin extends GestureEventListeners(superClass) {\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to allow column reordering.\n       * @attr {boolean} column-reordering-allowed\n       * @type {boolean}\n       */\n      columnReorderingAllowed: {\n        type: Boolean,\n        value: false\n      },\n\n      /** @private */\n      _orderBaseScope: {\n        type: Number,\n        value: 10000000\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateOrders(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    addListener(this, 'track', this._onTrackEvent);\n    this._reorderGhost = this.shadowRoot.querySelector('[part=\"reorder-ghost\"]');\n\n    this.addEventListener('touchstart', this._onTouchStart.bind(this));\n    this.addEventListener('touchmove', this._onTouchMove.bind(this));\n    this.addEventListener('touchend', this._onTouchEnd.bind(this));\n    this.addEventListener('contextmenu', this._onContextMenu.bind(this));\n  }\n\n  /** @private */\n  _onContextMenu(e) {\n    if (this.hasAttribute('reordering')) {\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  _onTouchStart(e) {\n    // Touch event, delay activation by 100ms\n    this._startTouchReorderTimeout = setTimeout(() => {\n      this._onTrackStart({\n        detail: {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY\n        }\n      });\n    }, 100);\n  }\n\n  /** @private */\n  _onTouchMove(e) {\n    if (this._draggedColumn) {\n      e.preventDefault();\n    }\n    clearTimeout(this._startTouchReorderTimeout);\n  }\n\n  /** @private */\n  _onTouchEnd() {\n    clearTimeout(this._startTouchReorderTimeout);\n    this._onTrackEnd();\n  }\n\n  /** @private */\n  _onTrackEvent(e) {\n    if (e.detail.state === 'start') {\n      const path = e.composedPath();\n      const headerCell = path[path.indexOf(this.$.header) - 2];\n      if (!headerCell || !headerCell._content) {\n        // Not a header column\n        return;\n      }\n\n      const activeElement = this.getRootNode().activeElement;\n      if (headerCell._content.contains(this.getRootNode().activeElement)\n          && (!this._ie || !this._isFocusable(activeElement))) {\n        // Something was focused inside the cell\n        return;\n      }\n\n      if (this.$.scroller.hasAttribute('column-resizing')) {\n        // Resizing is in progress\n        return;\n      }\n\n      if (!this._touchDevice) {\n        // Not a touch device\n        this._onTrackStart(e);\n      }\n    } else if (e.detail.state === 'track') {\n      this._onTrack(e);\n    } else if (e.detail.state === 'end') {\n      this._onTrackEnd(e);\n    }\n  }\n\n  /** @private */\n  _onTrackStart(e) {\n    if (!this.columnReorderingAllowed) {\n      return;\n    }\n\n    // Cancel reordering if there are draggable nodes on the event path\n    const path = e.path || dom(e).path;\n    if (path && path.filter(node => node.hasAttribute && node.hasAttribute('draggable'))[0]) {\n      return;\n    }\n\n    const headerCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!headerCell || headerCell.getAttribute('part').indexOf('header-cell') === -1) {\n      return;\n    }\n\n    this._toggleAttribute('reordering', true, this);\n    this._draggedColumn = headerCell._column;\n    while (this._draggedColumn.parentElement.childElementCount === 1) {\n      // This is the only column in the group, drag the whole group instead\n      this._draggedColumn = this._draggedColumn.parentElement;\n    }\n    this._setSiblingsReorderStatus(this._draggedColumn, 'allowed');\n    this._draggedColumn._reorderStatus = 'dragging';\n\n    this._updateGhost(headerCell);\n    this._reorderGhost.style.visibility = 'visible';\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._autoScroller();\n  }\n\n  /** @private */\n  _onTrack(e) {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    const targetCell = this._cellFromPoint(e.detail.x, e.detail.y);\n    if (!targetCell) {\n      return;\n    }\n\n    const targetColumn = this._getTargetColumn(targetCell, this._draggedColumn);\n    if (this._isSwapAllowed(this._draggedColumn, targetColumn) &&\n      this._isSwappableByPosition(targetColumn, e.detail.x)) {\n      this._swapColumnOrders(this._draggedColumn, targetColumn);\n    }\n\n    this._updateGhostPosition(e.detail.x, this._touchDevice ? e.detail.y - 50 : e.detail.y);\n    this._lastDragClientX = e.detail.x;\n  }\n\n  /** @private */\n  _onTrackEnd() {\n    if (!this._draggedColumn) {\n      // Reordering didnt start. Skip this event.\n      return;\n    }\n\n    this._toggleAttribute('reordering', false, this);\n    this._draggedColumn._reorderStatus = '';\n    this._setSiblingsReorderStatus(this._draggedColumn, '');\n    this._draggedColumn = null;\n    this._lastDragClientX = null;\n    this._reorderGhost.style.visibility = 'hidden';\n\n    this.dispatchEvent(new CustomEvent('column-reorder', {detail: {\n      columns: this._getColumnsInOrder()\n    }}));\n  }\n\n  /**\n   * @return {!Array<!GridColumnElement>}\n   * @protected\n   */\n  _getColumnsInOrder() {\n    return this._columnTree.slice(0).pop()\n      .filter(c => !c.hidden)\n      .sort((b, a) => (b._order - a._order));\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @return {HTMLElement | undefined}\n   * @protected\n   */\n  _cellFromPoint(x, y) {\n    x = x || 0;\n    y = y || 0;\n    if (!this._draggedColumn) {\n      this._toggleAttribute('no-content-pointer-events', true, this.$.scroller);\n    }\n    let cell;\n    if (useShadow) {\n      cell = this.shadowRoot.elementFromPoint(x, y);\n    } else {\n      cell = document.elementFromPoint(x, y);\n\n      // Workaround a FF58 bug\n      if (cell.localName === 'vaadin-grid-cell-content') {\n        cell = cell.assignedSlot.parentNode;\n      }\n\n    }\n    this._toggleAttribute('no-content-pointer-events', false, this.$.scroller);\n\n    // Make sure the element is actually a cell\n    if (cell && cell._column) {\n      return cell;\n    }\n  }\n\n  /**\n   * @param {number} eventClientX\n   * @param {number} eventClientY\n   * @protected\n   */\n  _updateGhostPosition(eventClientX, eventClientY) {\n    const ghostRect = this._reorderGhost.getBoundingClientRect();\n    // // This is where we want to position the ghost\n    const targetLeft = eventClientX - ghostRect.width / 2;\n    const targetTop = eventClientY - ghostRect.height / 2;\n    // Current position\n    const _left = parseInt(this._reorderGhost._left || 0);\n    const _top = parseInt(this._reorderGhost._top || 0);\n    // Reposition the ghost\n    this._reorderGhost._left = _left - (ghostRect.left - targetLeft);\n    this._reorderGhost._top = _top - (ghostRect.top - targetTop);\n    this._reorderGhost.style.transform = `translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`;\n  }\n\n  /**\n   * @param {!Element} e\n   * @return {string}\n   * @protected\n   */\n  _getInnerText(e) {\n    if (e.localName) {\n      // Custom implementation needed since IE11 doesn't respect the spec in case of hidden elements\n      if (getComputedStyle(e).display === 'none') {\n        return '';\n      } else {\n        return Array.from(e.childNodes).map(n => this._getInnerText(n)).join('');\n      }\n    } else {\n      return e.textContent;\n    }\n  }\n\n  /**\n   * @param {!HTMLElement} cell\n   * @return {!HTMLElement}\n   * @protected\n   */\n  _updateGhost(cell) {\n    const ghost = this._reorderGhost;\n    ghost.textContent = this._getInnerText(cell._content);\n    const style = window.getComputedStyle(cell);\n    ['boxSizing', 'display', 'width', 'height', 'background', 'alignItems', 'padding', 'border', 'flex-direction', 'overflow']\n      .forEach(propertyName => ghost.style[propertyName] = style[propertyName]);\n    return ghost;\n  }\n\n  /** @private */\n  _updateOrders(columnTree, splices) {\n    if (columnTree === undefined || splices === undefined) {\n      return;\n    }\n\n    // Reset all column orders\n    columnTree[0].forEach((column, index) => column._order = 0);\n    // Set order numbers to top-level columns\n    columnTree[0].forEach((column, index) => column._order = (index + 1) * this._orderBaseScope);\n  }\n\n  /**\n   * @param {!GridColumnElement} column\n   * @param {string} status\n   * @protected\n   */\n  _setSiblingsReorderStatus(column, status) {\n    Array.from(column.parentNode.children)\n      .filter(child => /column/.test(child.localName) && this._isSwapAllowed(child, column))\n      .forEach(sibling => sibling._reorderStatus = status);\n  }\n\n  /** @protected */\n  _autoScroller() {\n    if (this._lastDragClientX) {\n      const rightDiff = this._lastDragClientX - this.getBoundingClientRect().right + 50;\n      const leftDiff = this.getBoundingClientRect().left - this._lastDragClientX + 50;\n\n      if (rightDiff > 0) {\n        this.$.table.scrollLeft += rightDiff / 10;\n      } else if (leftDiff > 0) {\n        this.$.table.scrollLeft -= leftDiff / 10;\n      }\n      this._scrollHandler();\n    }\n\n    if (this._draggedColumn) {\n      this.async(this._autoScroller, 10);\n    }\n  }\n\n  /**\n   * @param {GridColumnElement | undefined} column1\n   * @param {GridColumnElement | undefined} column2\n   * @return {boolean | undefined}\n   * @protected\n   */\n  _isSwapAllowed(column1, column2) {\n    if (column1 && column2) {\n      const differentColumns = column1 !== column2;\n      const sameParent = column1.parentElement === column2.parentElement;\n      const sameFrozen = column1.frozen === column2.frozen;\n      return differentColumns && sameParent && sameFrozen;\n    }\n  }\n\n  /**\n   * @param {!GridColumnElement} targetColumn\n   * @param {number} clientX\n   * @return {boolean}\n   * @protected\n   */\n  _isSwappableByPosition(targetColumn, clientX) {\n    const targetCell =\n      Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~=\"cell\"]')).filter(cell => targetColumn.contains(cell._column))[0];\n    const sourceCellRect = this.$.header.querySelector('tr:not([hidden]) [reorder-status=dragging]').getBoundingClientRect();\n    const targetRect = targetCell.getBoundingClientRect();\n    if (targetRect.left > sourceCellRect.left) {\n      return clientX > targetRect.right - sourceCellRect.width;\n    } else {\n      return clientX < targetRect.left + sourceCellRect.width;\n    }\n  }\n\n  /**\n   * @param {!GridColumnElement} column1\n   * @param {!GridColumnElement} column2\n   * @protected\n   */\n  _swapColumnOrders(column1, column2) {\n    const _order = column1._order;\n    column1._order = column2._order;\n    column2._order = _order;\n    this._updateLastFrozen();\n    this._updateFirstAndLastColumn();\n  }\n\n  /**\n   * @param {HTMLElement | undefined} targetCell\n   * @param {GridColumnElement} draggedColumn\n   * @return {GridColumnElement | undefined}\n   * @protected\n   */\n  _getTargetColumn(targetCell, draggedColumn) {\n    if (targetCell && draggedColumn) {\n      let candidate = targetCell._column;\n      while (candidate.parentElement !== draggedColumn.parentElement && candidate !== this) {\n        candidate = candidate.parentElement;\n      }\n      if (candidate.parentElement === draggedColumn.parentElement) {\n        return candidate;\n      } else {\n        return targetCell._column;\n      }\n    }\n  }\n\n  /**\n   * Fired when the columns in the grid are reordered.\n   *\n   * @event column-reorder\n   * @param {Object} detail\n   * @param {Object} detail.columns the columns in the new order\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\n\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnResizingMixin = superClass => class ColumnResizingMixin extends GestureEventListeners(superClass) {\n\n  ready() {\n    super.ready();\n    const scroller = this.$.scroller;\n    addListener(scroller, 'track', this._onHeaderTrack.bind(this));\n\n    // Disallow scrolling while resizing\n    scroller.addEventListener('touchmove', e => scroller.hasAttribute('column-resizing') && e.preventDefault());\n\n    // Disable contextmenu on any resize separator.\n    scroller.addEventListener('contextmenu', e => e.target.getAttribute('part') == 'resize-handle' && e.preventDefault());\n\n    // Disable native cell focus when resizing\n    scroller.addEventListener('mousedown', e => e.target.getAttribute('part') === 'resize-handle' && e.preventDefault());\n  }\n\n  /** @private */\n  _onHeaderTrack(e) {\n    const handle = e.target;\n    if (handle.getAttribute('part') === 'resize-handle') {\n      const cell = handle.parentElement;\n      let column = cell._column;\n\n      this._toggleAttribute('column-resizing', true, this.$.scroller);\n\n      // Get the target column to resize\n      while (column.localName === 'vaadin-grid-column-group') {\n        column = Array.prototype.slice.call(column._childColumns, 0)\n          .sort(function(a, b) {\n            return a._order - b._order;\n          })\n          .filter(function(column) {\n            return !column.hidden;\n          }).pop();\n      }\n\n      const columnRowCells = Array.from(this.$.header.querySelectorAll('[part~=\"row\"]:last-child [part~=\"cell\"]'));\n      var targetCell = columnRowCells.filter(cell => cell._column === column)[0];\n      // Resize the target column\n      if (targetCell.offsetWidth) {\n        var style = window.getComputedStyle(targetCell);\n        var minWidth = 10 + parseInt(style.paddingLeft) + parseInt(style.paddingRight) + parseInt(style.borderLeftWidth)\n          + parseInt(style.borderRightWidth) + parseInt(style.marginLeft) + parseInt(style.marginRight);\n        const maxWidth = targetCell.offsetWidth + (this.__isRTL ? targetCell.getBoundingClientRect().left - e.detail.x :\n          e.detail.x - targetCell.getBoundingClientRect().right);\n        column.width = Math.max(minWidth, maxWidth) + 'px';\n        column.flexGrow = 0;\n      }\n      // Fix width and flex-grow for all preceding columns\n      columnRowCells\n        .sort(\n          function(a, b) {\n            return a._column._order - b._column._order;\n          })\n        .forEach(function(cell, index, array) {\n          if (index < array.indexOf(targetCell)) {\n            cell._column.width = cell.offsetWidth + 'px';\n            cell._column.flexGrow = 0;\n          }\n        });\n\n      if (e.detail.state === 'end') {\n        this._toggleAttribute('column-resizing', false, this.$.scroller);\n        this.dispatchEvent(new CustomEvent('column-resize', {\n          detail: {resizedColumn: column}\n        }));\n      }\n\n      // Notify resize\n      this._resizeHandler();\n    }\n  }\n\n  /**\n  * Fired when a column in the grid is resized by the user.\n  *\n  * @event column-resize\n  * @param {Object} detail\n  * @param {Object} detail.resizedColumn the column that was resized\n  */\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { Templatizer } from './vaadin-grid-templatizer.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ColumnBaseMixin = superClass => class ColumnBaseMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When set to true, the column is user-resizable.\n       * @default false\n       */\n      resizable: {\n        type: Boolean,\n        value: function() {\n          if (this.localName === 'vaadin-grid-column-group') {\n            return;\n          }\n\n          const parent = this.parentNode;\n          if (parent && parent.localName === 'vaadin-grid-column-group') {\n            return parent.resizable || false;\n          } else {\n            return false;\n          }\n        }\n      },\n\n      /**\n       * @type {HTMLTemplateElement}\n       * @protected\n       */\n      _headerTemplate: {\n        type: Object\n      },\n\n      /**\n       * @type {HTMLTemplateElement}\n       * @protected\n       */\n      _footerTemplate: {\n        type: Object\n      },\n\n      /**\n       * When true, the column is frozen. When a column inside of a column group is frozen,\n       * all of the sibling columns inside the group will get frozen also.\n       * @type {boolean}\n       */\n      frozen: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * When set to true, the cells for this column are hidden.\n       */\n      hidden: {\n        type: Boolean\n      },\n\n      /**\n       * Text content to display in the header cell of the column.\n       */\n      header: {\n        type: String\n      },\n\n      /**\n       * Aligns the columns cell content horizontally.\n       * Supported values: \"start\", \"center\" and \"end\".\n       * @attr {start|center|end} text-align\n       * @type {GridColumnTextAlign | null | undefined}\n       */\n      textAlign: {\n        type: String\n      },\n\n      /**\n       * @type {boolean}\n       * @protected\n       */\n      _lastFrozen: {\n        type: Boolean,\n        value: false\n      },\n\n      /** @protected */\n      _order: Number,\n\n      /** @private */\n      _reorderStatus: Boolean,\n\n      /**\n       * @type {Array<!HTMLElement>}\n       * @protected\n       */\n      _emptyCells: Array,\n\n      /** @private */\n      _headerCell: Object,\n\n      /** @private */\n      _footerCell: Object,\n\n      /** @protected */\n      _grid: Object,\n\n      /**\n       * Custom function for rendering the header content.\n       * Receives two arguments:\n       *\n       * - `root` The header cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       *\n       * @type {GridHeaderFooterRenderer | null | undefined}\n       */\n      headerRenderer: Function,\n\n      /**\n       * Custom function for rendering the footer content.\n       * Receives two arguments:\n       *\n       * - `root` The footer cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       *\n       * @type {GridHeaderFooterRenderer | null | undefined}\n       */\n      footerRenderer: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '_widthChanged(width, _headerCell, _footerCell, _cells.*)',\n      '_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)',\n      '_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)',\n      '_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)',\n      '_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)',\n      '_orderChanged(_order, _headerCell, _footerCell, _cells.*)',\n      '_lastFrozenChanged(_lastFrozen)',\n      '_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)',\n      '_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)',\n      '_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)',\n      '_resizableChanged(resizable, _headerCell)',\n      '_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)',\n      '_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._bodyTemplate && (this._bodyTemplate.templatizer._grid = this._grid);\n    this._headerTemplate && (this._headerTemplate.templatizer._grid = this._grid);\n    this._footerTemplate && (this._footerTemplate.templatizer._grid = this._grid);\n\n    this._templateObserver.flush();\n    if (!this._bodyTemplate) {\n      // The observer might not have triggered if the tag is empty. Run manually.\n      this._templateObserver.callback();\n    }\n\n    requestAnimationFrame(() => {\n      this._allCells.forEach(cell => {\n        if (!cell._content.parentNode) {\n          this._grid && this._grid.appendChild(cell._content);\n        }\n      });\n    });\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    requestAnimationFrame(() => {\n      if (!this._findHostGrid()) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n    });\n\n    this._gridValue = undefined;\n  }\n\n  /**\n   * @return {!GridElement | undefined}\n   * @protected\n   */\n  _findHostGrid() {\n    let el = this;\n    // Custom elements extending grid must have a specific localName\n    while (el && !/^vaadin.*grid(-pro)?$/.test(el.localName)) {\n      el = el.assignedSlot ? el.assignedSlot.parentNode : el.parentNode;\n    }\n    return el || undefined;\n  }\n\n  /**\n   * @return {!GridElement | undefined}\n   * @protected\n   */\n  get _grid() {\n    if (!this._gridValue) {\n      this._gridValue = this._findHostGrid();\n    }\n    return this._gridValue;\n  }\n\n  /**\n   * @return {!Array<!HTMLElement>}\n   * @protected\n   */\n  get _allCells() {\n    return []\n      .concat(this._cells || [])\n      .concat(this._emptyCells || [])\n      .concat(this._headerCell)\n      .concat(this._footerCell)\n      .filter(cell => cell);\n  }\n\n  constructor() {\n    super();\n\n    this._templateObserver = new FlattenedNodesObserver(this, info => {\n      this._headerTemplate = this._prepareHeaderTemplate();\n      this._footerTemplate = this._prepareFooterTemplate();\n      this._bodyTemplate = this._prepareBodyTemplate();\n    });\n  }\n\n  /**\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _prepareHeaderTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(true) || null, {});\n  }\n\n  /**\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _prepareFooterTemplate() {\n    return this._prepareTemplatizer(this._findTemplate(false, true) || null, {});\n  }\n\n  /**\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _prepareBodyTemplate() {\n    return this._prepareTemplatizer(this._findTemplate() || null);\n  }\n\n  /**\n   * @param {HTMLTemplateElement} template\n   * @param {object} instanceProps\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _prepareTemplatizer(template, instanceProps) {\n    if (template && !template.templatizer) {\n      const templatizer = new Templatizer();\n      templatizer._grid = this._grid;\n      templatizer.dataHost = this.dataHost;\n      templatizer._instanceProps = instanceProps || templatizer._instanceProps;\n      templatizer.template = template;\n      template.templatizer = templatizer;\n    }\n\n    return template;\n  }\n\n  /** @protected */\n  _renderHeaderAndFooter() {\n    if (this.headerRenderer && this._headerCell) {\n      this.__runRenderer(this.headerRenderer, this._headerCell);\n    }\n    if (this.footerRenderer && this._footerCell) {\n      this.__runRenderer(this.footerRenderer, this._footerCell);\n    }\n  }\n\n  /** @private */\n  __runRenderer(renderer, cell, model) {\n    const args = [cell._content, this];\n    if (model && model.item) {\n      args.push(model);\n    }\n    renderer.apply(this, args);\n  }\n\n  /** @private */\n  __setColumnTemplateOrRenderer(template, renderer, cells) {\n    if (template && renderer) {\n      throw new Error('You should only use either a renderer or a template');\n    }\n\n    cells.forEach(cell => {\n      const model = this._grid.__getRowModel(cell.parentElement);\n\n      if (renderer) {\n        cell._renderer = renderer;\n\n        if (model.item || renderer === this.headerRenderer || renderer === this.footerRenderer) {\n          this.__runRenderer(renderer, cell, model);\n        }\n      } else if (cell._template !== template) {\n        cell._template = template;\n\n        cell._content.innerHTML = '';\n        template.templatizer._grid = template.templatizer._grid || this._grid;\n        const inst = template.templatizer.createInstance();\n        cell._content.appendChild(inst.root);\n        cell._instance = inst;\n        if (model.item) {\n          cell._instance.setProperties(model);\n        }\n      }\n    });\n  }\n\n  /** @private */\n  _setBodyTemplateOrRenderer(template, renderer, cells, splices) {\n    if ((template || renderer) && cells) {\n      this.__setColumnTemplateOrRenderer(template, renderer, cells);\n    }\n  }\n\n  /** @private */\n  _setHeaderTemplateOrRenderer(headerTemplate, headerRenderer, headerCell) {\n    if ((headerTemplate || headerRenderer) && headerCell) {\n      this.__setColumnTemplateOrRenderer(headerTemplate, headerRenderer, [headerCell]);\n    }\n  }\n\n  /** @private */\n  _setFooterTemplateOrRenderer(footerTemplate, footerRenderer, footerCell) {\n    if ((footerTemplate || footerRenderer) && footerCell) {\n      this.__setColumnTemplateOrRenderer(footerTemplate, footerRenderer, [footerCell]);\n      this._grid.__updateHeaderFooterRowVisibility(footerCell.parentElement);\n    }\n  }\n\n  /**\n   * @param {boolean} header\n   * @param {boolean} footer\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _selectFirstTemplate(header = false, footer = false) {\n    return FlattenedNodesObserver.getFlattenedNodes(this)\n      .filter(node =>\n        node.localName === 'template'\n        && node.classList.contains('header') === header\n        && node.classList.contains('footer') === footer\n      )[0];\n  }\n\n  /**\n   * @param {boolean} header\n   * @param {boolean} footer\n   * @return {HTMLTemplateElement}\n   * @protected\n   */\n  _findTemplate(header, footer) {\n    const template = this._selectFirstTemplate(header, footer);\n    if (template) {\n      if (this.dataHost) {\n        // set dataHost to the context where template has been defined\n        template._rootDataHost = this.dataHost._rootDataHost || this.dataHost;\n      }\n    }\n    return template;\n  }\n\n  /** @private */\n  _flexGrowChanged(flexGrow, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('flexGrow');\n    }\n\n    this._allCells.forEach(cell => cell.style.flexGrow = flexGrow);\n  }\n\n  /** @private */\n  _orderChanged(order, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.style.order = order);\n  }\n\n  /** @private */\n  _widthChanged(width, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('width');\n    }\n\n    this._allCells.forEach(cell => cell.style.width = width);\n\n    // Force a reflow to workaround browser issues causing double scrollbars to grid\n    // https://github.com/vaadin/vaadin-grid/issues/1586\n    if (this._grid && this._grid.__forceReflow) {\n      this._grid.__forceReflow();\n    }\n  }\n\n  /** @private */\n  _frozenChanged(frozen, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('frozen', frozen);\n    }\n\n    this._allCells.forEach(cell => this._toggleAttribute('frozen', frozen, cell));\n\n    this._grid && this._grid._frozenCellsChanged && this._grid._frozenCellsChanged();\n  }\n\n  /** @private */\n  _lastFrozenChanged(lastFrozen) {\n    this._allCells.forEach(cell => this._toggleAttribute('last-frozen', lastFrozen, cell));\n\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._lastFrozen = lastFrozen;\n    }\n  }\n\n  /**\n   * @param {string | undefined} path\n   * @param {string | undefined} header\n   * @param {!HTMLTableCellElement | undefined} headerCell\n   * @param {!HTMLTableCellElement | undefined} footerCell\n   * @param {!object | undefined} cells\n   * @param {GridBodyRenderer | undefined} renderer\n   * @param {GridHeaderFooterRenderer | undefined} headerRenderer\n   * @param {HTMLTemplateElement | undefined} bodyTemplate\n   * @param {HTMLTemplateElement | undefined} headerTemplate\n   * @protected\n   */\n  _pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate) {\n    const hasHeaderText = header !== undefined;\n    if (!headerRenderer && !headerTemplate && hasHeaderText && headerCell) {\n      this.__setTextContent(headerCell._content, header);\n    }\n\n    if (path && cells.value) {\n      if (!renderer && !bodyTemplate) {\n        const pathRenderer = (root, owner, {item}) => this.__setTextContent(root, this.get(path, item));\n        this.__setColumnTemplateOrRenderer(undefined, pathRenderer, cells.value);\n      }\n\n      if (!headerRenderer && !headerTemplate && !hasHeaderText && headerCell && header !== null) {\n        this.__setTextContent(headerCell._content, this._generateHeader(path));\n      }\n    }\n\n    if (headerCell) {\n      this._grid.__updateHeaderFooterRowVisibility(headerCell.parentElement);\n    }\n  }\n\n  /** @private */\n  __setTextContent(node, textContent) {\n    node.textContent !== textContent && (node.textContent = textContent);\n  }\n\n  /**\n   * @param {string} path\n   * @return {string}\n   * @protected\n   */\n  _generateHeader(path) {\n    return path\n      .substr(path.lastIndexOf('.') + 1)\n      .replace(/([A-Z])/g, '-$1').toLowerCase()\n      .replace(/-/g, ' ')\n      .replace(/^./, match => match.toUpperCase());\n  }\n\n  /**\n   * @param {string} name\n   * @param {boolean} bool\n   * @param {!Element} node\n   * @protected\n   */\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  /** @private */\n  _reorderStatusChanged(reorderStatus, headerCell, footerCell, cells) {\n    this._allCells.forEach(cell => cell.setAttribute('reorder-status', reorderStatus));\n  }\n\n  /** @private */\n  _resizableChanged(resizable, headerCell) {\n    if (resizable === undefined || headerCell === undefined) {\n      return;\n    }\n\n    if (headerCell) {\n      [headerCell].concat(this._emptyCells).forEach(cell => {\n        if (cell) {\n          const existingHandle = cell.querySelector('[part~=\"resize-handle\"]');\n          if (existingHandle) {\n            cell.removeChild(existingHandle);\n          }\n\n          if (resizable) {\n            const handle = document.createElement('div');\n            handle.setAttribute('part', 'resize-handle');\n            cell.appendChild(handle);\n          }\n        }\n      });\n    }\n  }\n\n  /** @private */\n  _textAlignChanged(textAlign, _cells, _headerCell, _footerCell) {\n    if (textAlign === undefined) {\n      return;\n    }\n    if (['start', 'end', 'center'].indexOf(textAlign) === -1) {\n      console.warn('textAlign can only be set as \"start\", \"end\" or \"center\"');\n      return;\n    }\n\n    let textAlignFallback;\n    if (getComputedStyle(this._grid).direction === 'ltr') {\n      if (textAlign === 'start') {\n        textAlignFallback = 'left';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'right';\n      }\n    } else {\n      if (textAlign === 'start') {\n        textAlignFallback = 'right';\n      } else if (textAlign === 'end') {\n        textAlignFallback = 'left';\n      }\n    }\n\n    this._allCells.forEach(cell => {\n      cell._content.style.textAlign = textAlign;\n      if (getComputedStyle(cell._content).textAlign !== textAlign) {\n        cell._content.style.textAlign = textAlignFallback;\n      }\n    });\n  }\n\n  /** @private */\n  _hiddenChanged(hidden, headerCell, footerCell, cells) {\n    if (this.parentElement && this.parentElement._columnPropChanged) {\n      this.parentElement._columnPropChanged('hidden', hidden);\n    }\n\n    if (!!hidden !== !!this._previousHidden && this._grid) {\n      if (hidden === true) {\n        this._allCells.forEach(cell => {\n          if (cell._content.parentNode) {\n            cell._content.parentNode.removeChild(cell._content);\n          }\n        });\n      }\n      this._grid._debouncerHiddenChanged = Debouncer.debounce(\n        this._grid._debouncerHiddenChanged,\n        animationFrame,\n        () => {\n          if (this._grid && this._grid._renderColumnTree) {\n            this._grid._renderColumnTree(this._grid._columnTree);\n          }\n        }\n      );\n\n      this._grid._updateLastFrozen && this._grid._updateLastFrozen();\n      this._grid.notifyResize && this._grid.notifyResize();\n      this._grid._resetKeyboardNavigation && this._grid._resetKeyboardNavigation();\n    }\n    this._previousHidden = hidden;\n  }\n\n};\n\n/**\n * A `<vaadin-grid-column>` is used to configure how a column in `<vaadin-grid>`\n * should look like.\n *\n * See `<vaadin-grid>` documentation and demos for instructions and examples on how\n * to configure the `<vaadin-grid-column>`.\n * ```\n *\n * @extends PolymerElement\n * @mixes ColumnBaseMixin\n */\nclass GridColumnElement extends ColumnBaseMixin(DirMixin(PolymerElement)) {\n  static get is() {\n    return 'vaadin-grid-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Width of the cells for this column.\n       */\n      width: {\n        type: String,\n        value: '100px'\n      },\n\n      /**\n       * Flex grow ratio for the cell widths. When set to 0, cell width is fixed.\n       * @attr {number} flex-grow\n       * @type {number}\n       */\n      flexGrow: {\n        type: Number,\n        value: 1\n      },\n\n      /**\n       * Custom function for rendering the cell content.\n       * Receives three arguments:\n       *\n       * - `root` The cell content DOM element. Append your content to it.\n       * - `column` The `<vaadin-grid-column>` element.\n       * - `model` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `model.index` The index of the item.\n       *   - `model.item` The item.\n       *   - `model.expanded` Sublevel toggle state.\n       *   - `model.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `model.selected` Selected state.\n       *\n       * @type {GridBodyRenderer | null | undefined}\n       */\n      renderer: Function,\n\n      /**\n       * Path to an item sub-property whose value gets displayed in the column body cells.\n       * The property name is also shown in the column header if an explicit header or renderer isn't defined.\n       */\n      path: {\n        type: String\n      },\n\n      /**\n       * Automatically sets the width of the column based on the column contents when this is set to `true`.\n       *\n       * For performance reasons the column width is calculated automatically only once when the grid items\n       * are rendered for the first time and the calculation only considers the rows which are currently\n       * rendered in DOM (a bit more than what is currently visible). If the grid is scrolled, or the cell\n       * content changes, the column width might not match the contents anymore.\n       *\n       * Hidden columns are ignored in the calculation and their widths are not automatically updated when\n       * you show a column that was initially hidden.\n       *\n       * You can manually trigger the auto sizing behavior again by calling `grid.recalculateColumnWidths()`.\n       *\n       * The column width may still grow larger when `flexGrow` is not 0.\n       * @attr {boolean} auto-width\n       * @type {boolean}\n       */\n      autoWidth: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * @type {HTMLTemplateElement}\n       * @protected\n       */\n      _bodyTemplate: {\n        type: Object\n      },\n\n      /**\n       * @type {Array<!HTMLElement>}\n       * @protected\n       */\n      _cells: Array\n\n    };\n  }\n\n}\n\ncustomElements.define(GridColumnElement.is, GridColumnElement);\nexport { GridColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n\nexport const ItemCache = class ItemCache {\n  /**\n   * @param {!HTMLElement} grid\n   * @param {!ItemCache | undefined} parentCache\n   * @param {!GridItem | undefined} parentItem\n   */\n  constructor(grid, parentCache, parentItem) {\n    /** @type {!HTMLElement} */\n    this.grid = grid;\n    /** @type {!ItemCache | undefined} */\n    this.parentCache = parentCache;\n    /** @type {!GridItem | undefined} */\n    this.parentItem = parentItem;\n    /** @type {object} */\n    this.itemCaches = {};\n    /** @type {object} */\n    this.items = {};\n    /** @type {number} */\n    this.effectiveSize = 0;\n    /** @type {number} */\n    this.size = 0;\n    /** @type {object} */\n    this.pendingRequests = {};\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLoading() {\n    return Boolean(Object.keys(this.pendingRequests).length || Object.keys(this.itemCaches).filter(index => {\n      return this.itemCaches[index].isLoading();\n    })[0]);\n  }\n\n  /**\n   * @param {number} index\n   * @return {!GridItem | undefined}\n   */\n  getItemForIndex(index) {\n    const {cache, scaledIndex} = this.getCacheAndIndex(index);\n    return cache.items[scaledIndex];\n  }\n\n  updateSize() {\n    this.effectiveSize = (!this.parentItem || this.grid._isExpanded(this.parentItem)) ?\n      this.size + Object.keys(this.itemCaches).reduce((prev, curr) => {\n        const subCache = this.itemCaches[curr];\n        subCache.updateSize();\n        return prev + subCache.effectiveSize;\n      }, 0) :\n      0;\n  }\n\n  /**\n   * @param {number} scaledIndex\n   */\n  ensureSubCacheForScaledIndex(scaledIndex) {\n    if (!this.itemCaches[scaledIndex]) {\n      const subCache = new ItemCache(this.grid, this, this.items[scaledIndex]);\n      this.itemCaches[scaledIndex] = subCache;\n      this.grid._loadPage(0, subCache);\n    }\n  }\n\n  /**\n   * @param {number} index\n   * @return {{cache: !ItemCache, scaledIndex: number}}\n   */\n  getCacheAndIndex(index) {\n    let thisLevelIndex = index;\n    const keys = Object.keys(this.itemCaches);\n    for (var i = 0; i < keys.length; i++) {\n      const expandedIndex = Number(keys[i]);\n      const subCache = this.itemCaches[expandedIndex];\n      if (thisLevelIndex <= expandedIndex) {\n        return {cache: this, scaledIndex: thisLevelIndex};\n      } else if (thisLevelIndex <= expandedIndex + subCache.effectiveSize) {\n        return subCache.getCacheAndIndex(thisLevelIndex - expandedIndex - 1);\n      }\n      thisLevelIndex -= subCache.effectiveSize;\n    }\n    return {cache: this, scaledIndex: thisLevelIndex};\n  }\n\n};\n\n/**\n * @polymerMixin\n */\nexport const DataProviderMixin = superClass => class DataProviderMixin extends superClass {\n\n  static get properties() {\n    return {\n\n      /**\n       * Number of items fetched at a time from the dataprovider.\n       * @attr {number} page-size\n       * @type {number}\n       */\n      pageSize: {\n        type: Number,\n        value: 50,\n        observer: '_pageSizeChanged'\n      },\n\n      /**\n       * Function that provides items lazily. Receives arguments `params`, `callback`\n       *\n       * `params.page` Requested page index\n       *\n       * `params.pageSize` Current page size\n       *\n       * `params.filters` Currently applied filters\n       *\n       * `params.sortOrders` Currently applied sorting orders\n       *\n       * `params.parentItem` When tree is used, and sublevel items\n       * are requested, reference to parent item of the requested sublevel.\n       * Otherwise `undefined`.\n       *\n       * `callback(items, size)` Callback function with arguments:\n       *   - `items` Current page of items\n       *   - `size` Total number of items. When tree sublevel items\n       *     are requested, total number of items in the requested sublevel.\n       *     Optional when tree is not used, required for tree.\n       *\n       * @type {GridDataProvider | null | undefined}\n       */\n      dataProvider: {\n        type: Object,\n        notify: true,\n        observer: '_dataProviderChanged'\n      },\n\n      /**\n       * `true` while data is being requested from the data provider.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true\n      },\n\n      /**\n       * @type {!ItemCache}\n       * @protected\n       */\n      _cache: {\n        type: Object,\n        value: function() {\n          const cache = new ItemCache(this);\n          return cache;\n        }\n      },\n\n      /**\n       * Path to an item sub-property that identifies the item.\n       * @attr {string} item-id-path\n       */\n      itemIdPath: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * An array that contains the expanded items.\n       * @type {!Array<!GridItem>}\n       */\n      expandedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_sizeChanged(size)',\n      '_itemIdPathChanged(itemIdPath)',\n      '_expandedItemsChanged(expandedItems.*)'\n    ];\n  }\n\n  /** @private */\n  _sizeChanged(size) {\n    const delta = size - this._cache.size;\n    this._cache.size += delta;\n    this._cache.effectiveSize += delta;\n    this._effectiveSize = this._cache.effectiveSize;\n  }\n\n  /**\n   * @param {number} index\n   * @param {HTMLElement} el\n   * @protected\n   */\n  _getItem(index, el) {\n    if (index >= this._effectiveSize) {\n      return;\n    }\n\n    el.index = index;\n    const {cache, scaledIndex} = this._cache.getCacheAndIndex(index);\n    const item = cache.items[scaledIndex];\n    if (item) {\n      this._toggleAttribute('loading', false, el);\n      this._updateItem(el, item);\n      if (this._isExpanded(item)) {\n        cache.ensureSubCacheForScaledIndex(scaledIndex);\n      }\n    } else {\n      this._toggleAttribute('loading', true, el);\n      this._loadPage(this._getPageForIndex(scaledIndex), cache);\n    }\n\n  }\n\n  /** @private */\n  _expandedInstanceChangedCallback(inst, value) {\n    if (inst.item === undefined) {\n      return;\n    }\n    if (value) {\n      this.expandItem(inst.item);\n    } else {\n      this.collapseItem(inst.item);\n    }\n  }\n\n  /**\n   * Returns a value that identifies the item. Uses `itemIdPath` if available.\n   * Can be customized by overriding.\n   * @param {!GridItem} item\n   * @return {!GridItem | !unknown}\n   */\n  getItemId(item) {\n    return this.itemIdPath ? this.get(this.itemIdPath, item) : item;\n  }\n\n  /**\n   * @param {!GridItem} item\n   * @return {boolean}\n   * @protected\n   */\n  _isExpanded(item) {\n    return this.__expandedKeys.has(this.getItemId(item));\n  }\n\n  /** @private */\n  _expandedItemsChanged(e) {\n    this.__cacheExpandedKeys();\n    this._cache.updateSize();\n    this._effectiveSize = this._cache.effectiveSize;\n    this._assignModels();\n  }\n\n  /** @private */\n  _itemIdPathChanged(e) {\n    this.__cacheExpandedKeys();\n  }\n\n  /** @private */\n  __cacheExpandedKeys() {\n    if (this.expandedItems) {\n      this.__expandedKeys = new Set();\n      this.expandedItems.forEach(item => {\n        this.__expandedKeys.add(this.getItemId(item));\n      });\n    }\n  }\n\n  /**\n   * Expands the given item tree.\n   * @param {!GridItem} item\n   */\n  expandItem(item) {\n    if (!this._isExpanded(item)) {\n      this.push('expandedItems', item);\n    }\n  }\n\n  /**\n   * Collapses the given item tree.\n   * @param {!GridItem} item\n   */\n  collapseItem(item) {\n    if (this._isExpanded(item)) {\n      this.splice('expandedItems', this._getItemIndexInArray(item, this.expandedItems), 1);\n    }\n  }\n\n  /**\n   * @param {number} index\n   * @return {number}\n   * @protected\n   */\n  _getIndexLevel(index) {\n    let {cache} = this._cache.getCacheAndIndex(index);\n    let level = 0;\n    while (cache.parentCache) {\n      cache = cache.parentCache;\n      level++;\n    }\n    return level;\n  }\n\n  /**\n   * @return {boolean}\n   * @protected\n   */\n  _canPopulate() {\n    return Boolean(this._hasData && this._columnTree);\n  }\n\n  /**\n   * @param {number} page\n   * @param {ItemCache} cache\n   * @protected\n   */\n  _loadPage(page, cache) {\n    // make sure same page isn't requested multiple times.\n    if (!cache.pendingRequests[page] && this.dataProvider) {\n      this._setLoading(true);\n      cache.pendingRequests[page] = true;\n      const params = {\n        page,\n        pageSize: this.pageSize,\n        sortOrders: this._mapSorters(),\n        filters: this._mapFilters(),\n        parentItem: cache.parentItem\n      };\n\n      this.dataProvider(params, (items, size) => {\n        if (size !== undefined) {\n          cache.size = size;\n        } else {\n          if (params.parentItem) {\n            cache.size = items.length;\n          }\n        }\n\n        const currentItems = Array.from(this.$.items.children).map(row => row._item);\n\n        // Populate the cache with new items\n        items.forEach((item, itemsIndex) => {\n          const itemIndex = page * this.pageSize + itemsIndex;\n          cache.items[itemIndex] = item;\n          if (this._isExpanded(item) && currentItems.indexOf(item) > -1) {\n            // Force synchronous data request for expanded item sub-cache\n            cache.ensureSubCacheForScaledIndex(itemIndex);\n          }\n        });\n\n        this._hasData = true;\n\n        delete cache.pendingRequests[page];\n\n        this._debouncerApplyCachedData = Debouncer.debounce(\n          this._debouncerApplyCachedData,\n          timeOut.after(0),\n          () => {\n            this._setLoading(false);\n            this._cache.updateSize();\n            this._effectiveSize = this._cache.effectiveSize;\n\n            Array.from(this.$.items.children)\n              .filter(row => !row.hidden)\n              .forEach(row => {\n                const cachedItem = this._cache.getItemForIndex(row.index);\n                if (cachedItem) {\n                  this._getItem(row.index, row);\n                }\n              });\n\n            this._increasePoolIfNeeded(0);\n          }\n        );\n\n        if (!this._cache.isLoading()) {\n          this._debouncerApplyCachedData.flush();\n        }\n\n        this.__itemsReceived();\n      });\n    }\n  }\n\n  /**\n   * @param {number} index\n   * @return {number}\n   * @private\n   */\n  _getPageForIndex(index) {\n    return Math.floor(index / this.pageSize);\n  }\n\n  /**\n   * Clears the cached pages and reloads data from dataprovider when needed.\n   */\n  clearCache() {\n    this._cache = new ItemCache(this);\n    Array.from(this.$.items.children).forEach(row => {\n      Array.from(row.children).forEach(cell => {\n        // Force data system to pick up subproperty changes\n        cell._instance && cell._instance._setPendingProperty('item', {}, false);\n      });\n    });\n    this._cache.size = this.size || 0;\n    this._cache.updateSize();\n    this._hasData = false;\n    this._assignModels();\n\n    if (!this._effectiveSize) {\n      this._loadPage(0, this._cache);\n    }\n  }\n\n  /** @private */\n  _pageSizeChanged(pageSize, oldPageSize) {\n    if (oldPageSize !== undefined && pageSize !== oldPageSize) {\n      this.clearCache();\n    }\n  }\n\n  /** @protected */\n  _checkSize() {\n    if (this.size === undefined && this._effectiveSize === 0) {\n      console.warn(\n        'The <vaadin-grid> needs the total number of items' +\n        ' in order to display rows. Set the total number of items' +\n        ' to the `size` property, or provide the total number of items' +\n        ' in the second argument of the `dataProvider`s `callback` call.'\n      );\n    }\n  }\n\n  /** @private */\n  _dataProviderChanged(dataProvider, oldDataProvider) {\n    if (oldDataProvider !== undefined) {\n      this.clearCache();\n    }\n\n    if (dataProvider && this.items && this.items.length) {\n      // Fixes possibly invalid cached lastVisibleIndex value in <iron-list>\n      this._scrollToIndex(this._firstVisibleIndex);\n    }\n\n    this._ensureFirstPageLoaded();\n\n    this._debouncerCheckSize = Debouncer.debounce(\n      this._debouncerCheckSize,\n      timeOut.after(2000),\n      this._checkSize.bind(this));\n\n    this._scrollHandler();\n  }\n\n  /** @protected */\n  _ensureFirstPageLoaded() {\n    if (!this._hasData) {\n      // load data before adding rows to make sure they have content when\n      // rendered for the first time.\n      this._loadPage(0, this._cache);\n    }\n  }\n\n  /**\n   * @param {!GridItem} item1\n   * @param {!GridItem} item2\n   * @return {boolean}\n   * @protected\n   */\n  _itemsEqual(item1, item2) {\n    return this.getItemId(item1) === this.getItemId(item2);\n  }\n\n  /**\n   * @param {!GridItem} item\n   * @param {!Array<!GridItem>} array\n   * @return {number}\n   * @protected\n   */\n  _getItemIndexInArray(item, array) {\n    let result = -1;\n    array.forEach((i, idx) => {\n      if (this._itemsEqual(i, item)) {\n        result = idx;\n      }\n    });\n    return result;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2019 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nconst DropMode = {\n  BETWEEN: 'between',\n  ON_TOP: 'on-top',\n  ON_TOP_OR_BETWEEN: 'on-top-or-between',\n  ON_GRID: 'on-grid'\n};\n\nconst DropLocation = {\n  ON_TOP: 'on-top',\n  ABOVE: 'above',\n  BELOW: 'below',\n  EMPTY: 'empty'\n};\n\n/**\n * @polymerMixin\n */\nexport const DragAndDropMixin = superClass => class DragAndDropMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * Defines the locations within the Grid row where an element can be dropped.\n       *\n       * Possible values are:\n       * - `between`: The drop event can happen between Grid rows.\n       * - `on-top`: The drop event can happen on top of Grid rows.\n       * - `on-top-or-between`: The drop event can happen either on top of or between Grid rows.\n       * - `on-grid`: The drop event will not happen on any specific row, it will show the drop target outline around the whole grid.\n       * @attr {between|on-top|on-top-or-between|on-grid} drop-mode\n       * @type {GridDropMode | null | undefined}\n       */\n      dropMode: String,\n\n      /**\n       * Marks the grid's rows to be available for dragging.\n       * @attr {boolean} rows-draggable\n       */\n      rowsDraggable: Boolean,\n\n      /**\n       * A function that filters dragging of specific grid rows. The return value should be false\n       * if dragging of the row should be disabled.\n       *\n       * Receives one argument:\n       * - `model` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `model.index` The index of the item.\n       *   - `model.item` The item.\n       *   - `model.expanded` Sublevel toggle state.\n       *   - `model.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `model.selected` Selected state.\n       *\n       * @type {GridDragAndDropFilter | null | undefined}\n       */\n      dragFilter: Function,\n\n      /**\n       * A function that filters dropping on specific grid rows. The return value should be false\n       * if dropping on the row should be disabled.\n       *\n       * Receives one argument:\n       * - `model` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `model.index` The index of the item.\n       *   - `model.item` The item.\n       *   - `model.expanded` Sublevel toggle state.\n       *   - `model.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `model.selected` Selected state.\n       *\n       * @type {GridDragAndDropFilter | null | undefined}\n       */\n      dropFilter: Function,\n\n      /** @private */\n      __dndAutoScrollThreshold: {\n        value: 50\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)'\n    ];\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this.$.table.addEventListener('dragstart', this._onDragStart.bind(this));\n    this.$.table.addEventListener('dragend', this._onDragEnd.bind(this));\n    this.$.table.addEventListener('dragover', this._onDragOver.bind(this));\n    this.$.table.addEventListener('dragleave', this._onDragLeave.bind(this));\n    this.$.table.addEventListener('drop', this._onDrop.bind(this));\n    this.$.table.addEventListener('dragenter', e => {\n      if (this.dropMode) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    });\n\n  }\n\n  /** @private */\n  _onDragStart(e) {\n    if (this.rowsDraggable) {\n      let row = e.target;\n      if (row.localName === 'vaadin-grid-cell-content') {\n        // The draggable node is the cell content element on browsers that support native shadow\n        row = row.assignedSlot.parentNode.parentNode;\n      }\n      if (row.parentNode !== this.$.items) {\n        return;\n      }\n\n      e.stopPropagation();\n      this._toggleAttribute('dragging-rows', true, this);\n\n      if (this._safari) {\n        // Safari doesn't get proper drag images from transformed\n        // elements so we need to switch to top temporarily\n        const transform = row.style.transform;\n        row.style.top = /translateY\\((.*)\\)/.exec(transform)[1];\n        row.style.transform = 'none';\n        requestAnimationFrame(() => {\n          row.style.top = '';\n          row.style.transform = transform;\n        });\n      }\n\n      const rowRect = row.getBoundingClientRect();\n      if (!window.ShadyDOM) {\n        if (this._ios) {\n          e.dataTransfer.setDragImage(row);\n        } else {\n          e.dataTransfer.setDragImage(row, e.clientX - rowRect.left, e.clientY - rowRect.top);\n        }\n\n      }\n\n      let rows = [row];\n      if (this._isSelected(row._item)) {\n        rows = this.__getViewportRows()\n          .filter(row => this._isSelected(row._item))\n          .filter(row => !this.dragFilter || this.dragFilter(this.__getRowModel(row)));\n      }\n\n      // Set the default transfer data\n      e.dataTransfer.setData('text', this.__formatDefaultTransferData(rows));\n\n      row.setAttribute('dragstart', rows.length > 1 ? rows.length : '');\n      this.updateStyles({\n        '--_grid-drag-start-x': `${e.clientX - rowRect.left + 20}px`,\n        '--_grid-drag-start-y': `${e.clientY - rowRect.top + 10}px`\n      });\n\n      requestAnimationFrame(() => {\n        row.removeAttribute('dragstart');\n        this.updateStyles({'--_grid-drag-start-x': '', '--_grid-drag-start-y': ''});\n      });\n\n      const event = new CustomEvent('grid-dragstart', {\n        detail: {\n          draggedItems: rows.map(row => row._item),\n          setDragData: (type, data) => e.dataTransfer.setData(type, data),\n          setDraggedItemsCount: count => row.setAttribute('dragstart', count)\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  /** @private */\n  _onDragEnd(e) {\n    this._toggleAttribute('dragging-rows', false, this);\n    e.stopPropagation();\n    const event = new CustomEvent('grid-dragend');\n    event.originalEvent = e;\n    this.dispatchEvent(event);\n  }\n\n  /** @private */\n  _onDragLeave(e) {\n    e.stopPropagation();\n    this._clearDragStyles();\n  }\n\n  /** @private */\n  _onDragOver(e) {\n\n    if (this.dropMode) {\n      this._dropLocation = undefined;\n      this._dragOverItem = undefined;\n\n      if (this.__dndAutoScroll(e.clientY)) {\n        this._clearDragStyles();\n        return;\n      }\n\n      let row = e.composedPath().filter(node => node.localName === 'tr')[0];\n\n      if (!this._effectiveSize || this.dropMode === DropMode.ON_GRID) {\n        // The grid is empty or \"on-grid\" drop mode was used, always default to \"empty\"\n        this._dropLocation = DropLocation.EMPTY;\n      } else if (!row || row.parentNode !== this.$.items) {\n        // The dragover didn't occur on a body row but the grid has items\n        if (row) {\n          // The dragover occurred over a header/footer row\n          return;\n        } else if (this.dropMode === DropMode.BETWEEN || this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          // The drop mode allows setting the last row as the drag over item\n          row = Array.from(this.$.items.children).filter(row => !row.hidden).pop();\n          this._dropLocation = DropLocation.BELOW;\n        } else {\n          // Drop mode on-top used but the dragover didn't occur over one of the existing rows\n          return;\n        }\n      } else {\n        // The dragover occurred on a body row, determine the drop location from coordinates\n        const rowRect = row.getBoundingClientRect();\n\n        this._dropLocation = DropLocation.ON_TOP;\n\n        if (this.dropMode === DropMode.BETWEEN) {\n          const dropAbove = e.clientY - rowRect.top < rowRect.bottom - e.clientY;\n          this._dropLocation = dropAbove ? DropLocation.ABOVE : DropLocation.BELOW;\n\n        } else if (this.dropMode === DropMode.ON_TOP_OR_BETWEEN) {\n          if (e.clientY - rowRect.top < rowRect.height / 3) {\n            this._dropLocation = DropLocation.ABOVE;\n          } else if (e.clientY - rowRect.top > (rowRect.height / 3) * 2) {\n            this._dropLocation = DropLocation.BELOW;\n          }\n        }\n      }\n\n      if (row && row.hasAttribute('drop-disabled')) {\n        this._dropLocation = undefined;\n        return;\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this._dropLocation === DropLocation.EMPTY) {\n        this._toggleAttribute('dragover', true, this);\n      } else if (row) {\n        this._dragOverItem = row._item;\n        if (row.getAttribute('dragover') !== this._dropLocation) {\n          row.setAttribute('dragover', this._dropLocation);\n        }\n      } else {\n        this._clearDragStyles();\n      }\n    }\n  }\n\n  /** @private */\n  __dndAutoScroll(clientY) {\n    if (this.__dndAutoScrolling) {\n      return true;\n    }\n\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    const topDiff = headerBottom - clientY + this.__dndAutoScrollThreshold;\n    const bottomDiff = clientY - footerTop + this.__dndAutoScrollThreshold;\n    let scrollTopDelta = 0;\n\n    if (bottomDiff > 0) {\n      scrollTopDelta = bottomDiff * 2;\n    } else if (topDiff > 0) {\n      scrollTopDelta = -topDiff * 2;\n    }\n\n    if (scrollTopDelta) {\n      const scrollTop = this.$.table.scrollTop;\n      this.$.table.scrollTop += scrollTopDelta;\n      const scrollTopChanged = scrollTop !== this.$.table.scrollTop;\n      if (scrollTopChanged) {\n        this.__dndAutoScrolling = true;\n        // Disallow more auto-scrolls within 20ms\n        setTimeout(() => this.__dndAutoScrolling = false, 20);\n        this._scrollHandler();\n        return true;\n      }\n    }\n  }\n\n  /** @private */\n  __getViewportRows() {\n    const headerBottom = this.$.header.getBoundingClientRect().bottom;\n    const footerTop = this.$.footer.getBoundingClientRect().top;\n    return Array.from(this.$.items.children)\n      .filter(row => {\n        const rowRect = row.getBoundingClientRect();\n        return rowRect.bottom > headerBottom && rowRect.top < footerTop;\n      });\n  }\n\n  /** @protected */\n  _clearDragStyles() {\n    this.removeAttribute('dragover');\n    Array.from(this.$.items.children).forEach(row => row.removeAttribute('dragover'));\n  }\n\n  /** @private */\n  _onDrop(e) {\n    if (this.dropMode) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const dragData = e.dataTransfer.types && Array.from(e.dataTransfer.types).map(type => {\n        return {\n          type,\n          data: e.dataTransfer.getData(type)\n        };\n      });\n\n      this._clearDragStyles();\n\n      const event = new CustomEvent('grid-drop', {\n        bubbles: e.bubbles,\n        cancelable: e.cancelable,\n        detail: {\n          dropTargetItem: this._dragOverItem,\n          dropLocation: this._dropLocation,\n          dragData\n        }\n      });\n      event.originalEvent = e;\n      this.dispatchEvent(event);\n    }\n  }\n\n  /** @private */\n  __formatDefaultTransferData(rows) {\n    return rows\n      .map(row => {\n        return Array.from(row.children)\n          .filter(cell => !cell.hidden && cell.getAttribute('part').indexOf('details-cell') === -1)\n          .sort((a, b) => {\n            return a._column._order > b._column._order ? 1 : -1;\n          })\n          .map(cell => cell._content.textContent.trim())\n          .filter(content => content)\n          .join('\\t');\n      })\n      .join('\\n');\n  }\n\n  /** @private */\n  _dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter) {\n    this.filterDragAndDrop();\n  }\n\n  /**\n   * Runs the `dragFilter` and `dropFilter` hooks for the visible cells.\n   * If the filter depends on varying conditions, you may need to\n   * call this function manually in order to update the draggability when\n   * the conditions change.\n   */\n  filterDragAndDrop() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => {\n        this._filterDragAndDrop(row, this.__getRowModel(row));\n      }\n    );\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {!GridItemModel} model\n   * @protected\n   */\n  _filterDragAndDrop(row, model) {\n    const dragDisabled = !this.rowsDraggable || (this.dragFilter && !this.dragFilter(model));\n    const dropDisabled = !this.dropMode || (this.dropFilter && !this.dropFilter(model));\n\n    const draggableElements = window.ShadyDOM\n      ? [row]\n      : Array.from(row.children).map(cell => cell._content);\n\n    draggableElements.forEach(e => {\n      if (dragDisabled) {\n        e.removeAttribute('draggable');\n      } else {\n        e.setAttribute('draggable', true);\n      }\n    });\n\n    this._toggleAttribute('drag-disabled', dragDisabled, row);\n    this._toggleAttribute('drop-disabled', dropDisabled, row);\n  }\n\n  /**\n   * Fired when starting to drag grid rows.\n   *\n   * @event grid-dragstart\n   * @param {Object} originalEvent The native dragstart event\n   * @param {Object} detail\n   * @param {Object} detail.draggedItems the items in the visible viewport that are dragged\n   * @param {Function} detail.setDraggedItemsCount Overrides the default number shown in the drag image on multi row drag.\n   * Parameter is of type number.\n   * @param {Function} detail.setDragData Sets dataTransfer data for the drag operation.\n   * Note that \"text\" is the only data type supported by all the browsers the grid currently supports (including IE11).\n   * The function takes two parameters:\n   * - type:string The type of the data\n   * - data:string The data\n   */\n\n  /**\n   * Fired when the dragging of the rows ends.\n   *\n   * @event grid-dragend\n   * @param {Object} originalEvent The native dragend event\n   */\n\n  /**\n   * Fired when a drop occurs on top of the grid.\n   *\n   * @event grid-drop\n   * @param {Object} originalEvent The native drop event\n   * @param {Object} detail\n   * @param {Object} detail.dropTargetItem The item of the grid row on which the drop occurred.\n   * @param {string} detail.dropLocation The position at which the drop event took place relative to a row.\n   * Depending on the dropMode value, the drop location can be one of the following\n   * - `on-top`: when the drop occurred on top of the row\n   * - `above`: when the drop occurred above the row\n   * - `below`: when the drop occurred below the row\n   * - `empty`: when the drop occurred over the grid, not relative to any specific row\n   * @param {string} detail.dragData An array of items with the payload as a string representation as the\n   * `data` property and the type of the data as `type` property.\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\n\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const DynamicColumnsMixin = superClass => class DynamicColumnsMixin extends superClass {\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this._addNodeObserver();\n  }\n\n  /** @private */\n  _hasColumnGroups(columns) {\n    for (let i = 0; i < columns.length; i++) {\n      if (columns[i].localName === 'vaadin-grid-column-group') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * @param {!GridColumnGroupElement} el\n   * @return {!Array<!GridColumnElement>}\n   * @protected\n   */\n  _getChildColumns(el) {\n    return FlattenedNodesObserver.getFlattenedNodes(el).filter(this._isColumnElement);\n  }\n\n  /** @private */\n  _flattenColumnGroups(columns) {\n    return columns.map(col => {\n      if (col.localName === 'vaadin-grid-column-group') {\n        return this._getChildColumns(col);\n      } else {\n        return [col];\n      }\n    }).reduce((prev, curr) => {\n      return prev.concat(curr);\n    }, []);\n  }\n\n  /** @private */\n  _getColumnTree() {\n    var rootColumns = FlattenedNodesObserver.getFlattenedNodes(this).filter(this._isColumnElement);\n    var _columnTree = [];\n\n    for (var c = rootColumns; ;) {\n      _columnTree.push(c);\n      if (!this._hasColumnGroups(c)) {\n        break;\n      }\n      c = this._flattenColumnGroups(c);\n    }\n\n    return _columnTree;\n  }\n\n  /** @protected */\n  _updateColumnTree() {\n    var columnTree = this._getColumnTree();\n    if (!this._arrayEquals(columnTree, this._columnTree)) {\n      this._columnTree = columnTree;\n    }\n  }\n\n  /** @private */\n  _addNodeObserver() {\n    this._observer = new FlattenedNodesObserver(this, info => {\n\n      const rowDetailsTemplate = info.addedNodes.filter(n => n.localName === 'template' && n.classList.contains('row-details'))[0];\n      if (rowDetailsTemplate && this._rowDetailsTemplate !== rowDetailsTemplate) {\n        this._rowDetailsTemplate = rowDetailsTemplate;\n      }\n\n      if (info.addedNodes.filter(this._isColumnElement).length > 0 ||\n        info.removedNodes.filter(this._isColumnElement).length > 0) {\n        this._updateColumnTree();\n      }\n\n      this._debouncerCheckImports = Debouncer.debounce(\n        this._debouncerCheckImports,\n        timeOut.after(2000),\n        this._checkImports.bind(this));\n\n      this._ensureFirstPageLoaded();\n    });\n  }\n\n  /** @private */\n  _arrayEquals(arr1, arr2) {\n    if (!arr1 || !arr2 || arr1.length != arr2.length) {\n      return false;\n    }\n\n    for (var i = 0, l = arr1.length; i < l; i++) {\n      // Check if we have nested arrays\n      if (arr1[i] instanceof Array && arr2[i] instanceof Array) {\n        // recurse into the nested arrays\n        if (!this._arrayEquals(arr1[i], arr2[i])) {\n          return false;\n        }\n      } else if (arr1[i] != arr2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /** @protected */\n  _checkImports() {\n    [\n      'vaadin-grid-column-group',\n      'vaadin-grid-filter',\n      'vaadin-grid-filter-column',\n      'vaadin-grid-tree-toggle',\n      'vaadin-grid-selection-column',\n      'vaadin-grid-sort-column',\n      'vaadin-grid-sorter'\n    ].forEach(elementName => {\n      var element = this.querySelector(elementName);\n      if (element && !(element instanceof PolymerElement)) {\n        console.warn(`Make sure you have imported the required module for <${elementName}> element.`);\n      }\n    });\n  }\n\n  /** @protected */\n  _updateFirstAndLastColumn() {\n    Array.from(this.shadowRoot.querySelectorAll('tr')).forEach(row => this._updateFirstAndLastColumnForRow(row));\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @protected\n   */\n  _updateFirstAndLastColumnForRow(row) {\n    Array.from(row.querySelectorAll('[part~=\"cell\"]:not([part~=\"details-cell\"])'))\n      .sort((a, b) => {\n        return a._column._order - b._column._order;\n      }).forEach((cell, cellIndex, children) => {\n        this._toggleAttribute('first-column', cellIndex === 0, cell);\n        this._toggleAttribute('last-column', cellIndex === children.length - 1, cell);\n      });\n  }\n\n  /**\n   * @param {!Node} node\n   * @return {boolean}\n   * @protected\n   */\n  _isColumnElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE && /\\bcolumn\\b/.test(node.localName);\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const EventContextMixin = superClass => class EventContextMixin extends superClass {\n\n  /**\n   * Returns an object with context information about the event target:\n   * - `item`: the data object corresponding to the targeted row (not specified when targeting header or footer)\n   * - `column`: the column element corresponding to the targeted cell (not specified when targeting row details)\n   * - `section`: whether the event targeted the body, header, footer or details of the grid\n   *\n   * These additional properties are included when `item` is specified:\n   * - `index`: the index of the item\n   * - `selected`: the selected state of the item\n   * - `detailsOpened`: whether the row details are open for the item\n   * - `expanded`: the expanded state of the tree toggle\n   * - `level`: the tree hierarchy level\n   *\n   * The returned object is populated only when a grid cell, header, footer or row details is found in `event.composedPath()`.\n   * This means mostly mouse and keyboard events. If such a grid part is not found in the path, an empty object is returned.\n   * This may be the case eg. if the event is fired on the `<vaadin-grid>` element and not any deeper in the DOM, or if\n   * the event targets the empty part of the grid body.\n   *\n   * @param {!Event} event\n   * @return {GridEventContext | object}\n   */\n  getEventContext(event) {\n\n    const context = {};\n\n    const path = event.composedPath();\n    const cell = path[path.indexOf(this.$.table) - 3];\n\n    if (!cell) {\n      return context;\n    }\n\n    context.section = ['body', 'header', 'footer', 'details']\n      .filter(section => cell.getAttribute('part').indexOf(section) > -1)[0];\n\n    if (cell._column) {\n      context.column = cell._column;\n    }\n\n    if (context.section === 'body' || context.section === 'details') {\n      Object.assign(context, this.__getRowModel(cell.parentElement));\n    }\n\n    return context;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GridColumnElement } from './vaadin-grid-column.js';\n\nimport './vaadin-grid-filter.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-grid-filter-column>` is a helper element for the `<vaadin-grid>`\n * that provides default header template and functionality for filtering.\n *\n * #### Example:\n * ```html\n * <vaadin-grid items=\"[[items]]\">\n *  <vaadin-grid-filter-column path=\"name.first\"></vaadin-grid-filter-column>\n *\n *  <vaadin-grid-column>\n *    ...\n * ```\n *\n */\nclass GridFilterColumnElement extends GridColumnElement {\n  static get template() {\n    return html`\n    <template class=\"header\" id=\"headerTemplate\">\n      <vaadin-grid-filter path=\"[[path]]\" value=\"[[_filterValue]]\">\n        <vaadin-text-field theme=\"small\" focus-target=\"\" style=\"max-width: 100%;\" slot=\"filter\" value=\"{{_filterValue}}\" label=\"[[_getHeader(header, path)]]\"></vaadin-text-field>\n      </vaadin-grid-filter>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-filter-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for filtering the data.\n       */\n      path: String,\n\n      /**\n       * Text to display as the label of the column filter text-field.\n       */\n      header: String\n    };\n  }\n\n  /** @private */\n  _prepareHeaderTemplate() {\n    const headerTemplate = this._prepareTemplatizer(this.$.headerTemplate);\n    // needed to override the dataHost correctly in case internal template is used.\n    headerTemplate.templatizer.dataHost = this;\n    return headerTemplate;\n  }\n\n  /** @private */\n  _getHeader(header, path) {\n    return header || this._generateHeader(path);\n  }\n}\n\ncustomElements.define(GridFilterColumnElement.is, GridFilterColumnElement);\n\nexport { GridFilterColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const FilterMixin = superClass => class FilterMixin extends superClass {\n\n  static get properties() {\n    return {\n      /** @private */\n      _filters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this.addEventListener('filter-changed', this._filterChanged.bind(this));\n  }\n\n  /** @private */\n  _filterChanged(e) {\n    if (this._filters.indexOf(e.target) === -1) {\n      this._filters.push(e.target);\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider) {\n      this.clearCache();\n    }\n  }\n\n  /**\n   * @return {!Array<!GridFilter>}\n   * @protected\n   */\n  _mapFilters() {\n    return this._filters.map(filter => {\n      return {\n        path: filter.path,\n        value: filter.value\n      };\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n/**\n * `<vaadin-grid-filter>` is a helper element for the `<vaadin-grid>` that provides out-of-the-box UI controls,\n * and handlers for filtering the grid data.\n *\n * #### Example:\n * ```html\n * <vaadin-grid-column>\n *   <template class=\"header\">\n *     <vaadin-grid-filter path=\"name.first\"></vaadin-grid-filter>\n *   </template>\n *   <template>[[item.name.first]]</template>\n * </vaadin-grid-column>\n * ```\n *\n */\nclass GridFilterElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-flex;\n        max-width: 100%;\n      }\n\n      #filter {\n        width: 100%;\n        box-sizing: border-box;\n      }\n    </style>\n    <slot name=\"filter\">\n      <vaadin-text-field id=\"filter\" value=\"{{value}}\"></vaadin-text-field>\n    </slot>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-filter';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for filtering the data.\n       */\n      path: String,\n\n      /**\n       * Current filter value.\n       */\n      value: {\n        type: String,\n        notify: true\n      },\n\n      /** @private */\n      _connected: Boolean\n    };\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this._connected = true;\n  }\n\n  static get observers() {\n    return ['_filterChanged(path, value, _connected)'];\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    const child = this.firstElementChild;\n    if (child && child.getAttribute('slot') !== 'filter') {\n      console.warn('Make sure you have assigned slot=\"filter\" to the child elements of <vaadin-grid-filter>');\n      child.setAttribute('slot', 'filter');\n    }\n  }\n\n  /** @private */\n  _filterChanged(path, value, connected) {\n    if (path === undefined || value === undefined || !connected) {\n      return;\n    }\n    if (this._previousValue === undefined && value === '') {\n      return;\n    }\n    this._previousValue = value;\n\n    this._debouncerFilterChanged = Debouncer.debounce(\n      this._debouncerFilterChanged,\n      timeOut.after(200),\n      () => {\n        this.dispatchEvent(new CustomEvent('filter-changed', {bubbles: true}));\n      });\n  }\n\n  focus() {\n    this.$.filter.focus();\n  }\n}\n\ncustomElements.define(GridFilterElement.is, GridFilterElement);\n\nexport { GridFilterElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const KeyboardNavigationMixin = superClass => class KeyboardNavigationMixin extends superClass {\n  static get properties() {\n    return {\n      /** @private */\n      _headerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n\n      /**\n       * @type {!HTMLElement | undefined}\n       * @protected\n       */\n      _itemsFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n\n      /** @private */\n      _footerFocusable: {\n        type: Object,\n        observer: '_focusableChanged'\n      },\n\n      /** @private */\n      _navigatingIsHidden: Boolean,\n\n      /**\n       * @type {number}\n       * @protected\n       */\n      _focusedItemIndex: {\n        type: Number,\n        value: 0\n      },\n\n      /** @private */\n      _focusedColumnOrder: Number\n    };\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    if (this._ios || this._android) {\n      // Disable keyboard navigation on mobile devices\n      return;\n    }\n\n    this.addEventListener('keydown', this._onKeyDown);\n    this.addEventListener('keyup', this._onKeyUp);\n\n    this.addEventListener('focusin', this._onFocusIn);\n    this.addEventListener('focusout', this._onFocusOut);\n\n    // When focus goes from cell to another cell, focusin/focusout events do\n    // not escape the grids shadowRoot, thus listening inside the shadowRoot.\n    this.$.table.addEventListener('focusin', this._onCellFocusIn.bind(this));\n    this.$.table.addEventListener('focusout', this._onCellFocusOut.bind(this));\n\n    this.addEventListener('mousedown', () => {\n      this._toggleAttribute('navigating', false, this);\n      this._isMousedown = true;\n    });\n    this.addEventListener('mouseup', () => this._isMousedown = false);\n  }\n\n  /** @private */\n  _focusableChanged(focusable, oldFocusable) {\n    if (oldFocusable) {\n      oldFocusable.setAttribute('tabindex', '-1');\n    }\n    if (focusable) {\n      focusable.setAttribute('tabindex', '0');\n    }\n  }\n\n  /**\n   * @param {!KeyboardEvent} e\n   * @protected\n   */\n  _onKeyDown(e) {\n    // Ensure standard key value, unified across browsers\n    let key = e.key;\n    if (key === 'Up' || key === 'Down' || key === 'Left' || key === 'Right') {\n      // MSIE & Edge\n      key = 'Arrow' + key;\n    }\n    if (key === 'Esc') {\n      // MSIE & Edge\n      key = 'Escape';\n    }\n    if (key === 'Spacebar') {\n      // MSIE\n      key = ' ';\n    }\n\n    let keyGroup;\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'PageUp':\n      case 'PageDown':\n      case 'Home':\n      case 'End':\n        keyGroup = 'Navigation';\n        break;\n      case 'Enter':\n      case 'Escape':\n      case 'F2':\n        keyGroup = 'Interaction';\n        break;\n      case 'Tab':\n        keyGroup = 'Tab';\n        break;\n      case ' ':\n        keyGroup = 'Space';\n        break;\n    }\n\n    this._detectInteracting(e);\n    if (this.hasAttribute('interacting') && keyGroup !== 'Interaction') {\n      // When in the interacting mode, only the Interaction keys are handled.\n      keyGroup = undefined;\n    }\n\n    if (keyGroup) {\n      this[`_on${keyGroup}KeyDown`](e, key);\n    }\n  }\n\n  /** @private */\n  _ensureScrolledToIndex(index) {\n    const targetRowInDom = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (!targetRowInDom) {\n      this._scrollToIndex(index);\n    }\n  }\n\n  /** @private */\n  _onNavigationKeyDown(e, key) {\n    this._scrollHandler();\n\n    e.preventDefault();\n\n    function indexOfChildElement(el) {\n      return Array.prototype.indexOf.call(el.parentNode.children, el);\n    }\n\n    const visibleItemsCount = this._lastVisibleIndex - this._firstVisibleIndex - 1;\n\n    let dx = 0, dy = 0;\n    switch (key) {\n      case 'ArrowRight':\n        dx = this.__isRTL ? -1 : 1;\n        break;\n      case 'ArrowLeft':\n        dx = this.__isRTL ? 1 : -1;\n        break;\n      case 'Home':\n        dx = -Infinity;\n        e.ctrlKey && (dy = -Infinity);\n        break;\n      case 'End':\n        dx = Infinity;\n        e.ctrlKey && (dy = Infinity);\n        break;\n      case 'ArrowDown':\n        dy = 1;\n        break;\n      case 'ArrowUp':\n        dy = -1;\n        break;\n      case 'PageDown':\n        dy = visibleItemsCount;\n        break;\n      case 'PageUp':\n        dy = -visibleItemsCount;\n        break;\n    }\n\n    const activeCell = e.composedPath()[0];\n    const columnIndex = indexOfChildElement(activeCell);\n    const isRowDetails = this._elementMatches(activeCell, '[part~=\"details-cell\"]');\n\n    const activeRow = activeCell.parentNode;\n\n    const activeRowGroup = activeRow.parentNode;\n    const maxRowIndex = (activeRowGroup === this.$.items ? this._effectiveSize : activeRowGroup.children.length) - 1;\n\n    // Body rows have index property, otherwise DOM child index of the row is used.\n    const rowIndex = (activeRowGroup === this.$.items) ?\n      (this._focusedItemIndex !== undefined ? this._focusedItemIndex : activeRow.index) :\n      indexOfChildElement(activeRow);\n\n    // Index of the destination row\n    let dstRowIndex = Math.max(0, Math.min(rowIndex + dy, maxRowIndex));\n\n    // Row details navigation logic\n    let dstIsRowDetails = false;\n    if (activeRowGroup === this.$.items) {\n      const item = activeRow._item;\n      const dstItem = this._cache.getItemForIndex(dstRowIndex);\n      // Should we navigate to row details?\n      if (isRowDetails) {\n        dstIsRowDetails = dy === 0;\n      } else {\n        dstIsRowDetails = dy === 1 && this._isDetailsOpened(item) ||\n          dy === -1 && dstRowIndex !== rowIndex && this._isDetailsOpened(dstItem);\n      }\n      // Should we navigate between details and regular cells of the same row?\n      if (dstIsRowDetails !== isRowDetails &&\n          (dy === 1 && dstIsRowDetails || dy === -1 && !dstIsRowDetails)) {\n        dstRowIndex = rowIndex;\n      }\n    }\n\n    // Header and footer could have hidden rows, e. g., if none of the columns\n    // or groups on the given column tree level define template. Skip them\n    // in vertical keyboard navigation.\n    if (activeRowGroup !== this.$.items) {\n      if (dstRowIndex > rowIndex) {\n        while (\n          dstRowIndex < maxRowIndex &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex++;\n        }\n      } else if (dstRowIndex < rowIndex) {\n        while (\n          dstRowIndex > 0 &&\n          activeRowGroup.children[dstRowIndex].hidden\n        ) {\n          dstRowIndex--;\n        }\n      }\n    }\n\n    // _focusedColumnOrder is memoized  this is to ensure predictable\n    // navigation when entering and leaving detail and column group cells.\n    if (this._focusedColumnOrder === undefined) {\n      if (isRowDetails) {\n        this._focusedColumnOrder = 0;\n      } else {\n        this._focusedColumnOrder = this._getColumns(activeRowGroup, rowIndex).filter(c => !c.hidden)[columnIndex]._order;\n      }\n    }\n\n    // Find orderedColumnIndex  the index of order closest matching the\n    // original _focusedColumnOrder in the sorted array of orders\n    // of the visible columns on the destination row.\n    const dstColumns = this._getColumns(activeRowGroup, dstRowIndex).filter(c => !c.hidden);\n    const dstSortedColumnOrders = dstColumns.map(c => c._order)\n      .sort((b, a) => (b - a));\n    const maxOrderedColumnIndex = dstSortedColumnOrders.length - 1;\n    const orderedColumnIndex = dstSortedColumnOrders.indexOf(\n      dstSortedColumnOrders.slice(0).sort((b, a) =>\n        Math.abs(b - this._focusedColumnOrder) - Math.abs(a - this._focusedColumnOrder)\n      )[0]\n    );\n\n    // Index of the destination column order\n    const dstOrderedColumnIndex = (dy === 0 && isRowDetails) ? orderedColumnIndex :\n      Math.max(0, Math.min(orderedColumnIndex + dx, maxOrderedColumnIndex));\n\n    if (dstOrderedColumnIndex !== orderedColumnIndex) {\n      // Horizontal movement invalidates stored _focusedColumnOrder\n      this._focusedColumnOrder = undefined;\n    }\n\n    // Ensure correct vertical scroll position, destination row is visible\n    if (activeRowGroup === this.$.items) {\n      this._ensureScrolledToIndex(dstRowIndex);\n    }\n\n    // This has to be set after scrolling, otherwise it can be removed by\n    // `_preventScrollerRotatingCellFocus(row, index)` during scrolling.\n    this._toggleAttribute('navigating', true, this);\n\n    const columnIndexByOrder = dstColumns.reduce((acc, col, i) => (acc[col._order] = i, acc), {});\n    const dstColumnIndex = columnIndexByOrder[dstSortedColumnOrders[dstOrderedColumnIndex]];\n\n    // For body rows, use index property to find destination row, otherwise use DOM child index\n    const dstRow = activeRowGroup === this.$.items ?\n      Array.from(activeRowGroup.children).filter(el => el.index === dstRowIndex)[0] :\n      activeRowGroup.children[dstRowIndex];\n    if (!dstRow) {\n      return;\n    }\n\n    // Here we go!\n    const dstCell = dstIsRowDetails ?\n      Array.from(dstRow.children)\n        .filter(el => this._elementMatches(el, '[part~=\"details-cell\"]'))[0] :\n      dstRow.children[dstColumnIndex];\n    this._scrollHorizontallyToCell(dstCell);\n    if (activeRowGroup === this.$.items) {\n      // When scrolling with repeated keydown, sometimes FocusEvent listeners\n      // are too late to update _focusedItemIndex. Ensure next keydown\n      // listener invocation gets updated _focusedItemIndex value.\n      this._focusedItemIndex = dstRowIndex;\n    }\n\n    if (activeRowGroup === this.$.items) {\n      const dstRect = dstCell.getBoundingClientRect();\n      const footerTop = this.$.footer.getBoundingClientRect().top;\n      const headerBottom = this.$.header.getBoundingClientRect().bottom;\n      if (dstRect.bottom > footerTop) {\n        this.$.table.scrollTop += dstRect.bottom - footerTop;\n        this._scrollHandler();\n      } else if (dstRect.top < headerBottom) {\n        this.$.table.scrollTop -= headerBottom - dstRect.top;\n        this._scrollHandler();\n      }\n    }\n\n    dstCell.focus();\n  }\n\n  /** @private */\n  _parseEventPath(path) {\n    const tableIndex = path.indexOf(this.$.table);\n    return {\n      rowGroup: path[tableIndex - 1],\n      row: path[tableIndex - 2],\n      cell: path[tableIndex - 3]\n    };\n  }\n\n  /** @private */\n  _onInteractionKeyDown(e, key) {\n    const localTarget = e.composedPath()[0];\n    const localTargetIsTextInput = localTarget.localName === 'input' &&\n      !/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(localTarget.type);\n\n    let wantInteracting;\n    switch (key) {\n      case 'Enter':\n        wantInteracting = this.hasAttribute('interacting') ? !localTargetIsTextInput : true;\n        break;\n      case 'Escape':\n        wantInteracting = false;\n        break;\n      case 'F2':\n        wantInteracting = !this.hasAttribute('interacting');\n        break;\n    }\n\n    const {cell} = this._parseEventPath(e.composedPath());\n\n    if (this.hasAttribute('interacting') !== wantInteracting) {\n      if (wantInteracting) {\n        const focusTarget = cell._content.querySelector('[focus-target]') ||\n          cell._content.firstElementChild;\n        if (focusTarget) {\n          e.preventDefault();\n          focusTarget.focus();\n          this._toggleAttribute('interacting', true, this);\n          this._toggleAttribute('navigating', false, this);\n        }\n      } else {\n        e.preventDefault();\n        this._focusedColumnOrder = undefined;\n        cell.focus();\n        this._toggleAttribute('interacting', false, this);\n        this._toggleAttribute('navigating', true, this);\n      }\n    }\n  }\n\n  /** @private */\n  _predictFocusStepTarget(srcElement, step) {\n    const tabOrder = [\n      this.$.table,\n      this._headerFocusable,\n      this._itemsFocusable,\n      this._footerFocusable,\n      this.$.focusexit\n    ];\n\n    let index = tabOrder.indexOf(srcElement);\n\n    index += step;\n    while (index >= 0 && index <= tabOrder.length - 1 &&\n        (!tabOrder[index] || tabOrder[index].parentNode.hidden)) {\n      index += step;\n    }\n\n    return tabOrder[index];\n  }\n\n  /** @private */\n  _onTabKeyDown(e) {\n    const focusTarget = this._predictFocusStepTarget(e.composedPath()[0], e.shiftKey ? -1 : 1);\n\n    if (focusTarget === this.$.table) {\n      // The focus is about to exit the grid to the top.\n      this.$.table.focus();\n    } else if (focusTarget === this.$.focusexit) {\n      // The focus is about to exit the grid to the bottom.\n      this.$.focusexit.focus();\n    } else if (focusTarget === this._itemsFocusable) {\n      let itemsFocusTarget = focusTarget;\n      const targetRow = this._itemsFocusable.parentNode;\n      this._ensureScrolledToIndex(this._focusedItemIndex);\n      if (targetRow.index !== this._focusedItemIndex) {\n        // The target row, which is about to be focused next, has been\n        // assigned with a new index since last focus, probably because of\n        // scrolling. Focus the row for the stored focused item index instead.\n        const columnIndex = Array.from(targetRow.children).indexOf(this._itemsFocusable);\n        const focusedItemRow = Array.from(this.$.items.children)\n          .filter(row => row.index === this._focusedItemIndex)[0];\n        if (focusedItemRow) {\n          itemsFocusTarget = focusedItemRow.children[columnIndex];\n        }\n      }\n      e.preventDefault();\n      itemsFocusTarget.focus();\n    } else {\n      e.preventDefault();\n      focusTarget.focus();\n    }\n\n    this._toggleAttribute('navigating', true, this);\n  }\n\n  /** @private */\n  _onSpaceKeyDown(e) {\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (!cell._content || !cell._content.firstElementChild) {\n      this.dispatchEvent(new CustomEvent('cell-activate', {detail: {\n        model: this.__getRowModel(cell.parentElement)\n      }}));\n    }\n  }\n\n  /** @private */\n  _onKeyUp(e) {\n    if (!/^( |SpaceBar)$/.test(e.key)) {\n      return;\n    }\n\n    e.preventDefault();\n\n    const cell = e.composedPath()[0];\n    if (cell._content && cell._content.firstElementChild) {\n      const wasNavigating = this.hasAttribute('navigating');\n      cell._content.firstElementChild.click();\n      this._toggleAttribute('navigating', wasNavigating, this);\n    }\n  }\n\n  /**\n   * @param {!FocusEvent} e\n   * @protected\n   */\n  _onFocusIn(e) {\n    if (!this._isMousedown) {\n      this._toggleAttribute('navigating', true, this);\n    }\n\n    const rootTarget = e.composedPath()[0];\n\n    if (rootTarget === this.$.table ||\n        rootTarget === this.$.focusexit) {\n      // The focus enters the top (bottom) of the grid, meaning that user has\n      // tabbed (shift-tabbed) into the grid. Move the focus to\n      // the first (the last) focusable.\n      this._predictFocusStepTarget(\n        rootTarget,\n        rootTarget === this.$.table ? 1 : -1\n      ).focus();\n      this._toggleAttribute('interacting', false, this);\n    } else {\n      this._detectInteracting(e);\n    }\n  }\n\n  /**\n   * @param {!FocusEvent} e\n   * @protected\n   */\n  _onFocusOut(e) {\n    this._toggleAttribute('navigating', false, this);\n    this._detectInteracting(e);\n  }\n\n  /** @private */\n  _onCellFocusIn(e) {\n    this._detectInteracting(e);\n\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      this._activeRowGroup = cell.parentNode.parentNode;\n      if (this._activeRowGroup === this.$.header) {\n        this._headerFocusable = cell;\n      } else if (this._activeRowGroup === this.$.items) {\n        this._itemsFocusable = cell;\n      } else if (this._activeRowGroup === this.$.footer) {\n        this._footerFocusable = cell;\n      }\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusin', {bubbles: false}));\n    }\n\n    this._detectFocusedItemIndex(e);\n  }\n\n  /** @private */\n  _onCellFocusOut(e) {\n    if (e.composedPath().indexOf(this.$.table) === 3) {\n      const cell = e.composedPath()[0];\n      // Inform cell content of the focus (used in <vaadin-grid-sorter>)\n      cell._content.dispatchEvent(new CustomEvent('cell-focusout', {bubbles: false}));\n    }\n  }\n\n  /** @private */\n  _detectInteracting(e) {\n    this._toggleAttribute('interacting',\n      e.composedPath().some(el => el.localName === 'vaadin-grid-cell-content'),\n      this);\n  }\n\n  /** @private */\n  _detectFocusedItemIndex(e) {\n    const {rowGroup, row} = this._parseEventPath(e.composedPath());\n    if (rowGroup === this.$.items) {\n      this._focusedItemIndex = row.index;\n    }\n  }\n\n  /**\n   * @param {!HTMLTableRowElement} row\n   * @param {number} index\n   * @protected\n   */\n  _preventScrollerRotatingCellFocus(row, index) {\n    if (row.index === this._focusedItemIndex && this.hasAttribute('navigating') && this._activeRowGroup === this.$.items) {\n      // Focused item has went, hide navigation mode\n      this._navigatingIsHidden = true;\n      this._toggleAttribute('navigating', false, this);\n    }\n    if (index === this._focusedItemIndex && this._navigatingIsHidden) {\n      // Focused item is back, restore navigation mode\n      this._navigatingIsHidden = false;\n      this._toggleAttribute('navigating', true, this);\n    }\n  }\n\n  /**\n   * @param {HTMLTableSectionElement=} rowGroup\n   * @param {number=} rowIndex\n   * @return {!Array<!GridColumnElement>}\n   * @protected\n   */\n  _getColumns(rowGroup, rowIndex) {\n    let columnTreeLevel = this._columnTree.length - 1;\n    if (rowGroup === this.$.header) {\n      columnTreeLevel = rowIndex;\n    } else if (rowGroup === this.$.footer) {\n      columnTreeLevel = this._columnTree.length - 1 - rowIndex;\n    }\n    return this._columnTree[columnTreeLevel];\n  }\n\n  /** @protected */\n  _resetKeyboardNavigation() {\n    if (this.$.header.firstElementChild) {\n      this._headerFocusable = Array.from(this.$.header.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n\n    if (this.$.items.firstElementChild) {\n      const firstVisibleIndexRow = this._iterateItems((pidx, vidx) => {\n        if (this._firstVisibleIndex === vidx) {\n          return this.$.items.children[pidx];\n        }\n      });\n      if (firstVisibleIndexRow) {\n        this._itemsFocusable = Array.from(firstVisibleIndexRow.children).filter(el => !el.hidden)[0];\n      }\n    }\n\n    if (this.$.footer.firstElementChild) {\n      this._footerFocusable = Array.from(this.$.footer.firstElementChild.children).filter(el => !el.hidden)[0];\n    }\n  }\n\n  /**\n   * @param {!HTMLElement} dstCell\n   * @protected\n   */\n  _scrollHorizontallyToCell(dstCell) {\n    if (dstCell.hasAttribute('frozen') || this._elementMatches(dstCell, '[part~=\"details-cell\"]')) {\n      // These cells are, by design, always visible, no need to scroll.\n      return;\n    }\n\n    const dstCellRect = dstCell.getBoundingClientRect();\n    const dstRow = dstCell.parentNode;\n    const dstCellIndex = Array.from(dstRow.children).indexOf(dstCell);\n    const tableRect = this.$.table.getBoundingClientRect();\n    let leftBoundary = tableRect.left, rightBoundary = tableRect.right;\n    for (let i = dstCellIndex - 1; i >= 0; i--) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        leftBoundary = cell.getBoundingClientRect().right;\n        break;\n      }\n    }\n    for (let i = dstCellIndex + 1; i < dstRow.children.length; i++) {\n      const cell = dstRow.children[i];\n      if (cell.hasAttribute('hidden') ||\n          this._elementMatches(cell, '[part~=\"details-cell\"]')) {\n        continue;\n      }\n      if (cell.hasAttribute('frozen')) {\n        rightBoundary = cell.getBoundingClientRect().left;\n        break;\n      }\n    }\n\n    if (dstCellRect.left < leftBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.left - leftBoundary);\n    }\n    if (dstCellRect.right > rightBoundary) {\n      this.$.table.scrollLeft += Math.round(dstCellRect.right - rightBoundary);\n    }\n  }\n\n  /** @private */\n  _elementMatches(el, query) {\n    return el.matches ? el.matches(query) :\n      Array.from(el.parentNode.querySelectorAll(query)).indexOf(el) !== -1;\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Templatizer } from './vaadin-grid-templatizer.js';\n\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\n\n/**\n * @polymerMixin\n */\nexport const RowDetailsMixin = superClass => class RowDetailsMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * An array containing references to items with open row details.\n       * @type {Array<GridItem> | null | undefined}\n       */\n      detailsOpenedItems: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      /**\n       * @type {HTMLTemplateElement}\n       * @protected\n       */\n      _rowDetailsTemplate: Object,\n\n      /**\n       * Custom function for rendering the content of the row details.\n       * Receives three arguments:\n       *\n       * - `root` The row details content DOM element. Append your content to it.\n       * - `grid` The `<vaadin-grid>` element.\n       * - `model` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `model.index` The index of the item.\n       *   - `model.item` The item.\n       *\n       * @type {GridRowDetailsRenderer | null | undefined}\n       */\n      rowDetailsRenderer: Function,\n\n      /**\n       * @type {!Array<!HTMLElement> | undefined}\n       * @protected\n       */\n      _detailsCells: {\n        type: Array,\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)',\n      '_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)'\n    ];\n  }\n\n  /** @private */\n  _rowDetailsTemplateOrRendererChanged(rowDetailsTemplate, rowDetailsRenderer) {\n    if (rowDetailsTemplate && rowDetailsRenderer) {\n      throw new Error('You should only use either a renderer or a template for row details');\n    }\n    if (rowDetailsTemplate || rowDetailsRenderer) {\n      if (rowDetailsTemplate && !rowDetailsTemplate.templatizer) {\n        var templatizer = new Templatizer();\n        templatizer._grid = this;\n        templatizer.dataHost = this.dataHost;\n        templatizer.template = rowDetailsTemplate;\n        rowDetailsTemplate.templatizer = templatizer;\n      }\n\n      if (this._columnTree) {\n        // Only update the rows if the column tree has already been initialized\n        Array.from(this.$.items.children).forEach(row => {\n          if (!row.querySelector('[part~=details-cell]')) {\n            this._updateRow(row, this._columnTree[this._columnTree.length - 1]);\n            this._a11yUpdateRowDetailsOpened(row, false);\n          }\n          // Clear any old template instances\n          delete row.querySelector('[part~=details-cell]')._instance;\n        });\n      }\n\n      if (this.detailsOpenedItems.length) {\n        Array.from(this.$.items.children).forEach(this._toggleDetailsCell, this);\n        this._update();\n      }\n    }\n  }\n\n  /** @private */\n  _detailsOpenedItemsChanged(changeRecord, rowDetailsTemplate, rowDetailsRenderer) {\n    if (changeRecord.path === 'detailsOpenedItems.length' || !changeRecord.value) {\n      // Lets avoid duplicate work of both .splices and .length updates.\n      return;\n    }\n    Array.from(this.$.items.children).forEach(row => {\n      this._toggleDetailsCell(row, row._item);\n      this._a11yUpdateRowDetailsOpened(row, this._isDetailsOpened(row._item));\n      this._toggleAttribute('details-opened', this._isDetailsOpened(row._item), row);\n    });\n  }\n\n  /**\n   * @param {!HTMLElement} cell\n   * @protected\n   */\n  _configureDetailsCell(cell) {\n    cell.setAttribute('part', 'cell details-cell');\n    // Freeze the details cell, so that it does not scroll horizontally\n    // with the normal cells. This way it looks less weird.\n    this._toggleAttribute('frozen', true, cell);\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {!GridItem} item\n   * @protected\n   */\n  _toggleDetailsCell(row, item) {\n    const cell = row.querySelector('[part~=\"details-cell\"]');\n    if (!cell) {\n      return;\n    }\n    const detailsHidden = !this._isDetailsOpened(item);\n    const hiddenChanged = !!cell.hidden !== detailsHidden;\n\n    if (!cell._instance && !cell._renderer || cell.hidden !== detailsHidden) {\n      cell.hidden = detailsHidden;\n      if (detailsHidden) {\n        row.style.removeProperty('padding-bottom');\n      } else {\n        if (this.rowDetailsRenderer) {\n          cell._renderer = this.rowDetailsRenderer;\n          cell._renderer.call(this, cell._content, this, {index: row.index, item: item});\n        } else if (this._rowDetailsTemplate && !cell._instance) {\n          // Stamp the template\n          cell._instance = this._rowDetailsTemplate.templatizer.createInstance();\n          cell._content.innerHTML = '';\n          cell._content.appendChild(cell._instance.root);\n          this._updateItem(row, item);\n        }\n\n        flush();\n        row.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n\n        requestAnimationFrame(() => this.notifyResize());\n      }\n    }\n    if (hiddenChanged) {\n      this._updateMetrics();\n      this._positionItems();\n    }\n  }\n\n  /** @protected */\n  _updateDetailsCellHeights() {\n    Array.from(this.$.items.querySelectorAll('[part~=\"details-cell\"]:not([hidden])')).forEach(cell => {\n      cell.parentElement.style.setProperty('padding-bottom', `${cell.offsetHeight}px`);\n    });\n  }\n\n  /**\n   * @param {!GridItem} item\n   * @return {boolean}\n   * @protected\n   */\n  _isDetailsOpened(item) {\n    return this.detailsOpenedItems && this._getItemIndexInArray(item, this.detailsOpenedItems) !== -1;\n  }\n\n  /**\n   * Open the details row of a given item.\n   * @param {!GridItem} item\n   */\n  openItemDetails(item) {\n    if (!this._isDetailsOpened(item)) {\n      this.push('detailsOpenedItems', item);\n    }\n  }\n\n  /**\n   * Close the details row of a given item.\n   * @param {!GridItem} item\n   */\n  closeItemDetails(item) {\n    if (this._isDetailsOpened(item)) {\n      this.splice('detailsOpenedItems', this._getItemIndexInArray(item, this.detailsOpenedItems), 1);\n    }\n  }\n\n  /** @private */\n  _detailsOpenedInstanceChangedCallback(instance, value) {\n    if (super._detailsOpenedInstanceChangedCallback) {\n      super._detailsOpenedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.openItemDetails(instance.item);\n    } else {\n      this.closeItemDetails(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n\nimport { animationFrame, timeOut, microTask } from '@polymer/polymer/lib/utils/async.js';\n\n/**\n * @polymerMixin\n */\nexport const ScrollMixin = superClass => class ScrollMixin extends superClass {\n  /** @private */\n  get _timeouts() {\n    return {\n      SCROLLING: 500,\n      IGNORE_WHEEL: 500\n    };\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Cached array of frozen cells\n       * @private\n       */\n      _frozenCells: {\n        type: Array,\n        value: () => [],\n      },\n\n      /** @private */\n      _rowWithFocusedElement: Element,\n\n      /** @private */\n      _deltaYAcc: {\n        type: Number,\n        value: 0\n      },\n\n      /** @private */\n      _useSticky: {\n        type: Boolean,\n        value: window.CSS && window.CSS.supports &&\n          (window.CSS.supports('position', 'sticky') || window.CSS.supports('position', '-webkit-sticky'))\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_scrollViewportHeightUpdated(_viewportHeight)'\n    ];\n  }\n\n  /**\n   * Override (from iron-scroll-target-behavior) to avoid document scroll\n   * @private\n   */\n  set _scrollTop(top) {\n    this.$.table.scrollTop = top;\n  }\n\n  /** @private */\n  get _scrollTop() {\n    return this.$.table.scrollTop;\n  }\n\n  constructor() {\n    super();\n    this._scrollLineHeight = this._getScrollLineHeight();\n  }\n\n  /**\n   * @returns {Number|undefined} - The browser's default font-size in pixels\n   * @private\n   */\n  _getScrollLineHeight() {\n    const el = document.createElement('div');\n    el.style.fontSize = 'initial';\n    el.style.display = 'none';\n    document.body.appendChild(el);\n    const fontSize = window.getComputedStyle(el).fontSize;\n    document.body.removeChild(el);\n    return fontSize ? window.parseInt(fontSize) : undefined;\n  }\n\n  /** @private */\n  _scrollViewportHeightUpdated(_viewportHeight) {\n    this._scrollPageHeight = _viewportHeight - this.$.header.clientHeight - this.$.footer.clientHeight - this._scrollLineHeight;\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    // Preserve accessor to the legacy scrolling functionality\n    this.$.outerscroller = document.createElement('div');\n\n    this.scrollTarget = this.$.table;\n\n    this.addEventListener('wheel', this._onWheel);\n\n    this.$.items.addEventListener('focusin', (e) => {\n      const itemsIndex = e.composedPath().indexOf(this.$.items);\n      this._rowWithFocusedElement = e.composedPath()[itemsIndex - 1];\n    });\n    this.$.items.addEventListener('focusout', () => this._rowWithFocusedElement = undefined);\n\n    // Reordering the physical rows cancels the user's grab of the scroll bar handle on Safari.\n    // Need to defer reordering until the user lets go of the scroll bar handle.\n    this.scrollTarget.addEventListener('mousedown', () => this.__mouseDown = true);\n    this.scrollTarget.addEventListener('mouseup', () => {\n      this.__mouseDown = false;\n      if (this.__pendingReorder) {\n        this.__pendingReorder = false;\n        setTimeout(() => this._reorderRows(), this._timeouts.SCROLLING);\n      }\n    });\n  }\n\n  /**\n   * Scroll to a specific row index in the virtual list. Note that the row index is\n   * not always the same for any particular item. For example, sorting/filtering/expanding\n   * or collapsing hierarchical items can affect the row index related to an item.\n   *\n   * @param {number} index Row index to scroll to\n   */\n  scrollToIndex(index) {\n    this._accessIronListAPI(() => super.scrollToIndex(index));\n  }\n\n  /** @private */\n  _onWheel(e) {\n    if (e.ctrlKey || this._hasScrolledAncestor(e.target, e.deltaX, e.deltaY)) {\n      return;\n    }\n\n    const table = this.$.table;\n\n    let deltaY = e.deltaY;\n    if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      // Scrolling by \"lines of text\" instead of pixels\n      deltaY *= this._scrollLineHeight;\n    } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n      // Scrolling by \"pages\" instead of pixels\n      deltaY *= this._scrollPageHeight;\n    }\n\n    if (this._wheelAnimationFrame) {\n      // Skip new wheel events while one is being processed\n      this._deltaYAcc += deltaY;\n      e.preventDefault();\n      return;\n    }\n\n    deltaY += this._deltaYAcc;\n    this._deltaYAcc = 0;\n\n    this._wheelAnimationFrame = true;\n    this._debouncerWheelAnimationFrame = Debouncer.debounce(\n      this._debouncerWheelAnimationFrame,\n      animationFrame,\n      () => this._wheelAnimationFrame = false\n    );\n\n    var momentum = Math.abs(e.deltaX) + Math.abs(deltaY);\n\n    if (this._canScroll(table, e.deltaX, deltaY)) {\n      e.preventDefault();\n      table.scrollTop += deltaY;\n      table.scrollLeft += e.deltaX;\n      this._scrollHandler();\n      this._hasResidualMomentum = true;\n\n      this._ignoreNewWheel = true;\n      this._debouncerIgnoreNewWheel = Debouncer.debounce(\n        this._debouncerIgnoreNewWheel,\n        timeOut.after(this._timeouts.IGNORE_WHEEL),\n        () => this._ignoreNewWheel = false\n      );\n    } else if (this._hasResidualMomentum && momentum <= this._previousMomentum || this._ignoreNewWheel) {\n      e.preventDefault();\n    } else if (momentum > this._previousMomentum) {\n      this._hasResidualMomentum = false;\n    }\n    this._previousMomentum = momentum;\n  }\n\n  /**\n   * Determines if the element has an ancestor prior to this\n   * cell content that handles the scroll delta\n   * @private\n   */\n  _hasScrolledAncestor(el, deltaX, deltaY) {\n    if (el.localName === 'vaadin-grid-cell-content') {\n      return false;\n    } else if (this._canScroll(el, deltaX, deltaY)\n      && ['auto', 'scroll'].indexOf(getComputedStyle(el).overflow) !== -1) {\n      return true;\n    } else if (el !== this && el.parentElement) {\n      return this._hasScrolledAncestor(el.parentElement, deltaX, deltaY);\n    }\n  }\n\n  /**\n   * Determines if the the given scroll deltas can be applied to the element\n   * (fully or partially)\n   * @private\n   */\n  _canScroll(el, deltaX, deltaY) {\n    return (deltaY > 0 && el.scrollTop < el.scrollHeight - el.offsetHeight) ||\n    (deltaY < 0 && el.scrollTop > 0) ||\n    (deltaX > 0 && el.scrollLeft < el.scrollWidth - el.offsetWidth) ||\n    (deltaX < 0 && el.scrollLeft > 0);\n  }\n\n  /** @private */\n  _scheduleScrolling() {\n    if (!this._scrollingFrame) {\n      // Defer setting state attributes to avoid Edge hiccups\n      this._scrollingFrame = requestAnimationFrame(() => this._toggleAttribute('scrolling', true, this.$.scroller));\n    }\n    this._debounceScrolling = Debouncer.debounce(\n      this._debounceScrolling,\n      timeOut.after(this._timeouts.SCROLLING),\n      () => {\n        cancelAnimationFrame(this._scrollingFrame);\n        delete this._scrollingFrame;\n        this._toggleAttribute('scrolling', false, this.$.scroller);\n        this._reorderRows();\n      }\n    );\n  }\n\n  /** @private */\n  _afterScroll() {\n    this._translateStationaryElements();\n\n    if (!this.hasAttribute('reordering')) {\n      this._scheduleScrolling();\n    }\n\n    this._updateOverflow();\n  }\n\n  /** @private */\n  _updateOverflow() {\n    // Set overflow styling attributes\n    let overflow = '';\n    const table = this.$.table;\n    if (table.scrollTop < table.scrollHeight - table.clientHeight) {\n      overflow += ' bottom';\n    }\n\n    if (table.scrollTop > 0) {\n      overflow += ' top';\n    }\n\n    if (table.scrollLeft < table.scrollWidth - table.clientWidth) {\n      overflow += ' right';\n    }\n\n    if (table.scrollLeft > 0) {\n      overflow += ' left';\n    }\n\n    this._debounceOverflow = Debouncer.debounce(\n      this._debounceOverflow,\n      animationFrame,\n      () => {\n        const value = overflow.trim();\n        if (value.length > 0 && this.getAttribute('overflow') !== value) {\n          this.setAttribute('overflow', value);\n        } else if (value.length == 0 && this.hasAttribute('overflow')) {\n          this.removeAttribute('overflow');\n        }\n      }\n    );\n  }\n\n  /**\n   * Correct order needed for preserving correct tab order between cell contents.\n   * @private\n   */\n  _reorderRows() {\n    if (this.__mouseDown) {\n      this.__pendingReorder = true;\n      return;\n    }\n\n    const body = this.$.items;\n    const items = body.querySelectorAll('tr');\n    if (!items.length) {\n      return;\n    }\n\n    const adjustedVirtualStart = this._virtualStart + this._vidxOffset;\n\n    // Which row to use as a target?\n    const targetRow = this._rowWithFocusedElement || Array.from(items).filter(row => !row.hidden)[0];\n    if (!targetRow) {\n      // All rows are hidden, don't reorder\n      return;\n    }\n\n    // Where the target row should be?\n    const targetPhysicalIndex = targetRow.index - adjustedVirtualStart;\n\n    // Reodrer the DOM elements to keep the target row at the target physical index\n    const delta = Array.from(items).indexOf(targetRow) - targetPhysicalIndex;\n    if (delta > 0) {\n      for (let i = 0; i < delta; i++) {\n        body.appendChild(items[i]);\n      }\n    } else if (delta < 0) {\n      for (let i = items.length + delta; i < items.length; i++) {\n        body.insertBefore(items[i], items[0]);\n      }\n    }\n\n    // Due to a rendering bug, reordering the rows can make the sticky header disappear on Safari\n    // if the grid is used inside of a flex box. This is a workaround for the issue.\n    if (this._safari) {\n      const {transform} = this.$.header.style;\n      this.$.header.style.transform = '';\n      setTimeout(() => this.$.header.style.transform = transform);\n    }\n  }\n\n  /** @protected */\n  _frozenCellsChanged() {\n    this._debouncerCacheElements = Debouncer.debounce(\n      this._debouncerCacheElements,\n      microTask,\n      () => {\n        Array.from(this.shadowRoot.querySelectorAll('[part~=\"cell\"]')).forEach(function(cell) {\n          cell.style.transform = '';\n        });\n        this._frozenCells = Array.prototype.slice.call(this.$.table.querySelectorAll('[frozen]'));\n        this._updateScrollerMeasurements();\n        this._translateStationaryElements();\n      }\n    );\n    this._updateLastFrozen();\n  }\n\n  /** @protected */\n  _updateScrollerMeasurements() {\n    if (this._frozenCells.length > 0 && this.__isRTL) {\n      this.__scrollerMetrics = {\n        scrollWidth: this.$.table.scrollWidth,\n        clientWidth: this.$.table.clientWidth\n      };\n    }\n  }\n\n  /** @protected */\n  _updateLastFrozen() {\n    if (!this._columnTree) {\n      return;\n    }\n\n    const columnsRow = this._columnTree[this._columnTree.length - 1].slice(0);\n    columnsRow.sort((a, b) => {\n      return a._order - b._order;\n    });\n    const lastFrozen = columnsRow.reduce((prev, col, index) => {\n      col._lastFrozen = false;\n      return col.frozen && !col.hidden ? index : prev;\n    }, undefined);\n    if (lastFrozen !== undefined) {\n      columnsRow[lastFrozen]._lastFrozen = true;\n    }\n  }\n\n  /** @private */\n  _translateStationaryElements() {\n    const scrollLeft = Math.max(0, this._scrollLeft);\n    const scrollTop = Math.max(0, this._scrollTop);\n\n    let leftOffset = 0;\n    let topOffset = 0;\n    let footerOffset = 0;\n    if (!this._useSticky) {\n      leftOffset = scrollLeft;\n      topOffset = scrollTop;\n      footerOffset = this.$.table.clientHeight - this.$.footer.offsetHeight - this.$.footer.offsetTop;\n    }\n\n    this.$.header.style.transform = this._getTranslate(-scrollLeft + leftOffset, topOffset);\n    this.$.footer.style.transform = this._getTranslate(-scrollLeft + leftOffset, topOffset + footerOffset);\n    this.$.items.style.transform = this._getTranslate(-scrollLeft + leftOffset, 0);\n\n    if (this._frozenCells.length > 0) {\n      const x = this.__isRTL ?\n        this.__getNormalizedScrollLeft(this.$.table) + this.__scrollerMetrics.clientWidth -\n        this.__scrollerMetrics.scrollWidth\n        : this._scrollLeft;\n      var frozenCellTransform = this._getTranslate(x, 0);\n\n      for (var i = 0; i < this._frozenCells.length; i++) {\n        this._frozenCells[i].style.transform = frozenCellTransform;\n      }\n    }\n  }\n\n  /** @private */\n  _getTranslate(x, y) {\n    return `translate(${x}px, ${y}px)`;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n\nimport { animationFrame } from '@polymer/polymer/lib/utils/async.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { PolymerIronList } from './iron-list.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\n/**\n * This Element is used internally by vaadin-grid.\n *\n * @implements PolymerIronList\n * @extends HTMLElement\n */\nclass GridScrollerElement extends PolymerIronList {\n\n  static get is() {\n    return 'vaadin-grid-scroller';\n  }\n\n  static get properties() {\n    return {\n      size: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * @type {number}\n       * @protected\n       */\n      _vidxOffset: {\n        value: 0\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_effectiveSizeChanged(_effectiveSize)'\n    ];\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this._scrollHandler();\n  }\n\n  /**\n   * @param {!HTMLTableRowElement} item\n   * @param {number} index\n   * @protected\n   */\n  _updateScrollerItem(item, index) {}\n\n  /** @protected */\n  _afterScroll() {}\n\n  /** @protected */\n  _getRowTarget() {}\n\n  /** @protected */\n  _createScrollerRows() {}\n\n  /** @protected */\n  _canPopulate() {}\n\n  /**\n   * @param {number} index\n   * @protected\n   */\n  scrollToIndex(index) {\n    this._warnPrivateAPIAccess('scrollToIndex');\n\n    this._scrollingToIndex = true;\n    index = Math.min(Math.max(index, 0), this._effectiveSize - 1);\n    this.$.table.scrollTop = index / this._effectiveSize * (this.$.table.scrollHeight - this.$.table.offsetHeight);\n    this._scrollHandler();\n\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(1000000);\n    }\n\n    this._accessIronListAPI(() => super.scrollToIndex(index - this._vidxOffset));\n    this._scrollHandler();\n\n    // Ensure scroll position\n    const row = Array.from(this.$.items.children).filter(child => child.index === index)[0];\n    if (row) {\n      const headerOffset = row.getBoundingClientRect().top - this.$.header.getBoundingClientRect().bottom;\n      if (Math.abs(headerOffset) > 1) {\n        this.$.table.scrollTop += headerOffset;\n        this._scrollHandler();\n      }\n    }\n\n    this._scrollingToIndex = false;\n  }\n\n  /** @private */\n  _effectiveSizeChanged(size) {\n    let fvi; // first visible (adjusted) index\n    let fviOffset = 0;\n    this._iterateItems((pidx, vidx) => {\n      if (vidx === this._firstVisibleIndex) {\n        const row = this._physicalItems[pidx];\n        fvi = row.index;\n        fviOffset = row.getBoundingClientRect().top;\n      }\n    });\n\n    if (this.items && size < this.items.length) {\n      // Size was reduced, scroll to 0 first\n      this._scrollTop = 0;\n    }\n    if (!Array.isArray(this.items)) {\n      // Edge/IE seems to have the lowest maximum\n      const maxVirtualItems = this._edge || this._ie ? 30000 : 100000;\n      this.items = {length: Math.min(size, maxVirtualItems)};\n    }\n\n    this._accessIronListAPI(() => super._itemsChanged({path: 'items'}));\n\n    this._virtualCount = Math.min(this.items.length, size) || 0;\n\n    if (this._scrollTop === 0) {\n      this._accessIronListAPI(() => this._scrollToIndex(Math.min(size - 1, fvi)));\n      this._iterateItems((pidx, vidx) => {\n        const row = this._physicalItems[pidx];\n        if (row.index === fvi) {\n          this.$.table.scrollTop += Math.round(row.getBoundingClientRect().top - fviOffset);\n        }\n        // Restore keyboard focus to the right cell\n        if (row.index === this._focusedItemIndex && this._itemsFocusable && this.$.items.contains(this.shadowRoot.activeElement)) {\n          const cellIndex = Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);\n          row.children[cellIndex].focus();\n        }\n      });\n    }\n    this._assignModels();\n    requestAnimationFrame(() => this._update());\n\n    this.__updateFooterPositioning();\n\n    if (this._ie) {\n      // Workaround an IE flexbox bug where the rows would horizontally collapse\n      // whenever item count change toggles the scrollbar visibility (is tested)\n      this.$.table.style.display = 'block';\n      setTimeout(() => {\n        this.$.table.style.display = 'flex';\n        this._translateStationaryElements();\n      });\n    }\n  }\n\n  /** @protected */\n  _positionItems() {\n    this._adjustScrollPosition();\n\n    let rePosition;\n    if (isNaN(this._physicalTop)) {\n      rePosition = true;\n      this._physicalTop = 0;\n    }\n\n    let y = this._physicalTop;\n    this._iterateItems((pidx, vidx) => {\n      this._physicalItems[pidx].style.transform = `translateY(${y}px)`;\n      y += this._physicalSizes[pidx];\n    });\n\n    if (rePosition) {\n      this._scrollToIndex(0);\n    }\n  }\n\n  /**\n   * @param {number} count\n   * @protected\n   */\n  _increasePoolIfNeeded(count) {\n    if ((count === 0 && this._scrollingToIndex) || !this._canPopulate() || !this._effectiveSize) {\n      return;\n    }\n\n    if (!this._initialPoolCreated) {\n      this._initialPoolCreated = true;\n      super._increasePoolIfNeeded(25);\n    } else if (this._optPhysicalSize !== Infinity) {\n      this._debounceIncreasePool = Debouncer.debounce(\n        this._debounceIncreasePool,\n        animationFrame,\n        () => {\n          this._updateMetrics();\n          const remainingPhysicalSize = this._optPhysicalSize - this._physicalSize;\n          let estimatedMissingRowCount = Math.ceil(remainingPhysicalSize / this._physicalAverage);\n\n          if (this._physicalCount + estimatedMissingRowCount > this._effectiveSize) {\n            // Do not increase the physical item count above the this._effectiveSize\n            estimatedMissingRowCount = Math.max(0, this._effectiveSize - this._physicalCount);\n          }\n\n          if (this._physicalSize && estimatedMissingRowCount > 0 && this._optPhysicalSize !== Infinity) {\n            super._increasePoolIfNeeded(estimatedMissingRowCount);\n            // Ensure the rows are in order after increasing pool\n            this.__reorderChildNodes();\n          }\n        });\n    }\n  }\n\n  /** @private */\n  __reorderChildNodes() {\n    const childNodes = Array.from(this.$.items.childNodes);\n    const rowsInOrder = !!childNodes.reduce((inOrder, current, currentIndex, array) => {\n      if (currentIndex === 0 || array[currentIndex - 1].index === current.index - 1) {\n        return inOrder;\n      }\n    }, true);\n\n    if (!rowsInOrder) {\n      childNodes.sort((row1, row2) => {\n        return row1.index - row2.index;\n      }).forEach(row => this.$.items.appendChild(row));\n    }\n  }\n\n  /** @private */\n  _createPool(size) {\n    const fragment = document.createDocumentFragment();\n    const physicalItems = this._createScrollerRows(size);\n\n    physicalItems.forEach(inst => fragment.appendChild(inst));\n    this._getRowTarget().appendChild(fragment);\n\n    // Weird hack needed to get Safari to actually distribute slots\n    const content = this.querySelector('[slot]');\n    if (content) {\n      const slot = content.getAttribute('slot');\n      content.setAttribute('slot', 'foo-bar');\n      content.setAttribute('slot', slot);\n    }\n\n    afterNextRender(this, () => this.notifyResize());\n    return physicalItems;\n  }\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   * @protected\n   */\n  _assignModels(itemSet) {\n    this._iterateItems((pidx, vidx) => {\n      const el = this._physicalItems[pidx];\n      this._toggleAttribute('hidden', vidx >= this._effectiveSize, el);\n      this._updateScrollerItem(el, vidx + (this._vidxOffset || 0));\n    }, itemSet);\n  }\n\n  /** @protected */\n  _scrollHandler() {\n    const delta = this.$.table.scrollTop - this._scrollPosition;\n    this._accessIronListAPI(super._scrollHandler);\n    const oldOffset = this._vidxOffset;\n    if (this._accessIronListAPI(() => this._maxScrollTop) && this._virtualCount < this._effectiveSize) {\n      this._adjustVirtualIndexOffset(delta);\n    } else {\n      this._vidxOffset = 0;\n    }\n    if (this._vidxOffset !== oldOffset) {\n      this._update();\n    }\n    this._afterScroll();\n  }\n\n  /** @private */\n  _adjustVirtualIndexOffset(delta) {\n    if (Math.abs(delta) > 10000) {\n      if (this._noScale) {\n        this._noScale = false;\n        return;\n      }\n      const scale = this.$.table.scrollTop / (this.$.table.scrollHeight - this.$.table.offsetHeight);\n      const offset = scale * this._effectiveSize;\n      this._vidxOffset = Math.round(offset - scale * this._virtualCount);\n    } else {\n      // Make sure user can always swipe/wheel scroll to the start and end\n      const oldOffset = this._vidxOffset || 0;\n      const threshold = 1000;\n      const maxShift = 100;\n      // At start\n      if (this._scrollTop === 0) {\n        this._vidxOffset = 0;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(0);\n        }\n      } else if (this.firstVisibleIndex < threshold && this._vidxOffset > 0) {\n        this._vidxOffset -= Math.min(this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex + (oldOffset - this._vidxOffset));\n        }\n        this._noScale = true;\n      }\n      // At end\n      const maxOffset = this._effectiveSize - this._virtualCount;\n      if (this._scrollTop >= this._maxScrollTop && this._maxScrollTop > 0) {\n        this._vidxOffset = maxOffset;\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this._virtualCount);\n        }\n      } else if (this.firstVisibleIndex > this._virtualCount - threshold && this._vidxOffset < maxOffset) {\n        this._vidxOffset += Math.min(maxOffset - this._vidxOffset, maxShift);\n        if (oldOffset !== this._vidxOffset) {\n          super.scrollToIndex(this.firstVisibleIndex - (this._vidxOffset - oldOffset));\n        }\n        this._noScale = true;\n      }\n    }\n  }\n\n  /** @private */\n  _accessIronListAPI(cb) {\n    this._warnPrivateAPIAccessAsyncEnabled = false;\n    const returnValue = cb.apply(this);\n    this._debouncerWarnPrivateAPIAccess = Debouncer.debounce(\n      this._debouncerWarnPrivateAPIAccess,\n      animationFrame,\n      () => this._warnPrivateAPIAccessAsyncEnabled = true\n    );\n    return returnValue;\n  }\n\n  /**\n   * Allow iron-list to access its APIs from debounced callbacks without warns\n   * @private\n   */\n  _debounceRender(cb, asyncModule) {\n    super._debounceRender(() => this._accessIronListAPI(cb), asyncModule);\n  }\n\n  /**\n   * Warn when iron-list APIs are being accessed directly\n   * @private\n   */\n  _warnPrivateAPIAccess(apiName) {\n    if (this._warnPrivateAPIAccessAsyncEnabled) {\n      console.warn(`Accessing private API (${apiName})!`);\n    }\n  }\n\n  /** @protected */\n  _render() {\n    this._accessIronListAPI(super._render);\n  }\n\n  /** @private */\n  _createFocusBackfillItem() { /* Ignore */ }\n\n  /** @private */\n  _multiSelectionChanged() { /* Ignore */ }\n\n  /** @private */\n  clearSelection() { /* Ignore */ }\n\n  /** @protected */\n  _itemsChanged() { /* Ignore */ }\n\n  /** @private */\n  _manageFocus() { /* Ignore */ }\n\n  /** @private */\n  _removeFocusedItem() { /* Ignore */ }\n\n  /**\n   * @return {number}\n   * @protected\n   */\n  get _firstVisibleIndex() {\n    return this._accessIronListAPI(() => super.firstVisibleIndex);\n  }\n\n  /**\n   * @return {number}\n   * @protected\n   */\n  get _lastVisibleIndex() {\n    return this._accessIronListAPI(() => super.lastVisibleIndex);\n  }\n\n  /**\n   * @param {number} index\n   * @protected\n   */\n  _scrollToIndex(index) {\n    this._accessIronListAPI(() => this.scrollToIndex(index));\n  }\n\n  /** @private */\n  get firstVisibleIndex() {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); return super.firstVisibleIndex;\n  }\n\n  /** @private */\n  set firstVisibleIndex(value) {\n    this._warnPrivateAPIAccess('firstVisibleIndex'); super.firstVisibleIndex = value;\n  }\n\n  /** @private */\n  get lastVisibleIndex() {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); return super.lastVisibleIndex;\n  }\n\n  /** @private */\n  set lastVisibleIndex(value) {\n    this._warnPrivateAPIAccess('lastVisibleIndex'); super.lastVisibleIndex = value;\n  }\n\n  /** @private */\n  updateViewportBoundaries() {\n    this._warnPrivateAPIAccess('updateViewportBoundaries'); super.updateViewportBoundaries.apply(this, arguments);\n  }\n\n  /** @protected */\n  _resizeHandler() {\n    super._resizeHandler();\n    flush();\n  }\n}\n\ncustomElements.define(GridScrollerElement.is, GridScrollerElement);\n\nexport { GridScrollerElement as ScrollerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { GridColumnElement } from './vaadin-grid-column.js';\nimport '@vaadin/vaadin-checkbox/src/vaadin-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-grid-selection-column>` is a helper element for the `<vaadin-grid>`\n * that provides default templates and functionality for item selection.\n *\n * #### Example:\n * ```html\n * <vaadin-grid items=\"[[items]]\">\n *  <vaadin-grid-selection-column frozen auto-select></vaadin-grid-selection-column>\n *\n *  <vaadin-grid-column>\n *    ...\n * ```\n *\n * By default the selection column displays `<vaadin-checkbox>` elements in the\n * column cells. The checkboxes in the body rows toggle selection of the corresponding row items.\n *\n * When the grid data is provided as an array of [`items`](#/elements/vaadin-grid#property-items),\n * the column header gets an additional checkbox that can be used for toggling\n * selection for all the items at once.\n *\n * __The default content can also be overridden__\n *\n */\nclass GridSelectionColumnElement extends GridColumnElement {\n  static get template() {\n    return html`\n    <template class=\"header\" id=\"defaultHeaderTemplate\">\n      <vaadin-checkbox class=\"vaadin-grid-select-all-checkbox\" aria-label=\"Select All\" hidden\\$=\"[[_selectAllHidden]]\" on-checked-changed=\"_onSelectAllCheckedChanged\" checked=\"[[_isChecked(selectAll, _indeterminate)]]\" indeterminate=\"[[_indeterminate]]\"></vaadin-checkbox>\n    </template>\n    <template id=\"defaultBodyTemplate\">\n      <vaadin-checkbox aria-label=\"Select Row\" checked=\"{{selected}}\"></vaadin-checkbox>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-selection-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Width of the cells for this column.\n       */\n      width: {\n        type: String,\n        value: '58px'\n      },\n\n      /**\n       * Flex grow ratio for the cell widths. When set to 0, cell width is fixed.\n       * @attr {number} flex-grow\n       * @type {number}\n       */\n      flexGrow: {\n        type: Number,\n        value: 0\n      },\n\n      /**\n       * When true, all the items are selected.\n       * @attr {boolean} select-all\n       * @type {boolean}\n       */\n      selectAll: {\n        type: Boolean,\n        value: false,\n        notify: true\n      },\n\n      /**\n       * When true, the active gets automatically selected.\n       * @attr {boolean} auto-select\n       * @type {boolean}\n       */\n      autoSelect: {\n        type: Boolean,\n        value: false,\n      },\n\n      /** @private */\n      _indeterminate: Boolean,\n\n      /**\n       * The previous state of activeItem. When activeItem turns to `null`,\n       * previousActiveItem will have an Object with just unselected activeItem\n       * @private\n       */\n      _previousActiveItem: Object,\n\n      /** @private */\n      _selectAllHidden: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_onSelectAllChanged(selectAll)'\n    ];\n  }\n\n  /** @private */\n  _pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate) {\n    // As a special case, allow overriding the default header / body templates\n    if (cells.value && (path !== undefined || renderer !== undefined)) {\n      this._bodyTemplate = bodyTemplate = undefined;\n      this.__cleanCellsOfTemplateProperties(cells.value);\n    }\n    if (headerCell && (header !== undefined || headerRenderer !== undefined)) {\n      this._headerTemplate = headerTemplate = undefined;\n      this.__cleanCellsOfTemplateProperties([headerCell]);\n    }\n    super._pathOrHeaderChanged(path, header, headerCell, footerCell, cells, renderer, headerRenderer, bodyTemplate, headerTemplate);\n  }\n\n  /** @private */\n  __cleanCellsOfTemplateProperties(cells) {\n    cells.forEach(cell => {\n      cell._content.innerHTML = '';\n      delete cell._instance;\n      delete cell._template;\n    });\n  }\n\n  /** @private */\n  _prepareHeaderTemplate() {\n    const headerTemplate = this._prepareTemplatizer(this._findTemplate(true) || this.$.defaultHeaderTemplate);\n    // needed to override the dataHost correctly in case internal template is used.\n    headerTemplate.templatizer.dataHost = headerTemplate === this.$.defaultHeaderTemplate ? this : this.dataHost;\n\n    return headerTemplate;\n  }\n\n  /** @private */\n  _prepareBodyTemplate() {\n    const template = this._prepareTemplatizer(this._findTemplate() || this.$.defaultBodyTemplate);\n    // needed to override the dataHost correctly in case internal template is used.\n    template.templatizer.dataHost = template === this.$.defaultBodyTemplate ? this : this.dataHost;\n\n    return template;\n  }\n\n  constructor() {\n    super();\n\n    this._boundOnActiveItemChanged = this._onActiveItemChanged.bind(this);\n    this._boundOnDataProviderChanged = this._onDataProviderChanged.bind(this);\n    this._boundOnSelectedItemsChanged = this._onSelectedItemsChanged.bind(this);\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    this._grid.removeEventListener('active-item-changed', this._boundOnActiveItemChanged);\n    this._grid.removeEventListener('data-provider-changed', this._boundOnDataProviderChanged);\n    this._grid.removeEventListener('filter-changed', this._boundOnSelectedItemsChanged);\n    this._grid.removeEventListener('selected-items-changed', this._boundOnSelectedItemsChanged);\n\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    if (isSafari && window.ShadyDOM && this.parentElement) {\n      // Detach might have beem caused by order change.\n      // Shady on safari doesn't restore isAttached so we'll need to do it manually.\n      const parent = this.parentElement;\n      const nextSibling = this.nextElementSibling;\n      parent.removeChild(this);\n      if (nextSibling) {\n        parent.insertBefore(this, nextSibling);\n      } else {\n        parent.appendChild(this);\n      }\n    }\n\n    super.disconnectedCallback();\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    if (this._grid) {\n      this._grid.addEventListener('active-item-changed', this._boundOnActiveItemChanged);\n      this._grid.addEventListener('data-provider-changed', this._boundOnDataProviderChanged);\n      this._grid.addEventListener('filter-changed', this._boundOnSelectedItemsChanged);\n      this._grid.addEventListener('selected-items-changed', this._boundOnSelectedItemsChanged);\n    }\n  }\n\n  /** @private */\n  _onSelectAllChanged(selectAll) {\n    if (selectAll === undefined || !this._grid) {\n      return;\n    }\n\n    if (this._selectAllChangeLock) {\n      return;\n    }\n\n    this._grid.selectedItems = selectAll && Array.isArray(this._grid.items) ? this._grid._filter(this._grid.items) : [];\n  }\n\n  /**\n   * Return true if array `a` contains all the items in `b`\n   * We need this when sorting or to preserve selection after filtering.\n   * @private\n   */\n  _arrayContains(a, b) {\n    for (var i = 0; a && b && b[i] && a.indexOf(b[i]) >= 0; i++); // eslint-disable-line\n    return i == b.length;\n  }\n\n  /** @private */\n  _onSelectAllCheckedChanged(e) {\n    this.selectAll = this._indeterminate || e.target.checked;\n  }\n\n  /**\n   * iOS needs indeterminated + checked at the same time\n   * @private\n   */\n  _isChecked(selectAll, indeterminate) {\n    return indeterminate || selectAll;\n  }\n\n  /** @private */\n  _onActiveItemChanged(e) {\n    const activeItem = e.detail.value;\n    if (this.autoSelect) {\n      const item = activeItem || this._previousActiveItem;\n      if (item) {\n        this._grid._toggleItem(item);\n      }\n    }\n    this._previousActiveItem = activeItem;\n  }\n\n  /** @private */\n  _onSelectedItemsChanged(e) {\n    this._selectAllChangeLock = true;\n    if (Array.isArray(this._grid.items)) {\n      if (!this._grid.selectedItems.length) {\n        this.selectAll = false;\n        this._indeterminate = false;\n      } else if (this._arrayContains(this._grid.selectedItems, this._grid._filter(this._grid.items))) {\n        this.selectAll = true;\n        this._indeterminate = false;\n      } else {\n        this.selectAll = false;\n        this._indeterminate = true;\n      }\n    }\n    this._selectAllChangeLock = false;\n  }\n\n  /** @private */\n  _onDataProviderChanged(e) {\n    this._selectAllHidden = !Array.isArray(this._grid.items);\n  }\n}\n\ncustomElements.define(GridSelectionColumnElement.is, GridSelectionColumnElement);\n\nexport { GridSelectionColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const SelectionMixin = superClass => class SelectionMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * An array that contains the selected items.\n       * @type {Array<GridItem>}\n       */\n      selectedItems: {\n        type: Object,\n        notify: true,\n        value: () => []\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_selectedItemsChanged(selectedItems.*)'\n    ];\n  }\n\n  /**\n   * @param {!GridItem} item\n   * @return {boolean}\n   * @protected\n   */\n  _isSelected(item) {\n    return this.selectedItems && this._getItemIndexInArray(item, this.selectedItems) > -1;\n  }\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {!GridItem} item The item object\n   */\n  selectItem(item) {\n    if (!this._isSelected(item)) {\n      this.push('selectedItems', item);\n    }\n  }\n\n  /**\n   * Deselects the given item if it is already selected.\n   *\n   * @method deselect\n   * @param {!GridItem} item The item object\n   */\n  deselectItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index > -1) {\n      this.splice('selectedItems', index, 1);\n    }\n  }\n\n  /**\n   * Toggles the selected state of the given item.\n   *\n   * @method toggle\n   * @param {!GridItem} item The item object\n   * @protected\n   */\n  _toggleItem(item) {\n    const index = this._getItemIndexInArray(item, this.selectedItems);\n    if (index === -1) {\n      this.selectItem(item);\n    } else {\n      this.deselectItem(item);\n    }\n  }\n\n  /** @private */\n  _selectedItemsChanged(e) {\n    if (this.$.items.children.length && (e.path === 'selectedItems' || e.path === 'selectedItems.splices')) {\n      Array.from(this.$.items.children).forEach(row => {\n        this._updateItem(row, row._item);\n      });\n    }\n  }\n\n  /** @private */\n  _selectedInstanceChangedCallback(instance, value) {\n    if (super._selectedInstanceChangedCallback) {\n      super._selectedInstanceChangedCallback(instance, value);\n    }\n    if (value) {\n      this.selectItem(instance.item);\n    } else {\n      this.deselectItem(instance.item);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GridColumnElement } from './vaadin-grid-column.js';\n\nimport './vaadin-grid-sorter.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-grid-sort-column>` is a helper element for the `<vaadin-grid>`\n * that provides default header template and functionality for sorting.\n *\n * #### Example:\n * ```html\n * <vaadin-grid items=\"[[items]]\">\n *  <vaadin-grid-sort-column path=\"name.first\" direction=\"asc\"></vaadin-grid-sort-column>\n *\n *  <vaadin-grid-column>\n *    ...\n * ```\n *\n */\nclass GridSortColumnElement extends GridColumnElement {\n  static get template() {\n    return html`\n    <template class=\"header\" id=\"headerTemplate\">\n      <vaadin-grid-sorter path=\"[[path]]\" direction=\"{{direction}}\">[[_getHeader(header, path)]]</vaadin-grid-sorter>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-sort-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for sorting the data.\n       */\n      path: String,\n\n      /**\n       * How to sort the data.\n       * Possible values are `asc` to use an ascending algorithm, `desc` to sort the data in\n       * descending direction, or `null` for not sorting the data.\n       * @type {GridSorterDirection | undefined}\n       */\n      direction: {\n        type: String,\n        notify: true\n      }\n    };\n  }\n\n  /** @private */\n  _prepareHeaderTemplate() {\n    const headerTemplate = this._prepareTemplatizer(this.$.headerTemplate);\n    // needed to override the dataHost correctly in case internal template is used.\n    headerTemplate.templatizer.dataHost = this;\n    return headerTemplate;\n  }\n\n  /** @private */\n  _getHeader(header, path) {\n    return header || this._generateHeader(path);\n  }\n}\n\ncustomElements.define(GridSortColumnElement.is, GridSortColumnElement);\n\nexport { GridSortColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\n\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n/**\n * @polymerMixin\n */\nexport const SortMixin = superClass => class SortMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * When `true`, all `<vaadin-grid-sorter>` are applied for sorting.\n       * @attr {boolean} multi-sort\n       * @type {boolean}\n       */\n      multiSort: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * @type {!Array<!GridSorter>}\n       * @protected\n       */\n      _sorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      /** @private */\n      _previousSorters: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      }\n    };\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this.addEventListener('sorter-changed', this._onSorterChanged);\n\n    // With Polymer 2 & shady the 'sorter-changed' listener isn't guaranteed to be registered\n    // before child <vaadin-grid-sorter>'s upgrade and fire the events. The following\n    // makes sure that 'sorter-changed' is fired for all <vaadin-grid-sorter> elements\n    // after this (<vaadin-grid>) is ready (and the listeners are active).\n    if (window.ShadyDOM) {\n      microTask.run(() => {\n        const sorters = this.querySelectorAll('vaadin-grid-sorter');\n        Array.from(sorters).forEach((sorter) => {\n          // Don't try to fire if the sorter hasn't been upgraded yet\n          if (sorter instanceof PolymerElement) {\n            sorter.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n          }\n        });\n      });\n    }\n  }\n\n  /** @private */\n  _onSorterChanged(e) {\n    const sorter = e.target;\n\n    this._removeArrayItem(this._sorters, sorter);\n    sorter._order = null;\n\n    if (this.multiSort) {\n      if (sorter.direction) {\n        this._sorters.unshift(sorter);\n      }\n\n      this._sorters.forEach((sorter, index) => sorter._order = this._sorters.length > 1 ? index : null, this);\n    } else {\n      if (sorter.direction) {\n        this._sorters.forEach(sorter => {\n          sorter._order = null;\n          sorter.direction = null;\n        });\n        this._sorters = [sorter];\n      }\n    }\n\n    e.stopPropagation();\n\n    if (this.dataProvider &&\n      // No need to clear cache if sorters didn't change\n      JSON.stringify(this._previousSorters) !== JSON.stringify(this._mapSorters())) {\n      this.clearCache();\n    }\n\n    this._a11yUpdateSorters();\n\n    this._previousSorters = this._mapSorters();\n  }\n\n  /**\n   * @return {!Array<!GridSorter>}\n   * @protected\n   */\n  _mapSorters() {\n    return this._sorters.map(sorter => {\n      return {\n        path: sorter.path,\n        direction: sorter.direction\n      };\n    });\n  }\n\n  /** @private */\n  _removeArrayItem(array, item) {\n    const index = array.indexOf(item);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    @font-face {\n      font-family: 'vaadin-grid-sorter-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n/**\n * `<vaadin-grid-sorter>` is a helper element for the `<vaadin-grid>` that provides out-of-the-box UI controls,\n * visual feedback, and handlers for sorting the grid data.\n *\n * #### Example:\n * ```html\n * <vaadin-grid-column>\n *   <template class=\"header\">\n *     <vaadin-grid-sorter path=\"name.first\">First name</vaadin-grid-sorter>\n *   </template>\n *   <template>[[item.name.first]]</template>\n * </vaadin-grid-column>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `content` | The slotted content wrapper\n * `indicators` | The internal sorter indicators.\n * `order` | The internal sorter order\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `direction` | Sort direction of a sorter | :host\n *\n * @extends PolymerElement\n */\nclass GridSorterElement extends ThemableMixin(DirMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-flex;\n        cursor: pointer;\n        max-width: 100%;\n      }\n\n      [part=\"content\"] {\n        flex: 1 1 auto;\n      }\n\n      [part=\"indicators\"] {\n        position: relative;\n        align-self: center;\n        flex: none;\n      }\n\n      [part=\"order\"] {\n        display: inline;\n        vertical-align: super;\n      }\n\n      [part=\"indicators\"]::before {\n        font-family: 'vaadin-grid-sorter-icons';\n        display: inline-block;\n      }\n\n      :host(:not([direction])) [part=\"indicators\"]::before {\n        content: \"\\\\e901\";\n      }\n\n      :host([direction=asc]) [part=\"indicators\"]::before {\n        content: \"\\\\e900\";\n      }\n\n      :host([direction=desc]) [part=\"indicators\"]::before {\n        content: \"\\\\e902\";\n      }\n    </style>\n\n    <div part=\"content\">\n      <slot></slot>\n    </div>\n    <div part=\"indicators\">\n      <span part=\"order\">[[_getDisplayOrder(_order)]]</span>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-sorter';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used for sorting the data.\n       */\n      path: String,\n\n      /**\n       * How to sort the data.\n       * Possible values are `asc` to use an ascending algorithm, `desc` to sort the data in\n       * descending direction, or `null` for not sorting the data.\n       * @type {GridSorterDirection | undefined}\n       */\n      direction: {\n        type: String,\n        reflectToAttribute: true,\n        notify: true,\n        value: null\n      },\n\n      /**\n       * @type {number | null}\n       * @protected\n       */\n      _order: {\n        type: Number,\n        value: null\n      },\n\n      /** @private */\n      _isConnected: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_pathOrDirectionChanged(path, direction, _isConnected)',\n      '_directionOrOrderChanged(direction, _order)'\n    ];\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this.addEventListener('click', this._onClick.bind(this));\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this._isConnected = true;\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._isConnected = false;\n  }\n\n  /** @private */\n  _pathOrDirectionChanged(path, direction, isConnected) {\n    if (path === undefined || direction === undefined || isConnected === undefined) {\n      return;\n    }\n\n    if (isConnected) {\n      this.dispatchEvent(new CustomEvent('sorter-changed', {bubbles: true, composed: true}));\n    }\n  }\n\n  /** @private */\n  _getDisplayOrder(order) {\n    return order === null ? '' : order + 1;\n  }\n\n  /** @private */\n  _onClick(e) {\n    const activeElement = this.getRootNode().activeElement;\n    if (this !== activeElement && this.contains(activeElement)) {\n      // Some focusable content inside the sorter was clicked, do nothing.\n      return;\n    }\n\n    e.preventDefault();\n    if (this.direction === 'asc') {\n      this.direction = 'desc';\n    } else if (this.direction === 'desc') {\n      this.direction = null;\n    } else {\n      this.direction = 'asc';\n    }\n  }\n\n  /** @private */\n  _directionOrOrderChanged(direction, order) {\n    if (direction === undefined || order === undefined) {\n      return;\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    if (isSafari && this.root) {\n      this.root.querySelectorAll('*').forEach(function(el) {\n        el.style['-webkit-backface-visibility'] = 'visible';\n        el.style['-webkit-backface-visibility'] = '';\n      });\n    }\n  }\n}\n\ncustomElements.define(GridSorterElement.is, GridSorterElement);\n\nexport { GridSorterElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/lib/elements/dom-module.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nconst VaadinGridStyles = document.createElement('dom-module');\n\n// NOTE(web-padawan): https://github.com/vaadin/vaadin-grid/issues/1514\nVaadinGridStyles.appendChild(\n  html`\n  <style>\n    @keyframes vaadin-grid-appear {\n      to {\n        opacity: 1;\n      }\n    }\n\n    :host {\n      display: block;\n      animation: 1ms vaadin-grid-appear;\n      height: 400px;\n      flex: 1 1 auto;\n      align-self: stretch;\n      position: relative;\n    }\n\n    :host([hidden]) {\n      display: none !important;\n    }\n\n    #scroller {\n      display: block;\n      transform: translateY(0);\n      width: auto;\n      height: auto;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    :host([height-by-rows]) {\n      height: auto;\n      align-self: flex-start;\n      flex-grow: 0;\n      width: 100%;\n    }\n\n    :host([height-by-rows]) #scroller {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    #table {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n      position: relative;\n      outline: none;\n      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */\n      z-index: 0;\n    }\n\n    #header,\n    #footer {\n      display: block;\n      position: -webkit-sticky;\n      position: sticky;\n      left: 0;\n      overflow: visible;\n      width: 100%;\n      z-index: 1;\n    }\n\n    #header {\n      top: 0;\n    }\n\n    th {\n      text-align: inherit;\n    }\n\n    /* Safari doesn't work with \"inherit\" */\n    [safari] th {\n      text-align: initial;\n    }\n\n    #footer {\n      bottom: 0;\n    }\n\n    #items {\n      flex-grow: 1;\n      flex-shrink: 0;\n      display: block;\n      position: -webkit-sticky;\n      position: sticky;\n      width: 100%;\n      left: 0;\n      overflow: visible;\n    }\n\n    [part~=\"row\"] {\n      display: flex;\n      width: 100%;\n      box-sizing: border-box;\n      margin: 0;\n    }\n\n    [part~=\"row\"][loading] [part~=\"body-cell\"] ::slotted(vaadin-grid-cell-content) {\n      opacity: 0;\n    }\n\n    #items [part~=\"row\"] {\n      position: absolute;\n    }\n\n    #items [part~=\"row\"]:empty {\n      height: 1em;\n    }\n\n    [part~=\"cell\"]:not([part~=\"details-cell\"]) {\n      flex-shrink: 0;\n      flex-grow: 1;\n      box-sizing: border-box;\n      display: flex;\n      width: 100%;\n      position: relative;\n      align-items: center;\n      padding: 0;\n      white-space: nowrap;\n    }\n\n    [part~=\"details-cell\"] {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      box-sizing: border-box;\n      padding: 0;\n    }\n\n    [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: block;\n      width: 100%;\n      box-sizing: border-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    [frozen] {\n      z-index: 2;\n      will-change: transform;\n    }\n\n    [no-scrollbars][safari] #table,\n    [no-scrollbars][firefox] #table {\n      overflow: hidden;\n    }\n\n    /* Reordering styles */\n    :host([reordering]) [part~=\"cell\"] ::slotted(vaadin-grid-cell-content),\n    :host([reordering]) [part~=\"resize-handle\"],\n    #scroller[no-content-pointer-events] [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      pointer-events: none;\n    }\n\n    [part~=\"reorder-ghost\"] {\n      visibility: hidden;\n      position: fixed;\n      pointer-events: none;\n      opacity: 0.5;\n\n      /* Prevent overflowing the grid in Firefox */\n      top: 0;\n      left: 0;\n    }\n\n    :host([reordering]) {\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    #scroller[ie][column-reordering-allowed] [part~=\"header-cell\"] {\n      -ms-user-select: none;\n    }\n\n    /* Resizing styles */\n    [part~=\"resize-handle\"] {\n      position: absolute;\n      top: 0;\n      right: 0;\n      height: 100%;\n      cursor: col-resize;\n      z-index: 1;\n    }\n\n    [part~=\"resize-handle\"]::before {\n      position: absolute;\n      content: \"\";\n      height: 100%;\n      width: 35px;\n      transform: translateX(-50%);\n    }\n\n    [last-column] [part~=\"resize-handle\"]::before,\n    [last-frozen] [part~=\"resize-handle\"]::before {\n      width: 18px;\n      transform: none;\n      right: 0;\n    }\n\n    #scroller[column-resizing] {\n      -ms-user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    /* Sizer styles */\n    #sizer {\n      display: flex;\n      position: absolute;\n      visibility: hidden;\n    }\n\n    #sizer [part~=\"details-cell\"] {\n      display: none !important;\n    }\n\n    #sizer [part~=\"cell\"][hidden] {\n      display: none !important;\n    }\n\n    #sizer [part~=\"cell\"] {\n      display: block;\n      flex-shrink: 0;\n      line-height: 0;\n      height: 0 !important;\n      min-height: 0 !important;\n      max-height: 0 !important;\n      padding: 0 !important;\n      border: none !important;\n    }\n\n    #sizer [part~=\"cell\"]::before {\n      content: \"-\";\n    }\n\n    #sizer [part~=\"cell\"] ::slotted(vaadin-grid-cell-content) {\n      display: none !important;\n    }\n\n    /* RTL specific styles */\n\n    :host([dir=\"rtl\"]) #items,\n    :host([dir=\"rtl\"]) #header,\n    :host([dir=\"rtl\"]) #footer {\n      left: auto;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"reorder-ghost\"] {\n      left: auto;\n      right: 0;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"] {\n      left: 0;\n      right: auto;\n    }\n\n    :host([dir=\"rtl\"]) [part~=\"resize-handle\"]::before {\n      transform: translateX(50%);\n    }\n\n    :host([dir=\"rtl\"]) [last-column] [part~=\"resize-handle\"]::before,\n    :host([dir=\"rtl\"]) [last-frozen] [part~=\"resize-handle\"]::before {\n      left: 0;\n      right: auto;\n    }\n  </style>\n`);\n\nVaadinGridStyles.register('vaadin-grid-styles');\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * @polymerMixin\n */\nexport const StylingMixin = superClass => class StylingMixin extends superClass {\n\n  static get properties() {\n    return {\n      /**\n       * A function that allows generating CSS class names for grid cells\n       * based on their row and column. The return value should be the generated\n       * class name as a string, or multiple class names separated by whitespace\n       * characters.\n       *\n       * Receives two arguments:\n       * - `column` The `<vaadin-grid-column>` element (`undefined` for details-cell).\n       * - `model` The object with the properties related with\n       *   the rendered item, contains:\n       *   - `model.index` The index of the item.\n       *   - `model.item` The item.\n       *   - `model.expanded` Sublevel toggle state.\n       *   - `model.level` Level of the tree represented with a horizontal offset of the toggle button.\n       *   - `model.selected` Selected state.\n       *\n       * @type {GridCellClassNameGenerator | null | undefined}\n       */\n      cellClassNameGenerator: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '__cellClassNameGeneratorChanged(cellClassNameGenerator)'\n    ];\n  }\n\n  __cellClassNameGeneratorChanged(cellClassGenerator) {\n    this.generateCellClassNames();\n  }\n\n  /**\n   * Runs the `cellClassNameGenerator` for the visible cells.\n   * If the generator depends on varying conditions, you need to\n   * call this function manually in order to update the styles when\n   * the conditions change.\n   */\n  generateCellClassNames() {\n    Array.from(this.$.items.children).filter(row => !row.hidden).forEach(\n      row => this._generateCellClassNames(row, this.__getRowModel(row)));\n  }\n\n  /** @private */\n  _generateCellClassNames(row, model) {\n    Array.from(row.children).forEach(cell => {\n      if (cell.__generatedClasses) {\n        cell.__generatedClasses.forEach(className => cell.classList.remove(className));\n      }\n      if (this.cellClassNameGenerator) {\n        const result = this.cellClassNameGenerator(cell._column, model);\n        cell.__generatedClasses = result && result.split(' ').filter(className => className.length > 0);\n        if (cell.__generatedClasses) {\n          cell.__generatedClasses.forEach(className => cell.classList.add(className));\n        }\n      }\n    });\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\n/**\n * `vaadin-grid-templatizer` is a helper element for the `vaadin-grid` that is preparing and\n * stamping instances of cells and columns templates\n *\n * @extends PolymerElement\n * @private\n */\nclass GridTemplatizer extends (class extends PolymerElement {}) {\n  static get is() {\n    return 'vaadin-grid-templatizer';\n  }\n\n  static get properties() {\n    return {\n      dataHost: Object,\n\n      template: Object,\n\n      _templateInstances: {\n        type: Array,\n        value: function() {\n          return [];\n        }\n      },\n\n      _parentPathValues: {\n        value: function() {\n          return {};\n        }\n      },\n\n      _grid: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)'\n    ];\n  }\n\n  constructor() {\n    super();\n\n    this._instanceProps = {\n      detailsOpened: true,\n      index: true,\n      item: true,\n      selected: true,\n      expanded: true,\n      level: true\n    };\n  }\n\n  createInstance() {\n    this._ensureTemplatized();\n    const instance = new this._TemplateClass({});\n    this.addInstance(instance);\n\n    return instance;\n  }\n\n  addInstance(instance) {\n    if (this._templateInstances.indexOf(instance) === -1) {\n      this._templateInstances.push(instance);\n      requestAnimationFrame(() => this.notifyPath('_templateInstances.*', this._templateInstances));\n    }\n  }\n\n  removeInstance(instance) {\n    const index = this._templateInstances.indexOf(instance);\n    this.splice('_templateInstances', index, 1);\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      this._TemplateClass = templatize(this.template, this, {\n        instanceProps: this._instanceProps,\n        parentModel: true,\n\n        forwardHostProp: function(prop, value) {\n          this._forwardParentProp(prop, value);\n\n          if (this._templateInstances) {\n            this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n          }\n        },\n\n        notifyInstanceProp: function(inst, prop, value) {\n          if (prop === 'index' || prop === 'item') {\n            // We dont need a change notification for these.\n            return;\n          }\n\n          const originalProp = `__${prop}__`;\n\n          // Notify for only user-action changes, not for scrolling updates. E. g.,\n          // if `detailsOpened` is different from `__detailsOpened__`, which was set during render.\n          if (inst[originalProp] === value) {\n            return;\n          }\n          inst[originalProp] = value;\n\n          const row = Array.from(this._grid.$.items.children).filter(row => this._grid._itemsEqual(row._item, inst.item))[0];\n          if (row) {\n            Array.from(row.children).forEach(cell => {\n              if (cell._instance) {\n                cell._instance[originalProp] = value;\n                cell._instance.notifyPath(prop, value);\n              }\n            });\n          }\n\n          const itemPrefix = 'item.';\n          if (Array.isArray(this._grid.items) && prop.indexOf(itemPrefix) === 0) {\n            const itemsIndex = this._grid.items.indexOf(inst.item);\n            const path = prop.slice(itemPrefix.length);\n            this._grid.notifyPath(`items.${itemsIndex}.${path}`, value);\n          }\n\n          const gridCallback = `_${prop}InstanceChangedCallback`;\n          if (this._grid && this._grid[gridCallback]) {\n            this._grid[gridCallback](inst, value);\n          }\n        }\n\n      });\n    }\n  }\n\n  _forwardParentProp(prop, value) {\n    this._parentPathValues[prop] = value;\n    this._templateInstances.forEach(inst => inst.notifyPath(prop, value));\n  }\n\n  _templateInstancesChanged(t, p) {\n    let index, count;\n    if (t.path === '_templateInstances') {\n      // Iterate all instances\n      index = 0;\n      count = this._templateInstances.length;\n    } else if (t.path === '_templateInstances.splices') {\n      // Iterate only new instances\n      index = t.value.index;\n      count = t.value.addedCount;\n    } else {\n      return;\n    }\n    Object.keys(this._parentPathValues || {}).forEach(keyName => {\n      for (var i = index; i < index + count; i++) {\n        this._templateInstances[i].set(keyName, this._parentPathValues[keyName]);\n      }\n    });\n  }\n\n}\n\ncustomElements.define(GridTemplatizer.is, GridTemplatizer);\n\nexport { GridTemplatizer as Templatizer };\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { GridColumnElement } from './vaadin-grid-column.js';\n\nimport './vaadin-grid-tree-toggle.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-grid-tree-column>` is a helper element for the `<vaadin-grid>`\n * that provides default template and functionality for toggling tree/hierarchical items.\n *\n * #### Example:\n * ```html\n * <vaadin-grid items=\"[[items]]\">\n *  <vaadin-grid-tree-column path=\"name.first\"></vaadin-grid-tree-column>\n *\n *  <vaadin-grid-column>\n *    ...\n * ```\n *\n */\nclass GridTreeColumnElement extends GridColumnElement {\n  static get template() {\n    return html`\n    <template id=\"template\">\n      <vaadin-grid-tree-toggle leaf=\"[[__isLeafItem(item, itemHasChildrenPath)]]\" expanded=\"{{expanded}}\" level=\"[[level]]\">\n        [[__getToggleContent(path, item)]]\n      </vaadin-grid-tree-toggle>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-tree-column';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * JS Path of the property in the item used as text content for the tree toggle.\n       */\n      path: String,\n\n      /**\n       * JS Path of the property in the item that indicates whether the item has child items.\n       * @attr {string} item-has-children-path\n       */\n      itemHasChildrenPath: {\n        type: String,\n        value: 'children'\n      }\n    };\n  }\n\n  /** @private */\n  _prepareBodyTemplate() {\n    const template = this._prepareTemplatizer(this.$.template);\n    // needed to override the dataHost correctly in case internal template is used.\n    template.templatizer.dataHost = this;\n    return template;\n  }\n\n  __isLeafItem(item, itemHasChildrenPath) {\n    return !(item && item[itemHasChildrenPath]);\n  }\n\n  __getToggleContent(path, item) {\n    return path && this.get(path, item);\n  }\n}\n\ncustomElements.define(GridTreeColumnElement.is, GridTreeColumnElement);\n\nexport { GridTreeColumnElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { DirMixin } from '@vaadin/vaadin-element-mixin/vaadin-dir-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { isFocusable } from './vaadin-grid-active-item-mixin.js';\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    @font-face {\n      font-family: \"vaadin-grid-tree-icons\";\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQkAA0AAAAABrwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAECAAAABoAAAAcgHwa6EdERUYAAAPsAAAAHAAAAB4AJwAOT1MvMgAAAZQAAAA/AAAAYA8TBIJjbWFwAAAB8AAAAFUAAAFeGJvXWmdhc3AAAAPkAAAACAAAAAgAAAAQZ2x5ZgAAAlwAAABLAAAAhIrPOhFoZWFkAAABMAAAACsAAAA2DsJI02hoZWEAAAFcAAAAHQAAACQHAgPHaG10eAAAAdQAAAAZAAAAHAxVAgBsb2NhAAACSAAAABIAAAASAIAAVG1heHAAAAF8AAAAGAAAACAACgAFbmFtZQAAAqgAAAECAAACTwflzbdwb3N0AAADrAAAADYAAABZQ7Ajh3icY2BkYGAA4twv3Vfi+W2+MnCzMIDANSOmbGSa2YEZRHEwMIEoAAoiB6sAeJxjYGRgYD7w/wADAwsDCDA7MDAyoAI2AFEEAtIAAAB4nGNgZGBg4GBgZgDRDAxMDGgAAAGbABB4nGNgZp7JOIGBlYGBaSbTGQYGhn4IzfiawZiRkwEVMAqgCTA4MDA+38d84P8BBgdmIAapQZJVYGAEAGc/C54AeJxjYYAAxlAIzQTELAwMBxgZGB0ACy0BYwAAAHicY2BgYGaAYBkGRgYQiADyGMF8FgYbIM3FwMHABISMDArP9/3/+/8/WJXC8z0Q9v8nEp5gHVwMMMAIMo+RDYiZoQJMQIKJARUA7WBhGN4AACFKDtoAAAAAAAAAAAgACAAQABgAJgA0AEIAAHichYvBEYBADAKBVHBjBT4swl9KS2k05o0XHd/yW1hAfBFwCv9sIlJu3nZaNS3PXAaXXHI8Lge7DlzF7C1RgXc7xkK6+gvcD2URmQB4nK2RQWoCMRiFX3RUqtCli65yADModOMBLLgQSqHddRFnQghIAnEUvEA3vUUP0LP0Fj1G+yb8R5iEhO9/ef/7FwFwj28o9EthiVp4hBlehcfUP4Ur8o/wBAv8CU+xVFvhOR7UB7tUdUdlVRJ6HnHWTnhM/V24In8JT5j/KzzFSi2E53hUz7jCcrcIiDDwyKSW1JEct2HdIPH1DFytbUM0PofWdNk5E5oUqb/Q6HHBiVGZpfOXkyUMEj5IyBuNmYZQjBobfsuassvnkKLe1OuBBj0VQ8cRni2xjLWsHaM0jrjx3peYA0/vrdmUYqe9iy7bzrX6eNP7Jh1SijX+AaUVbB8AAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSruZMzlHaB0q4A76kLlwAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKxJigiD6mhFTNowGACmcA/8AAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n/**\n * `<vaadin-grid-tree-toggle>` is a helper element for the `<vaadin-grid>`\n * that provides toggle and level display functionality for the item tree.\n *\n * #### Example:\n * ```html\n * <vaadin-grid-column>\n *   <template class=\"header\">Package name</template>\n *   <template>\n *     <vaadin-grid-tree-toggle\n *         leaf=\"[[!item.hasChildren]]\"\n *         expanded=\"{{expanded}}\"\n *         level=\"[[level]]\">\n *       [[item.name]]\n *     </vaadin-grid-tree-toggle>\n *   </template>\n * </vaadin-grid-column>\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ---|---\n * `toggle` | The tree toggle icon\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * ---|---|---\n * `expanded` | When present, the toggle is expanded | :host\n * `leaf` | When present, the toggle is not expandable, i. e., the current item is a leaf | :host\n *\n * The following custom CSS properties are available on\n * the `<vaadin-grid-tree-toggle>` element:\n *\n * Custom CSS property | Description | Default\n * ---|---|---\n * `--vaadin-grid-tree-toggle-level-offset` | Visual offset step for each tree sublevel | `1em`\n *\n * @extends PolymerElement\n * @mixes ThemableMixin\n */\nclass GridTreeToggleElement extends ThemableMixin(DirMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-flex;\n        align-items: baseline;\n\n        /* CSS API for :host */\n        --vaadin-grid-tree-toggle-level-offset: 1em;\n\n        /*\n          ShadyCSS seems to polyfill :dir(rtl) only for :host, thus using\n          a host custom CSS property for ltr/rtl toggle icon choice.\n         */\n        ---collapsed-icon: \"\\\\e7be\\\\00a0\";\n      }\n\n      :host(:dir(rtl)) {\n        ---collapsed-icon: \"\\\\e7bd\\\\00a0\";\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host(:not([leaf])) {\n        cursor: pointer;\n      }\n\n      #level-spacer,\n      [part=\"toggle\"] {\n        flex: none;\n      }\n\n      #level-spacer {\n        display: inline-block;\n        width: calc(var(---level, '0') * var(--vaadin-grid-tree-toggle-level-offset));\n      }\n\n      [part=\"toggle\"]::before {\n        font-family: \"vaadin-grid-tree-icons\";\n        line-height: 1em; /* make icon font metrics not affect baseline */\n      }\n\n      :host(:not([expanded])) [part=\"toggle\"]::before {\n        content: var(---collapsed-icon);\n      }\n\n      :host([expanded]) [part=\"toggle\"]::before {\n        content: \"\\\\e7bc\\\\00a0\"; /* icon glyph + single non-breaking space */\n      }\n\n      :host([leaf]) [part=\"toggle\"] {\n        visibility: hidden;\n      }\n    </style>\n\n    <span id=\"level-spacer\"></span>\n    <span part=\"toggle\"></span>\n    <slot></slot>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid-tree-toggle';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Current level of the tree represented with a horizontal offset\n       * of the toggle button.\n       * @type {number}\n       */\n      level: {\n        type: Number,\n        value: 0,\n        observer: '_levelChanged'\n      },\n\n      /**\n       * Hides the toggle icon and disables toggling a tree sublevel.\n       * @type {boolean}\n       */\n      leaf: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Sublevel toggle state.\n       * @type {boolean}\n       */\n      expanded: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true\n      }\n    };\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    this.addEventListener('click', e => this._onClick(e));\n  }\n\n  /** @private */\n  _onClick(e) {\n    if (this.leaf) {\n      return;\n    }\n    if (isFocusable(e.target)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.expanded = !this.expanded;\n  }\n\n  /** @private */\n  _levelChanged(level) {\n    const value = Number(level).toString();\n    this.style['---level'] = value;\n    // Async is to make DOM updates applied before evaluating the style\n    // update, required for polyfilled RTL support in MSIE and Edge.\n    this._debouncerUpdateLevel = Debouncer.debounce(\n      this._debouncerUpdateLevel,\n      microTask,\n      () => this.updateStyles({'---level': value})\n    );\n  }\n}\n\ncustomElements.define(GridTreeToggleElement.is, GridTreeToggleElement);\n\nexport { GridTreeToggleElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ScrollerElement } from './vaadin-grid-scroller.js';\nimport { A11yMixin } from './vaadin-grid-a11y-mixin.js';\nimport { ActiveItemMixin } from './vaadin-grid-active-item-mixin.js';\nimport { ArrayDataProviderMixin } from './vaadin-grid-array-data-provider-mixin.js';\nimport { ColumnResizingMixin } from './vaadin-grid-column-resizing-mixin.js';\nimport { DataProviderMixin } from './vaadin-grid-data-provider-mixin.js';\nimport { DynamicColumnsMixin } from './vaadin-grid-dynamic-columns-mixin.js';\nimport { EventContextMixin } from './vaadin-grid-event-context-mixin.js';\nimport { FilterMixin } from './vaadin-grid-filter-mixin.js';\nimport { RowDetailsMixin } from './vaadin-grid-row-details-mixin.js';\nimport { ScrollMixin } from './vaadin-grid-scroll-mixin.js';\nimport { SelectionMixin } from './vaadin-grid-selection-mixin.js';\nimport { SortMixin } from './vaadin-grid-sort-mixin.js';\nimport { StylingMixin } from './vaadin-grid-styling-mixin.js';\nimport { DragAndDropMixin } from './vaadin-grid-drag-and-drop-mixin.js';\nimport { KeyboardNavigationMixin } from './vaadin-grid-keyboard-navigation-mixin.js';\nimport { ColumnReorderingMixin } from './vaadin-grid-column-reordering-mixin.js';\nimport './vaadin-grid-column.js';\nimport './vaadin-grid-styles.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { beforeNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut, animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\nconst TOUCH_DEVICE = (() => {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n *\n * `<vaadin-grid>` is a free, high quality data grid / data table Web Component. The content of the\n * the grid can be populated in two ways: imperatively by using renderer callback function and\n * declaratively by using Polymer's Templates.\n *\n * ### Quick Start\n *\n * Start with an assigning an array to the [`items`](#/elements/vaadin-grid#property-items) property to visualize your data.\n *\n * Use the [`<vaadin-grid-column>`](#/elements/vaadin-grid-column) element to configure the grid columns. Set `path` and `header`\n * shorthand properties for the columns to define what gets rendered in the cells of the column.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column path=\"name.first\" header=\"First name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"name.last\" header=\"Last name\"></vaadin-grid-column>\n *   <vaadin-grid-column path=\"email\"></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * For custom content `vaadin-grid-column` element provides you with three types of `renderer` callback functions: `headerRenderer`,\n * `renderer` and `footerRenderer`.\n *\n * Each of those renderer functions provides `root`, `column`, `model` arguments when applicable.\n * Generate DOM content, append it to the `root` element and control the state\n * of the host element by accessing `column`. Before generating new content,\n * users are able to check if there is already content in `root` for reusing it.\n *\n * Renderers are called on initialization of new column cells and each time the\n * related row model is updated. DOM generated during the renderer call can be reused\n * in the next renderer call and will be provided with the `root` argument.\n * On first call it will be empty.\n *\n * #### Example:\n * ```html\n * <vaadin-grid>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n *   <vaadin-grid-column></vaadin-grid-column>\n * </vaadin-grid>\n * ```\n * ```js\n * const grid = document.querySelector('vaadin-grid');\n * grid.items = [{'name': 'John', 'surname': 'Lennon', 'role': 'singer'},\n *               {'name': 'Ringo', 'surname': 'Starr', 'role': 'drums'}];\n *\n * const columns = grid.querySelectorAll('vaadin-grid-column');\n *\n * columns[0].headerRenderer = function(root) {\n *   root.textContent = 'Name';\n * };\n * columns[0].renderer = function(root, column, model) {\n *   root.textContent = model.item.name;\n * };\n *\n * columns[1].headerRenderer = function(root) {\n *   root.textContent = 'Surname';\n * };\n * columns[1].renderer = function(root, column, model) {\n *   root.textContent = model.item.surname;\n * };\n *\n * columns[2].headerRenderer = function(root) {\n *   root.textContent = 'Role';\n * };\n * columns[2].renderer = function(root, column, model) {\n *   root.textContent = model.item.role;\n * };\n * ```\n *\n * Alternatively, the content can be provided with Polymer's Templates:\n *\n * #### Example:\n * ```html\n * <vaadin-grid items='[{\"name\": \"John\", \"surname\": \"Lennon\", \"role\": \"singer\"},\n * {\"name\": \"Ringo\", \"surname\": \"Starr\", \"role\": \"drums\"}]'>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Name</template>\n *     <template>[[item.name]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Surname</template>\n *     <template>[[item.surname]]</template>\n *   </vaadin-grid-column>\n *   <vaadin-grid-column>\n *     <template class=\"header\">Role</template>\n *     <template>[[item.role]]</template>\n *   </vaadin-grid-column>\n * </vaadin-grid>\n * ```\n *\n * The following helper elements can be used for further customization:\n * - [`<vaadin-grid-column-group>`](#/elements/vaadin-grid-column-group)\n * - [`<vaadin-grid-filter>`](#/elements/vaadin-grid-filter)\n * - [`<vaadin-grid-sorter>`](#/elements/vaadin-grid-sorter)\n * - [`<vaadin-grid-selection-column>`](#/elements/vaadin-grid-selection-column)\n * - [`<vaadin-grid-tree-toggle>`](#/elements/vaadin-grid-tree-toggle)\n *\n * __Note that the helper elements must be explicitly imported.__\n * If you want to import everything at once you can use the `all-imports.html` bundle.\n *\n * A column template can be decorated with one the following class names to specify its purpose\n * - `header`: Marks a header template\n * - `footer`: Marks a footer template\n * - `row-details`: Marks a row details template\n *\n * The following built-in template variables can be bound to inside the column templates:\n * - `[[index]]`: Number representing the row index\n * - `[[item]]` and it's sub-properties: Data object (provided by a data provider / items array)\n * - `{{selected}}`: True if the item is selected (can be two-way bound)\n * - `{{detailsOpened}}`: True if the item has row details opened (can be two-way bound)\n * - `{{expanded}}`: True if the item has tree sublevel expanded (can be two-way bound)\n * - `[[level]]`: Number of the tree sublevel of the item, first level-items have 0\n *\n * ### Lazy Loading with Function Data Provider\n *\n * In addition to assigning an array to the items property, you can alternatively\n * provide the `<vaadin-grid>` data through the\n * [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) function property.\n * The `<vaadin-grid>` calls this function lazily, only when it needs more data\n * to be displayed.\n *\n * See the [`dataProvider`](#/elements/vaadin-grid#property-dataProvider) in\n * the API reference below for the detailed data provider arguments description,\n * and the Assigning Data page in the demos.\n *\n * __Note that expanding the tree grid's item will trigger a call to the `dataProvider`.__\n *\n * __Also, note that when using function data providers, the total number of items\n * needs to be set manually. The total number of items can be returned\n * in the second argument of the data provider callback:__\n *\n * ```javascript\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(\n *       response.employees, // requested page of items\n *       response.totalSize  // total number of items\n *     );\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * __Alternatively, you can use the `size` property to set the total number of items:__\n *\n * ```javascript\n * grid.size = 200; // The total number of items\n * grid.dataProvider = function(params, callback) {\n *   var url = 'https://api.example/data' +\n *       '?page=' + params.page +        // the requested page index\n *       '&per_page=' + params.pageSize; // number of items on the page\n *   var xhr = new XMLHttpRequest();\n *   xhr.onload = function() {\n *     var response = JSON.parse(xhr.responseText);\n *     callback(response.employees);\n *   };\n *   xhr.open('GET', url, true);\n *   xhr.send();\n * };\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `row` | Row in the internal table\n * `cell` | Cell in the internal table\n * `header-cell` | Header cell in the internal table\n * `body-cell` | Body cell in the internal table\n * `footer-cell` | Footer cell in the internal table\n * `details-cell` | Row details cell in the internal table\n * `resize-handle` | Handle for resizing the columns\n * `reorder-ghost` | Ghost element of the header cell being dragged\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `loading` | Set when the grid is loading data from data provider | :host\n * `interacting` | Keyboard navigation in interaction mode | :host\n * `navigating` | Keyboard navigation in navigation mode | :host\n * `overflow` | Set when rows are overflowing the grid viewport. Possible values: `top`, `bottom`, `left`, `right` | :host\n * `reordering` | Set when the grid's columns are being reordered | :host\n * `dragover` | Set when the grid (not a specific row) is dragged over | :host\n * `dragging-rows` : Set when grid rows are dragged  | :host\n * `reorder-status` | Reflects the status of a cell while columns are being reordered | cell\n * `frozen` | Frozen cell | cell\n * `last-frozen` | Last frozen cell | cell\n* * `first-column` | First visible cell on a row | cell\n * `last-column` | Last visible cell on a row | cell\n * `selected` | Selected row | row\n * `expanded` | Expanded row | row\n * `details-opened` | Row with details open | row\n * `loading` | Row that is waiting for data from data provider | row\n * `odd` | Odd row | row\n * `first` | The first body row | row\n * `dragstart` | Set for one frame when drag of a row is starting. The value is a number when multiple rows are dragged | row\n * `dragover` | Set when the row is dragged over | row\n * `drag-disabled` | Set to a row that isn't available for dragging | row\n * `drop-disabled` | Set to a row that can't be dropped on top of | row\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends ScrollerElement\n * @mixes ThemableMixin\n * @mixes A11yMixin\n * @mixes ActiveItemMixin\n * @mixes ArrayDataProviderMixin\n * @mixes ColumnResizingMixin\n * @mixes DataProviderMixin\n * @mixes DynamicColumnsMixin\n * @mixes FilterMixin\n * @mixes RowDetailsMixin\n * @mixes ScrollMixin\n * @mixes SelectionMixin\n * @mixes SortMixin\n * @mixes KeyboardNavigationMixin\n * @mixes ColumnReorderingMixin\n * @mixes EventContextMixin\n * @mixes StylingMixin\n * @mixes DragAndDropMixin\n * @demo demo/index.html\n */\nclass GridElement extends\n  ElementMixin(\n    ThemableMixin(\n      DataProviderMixin(\n        ArrayDataProviderMixin(\n          DynamicColumnsMixin(\n            ActiveItemMixin(\n              ScrollMixin(\n                SelectionMixin(\n                  SortMixin(\n                    RowDetailsMixin(\n                      KeyboardNavigationMixin(\n                        A11yMixin(\n                          FilterMixin(\n                            ColumnReorderingMixin(\n                              ColumnResizingMixin(\n                                EventContextMixin(\n                                  DragAndDropMixin(\n                                    StylingMixin(\n                                      ScrollerElement)))))))))))))))))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-grid-styles\"></style>\n\n    <div id=\"scroller\" safari\\$=\"[[_safari]]\" ios\\$=\"[[_ios]]\" ie\\$=\"[[_ie]]\" loading\\$=\"[[loading]]\" column-reordering-allowed\\$=\"[[columnReorderingAllowed]]\">\n\n      <table id=\"table\" role=\"grid\" aria-multiselectable=\"true\" tabindex=\"0\">\n        <caption id=\"sizer\" part=\"row\"></caption>\n        <thead id=\"header\" role=\"rowgroup\"></thead>\n        <tbody id=\"items\" role=\"rowgroup\"></tbody>\n        <tfoot id=\"footer\" role=\"rowgroup\"></tfoot>\n      </table>\n\n      <div part=\"reorder-ghost\"></div>\n    </div>\n\n    <!-- The template needs at least one slot or else shady doesn't distribute -->\n    <slot name=\"nodistribute\"></slot>\n\n    <div id=\"focusexit\" tabindex=\"0\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-grid';\n  }\n\n  static get version() {\n    return '5.7.5';\n  }\n\n  static get observers() {\n    return [\n      '_columnTreeChanged(_columnTree, _columnTree.*)'\n    ];\n  }\n\n  static get properties() {\n    return {\n      /** @private */\n      _safari: {\n        type: Boolean,\n        value: /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n      },\n\n      /** @private */\n      _ios: {\n        type: Boolean,\n        value: (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream)\n          || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)\n      },\n\n      /** @private */\n      _edge: {\n        type: Boolean,\n        value: typeof CSS !== 'undefined' && CSS.supports('(-ms-ime-align:auto)')\n      },\n\n      /** @private */\n      _ie: {\n        type: Boolean,\n        value: !!(navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/MSIE/))\n      },\n\n      /** @private */\n      _firefox: {\n        type: Boolean,\n        value: navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n      },\n\n      /** @private */\n      _android: {\n        type: Boolean,\n        value: /android/i.test(navigator.userAgent)\n      },\n\n      /** @private */\n      _touchDevice: {\n        type: Boolean,\n        value: TOUCH_DEVICE\n      },\n\n      /**\n       * If true, the grid's height is defined by its rows.\n       *\n       * Effectively, this disables the grid's virtual scrolling so that all the rows are rendered in the DOM at once.\n       * If the grid has a large number of items, using the feature is discouraged to avoid performance issues.\n       * @attr {boolean} height-by-rows\n       * @type {boolean}\n       */\n      heightByRows: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_heightByRowsChanged'\n      },\n\n      /** @private */\n      _recalculateColumnWidthOnceLoadingFinished: {\n        type: Boolean,\n        value: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    this.recalculateColumnWidths();\n  }\n\n  /**\n   * @param {string} name\n   * @param {?string} oldValue\n   * @param {?string} newValue\n   * @protected\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name === 'dir') {\n      this.__isRTL = newValue === 'rtl';\n      this._updateScrollerMeasurements();\n    }\n  }\n\n  /** @private */\n  __hasRowsWithClientHeight() {\n    return !!Array.from(this.$.items.children).filter(row => row.clientHeight).length;\n  }\n\n  /** @protected */\n  __itemsReceived() {\n    if (this._recalculateColumnWidthOnceLoadingFinished\n      && !this._cache.isLoading()\n      && this.__hasRowsWithClientHeight()) {\n      this._recalculateColumnWidthOnceLoadingFinished = false;\n      this.recalculateColumnWidths();\n    }\n  }\n\n  /**\n   * @param {!Array<!GridColumnElement>} cols the columns to auto size based on their content width\n   * @private\n   */\n  _recalculateColumnWidths(cols) {\n    // Note: The `cols.forEach()` loops below could be implemented as a single loop but this has been\n    // split for performance reasons to batch these similar actions [write/read] together to avoid\n    // unnecessary layout trashing.\n\n    // [write] Set automatic width for all cells (breaks column alignment)\n    cols.forEach(col => {\n      col.width = 'auto';\n      col._origFlexGrow = col.flexGrow;\n      col.flexGrow = 0;\n    });\n    // [read] Measure max cell width in each column\n    cols.forEach(col => {\n      col._currentWidth = 0;\n      // Note: _allCells only contains cells which are currently rendered in DOM\n      col._allCells.forEach(c => {\n        // Add 1px buffer to the offset width to avoid too narrow columns (sub-pixel rendering)\n        const cellWidth = c.offsetWidth + 1;\n        col._currentWidth = Math.max(col._currentWidth, cellWidth);\n      });\n    });\n    // [write] Set column widths to fit widest measured content\n    cols.forEach(col => {\n      col.width = `${col._currentWidth}px`;\n      col.flexGrow = col._origFlexGrow;\n      col._currentWidth = undefined;\n      col._origFlexGrow = undefined;\n    });\n  }\n\n  /**\n   * Updates the `width` of all columns which have `autoWidth` set to `true`.\n   */\n  recalculateColumnWidths() {\n    if (!this._columnTree) {\n      return; // No columns\n    }\n    if (this._cache.isLoading()) {\n      this._recalculateColumnWidthOnceLoadingFinished = true;\n    } else {\n      const cols = this._getColumns().filter(col => !col.hidden && col.autoWidth);\n      this._recalculateColumnWidths(cols);\n    }\n  }\n\n  /** @private */\n  _createScrollerRows(count) {\n    const rows = [];\n    for (var i = 0; i < count; i++) {\n      const row = document.createElement('tr');\n      row.setAttribute('part', 'row');\n      row.setAttribute('role', 'row');\n      if (this._columnTree) {\n        this._updateRow(row, this._columnTree[this._columnTree.length - 1], 'body', false, true);\n      }\n      rows.push(row);\n    }\n\n    if (this._columnTree) {\n      this._columnTree[this._columnTree.length - 1].forEach(c => c.notifyPath && c.notifyPath('_cells.*', c._cells));\n    }\n\n    beforeNextRender(this, () => {\n      this._updateFirstAndLastColumn();\n      this._resetKeyboardNavigation();\n    });\n    return rows;\n  }\n\n  /** @private */\n  _getRowTarget() {\n    return this.$.items;\n  }\n\n  /** @private */\n  _createCell(tagName) {\n    const contentId = this._contentIndex = this._contentIndex + 1 || 0;\n    const slotName = 'vaadin-grid-cell-content-' + contentId;\n\n    const cellContent = document.createElement('vaadin-grid-cell-content');\n    cellContent.setAttribute('slot', slotName);\n\n    const cell = document.createElement(tagName);\n    cell.id = slotName.replace('-content-', '-');\n    cell.setAttribute('tabindex', '-1');\n    cell.setAttribute('role', tagName === 'td' ? 'gridcell' : 'columnheader');\n\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n\n    cell.appendChild(slot);\n\n    cell._content = cellContent;\n\n    // With native Shadow DOM, mousedown on slotted element does not focus\n    // focusable slot wrapper, that is why cells are not focused with\n    // mousedown. Workaround: listen for mousedown and focus manually.\n    cellContent.addEventListener('mousedown', () => {\n      if (window.chrome) {\n        // Chrome bug: focusing before mouseup prevents text selection, see http://crbug.com/771903\n        const mouseUpListener = () => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n          // If focus is in the cell content  respect it, do not change.\n          document.removeEventListener('mouseup', mouseUpListener, true);\n        };\n        document.addEventListener('mouseup', mouseUpListener, true);\n      } else {\n        // Focus on mouseup, on the other hand, removes selection on Safari.\n        // Watch out sync focus removal issue, only async focus works here.\n        setTimeout(() => {\n          if (!cellContent.contains(this.getRootNode().activeElement)) {\n            cell.focus();\n          }\n        });\n      }\n    });\n\n    return cell;\n  }\n\n  /**\n   * @param {!HTMLTableRowElement} row\n   * @param {!Array<!GridColumnElement>} columns\n   * @param {?string} section\n   * @param {boolean} isColumnRow\n   * @param {boolean} noNotify\n   * @protected\n   */\n  _updateRow(row, columns, section, isColumnRow, noNotify) {\n    section = section || 'body';\n\n    const contentsFragment = document.createDocumentFragment();\n\n    Array.from(row.children).forEach(cell => cell._vacant = true);\n    row.innerHTML = '';\n    if (row.id !== 'sizer') {\n      row.hidden = true;\n    }\n    columns\n      .filter(column => !column.hidden)\n      .forEach((column, index, cols) => {\n        let cell;\n\n        if (section === 'body') {\n        // Body\n          column._cells = column._cells || [];\n          cell = column._cells.filter(cell => cell._vacant)[0];\n          if (!cell) {\n            cell = this._createCell('td');\n            column._cells.push(cell);\n          }\n          cell.setAttribute('part', 'cell body-cell');\n          row.appendChild(cell);\n\n          if (index === cols.length - 1 && (this._rowDetailsTemplate || this.rowDetailsRenderer)) {\n          // Add details cell as last cell to body rows\n            this._detailsCells = this._detailsCells || [];\n            const detailsCell = this._detailsCells.filter(cell => cell._vacant)[0] || this._createCell('td');\n            if (this._detailsCells.indexOf(detailsCell) === -1) {\n              this._detailsCells.push(detailsCell);\n            }\n            if (!detailsCell._content.parentElement) {\n              contentsFragment.appendChild(detailsCell._content);\n            }\n            this._configureDetailsCell(detailsCell);\n            row.appendChild(detailsCell);\n            this._a11ySetRowDetailsCell(row, detailsCell);\n            detailsCell._vacant = false;\n          }\n\n          if (column.notifyPath && !noNotify) {\n            column.notifyPath('_cells.*', column._cells);\n          }\n        } else {\n        // Header & footer\n          const tagName = section === 'header' ? 'th' : 'td';\n          if (isColumnRow || column.localName === 'vaadin-grid-column-group') {\n            cell = column[`_${section}Cell`] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            column[`_${section}Cell`] = cell;\n          } else {\n            column._emptyCells = column._emptyCells || [];\n            cell = column._emptyCells.filter(cell => cell._vacant)[0] || this._createCell(tagName);\n            cell._column = column;\n            row.appendChild(cell);\n            if (column._emptyCells.indexOf(cell) === -1) {\n              column._emptyCells.push(cell);\n            }\n          }\n          cell.setAttribute('part', `cell ${section}-cell`);\n          this.__updateHeaderFooterRowVisibility(row);\n        }\n\n        if (!cell._content.parentElement) {\n          contentsFragment.appendChild(cell._content);\n        }\n        cell._vacant = false;\n        cell._column = column;\n      });\n\n    // Might be empty if only cache was used\n    this.appendChild(contentsFragment);\n\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumnForRow(row);\n  }\n\n  /**\n   * @param {HTMLTableRowElement} row\n   * @protected\n   */\n  __updateHeaderFooterRowVisibility(row) {\n    if (!row) {\n      return;\n    }\n\n    const visibleRowCells = Array.from(row.children).filter(cell => {\n      const column = cell._column;\n      if (column._emptyCells && column._emptyCells.indexOf(cell) > -1) {\n        // The cell is an \"empty cell\"  -> doesn't block hiding the row\n        return false;\n      }\n      if (row.parentElement === this.$.header) {\n        if (column.headerRenderer || column._headerTemplate) {\n          // The cell is the header cell of a column that has a header renderer\n          // or a header template -> row should be visible\n          return true;\n        }\n        if (column.header === null) {\n          // The column header is explicilty set to null -> doesn't block hiding the row\n          return false;\n        }\n        if (column.path || column.header !== undefined) {\n          // The column has an explicit non-null header or a path that generates a header\n          // -> row should be visible\n          return true;\n        }\n      } else {\n        if (column.footerRenderer || column._footerTemplate) {\n          // The cell is the footer cell of a column that has a footer renderer\n          // or a footer template -> row should be visible\n          return true;\n        }\n      }\n    });\n\n    if (row.hidden !== !visibleRowCells.length) {\n      row.hidden = !visibleRowCells.length;\n      this.notifyResize();\n    }\n  }\n\n  /** @private */\n  _updateScrollerItem(row, index) {\n    this._preventScrollerRotatingCellFocus(row, index);\n\n    if (!this._columnTree) {\n      return;\n    }\n\n    this._toggleAttribute('first', index === 0, row);\n    this._toggleAttribute('odd', index % 2, row);\n    this._a11yUpdateRowRowindex(row, index);\n    this._getItem(index, row);\n  }\n\n  /** @private */\n  _columnTreeChanged(columnTree, splices) {\n    this._renderColumnTree(columnTree);\n    this.recalculateColumnWidths();\n  }\n\n  /**\n   * @param {!Array<!GridColumnElement>} columnTree\n   * @protected\n   */\n  _renderColumnTree(columnTree) {\n    Array.from(this.$.items.children).forEach((row) => this._updateRow(row, columnTree[columnTree.length - 1], null, false, true));\n\n    while (this.$.header.children.length < columnTree.length) {\n      const headerRow = document.createElement('tr');\n      headerRow.setAttribute('part', 'row');\n      headerRow.setAttribute('role', 'row');\n      this.$.header.appendChild(headerRow);\n\n      const footerRow = document.createElement('tr');\n      footerRow.setAttribute('part', 'row');\n      footerRow.setAttribute('role', 'row');\n      this.$.footer.appendChild(footerRow);\n    }\n    while (this.$.header.children.length > columnTree.length) {\n      this.$.header.removeChild(this.$.header.firstElementChild);\n      this.$.footer.removeChild(this.$.footer.firstElementChild);\n    }\n\n    Array.from(this.$.header.children)\n      .forEach((headerRow, index) => this._updateRow(headerRow, columnTree[index], 'header', index === columnTree.length - 1));\n\n    Array.from(this.$.footer.children)\n      .forEach((footerRow, index) => this._updateRow(footerRow, columnTree[columnTree.length - 1 - index], 'footer', index === 0));\n\n    // Sizer rows\n    this._updateRow(this.$.sizer, columnTree[columnTree.length - 1]);\n\n    this._resizeHandler();\n    this._frozenCellsChanged();\n    this._updateFirstAndLastColumn();\n    this._resetKeyboardNavigation();\n    this._a11yUpdateHeaderRows();\n    this._a11yUpdateFooterRows();\n    this.__updateFooterPositioning();\n  }\n\n  __updateFooterPositioning() {\n    if (this._firefox) {\n      // Sticky (or translated) footer in a flexbox host doesn't get included in\n      // the scroll height calculation on FF. This is a workaround for the issue.\n      this.$.items.style.paddingBottom = 0;\n      if (!this.heightByRows) {\n        this.$.items.style.paddingBottom = `${this.$.footer.offsetHeight}px`;\n      }\n    }\n\n    if (this._ios) {\n      const isOldIOS = !window.CSS.supports('position', 'sticky');\n      if (isOldIOS) {\n        // Due to a rendering bug, the sticky header may disappear on an older iOS (10-12) Safari\n        // if the grid is used inside of a flex box. This is a workaround for the issue.\n        this.$.table.style.height = '';\n        this.$.table.style.minHeight = '100%';\n        this.$.table.style.maxHeight = '100%';\n        setTimeout(() => this.$.table.style.height = `${this.$.scroller.offsetHeight}px`);\n      }\n    }\n  }\n\n  /**\n   * @param {!HTMLElement} row\n   * @param {GridItem} item\n   * @protected\n   */\n  _updateItem(row, item) {\n    row._item = item;\n    const model = this.__getRowModel(row);\n\n    this._toggleAttribute('selected', model.selected, row);\n    this._a11yUpdateRowSelected(row, model.selected);\n    this._a11yUpdateRowLevel(row, model.level);\n    this._toggleAttribute('expanded', model.expanded, row);\n    if (this._rowDetailsTemplate || this.rowDetailsRenderer) {\n      this._toggleDetailsCell(row, item);\n    }\n    this._generateCellClassNames(row, model);\n    this._filterDragAndDrop(row, model);\n\n    Array.from(row.children).forEach(cell => {\n      if (cell._renderer) {\n        const owner = cell._column || this;\n        cell._renderer.call(owner, cell._content, owner, model);\n      } else if (cell._instance) {\n        cell._instance.__detailsOpened__ = model.detailsOpened;\n        cell._instance.__selected__ = model.selected;\n        cell._instance.__level__ = model.level;\n        cell._instance.__expanded__ = model.expanded;\n        cell._instance.setProperties(model);\n      }\n    });\n\n    this._debouncerUpdateHeights = Debouncer.debounce(this._debouncerUpdateHeights,\n      timeOut.after(1), () => {\n        this._updateMetrics();\n        this._positionItems();\n        this._updateScrollerSize();\n      }\n    );\n  }\n\n  /** @private */\n  _resizeHandler() {\n    this._updateDetailsCellHeights();\n    this._accessIronListAPI(super._resizeHandler, true);\n    this._updateScrollerMeasurements();\n    this.__updateFooterPositioning();\n  }\n\n  /** @private */\n  _onAnimationEnd(e) {\n    // ShadyCSS applies scoping suffixes to animation names\n    if (e.animationName.indexOf('vaadin-grid-appear') === 0) {\n      this._render();\n      e.stopPropagation();\n      this.notifyResize();\n      this.__itemsReceived();\n\n      requestAnimationFrame(() => {\n        // This needs to be set programmatically in order to avoid an iOS 10 bug (disappearing grid)\n        this.$.table.style.webkitOverflowScrolling = 'touch';\n      });\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @param {boolean} bool\n   * @param {!Element} node\n   * @protected\n   */\n  _toggleAttribute(name, bool, node) {\n    if (node.hasAttribute(name) === !bool) {\n      if (bool) {\n        node.setAttribute(name, '');\n      } else {\n        node.removeAttribute(name);\n      }\n    }\n  }\n\n  /**\n   * @param {!HTMLTableRowElement} row\n   * @return {!GridItemModel}\n   * @protected\n   */\n  __getRowModel(row) {\n    return {\n      index: row.index,\n      item: row._item,\n      level: this._getIndexLevel(row.index),\n      expanded: this._isExpanded(row._item),\n      selected: this._isSelected(row._item),\n      detailsOpened:\n        !!(this._rowDetailsTemplate || this.rowDetailsRenderer) && this._isDetailsOpened(row._item)\n    };\n  }\n\n  /**\n   * Manually invoke existing renderers for all the columns\n   * (header, footer and body cells) and opened row details.\n   */\n  render() {\n    if (this._columnTree) {\n      // header and footer renderers\n      this._columnTree.forEach(level => {\n        level.forEach(column => column._renderHeaderAndFooter());\n      });\n\n      // body and row details renderers\n      this._update();\n    }\n  }\n\n  /**\n   * Updates the computed metrics and positioning of internal grid parts\n   * (row/details cell positioning etc). Needs to be invoked whenever the sizing of grid\n   * content changes asynchronously to ensure consistent appearance (e.g. when a\n   * contained image whose bounds aren't known beforehand finishes loading).\n   */\n  notifyResize() {\n    super.notifyResize();\n  }\n\n  /** @private */\n  _heightByRowsChanged(value, oldValue) {\n    if (value || oldValue) {\n      this.notifyResize();\n    }\n  }\n\n  /** @protected */\n  __forceReflow() {\n    this._debouncerForceReflow = Debouncer.debounce(this._debouncerForceReflow,\n      animationFrame, () => {\n        this.$.scroller.style.overflow = 'hidden';\n        setTimeout(() => this.$.scroller.style.overflow = '');\n      }\n    );\n  }\n}\n\ncustomElements.define(GridElement.is, GridElement);\nexport { GridElement };\n","import './version.js';\nimport '@polymer/polymer/lib/elements/custom-style.js';\nimport '@polymer/polymer/lib/elements/dom-module.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"material-color-light\">\n  <template>\n    <style>\n      :host,\n      #host-fix {\n        /* Text colors */\n        --material-body-text-color: var(--light-theme-text-color, rgba(0, 0, 0, 0.87));\n        --material-secondary-text-color: var(--light-theme-secondary-color, rgba(0, 0, 0, 0.54));\n        --material-disabled-text-color: var(--light-theme-disabled-color, rgba(0, 0, 0, 0.38));\n\n        /* Primary colors */\n        --material-primary-color: var(--primary-color, #6200ee);\n        --material-primary-contrast-color: var(--dark-theme-base-color, #fff);\n        --material-primary-text-color: var(--material-primary-color);\n\n        /* Error colors */\n        --material-error-color: var(--error-color, #b00020);\n        --material-error-text-color: var(--material-error-color);\n\n        /* Background colors */\n        --material-background-color: var(--light-theme-background-color, #fff);\n        --material-secondary-background-color: var(--light-theme-secondary-background-color, #f5f5f5);\n        --material-disabled-color: rgba(0, 0, 0, 0.26);\n\n        /* Divider colors */\n        --material-divider-color: rgba(0, 0, 0, 0.12);\n\n        /* Undocumented internal properties (prefixed with three dashes) */\n\n        /* Text field tweaks */\n        --_material-text-field-input-line-background-color: initial;\n        --_material-text-field-input-line-opacity: initial;\n        --_material-text-field-input-line-hover-opacity: initial;\n        --_material-text-field-focused-label-opacity: initial;\n\n        /* Button tweaks */\n        --_material-button-raised-background-color: initial;\n        --_material-button-outline-color: initial;\n\n        /* Grid tweaks */\n        --_material-grid-row-hover-background-color: initial;\n\n        /* Split layout tweaks */\n        --_material-split-layout-splitter-background-color: initial;\n\n        background-color: var(--material-background-color);\n        color: var(--material-body-text-color);\n      }\n\n      [theme~=\"dark\"] {\n        /* Text colors */\n        --material-body-text-color: var(--dark-theme-text-color, rgba(255, 255, 255, 1));\n        --material-secondary-text-color: var(--dark-theme-secondary-color, rgba(255, 255, 255, 0.7));\n        --material-disabled-text-color: var(--dark-theme-disabled-color, rgba(255, 255, 255, 0.5));\n\n        /* Primary colors */\n        --material-primary-color: var(--light-primary-color, #7e3ff2);\n        --material-primary-text-color: #b794f6;\n\n        /* Error colors */\n        --material-error-color: var(--error-color, #de2839);\n        --material-error-text-color: var(--material-error-color);\n\n        /* Background colors */\n        --material-background-color: var(--dark-theme-background-color, #303030);\n        --material-secondary-background-color: var(--dark-theme-secondary-background-color, #3b3b3b);\n        --material-disabled-color: rgba(255, 255, 255, 0.3);\n\n        /* Divider colors */\n        --material-divider-color: rgba(255, 255, 255, 0.12);\n\n        /* Undocumented internal properties (prefixed with three dashes) */\n\n        /* Text field tweaks */\n        --_material-text-field-input-line-background-color: #fff;\n        --_material-text-field-input-line-opacity: 0.7;\n        --_material-text-field-input-line-hover-opacity: 1;\n        --_material-text-field-focused-label-opacity: 1;\n\n        /* Button tweaks */\n        --_material-button-raised-background-color: rgba(255, 255, 255, 0.08);\n        --_material-button-outline-color: rgba(255, 255, 255, 0.2);\n\n        /* Grid tweaks */\n        --_material-grid-row-hover-background-color: rgba(255, 255, 255, 0.08);\n        --_material-grid-row-selected-overlay-opacity: 0.16;\n\n        /* Split layout tweaks */\n        --_material-split-layout-splitter-background-color: rgba(255, 255, 255, 0.8);\n\n        background-color: var(--material-background-color);\n        color: var(--material-body-text-color);\n      }\n\n      a {\n        color: inherit;\n      }\n    </style>\n  </template>\n</dom-module><dom-module id=\"material-color-dark\">\n  <template>\n    <style>\n      :host,\n      #host-fix {\n        /* Text colors */\n        --material-body-text-color: var(--dark-theme-text-color, rgba(255, 255, 255, 1));\n        --material-secondary-text-color: var(--dark-theme-secondary-color, rgba(255, 255, 255, 0.7));\n        --material-disabled-text-color: var(--dark-theme-disabled-color, rgba(255, 255, 255, 0.5));\n\n        /* Primary colors */\n        --material-primary-color: var(--light-primary-color, #7e3ff2);\n        --material-primary-text-color: #b794f6;\n\n        /* Error colors */\n        --material-error-color: var(--error-color, #de2839);\n        --material-error-text-color: var(--material-error-color);\n\n        /* Background colors */\n        --material-background-color: var(--dark-theme-background-color, #303030);\n        --material-secondary-background-color: var(--dark-theme-secondary-background-color, #3b3b3b);\n        --material-disabled-color: rgba(255, 255, 255, 0.3);\n\n        /* Divider colors */\n        --material-divider-color: rgba(255, 255, 255, 0.12);\n\n        /* Undocumented internal properties (prefixed with three dashes) */\n\n        /* Text field tweaks */\n        --_material-text-field-input-line-background-color: #fff;\n        --_material-text-field-input-line-opacity: 0.7;\n        --_material-text-field-input-line-hover-opacity: 1;\n        --_material-text-field-focused-label-opacity: 1;\n\n        /* Button tweaks */\n        --_material-button-raised-background-color: rgba(255, 255, 255, 0.08);\n        --_material-button-outline-color: rgba(255, 255, 255, 0.2);\n\n        /* Grid tweaks */\n        --_material-grid-row-hover-background-color: rgba(255, 255, 255, 0.08);\n        --_material-grid-row-selected-overlay-opacity: 0.16;\n\n        /* Split layout tweaks */\n        --_material-split-layout-splitter-background-color: rgba(255, 255, 255, 0.8);\n\n        background-color: var(--material-background-color);\n        color: var(--material-body-text-color);\n      }\n    </style>\n  </template>\n</dom-module><custom-style>\n  <style>\n    :root {\n      /* Text colors */\n      --material-body-text-color: var(--light-theme-text-color, rgba(0, 0, 0, 0.87));\n      --material-secondary-text-color: var(--light-theme-secondary-color, rgba(0, 0, 0, 0.54));\n      --material-disabled-text-color: var(--light-theme-disabled-color, rgba(0, 0, 0, 0.38));\n\n      /* Primary colors */\n      --material-primary-color: var(--primary-color, #6200ee);\n      --material-primary-contrast-color: var(--dark-theme-base-color, #fff);\n      --material-primary-text-color: var(--material-primary-color);\n\n      /* Error colors */\n      --material-error-color: var(--error-color, #b00020);\n      --material-error-text-color: var(--material-error-color);\n\n      /* Background colors */\n      --material-background-color: var(--light-theme-background-color, #fff);\n      --material-secondary-background-color: var(--light-theme-secondary-background-color, #f5f5f5);\n      --material-disabled-color: rgba(0, 0, 0, 0.26);\n\n      /* Divider colors */\n      --material-divider-color: rgba(0, 0, 0, 0.12);\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nimport './version.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<custom-style>\n  <style>\n    @font-face {\n      font-family: 'material-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,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) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --material-icons-arrow-downward: \"\\\\ea01\";\n      --material-icons-arrow-upward: \"\\\\ea02\";\n      --material-icons-calendar: \"\\\\ea03\";\n      --material-icons-check: \"\\\\ea04\";\n      --material-icons-chevron-left: \"\\\\ea05\";\n      --material-icons-chevron-right: \"\\\\ea06\";\n      --material-icons-clear: \"\\\\ea07\";\n      --material-icons-clock: \"\\\\ea08\";\n      --material-icons-dropdown: \"\\\\ea09\";\n      --material-icons-error: \"\\\\ea0a\";\n      --material-icons-eye-disabled: \"\\\\ea0b\";\n      --material-icons-eye: \"\\\\ea0c\";\n      --material-icons-play: \"\\\\ea0d\";\n      --material-icons-reload: \"\\\\ea0e\";\n      --material-icons-upload: \"\\\\ea0f\";\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\n/* NOTICE: Generated with 'gulp icons' */\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\n;\n","class Material extends HTMLElement {\n  static get version() {\n    return '1.3.2';\n  }\n}\n\ncustomElements.define('vaadin-material-styles', Material);\n\nexport { Material };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { timeOut, animationFrame } from '@polymer/polymer/lib/utils/async.js';\n\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title', 'disabled', 'readonly', 'required'],\n  accessible: ['invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends subclass {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       * @type {!TextFieldAutoCorrect | undefined}\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       * @type {!TextFieldAutoCapitalize | undefined}\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       * @type {boolean}\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       * @attr {boolean} clear-button-visible\n       * @type {boolean}\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       * @attr {string} error-message\n       * @type {string}\n       */\n      errorMessage: {\n        type: String,\n        value: '',\n        observer: '_errorMessageChanged'\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       * @type {{clear: string}}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       * @type {string}\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * String used for the helper text.\n       * @attr {string} helper-text\n       * @type {string | null}\n       */\n      helperText: {\n        type: String,\n        value: '',\n        observer: '_helperTextChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       * @type {string}\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       * @type {boolean}\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       * @attr {boolean} has-value\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       * @attr {boolean} prevent-invalid-input\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      /**\n       * A pattern matched against individual characters the user inputs.\n       * When set, the field will prevent:\n       * - `keyDown` events if the entered key doesn't match `/^_enabledCharPattern$/`\n       * - `paste` events if the pasted text doesn't match `/^_enabledCharPattern*$/`\n       * - `drop` events if the dropped text doesn't match `/^_enabledCharPattern*$/`\n       *\n       * For example, to enable entering only numbers and minus signs,\n       * `_enabledCharPattern = \"[\\\\d-]\"`\n       * @protected\n       */\n      _enabledCharPattern: String,\n\n      /** @private */\n      _labelId: String,\n\n      /** @private */\n      _helperTextId: String,\n\n      /** @private */\n      _errorId: String,\n\n      /** @private */\n      _inputId: String,\n\n      /** @private */\n      _hasSlottedHelper: Boolean\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId, helperText, _helperTextId, _hasSlottedHelper)',\n      '_getActiveLabelId(label, _labelId, _inputId)',\n      '__observeOffsetHeight(errorMessage, invalid, label, helperText)',\n      '__enabledCharPatternChanged(_enabledCharPattern)'\n    ];\n  }\n\n  /**\n   * @return {HTMLElement | undefined}\n   * @protected\n   */\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @return {HTMLElement | undefined}}\n   * @protected\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  /**\n   * @return {string}\n   * @protected\n   */\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  /** @protected */\n  _createConstraintsObserver() {\n    // This complex observer needs to be added dynamically here (instead of defining it above in the `get observers()`)\n    // so that it runs after complex observers of inheriting classes. Otherwise e.g. `_stepOrMinChanged()` observer of\n    // vaadin-number-field would run after this and the `min` and `step` properties would not yet be propagated to\n    // the `inputElement` when this runs.\n    this._createMethodObserver('_constraintsChanged(required, minlength, maxlength, pattern)');\n  }\n\n  /** @private */\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n\n    this.value = e.target.value;\n    this.__userInput = false;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  /** @private */\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  /**\n   * @param {!Event} e\n   * @protected\n   */\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  /**\n   * @param {unknown} newVal\n   * @param {unknown} oldVal\n   * @protected\n   */\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  /** @private */\n  _labelChanged(label) {\n    this._setOrToggleAttribute('has-label', !!label, this);\n  }\n\n  /** @private */\n  _helperTextChanged(helperText) {\n    this._setOrToggleAttribute('has-helper', !!helperText, this);\n  }\n\n  /** @private */\n  _errorMessageChanged(errorMessage) {\n    this._setOrToggleAttribute('has-error-message', !!errorMessage, this);\n  }\n\n  /** @private */\n  _onHelperSlotChange() {\n    const slottedNodes = this.shadowRoot.querySelector(`[name=\"helper\"]`).assignedNodes({flatten: true});\n    // Only has slotted helper if not a text node\n    // Text nodes are added by the helperText prop and not the helper slot\n    // The filter is added due to shady DOM triggering this callback on helperText prop change\n    this._hasSlottedHelper = slottedNodes.filter(node => node.nodeType !== 3).length;\n\n    if (this._hasSlottedHelper) {\n      this.setAttribute('has-helper', 'slotted');\n    } else if (this.helperText === '' || this.helperText === null) {\n      this.removeAttribute('has-helper');\n    }\n  }\n\n  /** @private */\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  /** @private */\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  /** @private */\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  /** @private */\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  /** @private */\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === PROP_TYPE.ACCESSIBLE) {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index] ? 'true' : false, input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  /** @private */\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  /**\n   * @param {boolean | undefined} required\n   * @param {number | undefined} minlength\n   * @param {number | undefined} maxlength\n   * @param {string | undefined} maxlength\n   * @protected\n   */\n  _constraintsChanged(required, minlength, maxlength, pattern) {\n    if (!this.invalid) {\n      return;\n    }\n\n    if (!required && !minlength && !maxlength && !pattern) {\n      this.invalid = false;\n    } else {\n      this.validate();\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @return {boolean}\n   */\n  checkValidity() {\n    // Note (Yuriy): `__forceCheckValidity` is used in containing components (i.e. `vaadin-date-picker`) in order\n    // to force the checkValidity instead of returning the previous invalid state.\n    if (this.required || this.pattern || this.maxlength || this.minlength || this.__forceCheckValidity) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  /** @private */\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n    node.addEventListener('paste', this._boundOnPaste);\n    node.addEventListener('drop', this._boundOnDrop);\n    node.addEventListener('beforeinput', this._boundOnBeforeInput);\n  }\n\n  /** @private */\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n    node.removeEventListener('paste', this._boundOnPaste);\n    node.removeEventListener('drop', this._boundOnDrop);\n    node.removeEventListener('beforeinput', this._boundOnBeforeInput);\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n\n    this._createConstraintsObserver();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n    this._boundOnPaste = this._onPaste.bind(this);\n    this._boundOnDrop = this._onDrop.bind(this);\n    this._boundOnBeforeInput = this._onBeforeInput.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    this._onHelperSlotChange();\n    this.shadowRoot.querySelector('[name=\"helper\"]').addEventListener('slotchange', this._onHelperSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n    this._helperTextId = `${this.constructor.is}-helper-${uniqueId}`;\n    this._inputId = `${this.constructor.is}-input-${uniqueId}`;\n\n    // Lumo theme defines a max-height transition for the \"error-message\"\n    // part on invalid state change.\n    this.shadowRoot.querySelector('[part=\"error-message\"]')\n      .addEventListener('transitionend', () => {\n        this.__observeOffsetHeight();\n      });\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity for all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  /** @private */\n  _onBlur() {\n    this.validate();\n  }\n\n  /** @private */\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        try {\n          this.inputElement.setSelectionRange(0, 9999);\n        } catch (e) {\n          // The workaround may cause errors on different input types.\n          // Needs to be suppressed. See https://github.com/vaadin/flow/issues/6070\n        }\n      });\n    }\n  }\n\n  /** @private */\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  /**\n   * @param {!KeyboardEvent} e\n   * @protected\n   */\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      const dispatchChange = !!this.value;\n      this.clear();\n      dispatchChange && this.inputElement.dispatchEvent(new Event('change', {bubbles: !this._slottedInput}));\n    }\n\n    if (this._enabledCharPattern && !this.__shouldAcceptKey(e)) {\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  __shouldAcceptKey(event) {\n    return (event.metaKey || event.ctrlKey)\n      || !event.key // allow typing anything if event.key is not supported\n      || event.key.length !== 1 // allow \"Backspace\", \"ArrowLeft\" etc.\n      || this.__enabledCharRegExp.test(event.key);\n  }\n\n  /** @private */\n  _onPaste(e) {\n    if (this._enabledCharPattern) {\n      const pastedText = (e.clipboardData || window.clipboardData).getData('text');\n      if (!this.__enabledTextRegExp.test(pastedText)) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  /** @private */\n  _onDrop(e) {\n    if (this._enabledCharPattern) {\n      const draggedText = e.dataTransfer.getData('text');\n      if (!this.__enabledTextRegExp.test(draggedText)) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  /** @private */\n  _onBeforeInput(e) {\n    // The `beforeinput` event covers all the cases for `_enabledCharPattern`: keyboard, pasting and dropping,\n    // but it is still experimental technology so we can't rely on it. It's used here just as an additional check,\n    // because it seems to be the only way to detect and prevent specific keys on mobile devices. See issue #429.\n    if (this._enabledCharPattern && e.data && !this.__enabledTextRegExp.test(e.data)) {\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  __enabledCharPatternChanged(_enabledCharPattern) {\n    this.__enabledCharRegExp = _enabledCharPattern && new RegExp('^' + _enabledCharPattern + '$');\n    this.__enabledTextRegExp = _enabledCharPattern && new RegExp('^' + _enabledCharPattern + '*$');\n  }\n\n  /** @private */\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  /** @private */\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  /** @private */\n  _getActiveErrorId(invalid, errorMessage, errorId, helperText, helperTextId, hasSlottedHelper) {\n    const ids = [];\n    if (helperText || hasSlottedHelper) {\n      ids.push(helperTextId);\n    }\n    if (errorMessage && invalid) {\n      ids.push(errorId);\n    }\n    this._setOrToggleAttribute('aria-describedby', ids.join(' '), this.focusElement);\n  }\n\n  /** @private */\n  _getActiveLabelId(label, _labelId, _inputId) {\n    let ids = _inputId;\n    if (label) {\n      ids = `${_labelId} ${_inputId}`;\n    }\n    this.focusElement.setAttribute('aria-labelledby', ids);\n  }\n\n  /** @private */\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  /** @private */\n  _dispatchIronResizeEventIfNeeded(sizePropertyName, value) {\n    const previousSizePropertyName = '__previous' + sizePropertyName;\n    if (this[previousSizePropertyName] !== undefined\n        && this[previousSizePropertyName] !== value) {\n      this.dispatchEvent(\n        new CustomEvent('iron-resize', {bubbles: true})\n      );\n    }\n\n    this[previousSizePropertyName] = value;\n  }\n\n  /** @private */\n  __observeOffsetHeight() {\n    this.__observeOffsetHeightDebouncer = Debouncer.debounce(\n      this.__observeOffsetHeightDebouncer,\n      animationFrame, () => {\n        this._dispatchIronResizeEventIfNeeded('Height', this.offsetHeight);\n      });\n  }\n\n  /**\n   * @param {string} prop\n   * @param {string} oldVal\n   * @param {string} newVal\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  // Workaround for https://github.com/Polymer/polymer/issues/5259\n  get __data() {\n    return this.__dataValue || {};\n  }\n\n  set __data(value) {\n    this.__dataValue = value;\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n\n  /**\n   * Fired when the size of the element changes.\n   *\n   * @event iron-resize\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `has-helper` | Set when the element has helper text or slot | :host\n * `has-error-message` | Set when the element has an error message | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends PolymerElement\n * @mixes TextFieldMixin\n * @mixes ControlStateMixin\n * @mixes ThemableMixin\n * @mixes ElementMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends\n  ElementMixin(\n    TextFieldMixin(\n      ControlStateMixin(\n        ThemableMixin(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\" id=\"[[_inputId]]\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"helper-text\" on-click=\"focus\" id=\"[[_helperTextId]]\">\n        <slot name=\"helper\">[[helperText]]</slot>\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.8.2';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * The text usually displayed in a tooltip popup when the mouse is over the field.\n       * @type {string}\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import { DomModule } from '@polymer/polymer/lib/elements/dom-module.js';\nimport { ThemePropertyMixin } from './vaadin-theme-property-mixin.js';\n\n/**\n * @polymerMixin\n * @mixes ThemePropertyMixin\n */\nexport const ThemableMixin = superClass => class VaadinThemableMixin extends ThemePropertyMixin(superClass) {\n\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const template = this.prototype._template;\n\n    const hasOwnTemplate = this.template && this.template.parentElement && this.template.parentElement.id === this.is;\n    const inheritedTemplate = Object.getPrototypeOf(this.prototype)._template;\n    if (inheritedTemplate && !hasOwnTemplate) {\n      // The element doesn't define its own template -> include the theme modules from the inherited template\n      Array.from(inheritedTemplate.content.querySelectorAll('style[include]')).forEach(s => {\n        this._includeStyle(s.getAttribute('include'), template);\n      });\n    }\n\n    this._includeMatchingThemes(template);\n  }\n\n  /** @private */\n  static _includeMatchingThemes(template) {\n    const domModule = DomModule;\n    const modules = domModule.prototype.modules;\n\n    let hasThemes = false;\n    const defaultModuleName = this.is + '-default-theme';\n\n    Object.keys(modules)\n      .sort((moduleNameA, moduleNameB) => {\n        const vaadinA = moduleNameA.indexOf('vaadin-') === 0;\n        const vaadinB = moduleNameB.indexOf('vaadin-') === 0;\n\n        const vaadinThemePrefixes = ['lumo-', 'material-'];\n        const vaadinThemeA = vaadinThemePrefixes.filter(prefix => moduleNameA.indexOf(prefix) === 0).length > 0;\n        const vaadinThemeB = vaadinThemePrefixes.filter(prefix => moduleNameB.indexOf(prefix) === 0).length > 0;\n\n        if (vaadinA !== vaadinB) {\n          // Include vaadin core styles first\n          return vaadinA ? -1 : 1;\n        } else if (vaadinThemeA !== vaadinThemeB) {\n          // Include vaadin theme styles after that\n          return vaadinThemeA ? -1 : 1;\n        } else {\n          // Lastly include custom styles so they override all vaadin styles\n          return 0;\n        }\n      })\n      .forEach(moduleName => {\n        if (moduleName !== defaultModuleName) {\n          const themeFor = modules[moduleName].getAttribute('theme-for');\n          if (themeFor) {\n            themeFor.split(' ').forEach(themeForToken => {\n              if (new RegExp('^' + themeForToken.split('*').join('.*') + '$').test(this.is)) {\n                hasThemes = true;\n                this._includeStyle(moduleName, template);\n              }\n            });\n          }\n        }\n      });\n\n    if (!hasThemes && modules[defaultModuleName]) {\n      // No theme modules found, include the default module if it exists\n      this._includeStyle(defaultModuleName, template);\n    }\n  }\n\n  /** @private */\n  static _includeStyle(moduleName, template) {\n    if (template && !template.content.querySelector(`style[include=\"${moduleName}\"]`)) {\n      const styleEl = document.createElement('style');\n      styleEl.setAttribute('include', moduleName);\n      template.content.appendChild(styleEl);\n    }\n  }\n\n};\n","/**\n * @polymerMixin\n */\nexport const ThemePropertyMixin = superClass => class VaadinThemePropertyMixin extends superClass {\n  static get properties() {\n    return {\n      /**\n       * Helper property with theme attribute value facilitating propagation\n       * in shadow DOM.\n       *\n       * Enables the component implementation to propagate the `theme`\n       * attribute value to the subcomponents in Shadow DOM by binding\n       * the subcomponents \"theme\" attribute to the `theme` property of\n       * the host.\n       *\n       * **NOTE:** Extending the mixin only provides the property for binding,\n       * and does not make the propagation alone.\n       *\n       * See [Theme Attribute and Subcomponents](https://github.com/vaadin/vaadin-themable-mixin/wiki/5.-Theme-Attribute-and-Subcomponents).\n       * page for more information.\n       *\n       * @protected\n       */\n      theme: {\n        type: String,\n        readOnly: true\n      }\n    };\n  }\n\n  /** @protected */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n\n    if (name === 'theme') {\n      this._setTheme(newValue);\n    }\n  }\n};\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.0';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","export * from './vaadin-usage-statistics-collect.js';\n","export default \"<h1 class=\\\"avl-container-start\\\">{{ 'VizBoxStarterKit.WelcomeToTheAVLWebStarterKit' |  translate }}</h1>\\r\\n<p>{{ 'VizBoxStarterKit.AVLWebStarterKitIsApplicationExample' | translate }}</p>\\r\\n<p>{{ 'VizBoxStarterKit.VizBoxPlatformIsDesignedToBringYouUpToSpeed' | translate }}</p>\\r\\n\\r\\n<div\\r\\n fxLayout=\\\"row\\\"\\r\\n fxLayoutAlign=\\\"start stretch\\\"\\r\\n [fxLayoutGap]=\\\"selectedPet ? '10px' : '0px'\\\">\\r\\n\\r\\n <viz-pets\\r\\n   [fxFlex]=\\\"selectedPet ? 70 : 100\\\"\\r\\n   (selectedPetChanged)=\\\"selectedPet = $event\\\"></viz-pets>\\r\\n  \\r\\n <viz-pet-detail\\r\\n   [fxFlex]=\\\"selectedPet ? 30 : 0\\\"\\r\\n   [pet]=\\\"selectedPet\\\"></viz-pet-detail>\\r\\n</div>\\r\\n\";","export default \"<div style=\\\"margin-top: 56px;\\\">\\r\\n  <avl-card *ngIf=\\\"pet\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"start stretch\\\" fxFill>\\r\\n    <h1 slot=\\\"title\\\">{{ pet.name }}</h1>\\r\\n    <div slot=\\\"content\\\">\\r\\n      <div fxLayout=\\\"row\\\" class=\\\"property\\\">\\r\\n        <div fxFlex=\\\"20\\\" class=\\\"label\\\">{{ 'VizBoxStarterKit.Status' | translate }}</div>\\r\\n        <div fxFlex class=\\\"value\\\">{{ pet.status }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div fxLayout=\\\"row\\\" class=\\\"property\\\">\\r\\n        <div fxFlex=\\\"20\\\" class=\\\"label\\\">{{ 'VizBoxStarterKit.Tags' | translate }}</div>\\r\\n        <div fxFlex class=\\\"value\\\">\\r\\n          <ng-container *ngFor=\\\"let tag of pet.tags; let isLast = last\\\">\\r\\n            {{ tag.name }}{{ isLast ? '' : ', ' }}\\r\\n          </ng-container>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div fxLayout=\\\"row\\\" class=\\\"property\\\">\\r\\n        <div fxFlex=\\\"20\\\" class=\\\"label\\\">{{ 'VizBoxStarterKit.Photos' | translate }}</div>\\r\\n        <div fxFlex class=\\\"value\\\">\\r\\n          <ng-container *ngFor=\\\"let photo of petPhotos\\\">\\r\\n            <img *ngIf=\\\"photo.visible; else loading\\\" [src]=\\\"photo.url\\\"  style=\\\"width: 200px;\\\"/>\\r\\n\\r\\n            <ng-template #loading>\\r\\n              <div class=\\\"photo-loading-indicator\\\">\\r\\n                {{ 'VizBoxStarterKit.Loading...' | translate }}\\r\\n              </div>\\r\\n            </ng-template>\\r\\n          </ng-container>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </avl-card>\\r\\n</div>\";","export default \"<avl-dialog class=\\\"petDialog\\\" id=\\\"dialog\\\"\\r\\n  [(open)]=\\\"open\\\"\\r\\n  (openChange)=\\\"dialogOpen($event)\\\">\\r\\n\\r\\n  <ng-template #content>\\r\\n  <avl-dialog-header *ngIf=\\\"edit; else newPetBlock\\\">\\r\\n    {{ 'VizBoxStarterKit.EditPet' | translate }}\\r\\n  </avl-dialog-header>\\r\\n  <ng-template #newPetBlock>\\r\\n    <avl-dialog-header>\\r\\n      {{ 'VizBoxStarterKit.NewPet' | translate }}\\r\\n    </avl-dialog-header>\\r\\n  </ng-template>\\r\\n  <avl-dialog-content>\\r\\n  <form #petForm=\\\"ngForm\\\">\\r\\n    <avl-textfield label=\\\"{{ 'VizBoxStarterKit.Name' | translate }}\\\"\\r\\n      [(ngModel)]=\\\"dialogPet.name\\\"\\r\\n      name=\\\"name\\\"\\r\\n      #name=\\\"ngModel\\\" required></avl-textfield>\\r\\n\\r\\n    <avl-dropdown label=\\\"Status\\\" [items]=\\\"statusOptions\\\"\\r\\n      [(ngModel)]=\\\"dialogPet.status\\\"\\r\\n      name=\\\"status\\\"\\r\\n      #status=\\\"ngModel\\\" required>\\r\\n    </avl-dropdown>\\r\\n\\r\\n    <avl-upload accept=\\\".png,.jpg\\\" [target]=\\\"uploadPath\\\"\\r\\n      (uploadComplete)=\\\"onFileUploadComplete($event)\\\"\\r\\n      (uploadStart)=\\\"onFileUploadStarted($event)\\\"\\r\\n      (menuItemClicked)=\\\"onFileMenuItemClicked($event)\\\"\\r\\n      [(ngModel)]=\\\"uploadedFiles\\\" name=\\\"upload\\\"\\r\\n    ></avl-upload>\\r\\n  </form>\\r\\n</avl-dialog-content>\\r\\n      <avl-dialog-footer>\\r\\n        <avl-button class=\\\"cancelButton\\\" (click)=\\\"closeDialog()\\\">\\r\\n          {{ 'VizBoxStarterKit.Cancel' | translate }}\\r\\n        </avl-button>\\r\\n    \\r\\n        <avl-button\\r\\n          id=\\\"save-button\\\"\\r\\n          (click)=\\\"savePet(petForm.form.valid)\\\"\\r\\n          [disabled]=\\\"filesUploading || !petForm.form.valid\\\">\\r\\n          {{ 'VizBoxStarterKit.Save' | translate }}\\r\\n        </avl-button>\\r\\n      </avl-dialog-footer>\\r\\n</ng-template>\\r\\n</avl-dialog>\\r\\n\";","export default \"<div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"start stretch\\\" fxFill>\\r\\n\\r\\n  <div class=\\\"action-bar\\\">\\r\\n    <h3 class=\\\"action-title\\\">{{ 'VizBoxStarterKit.PetsInStore' | translate }}</h3>\\r\\n    <div class=\\\"action-buttons\\\">\\r\\n      <avl-icon-button id=\\\"add-button\\\" (click)=\\\"addPet()\\\" icon=\\\"add\\\"></avl-icon-button>\\r\\n      <avl-icon-button id=\\\"edit-button\\\" (click)=\\\"editPet(selectedPet)\\\" [disabled]=\\\"!selectedPet\\\" icon=\\\"create\\\"></avl-icon-button>\\r\\n      <avl-icon-button id=\\\"delete-button\\\" (click)=\\\"deletePet()\\\" accent [disabled]=\\\"!selectedPet\\\" icon=\\\"delete\\\" class=\\\"action-secondary\\\"></avl-icon-button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <avl-datatable #petsTable single-select (selectedValueChange)=\\\"petSelectionChanged($event)\\\" [columnDefinitions]=\\\"columnDefinitions\\\"\\r\\n    [dataProvider]=\\\"petStoreProvider\\\" pagination page-size=\\\"6\\\" column-selector></avl-datatable>\\r\\n</div>\\r\\n\\r\\n<viz-pet-dialog [open]=\\\"addEditDialogOpen\\\" [edit]=\\\"isEditing\\\" [pet]=\\\"selectedPet\\\" (save)=\\\"savePet($event)\\\" (cancel)=\\\"addEditDialogOpen = false\\\"></viz-pet-dialog>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { IntroComponent } from './intro.component';\r\nimport { AuthGuard } from '../../core/guards/auth.guard';\r\n\r\nconst introRoutes: Routes = [{ path: '', component: IntroComponent, canActivate: [AuthGuard] }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(introRoutes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class IntroRoutingModule {}\r\n","export default \"avl-card{\\r\\n    display: block;\\r\\n}\\r\\n.card{\\r\\n    margin: 24px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9pbnRyby9pbnRyby5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksY0FBYztBQUNsQjtBQUNBO0lBQ0ksWUFBWTtBQUNoQiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaW50cm8vaW50cm8uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImF2bC1jYXJke1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLmNhcmR7XHJcbiAgICBtYXJnaW46IDI0cHg7XHJcbn0iXX0= */\";","import { Component } from '@angular/core';\r\n\r\nimport { Pet } from 'pet-store';\r\n\r\n@Component({\r\n  selector: 'viz-intro',\r\n  templateUrl: './intro.component.html',\r\n  styleUrls: ['./intro.component.css']\r\n})\r\nexport class IntroComponent {\r\n  selectedPet: Pet;\r\n}\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { IntroComponent } from './intro.component';\r\nimport { IntroRoutingModule } from './intro-routing.module';\r\nimport { PetsComponent } from './pets/pets.component';\r\nimport { PetDialogComponent } from './pet-dialog/pet-dialog.component';\r\nimport { PetDetailComponent } from './pet-detail/pet-detail.component';\r\nimport { UPLOAD_SERVICE, UploadService } from '@avl-controls/ng-binders';\r\n\r\n@NgModule({\r\n  imports: [SharedModule, FormsModule, IntroRoutingModule],\r\n  declarations: [IntroComponent, PetsComponent, PetDetailComponent, PetDialogComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n  exports: [IntroRoutingModule],\r\n  providers: [\r\n    { provide: UPLOAD_SERVICE, useClass: UploadService }\r\n  ]\r\n})\r\nexport class IntroModule {}\r\n","export default \".property {\\r\\n margin-top: 10px;\\r\\n}\\r\\n\\r\\n.property > .label {\\r\\n  color: #9C9C9C;\\r\\n}\\r\\n\\r\\n.photo-loading-indicator {\\r\\n  background-color: #CCCCCC;\\r\\n  width: 200px;\\r\\n  height: 200px;\\r\\n  line-height: 200px;\\r\\n  text-align: center;\\r\\n  margin-bottom: 4px;\\r\\n}\\r\\n\\r\\nh1{\\r\\n  font-size: 24px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9pbnRyby9wZXQtZGV0YWlsL3BldC1kZXRhaWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLGdCQUFnQjtBQUNqQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGVBQWU7QUFDakIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL2ludHJvL3BldC1kZXRhaWwvcGV0LWRldGFpbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb3BlcnR5IHtcclxuIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuXHJcbi5wcm9wZXJ0eSA+IC5sYWJlbCB7XHJcbiAgY29sb3I6ICM5QzlDOUM7XHJcbn1cclxuXHJcbi5waG90by1sb2FkaW5nLWluZGljYXRvciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcclxuICB3aWR0aDogMjAwcHg7XHJcbiAgaGVpZ2h0OiAyMDBweDtcclxuICBsaW5lLWhlaWdodDogMjAwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDRweDtcclxufVxyXG5cclxuaDF7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG59XHJcbiJdfQ== */\";","import { Component, Input, OnChanges, SimpleChanges, Inject } from '@angular/core';\r\n\r\nimport { Pet } from 'pet-store';\r\nimport { PetPhoto } from './pet-photo';\r\nimport { UPLOAD_SERVICE } from '@avl-controls/ng-binders';\r\nimport { AvlUploadService } from '@avl-controls/interfaces';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\nimport '@avl-controls/core/dist/avl-card/avl-card';\r\n\r\n@Component({\r\n  selector: 'viz-pet-detail',\r\n  templateUrl: './pet-detail.component.html',\r\n  styleUrls: ['./pet-detail.component.css']\r\n})\r\nexport class PetDetailComponent implements OnChanges {\r\n  @Input() pet: Pet;\r\n\r\n  petPhotos: PetPhoto[];\r\n\r\n  constructor(@Inject(UPLOAD_SERVICE) private uploadService: AvlUploadService, private sanitizer: DomSanitizer) {}\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const pet = changes.pet;\r\n    if (pet && pet.currentValue && pet.currentValue.photoUrls) {\r\n      this.preloadPhotos();\r\n    }\r\n  }\r\n\r\n  private preloadPhotos() {\r\n    this.petPhotos = this.pet.photoUrls.map((url, i) => {\r\n      const nonCachedPhotoUrl = `${url}?${this.pet.id}${i}`;\r\n      const img = new Image();\r\n      img.src = nonCachedPhotoUrl;\r\n\r\n      let petImage = new PetPhoto(nonCachedPhotoUrl);\r\n      img.onload = () => {\r\n        petImage.visible = true;\r\n        URL.revokeObjectURL(petImage.url);\r\n      };\r\n      img.onerror = () => {\r\n        this.uploadService.downloadFile(url)\r\n          .then((data) => {\r\n            const url = URL.createObjectURL(data);\r\n            img.src = url;\r\n            petImage.url = <string>this.sanitizer.bypassSecurityTrustUrl(url);\r\n          });\r\n      };\r\n      return petImage;\r\n    });\r\n  }\r\n}\r\n","export class PetPhoto {\r\n  visible = false;\r\n  constructor(public url: string) {}\r\n}\r\n","export default \"avl-textfield {\\r\\n  width: 80%;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9pbnRyby9wZXQtZGlhbG9nL3BldC1kaWFsb2cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQVU7QUFDWiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaW50cm8vcGV0LWRpYWxvZy9wZXQtZGlhbG9nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhdmwtdGV4dGZpZWxkIHtcclxuICB3aWR0aDogODAlO1xyXG59XHJcbiJdfQ== */\";","import { Component, Input, EventEmitter, Output, Inject } from '@angular/core';\r\nimport { Pet, BASE_PATH } from 'pet-store';\r\nimport { AvlFile } from '@avl-controls/interfaces';\r\nimport { AvlUploadMenuItemClickedEventDetail } from '@avl-controls/core/dist/avl-upload/avl-upload.api';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport '@avl-controls/core/dist/avl-textfield/avl-textfield';\r\nimport '@avl-controls/core/dist/avl-dropdown/avl-dropdown';\r\nimport '@avl-controls/core/dist/avl-upload/avl-upload';\r\nimport '@avl-controls/core/dist/avl-button/avl-button';\r\n\r\n@Component({\r\n  selector: 'viz-pet-dialog',\r\n  templateUrl: './pet-dialog.component.html',\r\n  styleUrls: ['./pet-dialog.component.css']\r\n})\r\nexport class PetDialogComponent {\r\n  @Input() open = false;\r\n  @Input() edit = false;\r\n  @Input() pet: Pet;\r\n\r\n  @Output() cancel = new EventEmitter<void>();\r\n  @Output() save = new EventEmitter<Pet>();\r\n\r\n  statusOptions = this.getStatusOptions();\r\n  dialogPet = this.getNewPet();\r\n\r\n  uploadPath: string;\r\n\r\n  uploadedFiles: AvlFile[] = [];\r\n\r\n  constructor(private translateService: TranslateService, @Inject(BASE_PATH) basePath: string) {\r\n    this.uploadPath = `${basePath}/v2/Upload`;\r\n  }\r\n\r\n  private numFilesUploading = 0;\r\n\r\n  dialogOpen(open) {\r\n    if (open) {\r\n      this.dialogPet = this.edit ? Object.assign({}, this.pet) : this.getNewPet();\r\n      if(this.edit) {\r\n        this.uploadedFiles = this.dialogPet.photoUrls.map( (url, index) => {\r\n          const name = url.split('_', 2)[1] || `file_${index}.jpg`;\r\n          return {\r\n            name: name,\r\n            status: 'complete',\r\n            downloadUrl: url\r\n          } as AvlFile;\r\n        });\r\n      }\r\n    } else {\r\n      this.closeDialog();\r\n      this.uploadedFiles = [];\r\n    }\r\n  }\r\n\r\n  public closeDialog() {\r\n    this.cancel.emit();\r\n    this.open = false;\r\n  }\r\n\r\n  public onFileUploadComplete(file: AvlFile) {\r\n    this.dialogPet.photoUrls.push(file.downloadUrl);\r\n    this.numFilesUploading -= 1;\r\n  }\r\n\r\n  public onFileMenuItemClicked(detail: AvlUploadMenuItemClickedEventDetail) {\r\n    const photoUrls = this.dialogPet.photoUrls;\r\n    if (detail.item.label === this.translateService.instant('VizBoxStarterKit.Remove')) {\r\n      const index = photoUrls.indexOf(detail.value.downloadUrl);\r\n      if (index !== -1) {\r\n        photoUrls.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  public onFileUploadStarted(file: AvlFile) {\r\n    this.numFilesUploading += 1;\r\n  }\r\n\r\n  public get filesUploading(): boolean {\r\n    return this.numFilesUploading > 0;\r\n  }\r\n\r\n  savePet(formValid: boolean) {\r\n    if (!formValid) {\r\n      return;\r\n    }\r\n    this.save.emit(this.dialogPet);\r\n    this.open = false;\r\n  }\r\n\r\n  private getNewPet(): Pet {\r\n    // Pet interface was generated from Swagger File\r\n    // -> create a Pet class otherwise.\r\n    return {\r\n      name: '',\r\n      status: this.statusOptions[0].value,\r\n      photoUrls: []\r\n    };\r\n  }\r\n\r\n  private getStatusOptions() {\r\n    // Status was generated from Swagger File as object/string\r\n    // -> create an enum otherwise.\r\n    return Object.keys(Pet.StatusEnum).map(key => {\r\n      const enumLabel = Pet.StatusEnum[key];\r\n      let label;\r\n      switch (enumLabel) {\r\n        case 'available':\r\n          label = this.translateService.instant('VizBoxStarterKit.Available');\r\n          break;\r\n        case 'pending':\r\n          label = this.translateService.instant('VizBoxStarterKit.Pending');\r\n          break;\r\n        case 'sold':\r\n          label = this.translateService.instant('VizBoxStarterKit.Sold');\r\n          break;\r\n      }\r\n      return { value: enumLabel, label: label };\r\n    });\r\n  }\r\n}\r\n","export default \".action-bar {\\r\\n  margin-top: 8px;\\r\\n  margin-bottom: 8px;\\r\\n  width: 100%;\\r\\n  vertical-align: bottom;\\r\\n}\\r\\n\\r\\n.action-title {\\r\\n  float: left;\\r\\n  text-align: left;\\r\\n  /* font-size: 24px; */\\r\\n  margin-top: 8px;\\r\\n  margin-bottom: 0px;\\r\\n}\\r\\n\\r\\n.action-buttons {\\r\\n  float: right;\\r\\n  text-align: left;\\r\\n  --avl-icon-button-color: var(--avl-secondary-color);\\r\\n}\\r\\n\\r\\n.action-secondary {\\r\\n  --avl-icon-button-color: var(--avl-secondary-color);\\r\\n}\\r\\n\\r\\navl-datatable {\\r\\n  height: 506px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9pbnRyby9wZXRzL3BldHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLG1EQUFtRDtBQUNyRDs7QUFFQTtFQUNFLG1EQUFtRDtBQUNyRDs7QUFFQTtFQUNFLGFBQWE7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaW50cm8vcGV0cy9wZXRzLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWN0aW9uLWJhciB7XHJcbiAgbWFyZ2luLXRvcDogOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDhweDtcclxuICB3aWR0aDogMTAwJTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG59XHJcblxyXG4uYWN0aW9uLXRpdGxlIHtcclxuICBmbG9hdDogbGVmdDtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIC8qIGZvbnQtc2l6ZTogMjRweDsgKi9cclxuICBtYXJnaW4tdG9wOiA4cHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xyXG59XHJcblxyXG4uYWN0aW9uLWJ1dHRvbnMge1xyXG4gIGZsb2F0OiByaWdodDtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIC0tYXZsLWljb24tYnV0dG9uLWNvbG9yOiB2YXIoLS1hdmwtc2Vjb25kYXJ5LWNvbG9yKTtcclxufVxyXG5cclxuLmFjdGlvbi1zZWNvbmRhcnkge1xyXG4gIC0tYXZsLWljb24tYnV0dG9uLWNvbG9yOiB2YXIoLS1hdmwtc2Vjb25kYXJ5LWNvbG9yKTtcclxufVxyXG5cclxuYXZsLWRhdGF0YWJsZSB7XHJcbiAgaGVpZ2h0OiA1MDZweDtcclxufVxyXG4iXX0= */\";","import { Component, ViewChild, ElementRef, EventEmitter, Output } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  LeafColumn,\r\n  ColumnType,\r\n  Column\r\n} from '@avl-controls/datatable/dist/avl-datatable/column-definitions';\r\nimport {\r\n  AvlDatatable\r\n} from '@avl-controls/datatable/dist/avl-datatable/avl-datatable.api';\r\nimport { DataProvider, DataProviderResponse, TableDataRequestParams } from '@avl-controls/interfaces';\r\n\r\nimport { PetApiService, Pet, InlineResponse200 } from 'pet-store';\r\nimport { SortOrder } from './sort-order';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport '@avl-controls/core/dist/avl-icon-button/avl-icon-button';\r\nimport '@avl-controls/datatable/dist/avl-datatable/avl-datatable';\r\n\r\n@Component({\r\n  selector: 'viz-pets',\r\n  templateUrl: './pets.component.html',\r\n  styleUrls: ['./pets.component.css']\r\n})\r\nexport class PetsComponent {\r\n  @Output() selectedPetChanged = new EventEmitter<Pet>();\r\n\r\n  @ViewChild('petsTable') petsTableElement: ElementRef;\r\n\r\n  columnDefinitions: Column[] = [\r\n    new LeafColumn(\r\n      this.translateService.instant('VizBoxStarterKit.ID'), 'id', ColumnType.Text,\r\n        false, false, 1, undefined, undefined, undefined, undefined, undefined, true\r\n    ),\r\n    new LeafColumn(this.translateService.instant('VizBoxStarterKit.Name'), 'name', ColumnType.Text, true, true, 3, '40px'),\r\n    new LeafColumn(this.translateService.instant('VizBoxStarterKit.Status'), 'status', ColumnType.Text, true, false, 3, '40px'),\r\n    new LeafColumn(\r\n      this.translateService.instant('VizBoxStarterKit.Category'),\r\n      'category.name', ColumnType.Text, true, false, 3, '40px', undefined, undefined, undefined, undefined, true\r\n    )\r\n  ];\r\n  selectedPet: Pet;\r\n  isEditing = false;\r\n  addEditDialogOpen = false;\r\n\r\n  constructor(private petService: PetApiService, private translateService: TranslateService) {}\r\n\r\n  petStoreProvider: DataProvider = (params: TableDataRequestParams) => this.getPetStoreProvider(params);\r\n\r\n  petSelectionChanged(pet: Pet) {\r\n    this.selectedPetChanged.emit(pet);\r\n    this.selectedPet = pet;\r\n  }\r\n\r\n  addPet() {\r\n    this.addEditDialogOpen = true;\r\n    this.isEditing = false;\r\n  }\r\n\r\n  editPet(pet: Pet) {\r\n    this.selectedPet = pet;\r\n    this.isEditing = true;\r\n    this.addEditDialogOpen = true;\r\n  }\r\n\r\n  deletePet() {\r\n    const petsTable = this.petsTableElement.nativeElement as AvlDatatable;\r\n    this.petService.deletePet(this.selectedPet.id).subscribe(res => petsTable.clearCache());\r\n\r\n    delete this.selectedPet;\r\n    this.selectedPetChanged.emit(undefined);\r\n  }\r\n\r\n  savePet(pet: Pet) {\r\n    this.addEditDialogOpen = false;\r\n    this.selectedPetChanged.emit(pet);\r\n\r\n    const petsTable = this.petsTableElement.nativeElement as AvlDatatable;\r\n\r\n    if (this.isEditing) {\r\n      this.petService.updatePet(pet).subscribe(res => petsTable.clearCache());\r\n    } else {\r\n      this.petService.addPet(pet).subscribe(res => petsTable.clearCache());\r\n    }\r\n  }\r\n\r\n  private getPetStoreProvider(params: TableDataRequestParams) {\r\n    return new Promise<DataProviderResponse>((resolve, reject) => {\r\n      let observable: Observable<InlineResponse200>;\r\n\r\n      const sorting = params.sortOrders.find(f => f.path === 'name' || f.path === 'status');\r\n      let sortBy, sortOrder;\r\n      if (sorting) {\r\n        sortBy = sorting.path;\r\n        sortOrder = sorting.ascending ? SortOrder.Ascending : SortOrder.Descending;\r\n      }\r\n\r\n      const nameFilter = params.filters.get('name');\r\n      observable = this.petService.getPets(\r\n        nameFilter,\r\n        undefined,\r\n        undefined,\r\n        params.page * params.pageSize,\r\n        params.pageSize,\r\n        sortBy,\r\n        sortOrder\r\n      );\r\n\r\n      observable.subscribe(\r\n        response => {\r\n          setTimeout(() => {\r\n            resolve({ rows: response.result, totalRows: response.size });\r\n          }, 0);\r\n        },\r\n        error => this.handleError(error)\r\n      );\r\n    });\r\n  }\r\n\r\n  private handleError(error) {\r\n    const petsTable = this.petsTableElement.nativeElement as AvlDatatable;\r\n    petsTable.data = [{ name: this.translateService.instant('VizBoxStarterKit.ConnectionFailedToPetstoreServer') }];\r\n  }\r\n}\r\n","export enum SortOrder {\r\n  Ascending = 'asc',\r\n  Descending = 'desc'\r\n}\r\n","export * from './petApi.service';\r\nimport { PetApiService } from './petApi.service';\r\nexport const APIS = [PetApiService];\r\n","export * from './api/api';\r\nexport * from './model/models';\r\nexport * from './variables';\r\nexport * from './configuration';\r\nexport * from './api.module';\r\n","export * from './category';\r\nexport * from './inlineResponse200';\r\nexport * from './pet';\r\nexport * from './tag';\r\n","/**\r\n * Swagger Petstore\r\n * Swagger Petstore (ASP.NET Core 2.0)\r\n *\r\n * OpenAPI spec version: 1.0.0\r\n * Contact: apiteam@swagger.io\r\n *\r\n * NOTE: This class is auto generated by the swagger code generator program.\r\n * https://github.com/swagger-api/swagger-codegen.git\r\n * Do not edit the class manually.\r\n */\r\nimport { Category } from './category';\r\nimport { Tag } from './tag';\r\nimport { timestamp } from 'rxjs/operators';\r\n\r\n/**\r\n *\r\n */\r\nexport interface Pet {\r\n  /**\r\n   * Gets or Sets Id\r\n   */\r\n  id?: number;\r\n  /**\r\n   * Gets or Sets Category\r\n   */\r\n  category?: Category;\r\n  /**\r\n   * Gets or Sets Name\r\n   */\r\n  name: string;\r\n  /**\r\n   * Gets or Sets PhotoUrls\r\n   */\r\n  photoUrls: Array<string>;\r\n  /**\r\n   * Gets or Sets Tags\r\n   */\r\n  tags?: Array<Tag>;\r\n  /**\r\n   * pet status in the store\r\n   */\r\n  status?: Pet.StatusEnum;\r\n}\r\nexport namespace Pet {\r\n  export type StatusEnum = 'available' | 'pending' | 'sold';\r\n  export const StatusEnum = {\r\n    Available: 'available' as StatusEnum,\r\n    Pending: 'pending' as StatusEnum,\r\n    Sold: 'sold' as StatusEnum\r\n  };\r\n}\r\n"]}